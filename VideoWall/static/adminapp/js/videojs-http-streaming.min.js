<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for @videojs/http-streaming"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2021-02-02T05:42:44.763Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - @videojs/http-streaming</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"@videojs/http-streaming","packageVersion":"2.5.0","availableVersions":["0.1.0","0.2.0","0.2.1","0.3.0","0.3.1","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.6.1","0.7.0","0.7.1","0.7.2","0.8.0","0.9.0","1.0.0","1.0.1","1.0.2","1.1.0","1.2.0","1.2.1","1.2.2","1.2.3","1.2.4","1.2.5","1.2.6","1.3.0","1.3.1","1.4.0","1.4.1","1.4.2","1.5.0","1.5.1","1.6.0","1.7.0","1.8.0","1.9.0","1.9.1","1.9.2","1.9.3","1.10.0","1.10.1","1.10.2","1.10.3-alpha.0","1.10.3","1.10.4","1.10.5-0","1.10.5-1","1.10.5","1.10.6","1.11.0-0","1.11.0-alpha.0","1.11.0-alpha.1","1.11.0","1.11.1","1.11.2","1.11.3","1.12.0","1.12.1","1.12.2","1.12.3","1.13.0","1.13.1","1.13.2","1.13.3","1.13.4","2.0.0-rc.0","2.0.0-rc.1","2.0.0-rc.2","2.0.0","2.1.0","2.2.0","2.2.1","2.2.2","2.2.3","2.2.4","2.3.0","2.3.1","2.3.2","2.4.0","2.4.1","2.4.2","2.5.0"],"filename":"/dist/videojs-http-streaming.min.js","target":{"path":"/dist/videojs-http-streaming.min.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-ttUu2qFuaQwKqsd3r5ZqArtphminz5jeN9DRVhHJ+jSjqg9uqkzIhcuYf5Uko/ck","language":"JavaScript","size":289922,"uri":null,"highlights":["<span class=\"code-comment\">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>\n","!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> exports&amp;&amp;<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">module</span>?t(exports,<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"global/document\"</span>),<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"global/window\"</span>),<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"video.js\"</span>),<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"xmldom\"</span>)):<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> define&amp;&amp;define.amd?define([<span class=\"code-string\">\"exports\"</span>,<span class=\"code-string\">\"global/document\"</span>,<span class=\"code-string\">\"global/window\"</span>,<span class=\"code-string\">\"video.js\"</span>,<span class=\"code-string\">\"xmldom\"</span>],t):t((e=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> globalThis?globalThis:e||self).httpStreaming={},e.document,e.window,e.videojs,e.window)}(<span class=\"code-keyword\">this</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-string\">\"use strict\"</span>;<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">a</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-string\">\"default\"</span><span class=\"code-keyword\">in</span> e?e:{<span class=\"code-attr\">default</span>:e}}<span class=\"code-keyword\">var</span> s=a(t),o=a(i),u=a(n),d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span> e},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.prototype=<span class=\"code-built_in\">Object</span>.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">h</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e(i={<span class=\"code-attr\">path</span>:t,<span class=\"code-attr\">exports</span>:{},<span class=\"code-attr\">require</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\"</span>)}(<span class=\"code-literal\">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class=\"code-keyword\">var</span> c=h((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s;i=<span class=\"code-regexp\">/^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#.*)?$/</span>,n=<span class=\"code-regexp\">/^([^\\/?#]*)(.*)$/</span>,r=<span class=\"code-regexp\">/(?:\\/|^)\\.(?=\\/)/g</span>,a=<span class=\"code-regexp\">/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g</span>,s={<span class=\"code-attr\">buildAbsoluteURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class=\"code-keyword\">if</span>(!i.alwaysNormalize)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> r=s.parseURL(e);<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class=\"code-keyword\">var</span> a=s.parseURL(t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse relative URL.\"</span>);<span class=\"code-keyword\">if</span>(a.scheme)<span class=\"code-keyword\">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class=\"code-keyword\">var</span> o=s.parseURL(e);<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class=\"code-string\">\"/\"</span>!==o.path[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">var</span> u=n.exec(o.path);o.netLoc=u[<span class=\"code-number\">1</span>],o.path=u[<span class=\"code-number\">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class=\"code-string\">\"/\"</span>);<span class=\"code-keyword\">var</span> d={<span class=\"code-attr\">scheme</span>:o.scheme,<span class=\"code-attr\">netLoc</span>:a.netLoc,<span class=\"code-attr\">path</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">params</span>:a.params,<span class=\"code-attr\">query</span>:a.query,<span class=\"code-attr\">fragment</span>:a.fragment};<span class=\"code-keyword\">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class=\"code-string\">\"/\"</span>!==a.path[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">if</span>(a.path){<span class=\"code-keyword\">var</span> l=o.path,h=l.substring(<span class=\"code-number\">0</span>,l.lastIndexOf(<span class=\"code-string\">\"/\"</span>)+<span class=\"code-number\">1</span>)+a.path;d.path=s.normalizePath(h)}<span class=\"code-keyword\">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class=\"code-attr\">parseURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.exec(e);<span class=\"code-keyword\">return</span> t?{<span class=\"code-attr\">scheme</span>:t[<span class=\"code-number\">1</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">netLoc</span>:t[<span class=\"code-number\">2</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">path</span>:t[<span class=\"code-number\">3</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">params</span>:t[<span class=\"code-number\">4</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">query</span>:t[<span class=\"code-number\">5</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">fragment</span>:t[<span class=\"code-number\">6</span>]||<span class=\"code-string\">\"\"</span>}:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">normalizePath</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(e=e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>).replace(r,<span class=\"code-string\">\"\"</span>);e.length!==(e=e.replace(a,<span class=\"code-string\">\"\"</span>)).length;);<span class=\"code-keyword\">return</span> e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>)},<span class=\"code-attr\">buildURLFromParts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^[a-z]+:/i</span>.test(t)?t:(<span class=\"code-regexp\">/\\/\\//i</span>.test(e)||(e=c.buildAbsoluteURL(o.default.location&amp;&amp;o.default.location.href||<span class=\"code-string\">\"\"</span>,e)),c.buildAbsoluteURL(e,t))},m=f,p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;i&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t},g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e]=<span class=\"code-keyword\">this</span>.listeners[e].slice(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},t.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},e}(),y=h((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.exports=t=<span class=\"code-built_in\">Object</span>.assign||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++){<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>[t];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-built_in\">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class=\"code-keyword\">return</span> e},t.apply(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>)}e.exports=t}));<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">v</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=(t=e,o.default.atob?o.default.atob(t):Buffer.from(t,<span class=\"code-string\">\"base64\"</span>).toString(<span class=\"code-string\">\"binary\"</span>)),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.length),r=<span class=\"code-number\">0</span>;r&lt;i.length;r++)n[r]=i.charCodeAt(r);<span class=\"code-keyword\">return</span> n}\n","<span class=\"code-comment\">/*! @name m3u8-parser @version 4.5.2 @license Apache-2.0 */</span><span class=\"code-keyword\">var</span> _=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).buffer=<span class=\"code-string\">\"\"</span>,t}<span class=\"code-keyword\">return</span> l(t,e),t.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.buffer+=e,t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>);t&gt;<span class=\"code-number\">-1</span>;t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>))<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.buffer.substring(<span class=\"code-number\">0</span>,t)),<span class=\"code-keyword\">this</span>.buffer=<span class=\"code-keyword\">this</span>.buffer.substring(t+<span class=\"code-number\">1</span>)},t}(g),b=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=e.split(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">'(?:^|,)((?:[^=]*)=(?:\"[^\"]*\"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class=\"code-string\">\"\"</span>!==i[r]&amp;&amp;((t=<span class=\"code-regexp\">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class=\"code-number\">1</span>))[<span class=\"code-number\">0</span>]=t[<span class=\"code-number\">0</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^['\"](.*)['\"]$/g</span>,<span class=\"code-string\">\"$1\"</span>),n[t[<span class=\"code-number\">0</span>]]=t[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span> n},T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).customParsers=[],t.tagMappers=[],t}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>;<span class=\"code-number\">0</span>!==(e=e.trim()).length&amp;&amp;(<span class=\"code-string\">\"#\"</span>===e[<span class=\"code-number\">0</span>]?<span class=\"code-keyword\">this</span>.tagMappers.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i(e);<span class=\"code-keyword\">return</span> n===e?t:t.concat([n])}),[e]).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.customParsers.length;r++)<span class=\"code-keyword\">if</span>(n.customParsers[r].call(n,e))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.indexOf(<span class=\"code-string\">\"#EXT\"</span>))<span class=\"code-keyword\">if</span>(e=e.replace(<span class=\"code-string\">\"\\r\"</span>,<span class=\"code-string\">\"\"</span>),t=<span class=\"code-regexp\">/^#EXTM3U/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"m3u\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXTINF:?([0-9\\.]*)?,?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"inf\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseFloat</span>(t[<span class=\"code-number\">1</span>])),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.title=t[<span class=\"code-number\">2</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"targetduration\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"totalduration\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"version\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.version=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"playlist-type\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.playlistType=t[<span class=\"code-number\">1</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"byterange\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.length=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.offset=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">2</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"allow-cache\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.allowed=!<span class=\"code-regexp\">/NO/</span>.test(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"map\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">var</span> a=b(t[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">if</span>(a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE){<span class=\"code-keyword\">var</span> s=a.BYTERANGE.split(<span class=\"code-string\">\"@\"</span>),o=s[<span class=\"code-number\">0</span>],u=s[<span class=\"code-number\">1</span>];i.byterange={},o&amp;&amp;(i.byterange.length=<span class=\"code-built_in\">parseInt</span>(o,<span class=\"code-number\">10</span>)),u&amp;&amp;(i.byterange.offset=<span class=\"code-built_in\">parseInt</span>(u,<span class=\"code-number\">10</span>))}}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"stream-inf\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">if</span>(i.attributes=b(t[<span class=\"code-number\">1</span>]),i.attributes.RESOLUTION){<span class=\"code-keyword\">var</span> d=i.attributes.RESOLUTION.split(<span class=\"code-string\">\"x\"</span>),l={};d[<span class=\"code-number\">0</span>]&amp;&amp;(l.width=<span class=\"code-built_in\">parseInt</span>(d[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>)),d[<span class=\"code-number\">1</span>]&amp;&amp;(l.height=<span class=\"code-built_in\">parseInt</span>(d[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),i.attributes.RESOLUTION=l}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class=\"code-built_in\">parseInt</span>(i.attributes.BANDWIDTH,<span class=\"code-number\">10</span>)),i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]&amp;&amp;(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>],<span class=\"code-number\">10</span>))}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=b(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"endlist\"</span>});<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"program-date-time\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.dateTimeString=t[<span class=\"code-number\">1</span>],i.dateTimeObject=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"key\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=b(t[<span class=\"code-number\">1</span>]),i.attributes.IV&amp;&amp;(<span class=\"code-string\">\"0x\"</span>===i.attributes.IV.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class=\"code-number\">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class=\"code-regexp\">/.{8}/g</span>),i.attributes.IV[<span class=\"code-number\">0</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">0</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">1</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">1</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">2</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">2</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">3</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">3</span>],<span class=\"code-number\">16</span>),i.attributes.IV=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.attributes.IV))),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"start\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=b(t[<span class=\"code-number\">1</span>]),i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]),i.attributes.PRECISE=<span class=\"code-regexp\">/YES/</span>.test(i.attributes.PRECISE)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out-cont\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-in\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">data</span>:e.slice(<span class=\"code-number\">4</span>)})}}}<span class=\"code-keyword\">else</span> n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"comment\"</span>,<span class=\"code-attr\">text</span>:e.slice(<span class=\"code-number\">1</span>)})})):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"uri\"</span>,<span class=\"code-attr\">uri</span>:e}))},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> r&amp;&amp;(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}),<span class=\"code-keyword\">this</span>.customParsers.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(i.exec(e))<span class=\"code-keyword\">return</span> t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"custom\"</span>,<span class=\"code-attr\">data</span>:r(e),<span class=\"code-attr\">customType</span>:n,<span class=\"code-attr\">segment</span>:a}),!<span class=\"code-number\">0</span>}))},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.expression,i=e.map;<span class=\"code-keyword\">this</span>.tagMappers.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.test(e)?i(e):e}))},t}(g),S=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).lineStream=<span class=\"code-keyword\">new</span> _,t.parseStream=<span class=\"code-keyword\">new</span> T,t.lineStream.pipe(t.parseStream);<span class=\"code-keyword\">var</span> i,n,r=d(t),a=[],s={},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},u={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},l=<span class=\"code-number\">0</span>;t.manifest={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[]};<span class=\"code-keyword\">var</span> h=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t.parseStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,d;({<span class=\"code-attr\">tag</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{({<span class=\"code-string\">\"allow-cache\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.allowCache=e.allowed,<span class=\"code-string\">\"allowed\"</span><span class=\"code-keyword\">in</span> e||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting allowCache to YES\"</span>}),<span class=\"code-keyword\">this</span>.manifest.allowCache=!<span class=\"code-number\">0</span>)},<span class=\"code-attr\">byterange</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-string\">\"length\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(s.byterange=t,t.length=e.length,<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e||(e.offset=h)),<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(s.byterange=t,t.offset=e.offset),h=t.offset+t.length},<span class=\"code-attr\">endlist</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.endList=!<span class=\"code-number\">0</span>},<span class=\"code-attr\">inf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"mediaSequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.mediaSequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting media sequence to zero\"</span>})),<span class=\"code-string\">\"discontinuitySequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting discontinuity sequence to zero\"</span>})),e.duration&gt;<span class=\"code-number\">0</span>&amp;&amp;(s.duration=e.duration),<span class=\"code-number\">0</span>===e.duration&amp;&amp;(s.duration=<span class=\"code-number\">.01</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"updating zero segment duration to a small value\"</span>})),<span class=\"code-keyword\">this</span>.manifest.segments=a},<span class=\"code-attr\">key</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(e.attributes)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"NONE\"</span>!==e.attributes.METHOD)<span class=\"code-keyword\">if</span>(e.attributes.URI){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>===e.attributes.KEYFORMAT)<span class=\"code-keyword\">return</span><span class=\"code-number\">-1</span>===[<span class=\"code-string\">\"SAMPLE-AES\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CTR\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>].indexOf(e.attributes.METHOD)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key method provided for Widevine\"</span>}):(<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>===e.attributes.METHOD&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead\"</span>}),<span class=\"code-string\">\"data:text/plain;base64,\"</span>!==e.attributes.URI.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">23</span>)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key URI provided for Widevine\"</span>}):e.attributes.KEYID&amp;&amp;<span class=\"code-string\">\"0x\"</span>===e.attributes.KEYID.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>)?<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.manifest.contentProtection={<span class=\"code-string\">\"com.widevine.alpha\"</span>:{<span class=\"code-attr\">attributes</span>:{<span class=\"code-attr\">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class=\"code-attr\">keyId</span>:e.attributes.KEYID.substring(<span class=\"code-number\">2</span>)},<span class=\"code-attr\">pssh</span>:v(e.attributes.URI.split(<span class=\"code-string\">\",\"</span>)[<span class=\"code-number\">1</span>])}}):<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key ID provided for Widevine\"</span>}));e.attributes.METHOD||<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting key method to AES-128\"</span>}),n={<span class=\"code-attr\">method</span>:e.attributes.METHOD||<span class=\"code-string\">\"AES-128\"</span>,<span class=\"code-attr\">uri</span>:e.attributes.URI},<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without URI\"</span>});<span class=\"code-keyword\">else</span> n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without attribute list\"</span>})},<span class=\"code-string\">\"media-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?<span class=\"code-keyword\">this</span>.manifest.mediaSequence=e.number:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid media sequence: \"</span>+e.number})},<span class=\"code-string\">\"discontinuity-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=e.number,l=e.number):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid discontinuity sequence: \"</span>+e.number})},<span class=\"code-string\">\"playlist-type\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class=\"code-keyword\">this</span>.manifest.playlistType=e.playlistType:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring unknown playlist type: \"</span>+e.playlist})},<span class=\"code-attr\">map</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange)},<span class=\"code-string\">\"stream-inf\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.playlists=a,<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),y(s.attributes,e.attributes)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring empty stream-inf attributes\"</span>})},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||u,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]&amp;&amp;e.attributes.NAME){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]||{},t=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]],(d={<span class=\"code-attr\">default</span>:<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.DEFAULT)}).default?d.autoselect=!<span class=\"code-number\">0</span>:d.autoselect=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(d.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(d.uri=e.attributes.URI),e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]&amp;&amp;(d.instreamId=e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(d.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(d.forced=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=d}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring incomplete or missing media group\"</span>})},<span class=\"code-attr\">discontinuity</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{l+=<span class=\"code-number\">1</span>,s.discontinuity=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.manifest.discontinuityStarts.push(a.length)},<span class=\"code-string\">\"program-date-time\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.manifest.dateTimeString&amp;&amp;(<span class=\"code-keyword\">this</span>.manifest.dateTimeString=e.dateTimeString,<span class=\"code-keyword\">this</span>.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},<span class=\"code-attr\">targetduration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{!<span class=\"code-built_in\">isFinite</span>(e.duration)||e.duration&lt;<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid target duration: \"</span>+e.duration}):<span class=\"code-keyword\">this</span>.manifest.targetDuration=e.duration},<span class=\"code-attr\">totalduration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{!<span class=\"code-built_in\">isFinite</span>(e.duration)||e.duration&lt;<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid total duration: \"</span>+e.duration}):<span class=\"code-keyword\">this</span>.manifest.totalDuration=e.duration},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.attributes&amp;&amp;!<span class=\"code-built_in\">isNaN</span>(e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>])?<span class=\"code-keyword\">this</span>.manifest.start={<span class=\"code-attr\">timeOffset</span>:e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>],<span class=\"code-attr\">precise</span>:e.attributes.PRECISE}:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring start declaration without appropriate attribute list\"</span>})},<span class=\"code-string\">\"cue-out\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueOut=e.data},<span class=\"code-string\">\"cue-out-cont\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueOutCont=e.data},<span class=\"code-string\">\"cue-in\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.cueIn=e.data}}[e.tagType]||o).call(r)},<span class=\"code-attr\">uri</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s.uri=e.uri,a.push(s),<span class=\"code-keyword\">this</span>.manifest.targetDuration&amp;&amp;!(<span class=\"code-string\">\"duration\"</span><span class=\"code-keyword\">in</span> s)&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting segment duration to the target duration\"</span>}),s.duration=<span class=\"code-keyword\">this</span>.manifest.targetDuration),n&amp;&amp;(s.key=n),s.timeline=l,i&amp;&amp;(s.map=i),s={}},<span class=\"code-attr\">comment</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">custom</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(<span class=\"code-keyword\">this</span>.manifest.custom=<span class=\"code-keyword\">this</span>.manifest.custom||{},<span class=\"code-keyword\">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(e)},i.end=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(<span class=\"code-string\">\"\\n\"</span>)},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addTagMapper(e)},t}(g),I=u.default.log,w=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"-\"</span>+t},L=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.manifestString,i=e.customTagParsers,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?[]:i,r=e.customTagMappers,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?[]:r,s=<span class=\"code-keyword\">new</span> S;<span class=\"code-keyword\">return</span> n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> s.addParser(e)})),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> s.addTagMapper(e)})),s.push(t),s.end(),s.manifest},k=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> e.mediaGroups[i])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> e.mediaGroups[i][n]){<span class=\"code-keyword\">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}}))},A=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.uri,n=e.id;t.id=n,i&amp;&amp;(t.uri=i),t.attributes=t.attributes||{}},E=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.uri=t;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.playlists.length;i++)<span class=\"code-keyword\">if</span>(!e.playlists[i].uri){<span class=\"code-keyword\">var</span> n=<span class=\"code-string\">\"placeholder-uri-\"</span>+i;e.playlists[i].uri=n}k(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(t.playlists&amp;&amp;t.playlists.length&amp;&amp;!t.playlists[<span class=\"code-number\">0</span>].uri){<span class=\"code-keyword\">var</span> a=<span class=\"code-string\">\"placeholder-uri-\"</span>+i+<span class=\"code-string\">\"-\"</span>+n+<span class=\"code-string\">\"-\"</span>+r,s=w(<span class=\"code-number\">0</span>,a);t.playlists[<span class=\"code-number\">0</span>].uri=a,t.playlists[<span class=\"code-number\">0</span>].id=s,e.playlists[s]=t.playlists[<span class=\"code-number\">0</span>],e.playlists[a]=t.playlists[<span class=\"code-number\">0</span>]}})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=e.playlists.length;t--;){<span class=\"code-keyword\">var</span> i=e.playlists[t];A({<span class=\"code-attr\">playlist</span>:i,<span class=\"code-attr\">id</span>:w(t,i.uri)}),i.resolvedUri=m(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||I.warn(<span class=\"code-string\">\"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.\"</span>)}}(e),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{k(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=m(e.uri,t.uri))}))}(e)},P=u.default.mergeOptions,C=u.default.EventTarget,U=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.resolvedUri||(e.resolvedUri=m(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=m(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=m(t,e.map.uri))},O=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=P(e,{}),n=i.playlists[t.id];<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(n.segments&amp;&amp;t.segments&amp;&amp;n.segments.length===t.segments.length&amp;&amp;n.endList===t.endList&amp;&amp;n.mediaSequence===t.mediaSequence)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> r=P(n,t);n.segments&amp;&amp;(r.segments=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.slice();i=i||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.min(e.length,t.length+i),a=i;a&lt;r;a++)n[a-i]=P(e[a],n[a-i]);<span class=\"code-keyword\">return</span> n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{U(e,r.resolvedUri)}));<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;i.playlists.length;a++)i.playlists[a].id===t.id&amp;&amp;(i.playlists[a]=r);<span class=\"code-keyword\">return</span> i.playlists[t.id]=r,i.playlists[t.uri]=r,i},D=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.segments[e.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">return</span> t&amp;&amp;i&amp;&amp;i.duration?<span class=\"code-number\">1e3</span>*i.duration:<span class=\"code-number\">500</span>*(e.targetDuration||<span class=\"code-number\">10</span>)},x=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n={}),r=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or object is required\"</span>);<span class=\"code-keyword\">var</span> a=n,s=a.withCredentials,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==s&amp;&amp;s,u=a.handleManifestRedirects,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==u&amp;&amp;u;r.src=t,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=d;<span class=\"code-keyword\">var</span> l=i.options_;<span class=\"code-keyword\">return</span> r.customTagParsers=l&amp;&amp;l.customTagParsers||[],r.customTagMappers=l&amp;&amp;l.customTagMappers||[],r.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,r.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"HAVE_METADATA\"</span>===r.state&amp;&amp;(r.state=<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>,r.request=r.vhs_.xhr({<span class=\"code-attr\">uri</span>:m(r.master.uri,r.media().uri),<span class=\"code-attr\">withCredentials</span>:r.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(r.request)<span class=\"code-keyword\">return</span> e?r.playlistRequestError(r.request,r.media(),<span class=\"code-string\">\"HAVE_METADATA\"</span>):<span class=\"code-keyword\">void</span> r.haveMetadata({<span class=\"code-attr\">playlistString</span>:r.request.responseText,<span class=\"code-attr\">url</span>:r.media().uri,<span class=\"code-attr\">id</span>:r.media().id})})))})),r}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.playlistRequestError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.uri,r=t.id;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,i&amp;&amp;(<span class=\"code-keyword\">this</span>.state=i),<span class=\"code-keyword\">this</span>.error={<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.master.playlists[r],<span class=\"code-attr\">status</span>:e.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+n+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:e.responseText,<span class=\"code-attr\">code</span>:e.status&gt;=<span class=\"code-number\">500</span>?<span class=\"code-number\">4</span>:<span class=\"code-number\">2</span>},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)},i.haveMetadata=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.playlistString,n=e.playlistObject,r=e.url,a=e.id;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>;<span class=\"code-keyword\">var</span> s=n||L({<span class=\"code-attr\">manifestString</span>:i,<span class=\"code-attr\">customTagParsers</span>:<span class=\"code-keyword\">this</span>.customTagParsers,<span class=\"code-attr\">customTagMappers</span>:<span class=\"code-keyword\">this</span>.customTagMappers});s.lastRequest=<span class=\"code-built_in\">Date</span>.now(),A({<span class=\"code-attr\">playlist</span>:s,<span class=\"code-attr\">uri</span>:r,<span class=\"code-attr\">id</span>:a});<span class=\"code-keyword\">var</span> u=O(<span class=\"code-keyword\">this</span>.master,s);<span class=\"code-keyword\">this</span>.targetDuration=s.targetDuration,u?(<span class=\"code-keyword\">this</span>.master=u,<span class=\"code-keyword\">this</span>.media_=<span class=\"code-keyword\">this</span>.master.playlists[a]):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>),<span class=\"code-keyword\">this</span>.media().endList||(o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>)}),D(<span class=\"code-keyword\">this</span>.media(),!!u))),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.stopRequest(),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout),<span class=\"code-keyword\">this</span>.off()},i.stopRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.master.playlists[e]}<span class=\"code-keyword\">if</span>(o.default.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout),t){<span class=\"code-keyword\">var</span> n=e.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>||<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.finalRenditionTimeout=o.default.setTimeout(<span class=\"code-keyword\">this</span>.media.bind(<span class=\"code-keyword\">this</span>,e,!<span class=\"code-number\">1</span>),n)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.state,a=!<span class=\"code-keyword\">this</span>.media_||e.id!==<span class=\"code-keyword\">this</span>.media_.id;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.master.playlists[e.id].endList||e.endList&amp;&amp;e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request&amp;&amp;(<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(a&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-string\">\"HAVE_MASTER\"</span>===r?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>,<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">if</span>(e.resolvedUri===<span class=\"code-keyword\">this</span>.request.url)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:e.resolvedUri,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,n</span>)</span>{<span class=\"code-keyword\">if</span>(i.request){<span class=\"code-keyword\">if</span>(e.lastRequest=<span class=\"code-built_in\">Date</span>.now(),e.resolvedUri=p(i.handleManifestRedirects,e.resolvedUri,n),t)<span class=\"code-keyword\">return</span> i.playlistRequestError(i.request,e,r);i.haveMetadata({<span class=\"code-attr\">playlistString</span>:n.responseText,<span class=\"code-attr\">url</span>:e.uri,<span class=\"code-attr\">id</span>:e.id}),<span class=\"code-string\">\"HAVE_MASTER\"</span>===r?i.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):i.trigger(<span class=\"code-string\">\"mediachange\"</span>)}}))}}},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>),<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>===<span class=\"code-keyword\">this</span>.state?<span class=\"code-keyword\">this</span>.media_?<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>:<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>:<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?i.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.load()}),n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?i&amp;&amp;!i.endList?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()},i.start=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.src)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.src.uri||(<span class=\"code-keyword\">this</span>.src.uri=o.default.location.href),<span class=\"code-keyword\">this</span>.src.resolvedUri=<span class=\"code-keyword\">this</span>.src.uri,<span class=\"code-keyword\">void</span> setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.setupInitialPlaylist(e.src)}),<span class=\"code-number\">0</span>);<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.src,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request){<span class=\"code-keyword\">if</span>(e.request=<span class=\"code-literal\">null</span>,t)<span class=\"code-keyword\">return</span> e.error={<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+e.src+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:i.responseText,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},<span class=\"code-string\">\"HAVE_NOTHING\"</span>===e.state&amp;&amp;(e.started=!<span class=\"code-number\">1</span>),e.trigger(<span class=\"code-string\">\"error\"</span>);e.src=p(e.handleManifestRedirects,e.src,i);<span class=\"code-keyword\">var</span> n=L({<span class=\"code-attr\">manifestString</span>:i.responseText,<span class=\"code-attr\">customTagParsers</span>:e.customTagParsers,<span class=\"code-attr\">customTagMappers</span>:e.customTagMappers});e.setupInitialPlaylist(n)}}))},i.srcUri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.src?<span class=\"code-keyword\">this</span>.src:<span class=\"code-keyword\">this</span>.src.uri},i.setupInitialPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,e.playlists)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.master=e,E(<span class=\"code-keyword\">this</span>.master,<span class=\"code-keyword\">this</span>.srcUri()),e.playlists.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.segments&amp;&amp;e.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{U(t,e.resolvedUri)}))})),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.request||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.master.playlists[<span class=\"code-number\">0</span>]));<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.srcUri()||o.default.location.href;<span class=\"code-keyword\">this</span>.master=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=w(<span class=\"code-number\">0</span>,t),n={<span class=\"code-attr\">mediaGroups</span>:{<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},<span class=\"code-attr\">uri</span>:o.default.location.href,<span class=\"code-attr\">resolvedUri</span>:o.default.location.href,<span class=\"code-attr\">playlists</span>:[{<span class=\"code-attr\">uri</span>:t,<span class=\"code-attr\">id</span>:i,<span class=\"code-attr\">resolvedUri</span>:t,<span class=\"code-attr\">attributes</span>:{}}]};<span class=\"code-keyword\">return</span> n.playlists[i]=n.playlists[<span class=\"code-number\">0</span>],n.playlists[t]=n.playlists[<span class=\"code-number\">0</span>],n}(<span class=\"code-number\">0</span>,t),<span class=\"code-keyword\">this</span>.haveMetadata({<span class=\"code-attr\">playlistObject</span>:e,<span class=\"code-attr\">url</span>:t,<span class=\"code-attr\">id</span>:<span class=\"code-keyword\">this</span>.master.playlists[<span class=\"code-number\">0</span>].id}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>)},t}(C),R=<span class=\"code-number\">1</span>/<span class=\"code-number\">30</span>,M=<span class=\"code-number\">.1</span>,B=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=[];<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length)<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t(e.start(i),e.end(i))&amp;&amp;n.push([e.start(i),e.end(i)]);<span class=\"code-keyword\">return</span> u.default.createTimeRanges(n)},F=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> B(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> e-M&lt;=t&amp;&amp;i+M&gt;=t}))},N=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> B(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e-R&gt;=t}))},q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=[];<span class=\"code-keyword\">if</span>(!e||!e.length)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class=\"code-string\">\" =&gt; \"</span>+e.end(i));<span class=\"code-keyword\">return</span> t.join(<span class=\"code-string\">\", \"</span>)},W=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push({<span class=\"code-attr\">start</span>:e.start(i),<span class=\"code-attr\">end</span>:e.end(i)});<span class=\"code-keyword\">return</span> t},V=u.default.createTimeRange,H=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.end-r.duration,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">for</span>(;n--;){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(r=e.segments[n]).end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.end,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(i+=r.duration,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t);<span class=\"code-keyword\">if</span>(n.precise)<span class=\"code-keyword\">return</span> n.result;<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(i=e.segments[r]).start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i.start-n,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(n+=i.duration,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i.end-n,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t);<span class=\"code-keyword\">return</span> r.precise?r.result:n.result+i},G=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i&amp;&amp;(i=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t){<span class=\"code-keyword\">if</span>(e.totalDuration)<span class=\"code-keyword\">return</span> e.totalDuration;<span class=\"code-keyword\">if</span>(!e.endList)<span class=\"code-keyword\">return</span> o.default.Infinity}<span class=\"code-keyword\">return</span> H(e,t,i)},j=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t&gt;i){<span class=\"code-keyword\">var</span> r=[i,t];t=r[<span class=\"code-number\">0</span>],i=r[<span class=\"code-number\">1</span>]}<span class=\"code-keyword\">if</span>(t&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=t;a&lt;<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">0</span>,i);a++)n+=e.targetDuration;t=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=t;s&lt;i;s++)n+=e.segments[s].duration;<span class=\"code-keyword\">return</span> n},z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=e.segments.length,n=e.segments[i<span class=\"code-number\">-1</span>].duration||e.targetDuration,r=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t?t:n+<span class=\"code-number\">2</span>*e.targetDuration;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r)<span class=\"code-keyword\">return</span> i;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;i--&amp;&amp;!((a+=e.segments[i].duration)&gt;=r););<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,i)},X=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e.endList)<span class=\"code-keyword\">return</span> G(e);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t=t||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> r=i?z(e,n):e.segments.length;<span class=\"code-keyword\">return</span> H(e,e.mediaSequence+r,t)},Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class=\"code-built_in\">Date</span>.now()},Y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>},K=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Q(e);<span class=\"code-keyword\">return</span>!e.disabled&amp;&amp;!t},$=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.attributes&amp;&amp;t.attributes[e]},J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===e.playlists.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.attributes.BANDWIDTH||<span class=\"code-built_in\">Number</span>.MAX_VALUE;<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===e.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!K(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class=\"code-number\">0</span>)&lt;i})).length},Z={<span class=\"code-attr\">duration</span>:G,<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t||<span class=\"code-number\">0</span>,r=X(e,t,!<span class=\"code-number\">0</span>,i);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===r?V():V(n,r)},<span class=\"code-attr\">safeLiveIndex</span>:z,<span class=\"code-attr\">getMediaInfoForTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a=e.segments.length,s=t-n;<span class=\"code-keyword\">if</span>(s&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">if</span>(i&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">for</span>(r=i<span class=\"code-number\">-1</span>;r&gt;=<span class=\"code-number\">0</span>;r--)<span class=\"code-keyword\">if</span>((s+=e.segments[r].duration+R)&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:r,<span class=\"code-attr\">startTime</span>:n-j(e,i,r)};<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:t}}<span class=\"code-keyword\">if</span>(i&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(r=i;r&lt;<span class=\"code-number\">0</span>;r++)<span class=\"code-keyword\">if</span>((s-=e.targetDuration)&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:t};i=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(r=i;r&lt;a;r++)<span class=\"code-keyword\">if</span>((s-=e.segments[r].duration+R)&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:r,<span class=\"code-attr\">startTime</span>:n+j(e,i,r)};<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">mediaIndex</span>:a<span class=\"code-number\">-1</span>,<span class=\"code-attr\">startTime</span>:t}},<span class=\"code-attr\">isEnabled</span>:K,<span class=\"code-attr\">isDisabled</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.disabled},<span class=\"code-attr\">isBlacklisted</span>:Q,<span class=\"code-attr\">isIncompatible</span>:Y,<span class=\"code-attr\">playlistEnd</span>:X,<span class=\"code-attr\">isAes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(e.segments[t].key)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">hasAttribute</span>:$,<span class=\"code-attr\">estimateSegmentRequestTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">0</span>),$(<span class=\"code-string\">\"BANDWIDTH\"</span>,i)?(e*i.attributes.BANDWIDTH<span class=\"code-number\">-8</span>*n)/t:<span class=\"code-literal\">NaN</span>},<span class=\"code-attr\">isLowestEnabledRendition</span>:J},ee=u.default.xhr,te=u.default.mergeOptions,ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-string\">\"arraybuffer\"</span>===e.responseType?e.response:e.responseText;!t&amp;&amp;r&amp;&amp;(e.responseTime=<span class=\"code-built_in\">Date</span>.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=<span class=\"code-built_in\">Math</span>.floor(e.bytesReceived/e.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>))),i.headers&amp;&amp;(e.responseHeaders=i.headers),t&amp;&amp;<span class=\"code-string\">\"ETIMEDOUT\"</span>===t.code&amp;&amp;(e.timedout=!<span class=\"code-number\">0</span>),t||e.aborted||<span class=\"code-number\">200</span>===i.statusCode||<span class=\"code-number\">206</span>===i.statusCode||<span class=\"code-number\">0</span>===i.statusCode||(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"XHR Failed with a response of: \"</span>+(e&amp;&amp;(r||e.responseText)))),n(t,e)},ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{t=te({<span class=\"code-attr\">timeout</span>:<span class=\"code-number\">45e3</span>},t);<span class=\"code-keyword\">var</span> n=e.beforeRequest||u.default.Vhs.xhr.beforeRequest;<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> n){<span class=\"code-keyword\">var</span> r=n(t);r&amp;&amp;(t=r)}<span class=\"code-keyword\">var</span> a=ee(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> ie(a,e,t,i)})),s=a.abort;<span class=\"code-keyword\">return</span> a.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> a.aborted=!<span class=\"code-number\">0</span>,s.apply(a,<span class=\"code-built_in\">arguments</span>)},a.uri=t.uri,a.requestTime=<span class=\"code-built_in\">Date</span>.now(),a}},re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n={};<span class=\"code-keyword\">return</span> e.byterange&amp;&amp;(n.Range=(i=(t=e.byterange).offset+t.length<span class=\"code-number\">-1</span>,<span class=\"code-string\">\"bytes=\"</span>+t.offset+<span class=\"code-string\">\"-\"</span>+i)),n},ae=<span class=\"code-regexp\">/^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i</span>,se=<span class=\"code-regexp\">/^application\\/dash\\+xml/i</span>,oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> ae.test(e)?<span class=\"code-string\">\"hls\"</span>:se.test(e)?<span class=\"code-string\">\"dash\"</span>:<span class=\"code-string\">\"application/vnd.videojs.vhs+json\"</span>===e?<span class=\"code-string\">\"vhs-json\"</span>:<span class=\"code-literal\">null</span>},ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.start(t)+<span class=\"code-string\">\"-\"</span>+e.end(t)},de=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.toString(<span class=\"code-number\">16</span>);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"00\"</span>.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>-i.length)+i+(t%<span class=\"code-number\">2</span>?<span class=\"code-string\">\" \"</span>:<span class=\"code-string\">\"\"</span>)},le=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;<span class=\"code-number\">126</span>?<span class=\"code-built_in\">String</span>.fromCharCode(e):<span class=\"code-string\">\".\"</span>},he=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(e).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-built_in\">ArrayBuffer</span>.isView(n)?t[i]={<span class=\"code-attr\">bytes</span>:n.buffer,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength}:t[i]=n})),t},ce=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byterange||{<span class=\"code-attr\">length</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">offset</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">return</span>[t.length,t.offset,e.resolvedUri].join(<span class=\"code-string\">\",\"</span>)},fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.resolvedUri},me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">Array</span>.prototype.slice.call(e),i=<span class=\"code-number\">16</span>,n=<span class=\"code-string\">\"\"</span>,r=<span class=\"code-number\">0</span>;r&lt;t.length/i;r++)n+=t.slice(r*i,r*i+i).map(de).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" \"</span>+t.slice(r*i,r*i+i).map(le).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\"\\n\"</span>;<span class=\"code-keyword\">return</span> n},pe=<span class=\"code-built_in\">Object</span>.freeze({<span class=\"code-attr\">__proto__</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">createTransferableMessage</span>:he,<span class=\"code-attr\">initSegmentId</span>:ce,<span class=\"code-attr\">segmentKeyId</span>:fe,<span class=\"code-attr\">hexDump</span>:me,<span class=\"code-attr\">tagDump</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.bytes;<span class=\"code-keyword\">return</span> me(t)},<span class=\"code-attr\">textRanges</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i+=ue(e,t)+<span class=\"code-string\">\" \"</span>;<span class=\"code-keyword\">return</span> i}}),ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o||o,d=t.tech,l=t.callback;<span class=\"code-keyword\">if</span>(!l)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"seekToProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i||!n||!s)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"seekToProgramTime: programTime, seekTo and playlist must be provided\"</span>});<span class=\"code-keyword\">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"player must be playing a live stream to start buffering\"</span>});<span class=\"code-keyword\">if</span>(!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.segments||<span class=\"code-number\">0</span>===e.segments.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(!e.segments[t].dateTimeObject)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}(n))<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"programDateTime tags must be provided in the manifest \"</span>+n.resolvedUri});<span class=\"code-keyword\">var</span> h=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=t.segments[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(i&lt;n.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;t.segments.length<span class=\"code-number\">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class=\"code-number\">1</span>].dateTimeObject));r++);<span class=\"code-keyword\">var</span> a,s=t.segments[t.segments.length<span class=\"code-number\">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class=\"code-number\">.25</span>*s.duration;<span class=\"code-keyword\">return</span> i&gt;<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(o.getTime()+<span class=\"code-number\">1e3</span>*u)?<span class=\"code-literal\">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class=\"code-attr\">segment</span>:n,<span class=\"code-attr\">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Z.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class=\"code-attr\">type</span>:n.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>})}(i,n);<span class=\"code-keyword\">if</span>(!h)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" was not found in the stream\"</span>});<span class=\"code-keyword\">var</span> c=h.segment,f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t)}<span class=\"code-keyword\">catch</span>(e){}<span class=\"code-keyword\">var</span> r=i.getTime();<span class=\"code-keyword\">return</span>(n.getTime()-r)/<span class=\"code-number\">1e3</span>}(c.dateTimeObject,i);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===h.type)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===a?l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" is not buffered yet. Try again\"</span>}):(s(h.estimatedStart+f),<span class=\"code-keyword\">void</span> d.one(<span class=\"code-string\">\"seeked\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e({<span class=\"code-attr\">programTime</span>:i,<span class=\"code-attr\">playlist</span>:n,<span class=\"code-attr\">retryCount</span>:a<span class=\"code-number\">-1</span>,<span class=\"code-attr\">seekTo</span>:s,<span class=\"code-attr\">pauseAfterSeek</span>:u,<span class=\"code-attr\">tech</span>:d,<span class=\"code-attr\">callback</span>:l})})));<span class=\"code-keyword\">var</span> m=c.start+f;d.one(<span class=\"code-string\">\"seeked\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> l(<span class=\"code-literal\">null</span>,d.currentTime())})),u&amp;&amp;d.pause(),s(m)},ye=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!e&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> e},ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(t),n=<span class=\"code-number\">0</span>;n&lt;t;n++)i[n]=<span class=\"code-built_in\">arguments</span>[n];<span class=\"code-keyword\">return</span> i.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> i||<span class=\"code-built_in\">Object</span>.keys(i).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-built_in\">Array</span>.isArray(t[n])&amp;&amp;<span class=\"code-built_in\">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):ye(t[n])&amp;&amp;ye(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)}),[])},be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class=\"code-keyword\">return</span> t},Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?<span class=\"code-string\">\"\"</span>:t,n=e.source,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=e.range,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.indexRange,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-string\">\"\"</span>:o,d={<span class=\"code-attr\">uri</span>:r,<span class=\"code-attr\">resolvedUri</span>:f(i||<span class=\"code-string\">\"\"</span>,r)};<span class=\"code-keyword\">if</span>(s||u){<span class=\"code-keyword\">var</span> l=(s||u).split(<span class=\"code-string\">\"-\"</span>),h=<span class=\"code-built_in\">parseInt</span>(l[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>),c=<span class=\"code-built_in\">parseInt</span>(l[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>);d.byterange={<span class=\"code-attr\">length</span>:c-h+<span class=\"code-number\">1</span>,<span class=\"code-attr\">offset</span>:h}}<span class=\"code-keyword\">return</span> d},Se={<span class=\"code-attr\">static</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.duration,i=e.timescale,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-number\">1</span>:i,r=e.sourceDuration;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">end</span>:<span class=\"code-built_in\">Math</span>.ceil(r/(t/n))}},<span class=\"code-attr\">dynamic</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.duration,o=e.start,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,d=e.minimumUpdatePeriod,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">0</span>:d,h=e.timeShiftBufferDepth,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h?<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:h,f=(t+i)/<span class=\"code-number\">1e3</span>,m=n+u,p=f+l-m,g=<span class=\"code-built_in\">Math</span>.ceil(p*a/s),y=<span class=\"code-built_in\">Math</span>.floor((f-m-c)*a/s),v=<span class=\"code-built_in\">Math</span>.floor((f-m)*a/s);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,y),<span class=\"code-attr\">end</span>:<span class=\"code-built_in\">Math</span>.min(g,v)}}},Ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?<span class=\"code-string\">\"static\"</span>:t,n=e.duration,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.sourceDuration,o=Se[i](e),u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class=\"code-keyword\">return</span> i}(o.start,o.end).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.duration,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">number</span>:(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">1</span>:o)+t,<span class=\"code-attr\">duration</span>:n/a,<span class=\"code-attr\">timeline</span>:s,<span class=\"code-attr\">time</span>:i*n}}}(e));<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"static\"</span>===i){<span class=\"code-keyword\">var</span> d=u.length<span class=\"code-number\">-1</span>;u[d].duration=s-n/a*d}<span class=\"code-keyword\">return</span> u},we=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=e.initialization,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.duration;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"NO_BASE_URL\"</span>);<span class=\"code-keyword\">var</span> u=Te({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:n.sourceURL,<span class=\"code-attr\">range</span>:n.range}),d=Te({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:t,<span class=\"code-attr\">indexRange</span>:s});<span class=\"code-keyword\">if</span>(d.map=u,o){<span class=\"code-keyword\">var</span> l=Ie(e);l.length&amp;&amp;(d.duration=l[<span class=\"code-number\">0</span>].duration,d.timeline=l[<span class=\"code-number\">0</span>].timeline)}<span class=\"code-keyword\">else</span> r&amp;&amp;(d.duration=r,d.timeline=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> d.number=<span class=\"code-number\">0</span>,[d]},Le=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=e.sidx.map?e.sidx.map:<span class=\"code-literal\">null</span>,r=e.sidx.duration,a=e.timeline||<span class=\"code-number\">0</span>,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,d=t.references.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>!==e.referenceType})),l=[],h=o+t.firstOffset,c=<span class=\"code-number\">0</span>;c&lt;d.length;c++){<span class=\"code-keyword\">var</span> f=t.references[c],m=f.referencedSize,p=f.subsegmentDuration,g=we({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">timescale</span>:u,<span class=\"code-attr\">timeline</span>:a,<span class=\"code-attr\">periodIndex</span>:a,<span class=\"code-attr\">duration</span>:p,<span class=\"code-attr\">sourceDuration</span>:r,<span class=\"code-attr\">indexRange</span>:h+<span class=\"code-string\">\"-\"</span>+(h+m<span class=\"code-number\">-1</span>)})[<span class=\"code-number\">0</span>];n&amp;&amp;(g.map=n),l.push(g),h+=m}<span class=\"code-keyword\">return</span> e.segments=l,e},ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e[n]?(t.segments[<span class=\"code-number\">0</span>]&amp;&amp;(t.segments[<span class=\"code-number\">0</span>].discontinuity=!<span class=\"code-number\">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e}),{}),<span class=\"code-built_in\">Object</span>.keys(t).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e]}))).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span> e.discontinuityStarts=(t=e.segments,<span class=\"code-string\">\"discontinuity\"</span>,t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.discontinuity&amp;&amp;e.push(i),e}),[])),e}))},Ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),!<span class=\"code-built_in\">Object</span>.keys(t).length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i <span class=\"code-keyword\">in</span> e){<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-keyword\">if</span>(n.sidx){<span class=\"code-keyword\">var</span> r=n.sidx.uri+<span class=\"code-string\">\"-\"</span>+(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,o=(s=n.sidx.byterange).offset+s.length<span class=\"code-number\">-1</span>,s.offset+<span class=\"code-string\">\"-\"</span>+o),a=t[r]&amp;&amp;t[r].sidx;n.sidx&amp;&amp;a&amp;&amp;Le(n,a,n.sidx.resolvedUri)}}<span class=\"code-keyword\">var</span> s,o;<span class=\"code-keyword\">return</span> e},Ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class=\"code-attr\">attributes</span>:(t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth,<span class=\"code-attr\">CODECS</span>:i.codecs},t[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(i.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=[{<span class=\"code-attr\">uri</span>:i.baseUrl,<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:i.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:i.sourceDuration,<span class=\"code-attr\">number</span>:<span class=\"code-number\">0</span>}],i.duration=i.sourceDuration);<span class=\"code-keyword\">var</span> r=((t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth})[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t);<span class=\"code-keyword\">return</span> i.codecs&amp;&amp;(r.CODECS=i.codecs),{<span class=\"code-attr\">attributes</span>:r,<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(i.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:i.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>}},Ce=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class=\"code-attr\">attributes</span>:(t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">AUDIO</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-string\">\"subs\"</span>,<span class=\"code-attr\">RESOLUTION</span>:{<span class=\"code-attr\">width</span>:i.width,<span class=\"code-attr\">height</span>:i.height},<span class=\"code-attr\">CODECS</span>:i.codecs,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth},t[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===(i.type||<span class=\"code-string\">\"static\"</span>),<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-number\">1</span>:s,u=e.start,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===u?<span class=\"code-number\">0</span>:u,l=e.minimumUpdatePeriod,h=(n+r)/<span class=\"code-number\">1e3</span>+(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l?<span class=\"code-number\">0</span>:l)-(a+d);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.ceil((h*o-t)/i)},Oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.type,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-string\">\"static\"</span>:i,r=e.minimumUpdatePeriod,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">0</span>:r,s=e.media,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-string\">\"\"</span>:s,u=e.sourceDuration,d=e.timescale,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">1</span>:d,h=e.startNumber,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h?<span class=\"code-number\">1</span>:h,f=e.periodIndex,m=[],p=<span class=\"code-number\">-1</span>,g=<span class=\"code-number\">0</span>;g&lt;t.length;g++){<span class=\"code-keyword\">var</span> y=t[g],v=y.d,_=y.r||<span class=\"code-number\">0</span>,b=y.t||<span class=\"code-number\">0</span>;p&lt;<span class=\"code-number\">0</span>&amp;&amp;(p=b),b&amp;&amp;b&gt;p&amp;&amp;(p=b);<span class=\"code-keyword\">var</span> T=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(_&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> S=g+<span class=\"code-number\">1</span>;T=S===t.length?<span class=\"code-string\">\"dynamic\"</span>===n&amp;&amp;a&gt;<span class=\"code-number\">0</span>&amp;&amp;o.indexOf(<span class=\"code-string\">\"$Number$\"</span>)&gt;<span class=\"code-number\">0</span>?Ue(e,p,v):(u*l-p)/v:(t[S].t-p)/v}<span class=\"code-keyword\">else</span> T=_+<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> I=c+m.length+T,w=c+m.length;w&lt;I;)m.push({<span class=\"code-attr\">number</span>:w,<span class=\"code-attr\">duration</span>:v/l,<span class=\"code-attr\">time</span>:p,<span class=\"code-attr\">timeline</span>:f}),p+=v,w++}<span class=\"code-keyword\">return</span> m},De=<span class=\"code-regexp\">/\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g</span>,xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.replace(De,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"$$\"</span>===t)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"$\"</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e[i])<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> a=<span class=\"code-string\">\"\"</span>+e[i];<span class=\"code-keyword\">return</span><span class=\"code-string\">\"RepresentationID\"</span>===i?a:(r=n?<span class=\"code-built_in\">parseInt</span>(r,<span class=\"code-number\">10</span>):<span class=\"code-number\">1</span>,a.length&gt;=r?a:<span class=\"code-string\">\"\"</span>+<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(r-a.length+<span class=\"code-number\">1</span>).join(<span class=\"code-string\">\"0\"</span>)+a)}}(t))},Re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">RepresentationID</span>:e.id,<span class=\"code-attr\">Bandwidth</span>:e.bandwidth||<span class=\"code-number\">0</span>},n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{<span class=\"code-attr\">sourceURL</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">range</span>:<span class=\"code-string\">\"\"</span>}:n,a=Te({<span class=\"code-attr\">baseUrl</span>:e.baseUrl,<span class=\"code-attr\">source</span>:xe(r.sourceURL,i),<span class=\"code-attr\">range</span>:r.range});<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.duration||t?e.duration?Ie(e):Oe(e,t):[{<span class=\"code-attr\">number</span>:e.startNumber||<span class=\"code-number\">1</span>,<span class=\"code-attr\">duration</span>:e.sourceDuration,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">timeline</span>:e.periodIndex}]}(e,t).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class=\"code-keyword\">var</span> n=xe(e.media||<span class=\"code-string\">\"\"</span>,i);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">uri</span>:n,<span class=\"code-attr\">timeline</span>:t.timeline,<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">resolvedUri</span>:f(e.baseUrl||<span class=\"code-string\">\"\"</span>,n),<span class=\"code-attr\">map</span>:a,<span class=\"code-attr\">number</span>:t.number}}))},Me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.duration,n=e.segmentUrls,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?[]:n;<span class=\"code-keyword\">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"SEGMENT_TIME_UNSPECIFIED\"</span>);<span class=\"code-keyword\">var</span> a,s=r.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.baseUrl,n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{}:n,a=Te({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:r.sourceURL,<span class=\"code-attr\">range</span>:r.range}),s=Te({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:t.media,<span class=\"code-attr\">range</span>:t.mediaRange});<span class=\"code-keyword\">return</span> s.map=a,s}(e,t)}));<span class=\"code-keyword\">return</span> i&amp;&amp;(a=Ie(e)),t&amp;&amp;(a=Oe(e,t)),a.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(s[t]){<span class=\"code-keyword\">var</span> i=s[t];<span class=\"code-keyword\">return</span> i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}})).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}))},Be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Re,t=ve(n,r.template)):r.base?(i=we,t=ve(n,r.base)):r.list&amp;&amp;(i=Me,t=ve(n,r.list));<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">attributes</span>:n};<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> a;<span class=\"code-keyword\">var</span> s=i(t,r.timeline);<span class=\"code-keyword\">if</span>(t.duration){<span class=\"code-keyword\">var</span> o=t,u=o.duration,d=o.timescale,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">1</span>:d;t.duration=u/l}<span class=\"code-keyword\">else</span> s.length?t.duration=s.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(e,<span class=\"code-built_in\">Math</span>.ceil(t.duration))}),<span class=\"code-number\">0</span>):t.duration=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class=\"code-number\">0</span>],a.segments=[]),a},Fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> be(e.childNodes).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.tagName===t}))},Ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.textContent.trim()},qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-regexp\">/P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/</span>.exec(e);<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.slice(<span class=\"code-number\">1</span>),n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>],a=i[<span class=\"code-number\">2</span>],s=i[<span class=\"code-number\">3</span>],o=i[<span class=\"code-number\">4</span>],u=i[<span class=\"code-number\">5</span>];<span class=\"code-keyword\">return</span> <span class=\"code-number\">31536e3</span>*<span class=\"code-built_in\">parseFloat</span>(n||<span class=\"code-number\">0</span>)+<span class=\"code-number\">2592e3</span>*<span class=\"code-built_in\">parseFloat</span>(r||<span class=\"code-number\">0</span>)+<span class=\"code-number\">86400</span>*<span class=\"code-built_in\">parseFloat</span>(a||<span class=\"code-number\">0</span>)+<span class=\"code-number\">3600</span>*<span class=\"code-built_in\">parseFloat</span>(s||<span class=\"code-number\">0</span>)+<span class=\"code-number\">60</span>*<span class=\"code-built_in\">parseFloat</span>(o||<span class=\"code-number\">0</span>)+<span class=\"code-built_in\">parseFloat</span>(u||<span class=\"code-number\">0</span>)},We={<span class=\"code-attr\">mediaPresentationDuration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qe(e)},<span class=\"code-attr\">availabilityStartTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class=\"code-string\">\"Z\"</span>),<span class=\"code-built_in\">Date</span>.parse(t)/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">var</span> t},<span class=\"code-attr\">minimumUpdatePeriod</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qe(e)},<span class=\"code-attr\">suggestedPresentationDelay</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qe(e)},<span class=\"code-attr\">type</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e},<span class=\"code-attr\">timeShiftBufferDepth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qe(e)},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qe(e)},<span class=\"code-attr\">width</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">height</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">bandwidth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">startNumber</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">timescale</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">isNaN</span>(t)?qe(e):t},<span class=\"code-attr\">d</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">t</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">r</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">DEFAULT</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}},Ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;e.attributes?be(e.attributes).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=We[t.name]||We.DEFAULT;<span class=\"code-keyword\">return</span> e[t.name]=i(t.value),e}),{}):{}},He={<span class=\"code-string\">\"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b\"</span>:<span class=\"code-string\">\"org.w3.clearkey\"</span>,<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>:<span class=\"code-string\">\"com.widevine.alpha\"</span>,<span class=\"code-string\">\"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95\"</span>:<span class=\"code-string\">\"com.microsoft.playready\"</span>,<span class=\"code-string\">\"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb\"</span>:<span class=\"code-string\">\"com.adobe.primetime\"</span>},Ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.length?_e(e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> f(e,Ne(t))}))}))):e},je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Fe(e,<span class=\"code-string\">\"SegmentTemplate\"</span>)[<span class=\"code-number\">0</span>],i=Fe(e,<span class=\"code-string\">\"SegmentList\"</span>)[<span class=\"code-number\">0</span>],n=i&amp;&amp;Fe(i,<span class=\"code-string\">\"SegmentURL\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> ve({<span class=\"code-attr\">tag</span>:<span class=\"code-string\">\"SegmentURL\"</span>},Ve(e))})),r=Fe(e,<span class=\"code-string\">\"SegmentBase\"</span>)[<span class=\"code-number\">0</span>],a=i||t,s=a&amp;&amp;Fe(a,<span class=\"code-string\">\"SegmentTimeline\"</span>)[<span class=\"code-number\">0</span>],o=i||r||t,u=o&amp;&amp;Fe(o,<span class=\"code-string\">\"Initialization\"</span>)[<span class=\"code-number\">0</span>],d=t&amp;&amp;Ve(t);d&amp;&amp;u?d.initialization=u&amp;&amp;Ve(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class=\"code-attr\">sourceURL</span>:d.initialization});<span class=\"code-keyword\">var</span> l={<span class=\"code-attr\">template</span>:d,<span class=\"code-attr\">timeline</span>:s&amp;&amp;Fe(s,<span class=\"code-string\">\"S\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ve(e)})),<span class=\"code-attr\">list</span>:i&amp;&amp;ve(Ve(i),{<span class=\"code-attr\">segmentUrls</span>:n,<span class=\"code-attr\">initialization</span>:Ve(u)}),<span class=\"code-attr\">base</span>:r&amp;&amp;ve(Ve(r),{<span class=\"code-attr\">initialization</span>:Ve(u)})};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(l).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{l[e]||<span class=\"code-keyword\">delete</span> l[e]})),l},ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=Ge(t,Fe(i,<span class=\"code-string\">\"BaseURL\"</span>)),a=Ve(i),s=<span class=\"code-built_in\">parseInt</span>(a.id,<span class=\"code-number\">10</span>),u=o.default.isNaN(s)?n:s,d=ve(e,{<span class=\"code-attr\">periodIndex</span>:u}),l=Fe(i,<span class=\"code-string\">\"AdaptationSet\"</span>),h=je(i);<span class=\"code-keyword\">return</span> _e(l.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=Ve(n),a=Ge(t,Fe(n,<span class=\"code-string\">\"BaseURL\"</span>)),s=Fe(n,<span class=\"code-string\">\"Role\"</span>)[<span class=\"code-number\">0</span>],o={<span class=\"code-attr\">role</span>:Ve(s)},u=ve(e,r,o),d=Fe(n,<span class=\"code-string\">\"ContentProtection\"</span>).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Ve(t),n=He[i.schemeIdUri];<span class=\"code-keyword\">if</span>(n){e[n]={<span class=\"code-attr\">attributes</span>:i};<span class=\"code-keyword\">var</span> r=Fe(t,<span class=\"code-string\">\"cenc:pssh\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> a=Ne(r),s=a&amp;&amp;v(a);e[n].pssh=s}}<span class=\"code-keyword\">return</span> e}),{});<span class=\"code-built_in\">Object</span>.keys(d).length&amp;&amp;(u=ve(u,{<span class=\"code-attr\">contentProtection</span>:d}));<span class=\"code-keyword\">var</span> l=je(n),h=Fe(n,<span class=\"code-string\">\"Representation\"</span>),c=ve(i,l);<span class=\"code-keyword\">return</span> _e(h.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=Fe(n,<span class=\"code-string\">\"BaseURL\"</span>),a=Ge(t,r),s=ve(e,Ve(n)),o=je(n);<span class=\"code-keyword\">return</span> a.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segmentInfo</span>:ve(i,o),<span class=\"code-attr\">attributes</span>:ve(s,{<span class=\"code-attr\">baseUrl</span>:e})}}))}}(u,a,c)))}}(d,r,h)))}},Xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"\"</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"DASH_EMPTY_MANIFEST\"</span>);<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">new</span> r.DOMParser;<span class=\"code-keyword\">try</span>{i=(t=n.parseFromString(e,<span class=\"code-string\">\"application/xml\"</span>))&amp;&amp;<span class=\"code-string\">\"MPD\"</span>===t.documentElement.tagName?t.documentElement:<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">catch</span>(e){}<span class=\"code-keyword\">if</span>(!i||i&amp;&amp;i.getElementsByTagName(<span class=\"code-string\">\"parsererror\"</span>).length&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"DASH_INVALID_XML\"</span>);<span class=\"code-keyword\">return</span> i},Qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=t,n=i.manifestUri,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=i.NOW,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-built_in\">Date</span>.now():a,o=i.clientOffset,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,d=Fe(e,<span class=\"code-string\">\"Period\"</span>);<span class=\"code-keyword\">if</span>(!d.length)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"INVALID_NUMBER_OF_PERIOD\"</span>);<span class=\"code-keyword\">var</span> l=Fe(e,<span class=\"code-string\">\"Location\"</span>),h=Ve(e),c=Ge([r],Fe(e,<span class=\"code-string\">\"BaseURL\"</span>));<span class=\"code-keyword\">return</span> h.sourceDuration=h.mediaPresentationDuration||<span class=\"code-number\">0</span>,h.NOW=s,h.clientOffset=u,l.length&amp;&amp;(h.locations=l.map(Ne)),{<span class=\"code-attr\">locations</span>:h.locations,<span class=\"code-attr\">representationInfo</span>:_e(d.map(ze(h,c)))}}(Xe(e),t);<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={}),!e.length)<span class=\"code-keyword\">return</span>{};<span class=\"code-keyword\">var</span> r=e[<span class=\"code-number\">0</span>].attributes,a=r.sourceDuration,s=r.type,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-string\">\"static\"</span>:s,u=r.suggestedPresentationDelay,d=r.minimumUpdatePeriod,l=ke(e.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"video/webm\"</span>===t.mimeType||<span class=\"code-string\">\"video\"</span>===t.contentType}))).map(Ce),h=ke(e.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"audio/webm\"</span>===t.mimeType||<span class=\"code-string\">\"audio\"</span>===t.contentType}))),c=e.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"text/vtt\"</span>===t.mimeType||<span class=\"code-string\">\"text\"</span>===t.contentType})),f={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[],<span class=\"code-attr\">endList</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">mediaGroups</span>:(n={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{}},n[<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>]={},n.SUBTITLES={},n),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:a,<span class=\"code-attr\">playlists</span>:Ae(l,i)};<span class=\"code-keyword\">return</span> d&gt;=<span class=\"code-number\">0</span>&amp;&amp;(f.minimumUpdatePeriod=<span class=\"code-number\">1e3</span>*d),t&amp;&amp;(f.locations=t),<span class=\"code-string\">\"dynamic\"</span>===o&amp;&amp;(f.suggestedPresentationDelay=u),h.length&amp;&amp;(f.mediaGroups.AUDIO.audio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> n=e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n.attributes.role&amp;&amp;n.attributes.role.value||<span class=\"code-string\">\"\"</span>,a=n.attributes.lang||<span class=\"code-string\">\"\"</span>,s=<span class=\"code-string\">\"main\"</span>;<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">var</span> o=r?<span class=\"code-string\">\" (\"</span>+r+<span class=\"code-string\">\")\"</span>:<span class=\"code-string\">\"\"</span>;s=<span class=\"code-string\">\"\"</span>+n.attributes.lang+o}<span class=\"code-keyword\">return</span> e[s]&amp;&amp;e[s].playlists[<span class=\"code-number\">0</span>].attributes.BANDWIDTH&gt;n.attributes.bandwidth||(e[s]={<span class=\"code-attr\">language</span>:a,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">default</span>:<span class=\"code-string\">\"main\"</span>===r,<span class=\"code-attr\">playlists</span>:Ae([Ee(n)],t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>},<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;<span class=\"code-string\">\"main\"</span>===r&amp;&amp;((i=n).default=!<span class=\"code-number\">0</span>)),e}),{});<span class=\"code-keyword\">return</span> i||(n[<span class=\"code-built_in\">Object</span>.keys(n)[<span class=\"code-number\">0</span>]].default=!<span class=\"code-number\">0</span>),n}(h,i)),c.length&amp;&amp;(f.mediaGroups.SUBTITLES.subs=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.attributes.lang||<span class=\"code-string\">\"text\"</span>;<span class=\"code-keyword\">return</span> e[n]||(e[n]={<span class=\"code-attr\">language</span>:n,<span class=\"code-attr\">default</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">playlists</span>:Ae([Pe(i)],t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>}),e}),{})}(c,i)),f}(i.representationInfo.map(Be),i.locations,t.sidxMapping)},Ye=Le,Ke=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),$e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Uint8Array</span>?e:(<span class=\"code-built_in\">Array</span>.isArray(e)||(t=e,<span class=\"code-built_in\">ArrayBuffer</span>.isView(t))||e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>||(e=<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;e!=e?<span class=\"code-number\">0</span>:[e]),<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e&amp;&amp;e.buffer||e,e&amp;&amp;e.byteOffset||<span class=\"code-number\">0</span>,e&amp;&amp;e.byteLength||<span class=\"code-number\">0</span>));<span class=\"code-keyword\">var</span> t},Je=o.default.BigInt||<span class=\"code-built_in\">Number</span>,Ze=[Je(<span class=\"code-string\">\"0x1\"</span>),Je(<span class=\"code-string\">\"0x100\"</span>),Je(<span class=\"code-string\">\"0x10000\"</span>),Je(<span class=\"code-string\">\"0x1000000\"</span>),Je(<span class=\"code-string\">\"0x100000000\"</span>),Je(<span class=\"code-string\">\"0x10000000000\"</span>),Je(<span class=\"code-string\">\"0x1000000000000\"</span>),Je(<span class=\"code-string\">\"0x100000000000000\"</span>),Je(<span class=\"code-string\">\"0x10000000000000000\"</span>)],et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?{}:t,n=i.signed,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==n&amp;&amp;n,a=i.le,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==a&amp;&amp;a;e=$e(e);<span class=\"code-keyword\">var</span> o=s?<span class=\"code-string\">\"reduce\"</span>:<span class=\"code-string\">\"reduceRight\"</span>,u=(e[o]?e[o]:<span class=\"code-built_in\">Array</span>.prototype[o]).call(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=s?n:<span class=\"code-built_in\">Math</span>.abs(n+<span class=\"code-number\">1</span>-e.length);<span class=\"code-keyword\">return</span> t+Je(i)*Ze[r]}),Je(<span class=\"code-number\">0</span>));<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> d=Ze[e.length]/Je(<span class=\"code-number\">2</span>)-Je(<span class=\"code-number\">1</span>);(u=Je(u))&gt;d&amp;&amp;(u-=d,u-=d,u-=Je(<span class=\"code-number\">2</span>))}<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Number</span>(u)},tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;e&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.toString&amp;&amp;(e=e.toString()),<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>;t||(e=<span class=\"code-built_in\">unescape</span>(<span class=\"code-built_in\">encodeURIComponent</span>(e)));<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.length),n=<span class=\"code-number\">0</span>;n&lt;e.length;n++)i[n]=e.charCodeAt(n);<span class=\"code-keyword\">return</span> i},it=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?{}:i,r=n.offset,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">0</span>:r,s=n.mask,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?[]:s;e=$e(e);<span class=\"code-keyword\">var</span> u=(t=$e(t)).every?t.every:<span class=\"code-built_in\">Array</span>.prototype.every;<span class=\"code-keyword\">return</span> t.length&amp;&amp;e.length-a&gt;=t.length&amp;&amp;u.call(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> t===(o[i]?o[i]&amp;e[a+i]:e[a+i])}))},nt=$e([<span class=\"code-number\">73</span>,<span class=\"code-number\">68</span>,<span class=\"code-number\">51</span>]),rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">0</span>),(t=$e(t)).length-i&lt;<span class=\"code-number\">10</span>||!it(t,nt,{<span class=\"code-attr\">offset</span>:i})?i:(i+=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> i=(e=$e(e))[t+<span class=\"code-number\">5</span>],n=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span>(<span class=\"code-number\">16</span>&amp;i)&gt;&gt;<span class=\"code-number\">4</span>?n+<span class=\"code-number\">20</span>:n+<span class=\"code-number\">10</span>}(t,i),e(t,i))},at=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e?tt(e):e},st=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>),i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Array</span>.isArray(e)?e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> at(e)})):[at(e)]}(i),t=$e(t);<span class=\"code-keyword\">var</span> r=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> r;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;t.length;){<span class=\"code-keyword\">var</span> s=(t[a]&lt;&lt;<span class=\"code-number\">24</span>|t[a+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[a+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[a+<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">0</span>,o=t.subarray(a+<span class=\"code-number\">4</span>,a+<span class=\"code-number\">8</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">var</span> u=a+s;<span class=\"code-keyword\">if</span>(u&gt;t.length){<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">break</span>;u=t.length}<span class=\"code-keyword\">var</span> d=t.subarray(a+<span class=\"code-number\">8</span>,u);it(o,i[<span class=\"code-number\">0</span>])&amp;&amp;(<span class=\"code-number\">1</span>===i.length?r.push(d):r.push.apply(r,e(d,i.slice(<span class=\"code-number\">1</span>),n))),a=u}<span class=\"code-keyword\">return</span> r},ot={<span class=\"code-attr\">EBML</span>:$e([<span class=\"code-number\">26</span>,<span class=\"code-number\">69</span>,<span class=\"code-number\">223</span>,<span class=\"code-number\">163</span>]),<span class=\"code-attr\">DocType</span>:$e([<span class=\"code-number\">66</span>,<span class=\"code-number\">130</span>]),<span class=\"code-attr\">Segment</span>:$e([<span class=\"code-number\">24</span>,<span class=\"code-number\">83</span>,<span class=\"code-number\">128</span>,<span class=\"code-number\">103</span>]),<span class=\"code-attr\">SegmentInfo</span>:$e([<span class=\"code-number\">21</span>,<span class=\"code-number\">73</span>,<span class=\"code-number\">169</span>,<span class=\"code-number\">102</span>]),<span class=\"code-attr\">Tracks</span>:$e([<span class=\"code-number\">22</span>,<span class=\"code-number\">84</span>,<span class=\"code-number\">174</span>,<span class=\"code-number\">107</span>]),<span class=\"code-attr\">Track</span>:$e([<span class=\"code-number\">174</span>]),<span class=\"code-attr\">TrackNumber</span>:$e([<span class=\"code-number\">215</span>]),<span class=\"code-attr\">DefaultDuration</span>:$e([<span class=\"code-number\">35</span>,<span class=\"code-number\">227</span>,<span class=\"code-number\">131</span>]),<span class=\"code-attr\">TrackEntry</span>:$e([<span class=\"code-number\">174</span>]),<span class=\"code-attr\">TrackType</span>:$e([<span class=\"code-number\">131</span>]),<span class=\"code-attr\">FlagDefault</span>:$e([<span class=\"code-number\">136</span>]),<span class=\"code-attr\">CodecID</span>:$e([<span class=\"code-number\">134</span>]),<span class=\"code-attr\">CodecPrivate</span>:$e([<span class=\"code-number\">99</span>,<span class=\"code-number\">162</span>]),<span class=\"code-attr\">VideoTrack</span>:$e([<span class=\"code-number\">224</span>]),<span class=\"code-attr\">AudioTrack</span>:$e([<span class=\"code-number\">225</span>]),<span class=\"code-attr\">Cluster</span>:$e([<span class=\"code-number\">31</span>,<span class=\"code-number\">67</span>,<span class=\"code-number\">182</span>,<span class=\"code-number\">117</span>]),<span class=\"code-attr\">Timestamp</span>:$e([<span class=\"code-number\">231</span>]),<span class=\"code-attr\">TimestampScale</span>:$e([<span class=\"code-number\">42</span>,<span class=\"code-number\">215</span>,<span class=\"code-number\">177</span>]),<span class=\"code-attr\">BlockGroup</span>:$e([<span class=\"code-number\">160</span>]),<span class=\"code-attr\">BlockDuration</span>:$e([<span class=\"code-number\">155</span>]),<span class=\"code-attr\">Block</span>:$e([<span class=\"code-number\">161</span>]),<span class=\"code-attr\">SimpleBlock</span>:$e([<span class=\"code-number\">163</span>])},ut=[<span class=\"code-number\">128</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">16</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">1</span>],dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">1</span>,i=<span class=\"code-number\">0</span>;i&lt;ut.length&amp;&amp;!(e&amp;ut[i]);i++)t++;<span class=\"code-keyword\">return</span> t}(e[t]),a=e.subarray(t,t+r);<span class=\"code-keyword\">return</span> i&amp;&amp;((a=<span class=\"code-built_in\">Array</span>.prototype.slice.call(e,t,t+r))[<span class=\"code-number\">0</span>]^=ut[r<span class=\"code-number\">-1</span>]),{<span class=\"code-attr\">length</span>:r,<span class=\"code-attr\">value</span>:et(a,{<span class=\"code-attr\">signed</span>:n}),<span class=\"code-attr\">bytes</span>:a}},lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> t?t.match(<span class=\"code-regexp\">/.{1,2}/g</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e(t)})):<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?{}:t).le,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i&amp;&amp;i;(<span class=\"code-string\">\"bigint\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;e!=e)&amp;&amp;(e=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r,a=(r=e=Je(e),<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.toString(<span class=\"code-number\">2</span>).length}(r)/<span class=\"code-number\">8</span>)),s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ArrayBuffer</span>(a)),o=<span class=\"code-number\">0</span>;o&lt;a;o++){<span class=\"code-keyword\">var</span> u=n?o:<span class=\"code-built_in\">Math</span>.abs(o+<span class=\"code-number\">1</span>-s.length);s[u]=<span class=\"code-built_in\">Number</span>(e/Ze[o]&amp;Je(<span class=\"code-number\">255</span>)),e&lt;<span class=\"code-number\">0</span>&amp;&amp;(s[u]=<span class=\"code-built_in\">Math</span>.abs(~s[u]),s[u]-=<span class=\"code-number\">0</span>===o?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>)}<span class=\"code-keyword\">return</span> s}(t):t},ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(n&gt;=i.length)<span class=\"code-keyword\">return</span> i.length;<span class=\"code-keyword\">var</span> r=dt(i,n,!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">if</span>(it(t.bytes,r.bytes))<span class=\"code-keyword\">return</span> n;<span class=\"code-keyword\">var</span> a=dt(i,n+r.length);<span class=\"code-keyword\">return</span> e(t,i,n+a.length+a.value+r.length)},ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Array</span>.isArray(e)?e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> lt(e)})):[lt(e)]}(i),t=$e(t);<span class=\"code-keyword\">var</span> n=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> n;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;t.length;){<span class=\"code-keyword\">var</span> a=dt(t,r,!<span class=\"code-number\">1</span>),s=dt(t,r+a.length),o=r+a.length+s.length;<span class=\"code-number\">127</span>===s.value&amp;&amp;(s.value=ht(a,t,o),s.value!==t.length&amp;&amp;(s.value-=o));<span class=\"code-keyword\">var</span> u=o+s.value&gt;t.length?t.length:o+s.value,d=t.subarray(o,u);it(i[<span class=\"code-number\">0</span>],a.bytes)&amp;&amp;(<span class=\"code-number\">1</span>===i.length?n.push(d):n=n.concat(e(d,i.slice(<span class=\"code-number\">1</span>)))),r+=a.length+s.length+d.length}<span class=\"code-keyword\">return</span> n},ft=$e([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),mt=$e([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),pt=$e([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>]),gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">1</span>;i&lt;e.length<span class=\"code-number\">-2</span>;)it(e.subarray(i,i+<span class=\"code-number\">3</span>),pt)&amp;&amp;(t.push(i+<span class=\"code-number\">2</span>),i++),i++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===t.length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n=e.length-t.length,r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;n;a++,i++)a===t[<span class=\"code-number\">0</span>]&amp;&amp;(a++,t.shift()),r[i]=e[a];<span class=\"code-keyword\">return</span> r},yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>),e=$e(e),i=[].concat(i);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">0</span>;a&lt;e.length&amp;&amp;(s&lt;n||r);){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(it(e.subarray(a),ft)?o=<span class=\"code-number\">4</span>:it(e.subarray(a),mt)&amp;&amp;(o=<span class=\"code-number\">3</span>),o){<span class=\"code-keyword\">if</span>(s++,r)<span class=\"code-keyword\">return</span> gt(e.subarray(r,a));<span class=\"code-keyword\">var</span> u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-string\">\"h264\"</span>===t?u=<span class=\"code-number\">31</span>&amp;e[a+o]:<span class=\"code-string\">\"h265\"</span>===t&amp;&amp;(u=e[a+o]&gt;&gt;<span class=\"code-number\">1</span>&amp;<span class=\"code-number\">63</span>),<span class=\"code-number\">-1</span>!==i.indexOf(u)&amp;&amp;(r=a+o),a+=o+(<span class=\"code-string\">\"h264\"</span>===t?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>)}<span class=\"code-keyword\">else</span> a++}<span class=\"code-keyword\">return</span> e.subarray(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>)},vt={<span class=\"code-attr\">webm</span>:$e([<span class=\"code-number\">119</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">98</span>,<span class=\"code-number\">109</span>]),<span class=\"code-attr\">matroska</span>:$e([<span class=\"code-number\">109</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">107</span>,<span class=\"code-number\">97</span>]),<span class=\"code-attr\">flac</span>:$e([<span class=\"code-number\">102</span>,<span class=\"code-number\">76</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">67</span>]),<span class=\"code-attr\">ogg</span>:$e([<span class=\"code-number\">79</span>,<span class=\"code-number\">103</span>,<span class=\"code-number\">103</span>,<span class=\"code-number\">83</span>]),<span class=\"code-attr\">ac3</span>:$e([<span class=\"code-number\">11</span>,<span class=\"code-number\">119</span>]),<span class=\"code-attr\">riff</span>:$e([<span class=\"code-number\">82</span>,<span class=\"code-number\">73</span>,<span class=\"code-number\">70</span>,<span class=\"code-number\">70</span>]),<span class=\"code-attr\">avi</span>:$e([<span class=\"code-number\">65</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">73</span>]),<span class=\"code-attr\">wav</span>:$e([<span class=\"code-number\">87</span>,<span class=\"code-number\">65</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">69</span>]),<span class=\"code-string\">\"3gp\"</span>:$e([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>,<span class=\"code-number\">51</span>,<span class=\"code-number\">103</span>]),<span class=\"code-attr\">mp4</span>:$e([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>]),<span class=\"code-attr\">fmp4</span>:$e([<span class=\"code-number\">115</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>]),<span class=\"code-attr\">mov</span>:$e([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>,<span class=\"code-number\">113</span>,<span class=\"code-number\">116</span>])},_t={<span class=\"code-attr\">aac</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=rt(e);<span class=\"code-keyword\">return</span> it(e,[<span class=\"code-number\">255</span>,<span class=\"code-number\">16</span>],{<span class=\"code-attr\">offset</span>:t,<span class=\"code-attr\">mask</span>:[<span class=\"code-number\">255</span>,<span class=\"code-number\">22</span>]})},<span class=\"code-attr\">mp3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=rt(e);<span class=\"code-keyword\">return</span> it(e,[<span class=\"code-number\">255</span>,<span class=\"code-number\">2</span>],{<span class=\"code-attr\">offset</span>:t,<span class=\"code-attr\">mask</span>:[<span class=\"code-number\">255</span>,<span class=\"code-number\">6</span>]})},<span class=\"code-attr\">webm</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=ct(e,[ot.EBML,ot.DocType])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> it(t,vt.webm)},<span class=\"code-attr\">mkv</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=ct(e,[ot.EBML,ot.DocType])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> it(t,vt.matroska)},<span class=\"code-attr\">mp4</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!_t[<span class=\"code-string\">\"3gp\"</span>](e)&amp;&amp;!_t.mov(e)&amp;&amp;(it(e,vt.mp4,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})||it(e,vt.fmp4,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>}))},<span class=\"code-attr\">mov</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it(e,vt.mov,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})},<span class=\"code-string\">\"3gp\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it(e,vt[<span class=\"code-string\">\"3gp\"</span>],{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})},<span class=\"code-attr\">ac3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=rt(e);<span class=\"code-keyword\">return</span> it(e,vt.ac3,{<span class=\"code-attr\">offset</span>:t})},<span class=\"code-attr\">ts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.length&lt;<span class=\"code-number\">189</span>&amp;&amp;e.length&gt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-number\">71</span>===e[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">188</span>&lt;e.length&amp;&amp;t&lt;<span class=\"code-number\">188</span>;){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>===e[t]&amp;&amp;<span class=\"code-number\">71</span>===e[t+<span class=\"code-number\">188</span>])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;t+=<span class=\"code-number\">1</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">flac</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=rt(e);<span class=\"code-keyword\">return</span> it(e,vt.flac,{<span class=\"code-attr\">offset</span>:t})},<span class=\"code-attr\">ogg</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it(e,vt.ogg)},<span class=\"code-attr\">avi</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it(e,vt.riff)&amp;&amp;it(e,vt.avi,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">8</span>})},<span class=\"code-attr\">wav</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> it(e,vt.riff)&amp;&amp;it(e,vt.wav,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">8</span>})},<span class=\"code-attr\">h264</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> yt(e,<span class=\"code-string\">\"h264\"</span>,<span class=\"code-number\">7</span>,<span class=\"code-number\">3</span>)}(e).length},<span class=\"code-attr\">h265</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> yt(e,<span class=\"code-string\">\"h265\"</span>,[<span class=\"code-number\">32</span>,<span class=\"code-number\">33</span>],<span class=\"code-number\">3</span>)}(e).length}},bt=<span class=\"code-built_in\">Object</span>.keys(_t).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"ts\"</span>!==e&amp;&amp;<span class=\"code-string\">\"h264\"</span>!==e&amp;&amp;<span class=\"code-string\">\"h265\"</span>!==e})).concat([<span class=\"code-string\">\"ts\"</span>,<span class=\"code-string\">\"h264\"</span>,<span class=\"code-string\">\"h265\"</span>]);bt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=_t[e];_t[e]=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t($e(e))}}));<span class=\"code-keyword\">var</span> Tt,St=_t,It=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=$e(e);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;bt.length;t++){<span class=\"code-keyword\">var</span> i=bt[t];<span class=\"code-keyword\">if</span>(St[i](e))<span class=\"code-keyword\">return</span> i}<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>},wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> st(e,[<span class=\"code-string\">\"moof\"</span>]).length&gt;<span class=\"code-number\">0</span>},Lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>===e.readyState)<span class=\"code-keyword\">return</span> t()},kt=u.default.EventTarget,At=u.default.mergeOptions,Et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byterange.offset+e.byterange.length<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">return</span> e.uri+<span class=\"code-string\">\"-\"</span>+e.byterange.offset+<span class=\"code-string\">\"-\"</span>+t},Pt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> e){<span class=\"code-keyword\">var</span> s=e[a].sidx;<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=Et(s);<span class=\"code-keyword\">if</span>(!t[o])<span class=\"code-keyword\">break</span>;i=t[o].sidxInfo,n=s,(<span class=\"code-built_in\">Boolean</span>(!i.map&amp;&amp;!n.map)||<span class=\"code-built_in\">Boolean</span>(i.map&amp;&amp;n.map&amp;&amp;i.map.byterange.offset===n.map.byterange.offset&amp;&amp;i.map.byterange.length===n.map.byterange.length))&amp;&amp;i.uri===n.uri&amp;&amp;i.byterange.offset===n.byterange.offset&amp;&amp;i.byterange.length===n.byterange.length&amp;&amp;(r[o]=t[o])}}<span class=\"code-keyword\">return</span> r},Ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n={}),(a=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).masterPlaylistLoader_=r||d(a),r||(a.isMaster_=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> s=n,o=s.withCredentials,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==o&amp;&amp;o,l=s.handleManifestRedirects,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==l&amp;&amp;l;<span class=\"code-keyword\">if</span>(a.vhs_=i,a.withCredentials=u,a.handleManifestRedirects=h,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or object is required\"</span>);<span class=\"code-keyword\">return</span> a.on(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshXml_()})),a.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshMedia_(a.media().id)})),a.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,a.loadedPlaylists_={},a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.requestErrored_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-keyword\">this</span>.request||(<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e?(<span class=\"code-keyword\">this</span>.error=<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> e||e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Error</span>?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DASH request error at URL: \"</span>+t.uri,<span class=\"code-attr\">response</span>:t.response,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>}:e,i&amp;&amp;(<span class=\"code-keyword\">this</span>.state=i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>),!<span class=\"code-number\">0</span>):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>)},i.addSidxSegments_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>,r=e.sidx&amp;&amp;Et(e.sidx);<span class=\"code-keyword\">if</span>(e.sidx&amp;&amp;r&amp;&amp;!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_[r]){<span class=\"code-keyword\">var</span> a=p(<span class=\"code-keyword\">this</span>.handleManifestRedirects,e.sidx.resolvedUri),s=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_;s[r]={<span class=\"code-attr\">sidxInfo</span>:e.sidx};<span class=\"code-keyword\">var</span> u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a,o</span>)</span>{<span class=\"code-keyword\">if</span>(!n.requestErrored_(a,o,t)){<span class=\"code-keyword\">var</span> u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">references</span>:[],<span class=\"code-attr\">referenceId</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">timescale</span>:t.getUint32(<span class=\"code-number\">8</span>)},n=<span class=\"code-number\">12</span>;<span class=\"code-number\">0</span>===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+<span class=\"code-number\">4</span>),n+=<span class=\"code-number\">8</span>):(i.earliestPresentationTime=t.getUint32(n)*Ke+t.getUint32(n+<span class=\"code-number\">4</span>),i.firstOffset=t.getUint32(n+<span class=\"code-number\">8</span>)*Ke+t.getUint32(n+<span class=\"code-number\">12</span>),n+=<span class=\"code-number\">16</span>),n+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">var</span> r=t.getUint16(n);<span class=\"code-keyword\">for</span>(n+=<span class=\"code-number\">2</span>;r&gt;<span class=\"code-number\">0</span>;n+=<span class=\"code-number\">12</span>,r--)i.references.push({<span class=\"code-attr\">referenceType</span>:(<span class=\"code-number\">128</span>&amp;e[n])&gt;&gt;&gt;<span class=\"code-number\">7</span>,<span class=\"code-attr\">referencedSize</span>:<span class=\"code-number\">2147483647</span>&amp;t.getUint32(n),<span class=\"code-attr\">subsegmentDuration</span>:t.getUint32(n+<span class=\"code-number\">4</span>),<span class=\"code-attr\">startsWithSap</span>:!!(<span class=\"code-number\">128</span>&amp;e[n+<span class=\"code-number\">8</span>]),<span class=\"code-attr\">sapType</span>:(<span class=\"code-number\">112</span>&amp;e[n+<span class=\"code-number\">8</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">sapDeltaTime</span>:<span class=\"code-number\">268435455</span>&amp;t.getUint32(n+<span class=\"code-number\">8</span>)});<span class=\"code-keyword\">return</span> i}($e(o.response).subarray(<span class=\"code-number\">8</span>));<span class=\"code-keyword\">return</span> s[r].sidx=u,Ye(e,u,e.sidx.resolvedUri),i(!<span class=\"code-number\">0</span>)}};<span class=\"code-keyword\">this</span>.request=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=[],a=!<span class=\"code-number\">1</span>,s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,n,r</span>)</span>{<span class=\"code-keyword\">return</span> t.abort(),a=!<span class=\"code-number\">0</span>,i(e,t,n,r)},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!a){<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r);<span class=\"code-keyword\">var</span> i=t.responseText.substring(r&amp;&amp;r.byteLength||<span class=\"code-number\">0</span>,t.responseText.length);<span class=\"code-keyword\">if</span>(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">arguments</span>.length,t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(e),i=<span class=\"code-number\">0</span>;i&lt;e;i++)t[i]=<span class=\"code-built_in\">arguments</span>[i];<span class=\"code-keyword\">if</span>((t=t.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;(e.byteLength||e.length)&amp;&amp;<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e}))).length&lt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> $e(t[<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">var</span> n=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e+(t.byteLength||t.length)}),<span class=\"code-number\">0</span>),r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=$e(e),r.set(e,a),a+=e.byteLength})),r}(r,tt(i,!<span class=\"code-number\">0</span>)),n=n||rt(r),r.length&lt;<span class=\"code-number\">10</span>||n&amp;&amp;r.length&lt;n+<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span> Lt(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r)}));<span class=\"code-keyword\">var</span> o=It(r);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"ts\"</span>===o&amp;&amp;r.length&lt;<span class=\"code-number\">188</span>||!o&amp;&amp;r.length&lt;<span class=\"code-number\">376</span>?Lt(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r)})):s(<span class=\"code-literal\">null</span>,t,o,r)}},u=t({<span class=\"code-attr\">uri</span>:e,<span class=\"code-attr\">beforeSend</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.overrideMimeType(<span class=\"code-string\">\"text/plain; charset=x-user-defined\"</span>),e.addEventListener(<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> t.total,t.loaded,ie(e,<span class=\"code-literal\">null</span>,{<span class=\"code-attr\">statusCode</span>:e.status},o)}))}},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> ie(u,e,t,o)}));<span class=\"code-keyword\">return</span> u}(a,<span class=\"code-keyword\">this</span>.vhs_.xhr,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,r,s</span>)</span>{<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">return</span> u(t,i);<span class=\"code-keyword\">if</span>(!r||<span class=\"code-string\">\"mp4\"</span>!==r)<span class=\"code-keyword\">return</span> u({<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Unsupported \"</span>+(r||<span class=\"code-string\">\"unknown\"</span>)+<span class=\"code-string\">\" container type for sidx segment at URL: \"</span>+a,<span class=\"code-attr\">response</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},i);<span class=\"code-keyword\">var</span> o=e.sidx.byterange,d=o.offset,l=o.length;<span class=\"code-keyword\">if</span>(s.length&gt;=l+d)<span class=\"code-keyword\">return</span> u(t,{<span class=\"code-attr\">response</span>:s.subarray(d,d+l),<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">uri</span>:i.uri});n.request=n.vhs_.xhr({<span class=\"code-attr\">uri</span>:a,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:re({<span class=\"code-attr\">byterange</span>:e.sidx.byterange})},u)}))}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.mediaRequest_=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i(!<span class=\"code-number\">1</span>)}),<span class=\"code-number\">0</span>)},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-keyword\">this</span>.loadedPlaylists_={},o.default.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaRequest_),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.off()},i.hasPendingRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request||<span class=\"code-keyword\">this</span>.mediaRequest_},i.stopRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.state;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists[e]}<span class=\"code-keyword\">var</span> n=!<span class=\"code-keyword\">this</span>.media_||e.id!==<span class=\"code-keyword\">this</span>.media_.id;<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.id]&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.id].endList)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(n&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));n&amp;&amp;(<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.addSidxSegments_(e,i,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{t.haveMetadata({<span class=\"code-attr\">startingState</span>:i,<span class=\"code-attr\">playlist</span>:e})})))},i.haveMetadata=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.startingState,i=e.playlist;<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.loadedPlaylists_[i.id]=i,<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.refreshMedia_(i.id),<span class=\"code-string\">\"HAVE_MASTER\"</span>===t?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.stopRequest(),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?i.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.load()}),n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?i&amp;&amp;!i.endList?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()},i.start=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.isMaster_?<span class=\"code-keyword\">this</span>.requestMaster_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[<span class=\"code-number\">0</span>])})):<span class=\"code-keyword\">this</span>.mediaRequest_=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.haveMaster_()}),<span class=\"code-number\">0</span>)},i.requestMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">if</span>(!t.requestErrored_(i,n)){<span class=\"code-keyword\">var</span> r=n.responseText!==t.masterPlaylistLoader_.masterXml_;<span class=\"code-keyword\">return</span> t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&amp;&amp;n.responseHeaders.date?t.masterLoaded_=<span class=\"code-built_in\">Date</span>.parse(n.responseHeaders.date):t.masterLoaded_=<span class=\"code-built_in\">Date</span>.now(),t.masterPlaylistLoader_.srcUrl=p(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),<span class=\"code-keyword\">void</span> t.syncClientServerClock_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e(n,r)}))):e(n,r)}<span class=\"code-string\">\"HAVE_NOTHING\"</span>===t.state&amp;&amp;(t.started=!<span class=\"code-number\">1</span>)}))},i.syncClientServerClock_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">this</span>,n=(t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.masterXml_,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Fe(e,<span class=\"code-string\">\"UTCTiming\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=Ve(t);<span class=\"code-keyword\">switch</span>(i.schemeIdUri){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2012\"</span>:i.method=<span class=\"code-string\">\"HEAD\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2012\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2012\"</span>:i.method=<span class=\"code-string\">\"GET\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2012\"</span>:i.method=<span class=\"code-string\">\"DIRECT\"</span>,i.value=<span class=\"code-built_in\">Date</span>.parse(i.value);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-ntp:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:ntp:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:sntp:2014\"</span>:<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"UNSUPPORTED_UTC_TIMING_SCHEME\"</span>)}<span class=\"code-keyword\">return</span> i}(Xe(t)));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===n?(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_=<span class=\"code-keyword\">this</span>.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-string\">\"DIRECT\"</span>===n.method?(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_=n.value-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:m(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,n.value),<span class=\"code-attr\">method</span>:n.method,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,r</span>)</span>{<span class=\"code-keyword\">if</span>(i.request){<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">return</span> i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e();<span class=\"code-keyword\">var</span> a;a=<span class=\"code-string\">\"HEAD\"</span>===n.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class=\"code-built_in\">Date</span>.parse(r.responseHeaders.date):i.masterLoaded_:<span class=\"code-built_in\">Date</span>.parse(r.responseText),i.masterPlaylistLoader_.clientOffset_=a-<span class=\"code-built_in\">Date</span>.now(),e()}})))},i.haveMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,<span class=\"code-keyword\">this</span>.isMaster_?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.childPlaylist_)},i.handleMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> e,t,i,n=(e={<span class=\"code-attr\">masterXml</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.masterXml_,<span class=\"code-attr\">srcUrl</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,<span class=\"code-attr\">clientOffset</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_,<span class=\"code-attr\">sidxMapping</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_},i=Qe(e.masterXml,{<span class=\"code-attr\">manifestUri</span>:t=e.srcUrl,<span class=\"code-attr\">clientOffset</span>:e.clientOffset,<span class=\"code-attr\">sidxMapping</span>:e.sidxMapping}),E(i,t),i),r=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master;r&amp;&amp;(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=!<span class=\"code-number\">0</span>,r=At(e,{<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),a=<span class=\"code-number\">0</span>;a&lt;t.playlists.length;a++){<span class=\"code-keyword\">var</span> s=t.playlists[a];<span class=\"code-keyword\">if</span>(s.sidx){<span class=\"code-keyword\">var</span> o=Et(s.sidx);i&amp;&amp;i[o]&amp;&amp;Ye(s,i[o].sidx,s.sidx.resolvedUri)}<span class=\"code-keyword\">var</span> u=O(r,s);u&amp;&amp;(r=u,n=!<span class=\"code-number\">1</span>)}<span class=\"code-keyword\">return</span> k(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,a</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists[<span class=\"code-number\">0</span>].id,o=O(r,e.playlists[<span class=\"code-number\">0</span>]);o&amp;&amp;((r=o).mediaGroups[t][i][a].playlists[<span class=\"code-number\">0</span>]=r.playlists[s],n=!<span class=\"code-number\">1</span>)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&amp;&amp;(n=!<span class=\"code-number\">1</span>),n?<span class=\"code-literal\">null</span>:r}(r,n,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_)),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master=n||r;<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.locations&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.locations[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> a&amp;&amp;a!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl=a),(!r||n&amp;&amp;r.minimumUpdatePeriod!==n.minimumUpdatePeriod)&amp;&amp;<span class=\"code-keyword\">this</span>.updateMinimumUpdatePeriodTimeout_(),<span class=\"code-built_in\">Boolean</span>(n)},i.updateMinimumUpdatePeriodTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_);<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">i</span>)</span>{e.minimumUpdatePeriodTimeout_=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>),t(i)}),i)},i=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.minimumUpdatePeriod;i&gt;<span class=\"code-number\">0</span>?t(i):<span class=\"code-number\">0</span>===i&amp;&amp;(<span class=\"code-keyword\">this</span>.media()?t(<span class=\"code-number\">1e3</span>*<span class=\"code-keyword\">this</span>.media().targetDuration):<span class=\"code-keyword\">this</span>.one(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t(<span class=\"code-number\">1e3</span>*e.media().targetDuration)})))},i.refreshXml_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.requestMaster_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a;i&amp;&amp;(e.media_&amp;&amp;(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=Pt(n.playlists,r),k(n,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists;a=At(a,Pt(s,r))}})),a),e.addSidxSegments_(e.media(),e.state,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"refreshMedia_ must take a media id\"</span>);<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.isMaster_&amp;&amp;<span class=\"code-keyword\">this</span>.handleMaster_();<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists,n=!<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media_!==i[e];n?<span class=\"code-keyword\">this</span>.media_=i[e]:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>),<span class=\"code-keyword\">this</span>.media().endList||(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>)}),D(<span class=\"code-keyword\">this</span>.media(),<span class=\"code-built_in\">Boolean</span>(n)))),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)},t}(kt),Ut={<span class=\"code-attr\">GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">MAX_GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">60</span>,<span class=\"code-attr\">BACK_BUFFER_LENGTH</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">GOAL_BUFFER_LENGTH_RATE</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">INITIAL_BANDWIDTH</span>:<span class=\"code-number\">4194304</span>,<span class=\"code-attr\">BANDWIDTH_VARIANCE</span>:<span class=\"code-number\">1.2</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MAX_BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">16</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE_RATE</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">BUFFER_HIGH_WATER_LINE</span>:<span class=\"code-number\">30</span>},Ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ArrayBuffer</span>(e.length)),i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t[i]=e.charCodeAt(i);<span class=\"code-keyword\">return</span> t.buffer},Dt=[],xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,u=e.onTrackInfo,d=e.onAudioTimingInfo,l=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,f=e.onId3,m=e.onCaptions,p=e.onDone,g={<span class=\"code-attr\">isPartial</span>:a,<span class=\"code-attr\">buffer</span>:[]};<span class=\"code-keyword\">if</span>(t.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Tt&amp;&amp;(<span class=\"code-string\">\"data\"</span>===e.data.action&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,u=n.metadata,d=n.videoFrameDtsTime,l=n.videoFramePtsTime;t.buffer.push({<span class=\"code-attr\">captions</span>:s,<span class=\"code-attr\">captionStreams</span>:o,<span class=\"code-attr\">metadata</span>:u});<span class=\"code-keyword\">var</span> h=e.data.segment.boxes||{<span class=\"code-attr\">data</span>:e.data.segment.data},c={<span class=\"code-attr\">type</span>:r,<span class=\"code-attr\">data</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(h.data,h.data.byteOffset,h.data.byteLength),<span class=\"code-attr\">initSegment</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.data,a.byteOffset,a.byteLength)};<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d&amp;&amp;(c.videoFrameDtsTime=d),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==l&amp;&amp;(c.videoFramePtsTime=l),i(c)}(e,g,o),<span class=\"code-string\">\"trackinfo\"</span>===e.data.action&amp;&amp;u(e.data.trackInfo),<span class=\"code-string\">\"gopInfo\"</span>===e.data.action&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.gopInfo=e.data.gopInfo}(e,g),<span class=\"code-string\">\"audioTimingInfo\"</span>===e.data.action&amp;&amp;d(e.data.audioTimingInfo),<span class=\"code-string\">\"videoTimingInfo\"</span>===e.data.action&amp;&amp;l(e.data.videoTimingInfo),<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>===e.data.action&amp;&amp;h(e.data.videoSegmentTimingInfo),<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>===e.data.action&amp;&amp;c(e.data.audioSegmentTimingInfo),<span class=\"code-string\">\"id3Frame\"</span>===e.data.action&amp;&amp;f([e.data.id3Frame],e.data.id3Frame.dispatchType),<span class=\"code-string\">\"caption\"</span>===e.data.action&amp;&amp;m(e.data.caption),<span class=\"code-string\">\"transmuxed\"</span>===e.data.type&amp;&amp;(t.onmessage=<span class=\"code-literal\">null</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({<span class=\"code-attr\">transmuxedData</span>:g,<span class=\"code-attr\">callback</span>:p}),Rt()))},n&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setAudioAppendStart\"</span>,<span class=\"code-attr\">appendStart</span>:n}),<span class=\"code-built_in\">Array</span>.isArray(r)&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"alignGopsWith\"</span>,<span class=\"code-attr\">gopsToAlignWith</span>:r}),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==s&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setRemux\"</span>,<span class=\"code-attr\">remux</span>:s}),i.byteLength){<span class=\"code-keyword\">var</span> y=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?i:i.buffer,v=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?<span class=\"code-number\">0</span>:i.byteOffset;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"push\"</span>,<span class=\"code-attr\">data</span>:y,<span class=\"code-attr\">byteOffset</span>:v,<span class=\"code-attr\">byteLength</span>:i.byteLength},[y])}t.postMessage({<span class=\"code-attr\">action</span>:a?<span class=\"code-string\">\"partialFlush\"</span>:<span class=\"code-string\">\"flush\"</span>})},Rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Tt=<span class=\"code-literal\">null</span>,Dt.length&amp;&amp;(<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span>(Tt=Dt.shift())?Tt():xt(Tt))},Mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:t}),Rt()},Bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!Tt)<span class=\"code-keyword\">return</span> Tt=e,<span class=\"code-keyword\">void</span> Mt(t,e);Dt.push(Mt.bind(<span class=\"code-literal\">null</span>,t,e))},Ft=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Bt(<span class=\"code-string\">\"reset\"</span>,e)},Nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">this</span>.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class=\"code-keyword\">this</span>.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class=\"code-number\">1</span>),n&gt;<span class=\"code-number\">-1</span>)},<span class=\"code-keyword\">this</span>.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a;<span class=\"code-keyword\">if</span>(i=e[t])<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">for</span>(a=[],n=<span class=\"code-built_in\">arguments</span>.length,n=<span class=\"code-number\">1</span>;n&lt;<span class=\"code-built_in\">arguments</span>.length;++n)a.push(<span class=\"code-built_in\">arguments</span>[n]);<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].apply(<span class=\"code-keyword\">this</span>,a)}},<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e={}}}};Nt.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.flush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.partialFlush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"endedtimeline\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.endTimeline(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"reset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.reset(t)})),e},Nt.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e)},Nt.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,e)},Nt.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,e)},Nt.prototype.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,e)},Nt.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>,e)};<span class=\"code-keyword\">var</span> qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(e&gt;t&amp;&amp;(i=<span class=\"code-number\">-1</span>);<span class=\"code-built_in\">Math</span>.abs(t-e)&gt;<span class=\"code-number\">4294967296</span>;)e+=<span class=\"code-number\">8589934592</span>*i;<span class=\"code-keyword\">return</span> e};<span class=\"code-keyword\">new</span> Nt;<span class=\"code-keyword\">var</span> Wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">return</span>(t&lt;&lt;=<span class=\"code-number\">8</span>)|e[<span class=\"code-number\">2</span>]},Vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!(<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">1</span>])},Ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(t+=e[<span class=\"code-number\">4</span>]+<span class=\"code-number\">1</span>),t},Gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">switch</span>(e){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"sei_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},jt={<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Wt(e);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?<span class=\"code-string\">\"pat\"</span>:i===t?<span class=\"code-string\">\"pmt\"</span>:t?<span class=\"code-string\">\"pes\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parsePat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Vt(e),i=<span class=\"code-number\">4</span>+Ht(e);<span class=\"code-keyword\">return</span> t&amp;&amp;(i+=e[i]+<span class=\"code-number\">1</span>),(<span class=\"code-number\">31</span>&amp;e[i+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[i+<span class=\"code-number\">11</span>]},<span class=\"code-attr\">parsePmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={},i=Vt(e),n=<span class=\"code-number\">4</span>+Ht(e);<span class=\"code-keyword\">if</span>(i&amp;&amp;(n+=e[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">1</span>&amp;e[n+<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">var</span> r;r=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">11</span>]);a&lt;r;){<span class=\"code-keyword\">var</span> s=n+a;t[(<span class=\"code-number\">31</span>&amp;e[s+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">2</span>]]=e[s],a+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[s+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">4</span>])}<span class=\"code-keyword\">return</span> t}},<span class=\"code-attr\">parsePayloadUnitStartIndicator</span>:Vt,<span class=\"code-attr\">parsePesType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">switch</span>(t[Wt(e)]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">27</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">15</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">21</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">parsePesTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!Vt(e))<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+Ht(e);<span class=\"code-keyword\">if</span>(t&gt;=e.byteLength)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i,n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">192</span>&amp;(i=e[t+<span class=\"code-number\">7</span>])&amp;&amp;((n={}).pts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.pts*=<span class=\"code-number\">4</span>,n.pts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,n.dts=n.pts,<span class=\"code-number\">64</span>&amp;i&amp;&amp;(n.dts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.dts*=<span class=\"code-number\">4</span>,n.dts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),n},<span class=\"code-attr\">videoPacketContainsKeyFrame</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+Ht(e),i=e.subarray(t),n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=!<span class=\"code-number\">1</span>;r&lt;i.byteLength<span class=\"code-number\">-3</span>;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===i[r+<span class=\"code-number\">2</span>]){n=r+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;n&lt;i.byteLength;)<span class=\"code-keyword\">switch</span>(i[n]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]){n+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n++;<span class=\"code-keyword\">break</span>}r+<span class=\"code-number\">3</span>!==n<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===Gt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">do</span>{n++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===Gt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:n+=<span class=\"code-number\">3</span>}<span class=\"code-keyword\">return</span> i=i.subarray(r),n-=r,r=<span class=\"code-number\">0</span>,i&amp;&amp;i.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===Gt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),a}},zt=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>],Xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span> i=i&gt;=<span class=\"code-number\">0</span>?i:<span class=\"code-number\">0</span>,(<span class=\"code-number\">16</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">4</span>?i+<span class=\"code-number\">20</span>:i+<span class=\"code-number\">10</span>},Qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.length-i&lt;<span class=\"code-number\">10</span>||t[i]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?i:e(t,i+=Xt(t,i))},Yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},Kt={<span class=\"code-attr\">isLikelyAacData</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Qt(e,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e.length&gt;=t+<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-number\">255</span>==(<span class=\"code-number\">255</span>&amp;e[t])&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])&amp;&amp;<span class=\"code-number\">16</span>==(<span class=\"code-number\">22</span>&amp;e[t+<span class=\"code-number\">1</span>])},<span class=\"code-attr\">parseId3TagSize</span>:Xt,<span class=\"code-attr\">parseAdtsSize</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-number\">224</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,n=e[t+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>&amp;e[t+<span class=\"code-number\">3</span>]|n|i},<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e[t]===<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">1</span>]===<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">2</span>]===<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?<span class=\"code-string\">\"timed-metadata\"</span>:!<span class=\"code-number\">0</span>&amp;e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseSampleRate</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">5</span>&lt;e.length;){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;e[t+<span class=\"code-number\">1</span>]))<span class=\"code-keyword\">return</span> zt[(<span class=\"code-number\">60</span>&amp;e[t+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>];t++}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseAacTimestamp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;t=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">5</span>]&amp;&amp;(t+=<span class=\"code-number\">4</span>,t+=Yt(e.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((i=Yt(e.subarray(t+<span class=\"code-number\">4</span>,t+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"PRIV\"</span>===<span class=\"code-built_in\">String</span>.fromCharCode(e[t],e[t+<span class=\"code-number\">1</span>],e[t+<span class=\"code-number\">2</span>],e[t+<span class=\"code-number\">3</span>])){n=e.subarray(t+<span class=\"code-number\">10</span>,t+i+<span class=\"code-number\">10</span>);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.byteLength;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===n[r]){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===<span class=\"code-built_in\">unescape</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r}(n,<span class=\"code-number\">0</span>,r))){<span class=\"code-keyword\">var</span> a=n.subarray(r+<span class=\"code-number\">1</span>),s=(<span class=\"code-number\">1</span>&amp;a[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|a[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|a[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|a[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|a[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span>(s*=<span class=\"code-number\">4</span>)+(<span class=\"code-number\">3</span>&amp;a[<span class=\"code-number\">7</span>])}<span class=\"code-keyword\">break</span>}}t+=<span class=\"code-number\">10</span>,t+=i}<span class=\"code-keyword\">while</span>(t&lt;e.byteLength);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},$t=<span class=\"code-number\">9e4</span>,Jt=$t,Zt=(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e*$t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/$t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},qt),ei={};ei.ts=jt,ei.aac=Kt;<span class=\"code-keyword\">var</span> ti,ii=Jt,ni=<span class=\"code-number\">188</span>,ri=<span class=\"code-number\">71</span>,ai=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=ni,d=!<span class=\"code-number\">1</span>;u&lt;=e.byteLength;)<span class=\"code-keyword\">if</span>(e[o]!==ri||e[u]!==ri&amp;&amp;u!==e.byteLength)o++,u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(o,u),ei.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(d)<span class=\"code-keyword\">break</span>;o+=ni,u+=ni}<span class=\"code-keyword\">for</span>(o=(u=e.byteLength)-ni,d=!<span class=\"code-number\">1</span>;o&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(e[o]!==ri||e[u]!==ri&amp;&amp;u!==e.byteLength)o--,u--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(o,u),ei.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(d)<span class=\"code-keyword\">break</span>;o-=ni,u-=ni}},si=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o,u,d,l=<span class=\"code-number\">0</span>,h=ni,c=!<span class=\"code-number\">1</span>,f={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>};h&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(e[l]!==ri||e[h]!==ri)l++,h++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(l,h),ei.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:<span class=\"code-keyword\">if</span>(r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;(a&amp;&amp;!c&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),c=!<span class=\"code-number\">0</span>),!i.firstKeyFrame)){<span class=\"code-keyword\">if</span>(a&amp;&amp;<span class=\"code-number\">0</span>!==f.size){<span class=\"code-keyword\">for</span>(o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(f.size),u=<span class=\"code-number\">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class=\"code-keyword\">if</span>(ei.ts.videoPacketContainsKeyFrame(o)){<span class=\"code-keyword\">var</span> m=ei.ts.parsePesTime(o);m?(i.firstKeyFrame=m,i.firstKeyFrame.type=<span class=\"code-string\">\"video\"</span>):<span class=\"code-built_in\">console</span>.warn(<span class=\"code-string\">\"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.\"</span>)}f.size=<span class=\"code-number\">0</span>}f.data.push(n),f.size+=n.byteLength}}<span class=\"code-keyword\">if</span>(c&amp;&amp;i.firstKeyFrame)<span class=\"code-keyword\">break</span>;l+=ni,h+=ni}<span class=\"code-keyword\">for</span>(l=(h=e.byteLength)-ni,c=!<span class=\"code-number\">1</span>;l&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(e[l]!==ri||e[h]!==ri)l--,h--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(n=e.subarray(l,h),ei.ts.parseType(n,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pes\"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),c=!<span class=\"code-number\">0</span>)}<span class=\"code-keyword\">if</span>(c)<span class=\"code-keyword\">break</span>;l-=ni,h-=ni}},oi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=ei.aac.isLikelyAacData(e)?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=!<span class=\"code-number\">1</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-literal\">null</span>,a=<span class=\"code-literal\">null</span>,s=<span class=\"code-number\">0</span>,o=<span class=\"code-number\">0</span>;e.length-o&gt;=<span class=\"code-number\">3</span>;){<span class=\"code-keyword\">switch</span>(ei.aac.parseType(e,o)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"timed-metadata\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">10</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=ei.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=ei.aac.parseAacTimestamp(t)),o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"audio\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">7</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=ei.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=ei.aac.parseSampleRate(t)),n++,o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:o++}<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===r||<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> u=ii/r;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">audio</span>:[{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a,<span class=\"code-attr\">pts</span>:a},{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a+<span class=\"code-number\">1024</span>*n*u,<span class=\"code-attr\">pts</span>:a+<span class=\"code-number\">1024</span>*n*u}]}}(e):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">pid</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">table</span>:<span class=\"code-literal\">null</span>},i={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=ni;r&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(e[n]!==ri||e[r]!==ri)n++,r++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(i=e.subarray(n,r),ei.ts.parseType(i,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pat\"</span>:t.pid||(t.pid=ei.ts.parsePat(i));<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pmt\"</span>:t.table||(t.table=ei.ts.parsePmt(i))}<span class=\"code-keyword\">if</span>(t.pid&amp;&amp;t.table)<span class=\"code-keyword\">return</span>;n+=ni,r+=ni}}(e,t),t.table)<span class=\"code-keyword\">if</span>(t.table.hasOwnProperty(n))<span class=\"code-keyword\">switch</span>(t.table[n]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">27</span>:i.video=[],si(e,t,i),<span class=\"code-number\">0</span>===i.video.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.video;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">15</span>:i.audio=[],ai(e,t,i),<span class=\"code-number\">0</span>===i.audio.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.audio}<span class=\"code-keyword\">return</span> i}(e))&amp;&amp;(i.audio||i.video)?(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e.audio&amp;&amp;e.audio.length){<span class=\"code-keyword\">var</span> i=t;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=e.audio[<span class=\"code-number\">0</span>].dts),e.audio.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=Zt(e.dts,i),e.pts=Zt(e.pts,i),e.dtsTime=e.dts/ii,e.ptsTime=e.pts/ii}))}<span class=\"code-keyword\">if</span>(e.video&amp;&amp;e.video.length){<span class=\"code-keyword\">var</span> n=t;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.video[<span class=\"code-number\">0</span>].dts),e.video.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=Zt(e.dts,n),e.pts=Zt(e.pts,n),e.dtsTime=e.dts/ii,e.ptsTime=e.pts/ii})),e.firstKeyFrame){<span class=\"code-keyword\">var</span> r=e.firstKeyFrame;r.dts=Zt(r.dts,n),r.pts=Zt(r.pts,n),r.dtsTime=r.dts/ii,r.ptsTime=r.dts/ii}}}(i,t),i):<span class=\"code-literal\">null</span>},ui=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;&gt;&gt;<span class=\"code-number\">0</span>},di=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">return</span> t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">0</span>]),t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">1</span>]),(t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">2</span>]))+<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">3</span>])},li=ui,hi=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;t.byteLength;)r=li(t[n]&lt;&lt;<span class=\"code-number\">24</span>|t[n+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[n+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[n+<span class=\"code-number\">3</span>]),a=di(t.subarray(n+<span class=\"code-number\">4</span>,n+<span class=\"code-number\">8</span>)),s=r&gt;<span class=\"code-number\">1</span>?n+r:t.byteLength,a===i[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-number\">1</span>===i.length?u.push(t.subarray(n+<span class=\"code-number\">8</span>,s)):(o=e(t.subarray(n+<span class=\"code-number\">8</span>,s),i.slice(<span class=\"code-number\">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class=\"code-keyword\">return</span> u},ci=ui,fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>(<span class=\"code-string\">\"00\"</span>+e.toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)},mi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r;<span class=\"code-keyword\">return</span> i=hi(t,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),n=[].concat.apply([],i.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> hi(t,[<span class=\"code-string\">\"tfhd\"</span>]).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a;<span class=\"code-keyword\">return</span> n=ci(i[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|i[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|i[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|i[<span class=\"code-number\">7</span>]),r=e[n]||<span class=\"code-number\">9e4</span>,(a=<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span>(a=hi(t,[<span class=\"code-string\">\"tfdt\"</span>]).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">return</span> t=e[<span class=\"code-number\">0</span>],i=ci(e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>]),<span class=\"code-number\">1</span>===t&amp;&amp;(i*=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),i+=ci(e[<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">9</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">10</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>])),i}))[<span class=\"code-number\">0</span>])||<span class=\"code-built_in\">isNaN</span>(a)?<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:a)/r}))}))),r=<span class=\"code-built_in\">Math</span>.min.apply(<span class=\"code-literal\">null</span>,n),<span class=\"code-built_in\">isFinite</span>(r)?r:<span class=\"code-number\">0</span>},pi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=hi(e,[<span class=\"code-string\">\"moov\"</span>,<span class=\"code-string\">\"trak\"</span>]),i=[];<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,n,r={},a=hi(e,[<span class=\"code-string\">\"tkhd\"</span>])[<span class=\"code-number\">0</span>];a&amp;&amp;(n=(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class=\"code-number\">0</span>),r.id=<span class=\"code-number\">0</span>===n?t.getUint32(<span class=\"code-number\">12</span>):t.getUint32(<span class=\"code-number\">20</span>));<span class=\"code-keyword\">var</span> s=hi(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"hdlr\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=di(s.subarray(<span class=\"code-number\">8</span>,<span class=\"code-number\">12</span>));r.type=<span class=\"code-string\">\"vide\"</span>===o?<span class=\"code-string\">\"video\"</span>:<span class=\"code-string\">\"soun\"</span>===o?<span class=\"code-string\">\"audio\"</span>:o}<span class=\"code-keyword\">var</span> u=hi(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"minf\"</span>,<span class=\"code-string\">\"stbl\"</span>,<span class=\"code-string\">\"stsd\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(u){<span class=\"code-keyword\">var</span> d=u.subarray(<span class=\"code-number\">8</span>);r.codec=di(d.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>));<span class=\"code-keyword\">var</span> l,h=hi(d,[r.codec])[<span class=\"code-number\">0</span>];h&amp;&amp;(<span class=\"code-regexp\">/^[a-z]vc[1-9]$/i</span>.test(r.codec)?(l=h.subarray(<span class=\"code-number\">78</span>),<span class=\"code-string\">\"avcC\"</span>===di(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">11</span>?(r.codec+=<span class=\"code-string\">\".\"</span>,r.codec+=fi(l[<span class=\"code-number\">9</span>]),r.codec+=fi(l[<span class=\"code-number\">10</span>]),r.codec+=fi(l[<span class=\"code-number\">11</span>])):r.codec=<span class=\"code-string\">\"avc1.4d400d\"</span>):<span class=\"code-regexp\">/^mp4[a,v]$/i</span>.test(r.codec)?(l=h.subarray(<span class=\"code-number\">28</span>),<span class=\"code-string\">\"esds\"</span>===di(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">20</span>&amp;&amp;<span class=\"code-number\">0</span>!==l[<span class=\"code-number\">19</span>]?(r.codec+=<span class=\"code-string\">\".\"</span>+fi(l[<span class=\"code-number\">19</span>]),r.codec+=<span class=\"code-string\">\".\"</span>+fi(l[<span class=\"code-number\">20</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>&amp;<span class=\"code-number\">63</span>).replace(<span class=\"code-regexp\">/^0/</span>,<span class=\"code-string\">\"\"</span>)):r.codec=<span class=\"code-string\">\"mp4a.40.2\"</span>):r.codec=r.codec.toLowerCase())}<span class=\"code-keyword\">var</span> c=hi(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"mdhd\"</span>])[<span class=\"code-number\">0</span>];c&amp;&amp;(r.timescale=ti(c)),i.push(r)})),i},gi=(ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>===e[<span class=\"code-number\">0</span>]?<span class=\"code-number\">12</span>:<span class=\"code-number\">20</span>;<span class=\"code-keyword\">return</span> ci(e[t]&lt;&lt;<span class=\"code-number\">24</span>|e[t+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[t+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[t+<span class=\"code-number\">3</span>])},<span class=\"code-number\">2</span>),yi=<span class=\"code-number\">-101</span>,vi=<span class=\"code-number\">-102</span>,_i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.abort()}))},bi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.timedout?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request timed-out at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:yi,<span class=\"code-attr\">xhr</span>:t}:t.aborted?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request aborted at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:vi,<span class=\"code-attr\">xhr</span>:t}:e?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request errored at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:gi,<span class=\"code-attr\">xhr</span>:t}:<span class=\"code-literal\">null</span>},Ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn,c=t.map&amp;&amp;t.map.tracks||{},f=<span class=\"code-built_in\">Boolean</span>(c.audio&amp;&amp;c.video),m=a.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"start\"</span>),p=a.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"end\"</span>),g=a.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"start\"</span>),y=a.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"end\"</span>);<span class=\"code-keyword\">if</span>(!n&amp;&amp;!t.lastReachedChar){<span class=\"code-keyword\">var</span> v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=oi(e,t*Jt);<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n={<span class=\"code-attr\">hasVideo</span>:i.video&amp;&amp;<span class=\"code-number\">2</span>===i.video.length||!<span class=\"code-number\">1</span>,<span class=\"code-attr\">hasAudio</span>:i.audio&amp;&amp;<span class=\"code-number\">2</span>===i.audio.length||!<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> n.hasVideo&amp;&amp;(n.videoStart=i.video[<span class=\"code-number\">0</span>].ptsTime),n.hasAudio&amp;&amp;(n.audioStart=i.audio[<span class=\"code-number\">0</span>].ptsTime),n}(i,t.baseStartTime);v&amp;&amp;(r(t,{<span class=\"code-attr\">hasAudio</span>:v.hasAudio,<span class=\"code-attr\">hasVideo</span>:v.hasVideo,<span class=\"code-attr\">isMuxed</span>:f}),r=<span class=\"code-literal\">null</span>,v.hasAudio&amp;&amp;!f&amp;&amp;m(v.audioStart),v.hasVideo&amp;&amp;g(v.videoStart),m=<span class=\"code-literal\">null</span>,g=<span class=\"code-literal\">null</span>)}!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!Tt)<span class=\"code-keyword\">return</span> Tt=e,<span class=\"code-keyword\">void</span> xt(e);Dt.push(e)}({<span class=\"code-attr\">bytes</span>:i,<span class=\"code-attr\">transmuxer</span>:t.transmuxer,<span class=\"code-attr\">audioAppendStart</span>:t.audioAppendStart,<span class=\"code-attr\">gopsToAlignWith</span>:t.gopsToAlignWith,<span class=\"code-attr\">isPartial</span>:n,<span class=\"code-attr\">remux</span>:f,<span class=\"code-attr\">onData</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type=<span class=\"code-string\">\"combined\"</span>===e.type?<span class=\"code-string\">\"video\"</span>:e.type,l(t,e)},<span class=\"code-attr\">onTrackInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r&amp;&amp;(f&amp;&amp;(e.isMuxed=!<span class=\"code-number\">0</span>),r(t,e))},<span class=\"code-attr\">onAudioTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{m&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.start&amp;&amp;(m(e.start),m=<span class=\"code-literal\">null</span>),p&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.end&amp;&amp;p(e.end)},<span class=\"code-attr\">onVideoTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{g&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.start&amp;&amp;(g(e.start),g=<span class=\"code-literal\">null</span>),y&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.end&amp;&amp;y(e.end)},<span class=\"code-attr\">onVideoSegmentTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s(e)},<span class=\"code-attr\">onAudioSegmentTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{o(e)},<span class=\"code-attr\">onId3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{u(t,e,i)},<span class=\"code-attr\">onCaptions</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{d(t,[e])},<span class=\"code-attr\">onDone</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{h&amp;&amp;!n&amp;&amp;(e.type=<span class=\"code-string\">\"combined\"</span>===e.type?<span class=\"code-string\">\"video\"</span>:e.type,h(<span class=\"code-literal\">null</span>,t,e))}})},Si=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn,c=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i);<span class=\"code-keyword\">if</span>(wt(c)){t.isFmp4=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> f=t.map.tracks,m={<span class=\"code-attr\">isFmp4</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">hasVideo</span>:!!f.video,<span class=\"code-attr\">hasAudio</span>:!!f.audio};f.audio&amp;&amp;f.audio.codec&amp;&amp;<span class=\"code-string\">\"enca\"</span>!==f.audio.codec&amp;&amp;(m.audioCodec=f.audio.codec),f.video&amp;&amp;f.video.codec&amp;&amp;<span class=\"code-string\">\"encv\"</span>!==f.video.codec&amp;&amp;(m.videoCodec=f.video.codec),f.video&amp;&amp;f.audio&amp;&amp;(m.isMuxed=!<span class=\"code-number\">0</span>),r(t,m);<span class=\"code-keyword\">var</span> p=mi(t.map.timescales,c);m.hasAudio&amp;&amp;!m.isMuxed&amp;&amp;a(t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"start\"</span>,p),m.hasVideo&amp;&amp;a(t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"start\"</span>,p);<span class=\"code-keyword\">var</span> g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{l(t,{<span class=\"code-attr\">data</span>:i,<span class=\"code-attr\">type</span>:m.hasAudio&amp;&amp;!m.isMuxed?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-string\">\"video\"</span>}),e&amp;&amp;e.length&amp;&amp;d(t,e),h(<span class=\"code-literal\">null</span>,t,{})};<span class=\"code-keyword\">if</span>(!f.video||!i.byteLength||!t.transmuxer)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> g();<span class=\"code-keyword\">var</span> y=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?i:i.buffer,v=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?<span class=\"code-number\">0</span>:i.byteOffset;<span class=\"code-keyword\">return</span> t.transmuxer.addEventListener(<span class=\"code-string\">\"message\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mp4Captions\"</span>===n.data.action){t.transmuxer.removeEventListener(<span class=\"code-string\">\"message\"</span>,e);<span class=\"code-keyword\">var</span> r=n.data.data;t.bytes=i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r,r.byteOffset||<span class=\"code-number\">0</span>,r.byteLength),g(n.data.captions)}})),<span class=\"code-keyword\">void</span> t.transmuxer.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"pushMp4Captions\"</span>,<span class=\"code-attr\">timescales</span>:t.map.timescales,<span class=\"code-attr\">trackIds</span>:[f.video.id],<span class=\"code-attr\">data</span>:y,<span class=\"code-attr\">byteOffset</span>:v,<span class=\"code-attr\">byteLength</span>:i.byteLength},[y])}<span class=\"code-keyword\">if</span>(t.transmuxer){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.container&amp;&amp;(t.container=It(c)),<span class=\"code-string\">\"ts\"</span>!==t.container&amp;&amp;<span class=\"code-string\">\"aac\"</span>!==t.container)<span class=\"code-keyword\">return</span> r(t,{<span class=\"code-attr\">hasAudio</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">hasVideo</span>:!<span class=\"code-number\">1</span>}),<span class=\"code-keyword\">void</span> h(<span class=\"code-literal\">null</span>,t,{});Ti({<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">bytes</span>:i,<span class=\"code-attr\">isPartial</span>:n,<span class=\"code-attr\">trackInfoFn</span>:r,<span class=\"code-attr\">timingInfoFn</span>:a,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:o,<span class=\"code-attr\">id3Fn</span>:u,<span class=\"code-attr\">captionsFn</span>:d,<span class=\"code-attr\">dataFn</span>:l,<span class=\"code-attr\">doneFn</span>:h})}<span class=\"code-keyword\">else</span> h(<span class=\"code-literal\">null</span>,t,{})},Ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,r=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,c=e.id3Fn,f=e.captionsFn,m=e.dataFn,p=e.doneFn,g=e.handlePartialData,y=[],v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.dataFn,l=e.doneFn,h=<span class=\"code-number\">0</span>,c=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,f</span>)</span>{<span class=\"code-keyword\">if</span>(!c){<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> c=!<span class=\"code-number\">0</span>,_i(t),l(e,f);<span class=\"code-keyword\">if</span>((h+=<span class=\"code-number\">1</span>)===t.length){<span class=\"code-keyword\">if</span>(f.endOfAllRequests=<span class=\"code-built_in\">Date</span>.now(),f.encryptedBytes)<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn;i.addEventListener(<span class=\"code-string\">\"message\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(t.data.source===n.requestId){i.removeEventListener(<span class=\"code-string\">\"message\"</span>,e);<span class=\"code-keyword\">var</span> c=t.data.decrypted;n.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(c.bytes,c.byteOffset,c.byteLength),Si({<span class=\"code-attr\">segment</span>:n,<span class=\"code-attr\">bytes</span>:n.bytes,<span class=\"code-attr\">isPartial</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">trackInfoFn</span>:r,<span class=\"code-attr\">timingInfoFn</span>:a,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:o,<span class=\"code-attr\">id3Fn</span>:u,<span class=\"code-attr\">captionsFn</span>:d,<span class=\"code-attr\">dataFn</span>:l,<span class=\"code-attr\">doneFn</span>:h})}})),t=n.key.bytes.slice?n.key.bytes.slice():<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(<span class=\"code-built_in\">Array</span>.prototype.slice.call(n.key.bytes)),i.postMessage(he({<span class=\"code-attr\">source</span>:n.requestId,<span class=\"code-attr\">encrypted</span>:n.encryptedBytes,<span class=\"code-attr\">key</span>:t,<span class=\"code-attr\">iv</span>:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({<span class=\"code-attr\">decryptionWorker</span>:i,<span class=\"code-attr\">segment</span>:f,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:u,<span class=\"code-attr\">dataFn</span>:d,<span class=\"code-attr\">doneFn</span>:l});Si({<span class=\"code-attr\">segment</span>:f,<span class=\"code-attr\">bytes</span>:f.bytes,<span class=\"code-attr\">isPartial</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:u,<span class=\"code-attr\">dataFn</span>:d,<span class=\"code-attr\">doneFn</span>:l})}}}}({<span class=\"code-attr\">activeXhrs</span>:y,<span class=\"code-attr\">decryptionWorker</span>:n,<span class=\"code-attr\">trackInfoFn</span>:o,<span class=\"code-attr\">timingInfoFn</span>:d,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:l,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:h,<span class=\"code-attr\">id3Fn</span>:c,<span class=\"code-attr\">captionsFn</span>:f,<span class=\"code-attr\">dataFn</span>:m,<span class=\"code-attr\">doneFn</span>:p});<span class=\"code-keyword\">if</span>(r.key&amp;&amp;!r.key.bytes){<span class=\"code-keyword\">var</span> _=t(u.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:r.key.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>}),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n.response,a=bi(i,n);<span class=\"code-keyword\">if</span>(a)<span class=\"code-keyword\">return</span> t(a,e);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">16</span>!==r.byteLength)<span class=\"code-keyword\">return</span> t({<span class=\"code-attr\">status</span>:n.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Invalid HLS key at URL: \"</span>+n.uri,<span class=\"code-attr\">code</span>:gi,<span class=\"code-attr\">xhr</span>:n},e);<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(r);<span class=\"code-keyword\">return</span> e.key.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([s.getUint32(<span class=\"code-number\">0</span>),s.getUint32(<span class=\"code-number\">4</span>),s.getUint32(<span class=\"code-number\">8</span>),s.getUint32(<span class=\"code-number\">12</span>)]),t(<span class=\"code-literal\">null</span>,e)}}(r,v));y.push(_)}<span class=\"code-keyword\">if</span>(r.map&amp;&amp;!r.map.bytes){<span class=\"code-keyword\">var</span> b=t(u.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:r.map.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:re(r.map)}),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.finishProcessingFn;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n.response,a=bi(e,n);<span class=\"code-keyword\">if</span>(a)<span class=\"code-keyword\">return</span> i(a,t);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.byteLength)<span class=\"code-keyword\">return</span> i({<span class=\"code-attr\">status</span>:n.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Empty HLS segment content at URL: \"</span>+n.uri,<span class=\"code-attr\">code</span>:gi,<span class=\"code-attr\">xhr</span>:n},t);t.map.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.response);<span class=\"code-keyword\">var</span> s=It(t.map.bytes);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"mp4\"</span>!==s?i({<span class=\"code-attr\">status</span>:n.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Found unsupported \"</span>+(s||<span class=\"code-string\">\"unknown\"</span>)+<span class=\"code-string\">\" container for initialization segment at URL: \"</span>+n.uri,<span class=\"code-attr\">code</span>:gi,<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">xhr</span>:n},t):(pi(t.map.bytes).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.id&amp;&amp;e.timescale&amp;&amp;(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),i(<span class=\"code-literal\">null</span>,t))}}({<span class=\"code-attr\">segment</span>:r,<span class=\"code-attr\">finishProcessingFn</span>:v}));y.push(b)}<span class=\"code-keyword\">var</span> T=u.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:r.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:re(r)});g&amp;&amp;(T.responseType=<span class=\"code-string\">\"text\"</span>,T.beforeSend=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.overrideMimeType(<span class=\"code-string\">\"text/plain; charset=x-user-defined\"</span>)});<span class=\"code-keyword\">var</span> S=t(T,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.finishProcessingFn,n=e.responseType;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r.response,s=bi(e,r);<span class=\"code-keyword\">if</span>(s)<span class=\"code-keyword\">return</span> i(s,t);<span class=\"code-keyword\">var</span> o=<span class=\"code-string\">\"arraybuffer\"</span>!==n&amp;&amp;r.responseText?Ot(r.responseText.substring(t.lastReachedChar||<span class=\"code-number\">0</span>)):r.response;<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===a.byteLength?i({<span class=\"code-attr\">status</span>:r.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Empty HLS segment content at URL: \"</span>+r.uri,<span class=\"code-attr\">code</span>:gi,<span class=\"code-attr\">xhr</span>:r},t):(t.stats=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bandwidth</span>:e.bandwidth,<span class=\"code-attr\">bytesReceived</span>:e.bytesReceived||<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:e.roundTripTime||<span class=\"code-number\">0</span>}}(r),t.key?t.encryptedBytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(o):t.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(o),i(<span class=\"code-literal\">null</span>,t))}}({<span class=\"code-attr\">segment</span>:r,<span class=\"code-attr\">finishProcessingFn</span>:v,<span class=\"code-attr\">responseType</span>:T.responseType}));S.addEventListener(<span class=\"code-string\">\"progress\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.progressFn,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.handlePartialData;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> c=e.target;<span class=\"code-keyword\">if</span>(!c.aborted){<span class=\"code-keyword\">if</span>(h&amp;&amp;!t.key&amp;&amp;c.responseText&amp;&amp;c.responseText.length&gt;=<span class=\"code-number\">8</span>){<span class=\"code-keyword\">var</span> f=Ot(c.responseText.substring(t.lastReachedChar||<span class=\"code-number\">0</span>));!t.lastReachedChar&amp;&amp;wt(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(f))||(t.lastReachedChar=c.responseText.length,Si({<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">bytes</span>:f,<span class=\"code-attr\">isPartial</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:d,<span class=\"code-attr\">dataFn</span>:l}))}<span class=\"code-keyword\">return</span> t.stats=u.default.mergeOptions(t.stats,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.target,i={<span class=\"code-attr\">bandwidth</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">bytesReceived</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:<span class=\"code-built_in\">Date</span>.now()-t.requestTime||<span class=\"code-number\">0</span>};<span class=\"code-keyword\">return</span> i.bytesReceived=e.loaded,i.bandwidth=<span class=\"code-built_in\">Math</span>.floor(i.bytesReceived/i.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>),i}(e)),!t.stats.firstBytesReceivedAt&amp;&amp;t.stats.bytesReceived&amp;&amp;(t.stats.firstBytesReceivedAt=<span class=\"code-built_in\">Date</span>.now()),i(e,t)}}}({<span class=\"code-attr\">segment</span>:r,<span class=\"code-attr\">progressFn</span>:s,<span class=\"code-attr\">trackInfoFn</span>:o,<span class=\"code-attr\">timingInfoFn</span>:d,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:l,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:h,<span class=\"code-attr\">id3Fn</span>:c,<span class=\"code-attr\">captionsFn</span>:f,<span class=\"code-attr\">dataFn</span>:m,<span class=\"code-attr\">handlePartialData</span>:g})),y.push(S);<span class=\"code-keyword\">var</span> I={};<span class=\"code-keyword\">return</span> y.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.addEventListener(<span class=\"code-string\">\"loadend\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.loadendState,i=e.abortFn;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.target.aborted&amp;&amp;i&amp;&amp;!t.calledAbortFn&amp;&amp;(i(),t.calledAbortFn=!<span class=\"code-number\">0</span>)}}({<span class=\"code-attr\">loadendState</span>:I,<span class=\"code-attr\">abortFn</span>:a}))})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> _i(y)}},wi=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:{},Li=<span class=\"code-string\">\"undefined\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Symbol</span>?<span class=\"code-string\">\"__target\"</span>:<span class=\"code-built_in\">Symbol</span>(),ki=wi.BlobBuilder||wi.WebKitBlobBuilder||wi.MozBlobBuilder||wi.MSBlobBuilder,Ai=wi.URL||wi.webkitURL||Ai&amp;&amp;Ai.msURL,Ei=wi.Worker;<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">Pi</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Ei(e);<span class=\"code-keyword\">if</span>(Ei&amp;&amp;!i){<span class=\"code-keyword\">var</span> r=Di(t.toString().replace(<span class=\"code-regexp\">/^function.+?{/</span>,<span class=\"code-string\">\"\"</span>).slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>));<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>[Li]=<span class=\"code-keyword\">new</span> Ei(r),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;t){<span class=\"code-keyword\">var</span> i=e.terminate;e.objURL=t,e.terminate=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.objURL&amp;&amp;Ai.revokeObjectURL(e.objURL),i.call(e)}}}(<span class=\"code-keyword\">this</span>[Li],r),<span class=\"code-keyword\">this</span>[Li]}<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">postMessage</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.onmessage&amp;&amp;setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.onmessage({<span class=\"code-attr\">data</span>:e,<span class=\"code-attr\">target</span>:a})}))}};t.call(a),<span class=\"code-keyword\">this</span>.postMessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.onmessage({<span class=\"code-attr\">data</span>:e,<span class=\"code-attr\">target</span>:n})}))},<span class=\"code-keyword\">this</span>.isThisThread=!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">if</span>(Ei){<span class=\"code-keyword\">var</span> Ci,Ui=Di(<span class=\"code-string\">\"self.onmessage = function () {}\"</span>),Oi=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">1</span>);<span class=\"code-keyword\">try</span>{(Ci=<span class=\"code-keyword\">new</span> Ei(Ui)).postMessage(Oi,[Oi.buffer])}<span class=\"code-keyword\">catch</span>(e){Ei=<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">finally</span>{Ai.revokeObjectURL(Ui),Ci&amp;&amp;Ci.terminate()}}<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">Di</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> Ai.createObjectURL(<span class=\"code-keyword\">new</span> Blob([e],{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"application/javascript\"</span>}))}<span class=\"code-keyword\">catch</span>(i){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> ki;<span class=\"code-keyword\">return</span> t.append(e),Ai.createObjectURL(t.getBlob(type))}}<span class=\"code-keyword\">var</span> xi=<span class=\"code-keyword\">new</span> Pi(<span class=\"code-string\">\"./transmuxer-worker.worker.js\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;\n","<span class=\"code-comment\">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">this</span>.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class=\"code-keyword\">this</span>.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class=\"code-number\">1</span>),n&gt;<span class=\"code-number\">-1</span>)},<span class=\"code-keyword\">this</span>.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a;<span class=\"code-keyword\">if</span>(i=e[t])<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">for</span>(a=[],n=<span class=\"code-built_in\">arguments</span>.length,n=<span class=\"code-number\">1</span>;n&lt;<span class=\"code-built_in\">arguments</span>.length;++n)a.push(<span class=\"code-built_in\">arguments</span>[n]);<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].apply(<span class=\"code-keyword\">this</span>,a)}},<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e={}}}};e.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.flush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.partialFlush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"endedtimeline\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.endTimeline(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"reset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.reset(t)})),e},e.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e)},e.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,e)},e.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,e)},e.prototype.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,e)},e.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>,e)};<span class=\"code-keyword\">var</span> t,n,r,a,s,o,u,d,l,h,c,f,m,p,g,y,v,_,b,T,S,I,w,L,k,A,E,P,C,U,O,D,x,R,M,B,F,N,q,W,V=e,H=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>)<span class=\"code-number\">-1</span>;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">if</span>(I={<span class=\"code-attr\">avc1</span>:[],<span class=\"code-attr\">avcC</span>:[],<span class=\"code-attr\">btrt</span>:[],<span class=\"code-attr\">dinf</span>:[],<span class=\"code-attr\">dref</span>:[],<span class=\"code-attr\">esds</span>:[],<span class=\"code-attr\">ftyp</span>:[],<span class=\"code-attr\">hdlr</span>:[],<span class=\"code-attr\">mdat</span>:[],<span class=\"code-attr\">mdhd</span>:[],<span class=\"code-attr\">mdia</span>:[],<span class=\"code-attr\">mfhd</span>:[],<span class=\"code-attr\">minf</span>:[],<span class=\"code-attr\">moof</span>:[],<span class=\"code-attr\">moov</span>:[],<span class=\"code-attr\">mp4a</span>:[],<span class=\"code-attr\">mvex</span>:[],<span class=\"code-attr\">mvhd</span>:[],<span class=\"code-attr\">pasp</span>:[],<span class=\"code-attr\">sdtp</span>:[],<span class=\"code-attr\">smhd</span>:[],<span class=\"code-attr\">stbl</span>:[],<span class=\"code-attr\">stco</span>:[],<span class=\"code-attr\">stsc</span>:[],<span class=\"code-attr\">stsd</span>:[],<span class=\"code-attr\">stsz</span>:[],<span class=\"code-attr\">stts</span>:[],<span class=\"code-attr\">styp</span>:[],<span class=\"code-attr\">tfdt</span>:[],<span class=\"code-attr\">tfhd</span>:[],<span class=\"code-attr\">traf</span>:[],<span class=\"code-attr\">trak</span>:[],<span class=\"code-attr\">trun</span>:[],<span class=\"code-attr\">trex</span>:[],<span class=\"code-attr\">tkhd</span>:[],<span class=\"code-attr\">vmhd</span>:[]},<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Uint8Array</span>){<span class=\"code-keyword\">for</span>(e <span class=\"code-keyword\">in</span> I)I.hasOwnProperty(e)&amp;&amp;(I[e]=[e.charCodeAt(<span class=\"code-number\">0</span>),e.charCodeAt(<span class=\"code-number\">1</span>),e.charCodeAt(<span class=\"code-number\">2</span>),e.charCodeAt(<span class=\"code-number\">3</span>)]);w=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"i\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"s\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"o\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"m\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),k=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"a\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"v\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"c\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"1\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),L=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),A=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),E=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),P={<span class=\"code-attr\">video</span>:A,<span class=\"code-attr\">audio</span>:E},O=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">12</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),U=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),D=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),x=D,R=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),M=D,C=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])}}(),t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++)n.push(<span class=\"code-built_in\">arguments</span>[t]);<span class=\"code-keyword\">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class=\"code-keyword\">for</span>(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r+<span class=\"code-number\">8</span>),<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class=\"code-number\">0</span>,i.byteLength),i.set(e,<span class=\"code-number\">4</span>),t=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class=\"code-keyword\">return</span> i},n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(I.dinf,t(I.dref,O))},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.esds,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">25</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">21</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">2</span>,e.audioobjecttype&lt;&lt;<span class=\"code-number\">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class=\"code-number\">1</span>,e.samplingfrequencyindex&lt;&lt;<span class=\"code-number\">7</span>|e.channelcount&lt;&lt;<span class=\"code-number\">3</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>]))},g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.hdlr,P[e])},p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">85</span>,<span class=\"code-number\">196</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> e.samplerate&amp;&amp;(i[<span class=\"code-number\">12</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">13</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">14</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">15</span>]=<span class=\"code-number\">255</span>&amp;e.samplerate),t(I.mdhd,i)},m=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.mdia,p(e),g(e.type),o(e))},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.mfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e]))},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.minf,<span class=\"code-string\">\"video\"</span>===e.type?t(I.vmhd,C):t(I.smhd,U),n(),v(e))},u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=i.length;r--;)n[r]=b(i[r]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[I.moof,s(e)].concat(n))},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[I.moov,h(<span class=\"code-number\">4294967295</span>)].concat(n).concat(l(e)))},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[I.mvex].concat(n))},h=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>]);<span class=\"code-keyword\">return</span> t(I.mvhd,i)},y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.samples||[],a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>+r.length);<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class=\"code-number\">4</span>]=i.dependsOn&lt;&lt;<span class=\"code-number\">4</span>|i.isDependedOn&lt;&lt;<span class=\"code-number\">2</span>|i.hasRedundancy;<span class=\"code-keyword\">return</span> t(I.sdtp,a)},v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.stbl,_(e),t(I.stts,M),t(I.stsc,x),t(I.stsz,R),t(I.stco,D))},_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.stsd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),<span class=\"code-string\">\"video\"</span>===e.type?B(e):F(e))},B=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)s.push((<span class=\"code-number\">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),s.push(<span class=\"code-number\">255</span>&amp;r[i].byteLength),s=s.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(r[i]));<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;a.length;i++)o.push((<span class=\"code-number\">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),o.push(<span class=\"code-number\">255</span>&amp;a[i].byteLength),o=o.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(a[i]));<span class=\"code-keyword\">if</span>(n=[I.avc1,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">19</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">106</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">99</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">98</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">104</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">24</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">17</span>]),t(I.avcC,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class=\"code-number\">255</span>].concat([r.length],s,[a.length],o))),t(I.btrt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">28</span>,<span class=\"code-number\">156</span>,<span class=\"code-number\">128</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>]))],e.sarRatio){<span class=\"code-keyword\">var</span> u=e.sarRatio[<span class=\"code-number\">0</span>],d=e.sarRatio[<span class=\"code-number\">1</span>];n.push(t(I.pasp,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([(<span class=\"code-number\">4278190080</span>&amp;u)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;u)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;u)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;u,(<span class=\"code-number\">4278190080</span>&amp;d)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;d)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;d)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;d])))}<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,n)},F=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.mp4a,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.channelcount)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.channelcount,(<span class=\"code-number\">65280</span>&amp;e.samplesize)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplesize,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.samplerate)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplerate,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),r(e))},f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">7</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> t(I.tkhd,i)},b=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o;<span class=\"code-keyword\">return</span> i=t(I.tfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">58</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])),s=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime/(H+<span class=\"code-number\">1</span>)),o=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime%(H+<span class=\"code-number\">1</span>)),n=t(I.tfdt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,s&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;s,o&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;o])),<span class=\"code-string\">\"audio\"</span>===e.type?(r=S(e,<span class=\"code-number\">92</span>),t(I.traf,i,n,r)):(a=y(e),r=S(e,a.length+<span class=\"code-number\">92</span>),t(I.traf,i,n,r,a))},c=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.duration=e.duration||<span class=\"code-number\">4294967295</span>,t(I.trak,f(e),m(e))},T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>!==e.type&amp;&amp;(i[i.length<span class=\"code-number\">-1</span>]=<span class=\"code-number\">0</span>),t(I.trex,i)},W=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.length&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].duration&amp;&amp;(i=<span class=\"code-number\">1</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].size&amp;&amp;(n=<span class=\"code-number\">2</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].flags&amp;&amp;(r=<span class=\"code-number\">4</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].compositionTimeOffset&amp;&amp;(a=<span class=\"code-number\">8</span>)),[<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,i|n|r|a,<span class=\"code-number\">1</span>,(<span class=\"code-number\">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.length,(<span class=\"code-number\">4278190080</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;t]},q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">16</span>*(s=e.samples||[]).length,a=W(s,i),(r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.length+<span class=\"code-number\">16</span>*s.length)).set(a),n=a.length,u=<span class=\"code-number\">0</span>;u&lt;s.length;u++)o=s[u],r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.duration,r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.size,r[n++]=o.flags.isLeading&lt;&lt;<span class=\"code-number\">2</span>|o.flags.dependsOn,r[n++]=o.flags.isDependedOn&lt;&lt;<span class=\"code-number\">6</span>|o.flags.hasRedundancy&lt;&lt;<span class=\"code-number\">4</span>|o.flags.paddingValue&lt;&lt;<span class=\"code-number\">1</span>|o.flags.isNonSyncSample,r[n++]=<span class=\"code-number\">61440</span>&amp;o.flags.degradationPriority,r[n++]=<span class=\"code-number\">15</span>&amp;o.flags.degradationPriority,r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.compositionTimeOffset;<span class=\"code-keyword\">return</span> t(I.trun,r)},N=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">8</span>*(s=e.samples||[]).length,a=W(s,i),(n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.length+<span class=\"code-number\">8</span>*s.length)).set(a),r=a.length,u=<span class=\"code-number\">0</span>;u&lt;s.length;u++)o=s[u],n[r++]=(<span class=\"code-number\">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,n[r++]=(<span class=\"code-number\">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,n[r++]=(<span class=\"code-number\">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,n[r++]=<span class=\"code-number\">255</span>&amp;o.duration,n[r++]=(<span class=\"code-number\">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,n[r++]=(<span class=\"code-number\">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,n[r++]=(<span class=\"code-number\">65280</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,n[r++]=<span class=\"code-number\">255</span>&amp;o.size;<span class=\"code-keyword\">return</span> t(I.trun,n)},S=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>===e.type?N(e,t):q(e,t)},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(I.ftyp,w,L,w,k)};<span class=\"code-keyword\">var</span> G,j,z,X,Q,Y,K,$,J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(I.mdat,e)},Z=u,ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=a(),n=d(e);<span class=\"code-keyword\">return</span>(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">flags</span>:{<span class=\"code-attr\">isLeading</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">isDependedOn</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">hasRedundancy</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">degradationPriority</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>}};<span class=\"code-keyword\">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class=\"code-number\">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class=\"code-number\">2</span>,i.flags.isNonSyncSample=<span class=\"code-number\">0</span>),i},ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,n.byteLength=<span class=\"code-number\">0</span>,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class=\"code-number\">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class=\"code-number\">0</span>)&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(n.byteLength=<span class=\"code-number\">0</span>,n.nalCount=<span class=\"code-number\">0</span>,n.duration=<span class=\"code-number\">0</span>,n.pts=e[<span class=\"code-number\">0</span>].pts,n.dts=e[<span class=\"code-number\">0</span>].dts,r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,r.pts=e[<span class=\"code-number\">0</span>].pts,r.dts=e[<span class=\"code-number\">0</span>].dts,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;n.duration&lt;=<span class=\"code-number\">0</span>&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>!e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame&amp;&amp;e.length&gt;<span class=\"code-number\">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].dts=t.dts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].pts=t.pts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].duration+=t.duration),e},ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=[];<span class=\"code-keyword\">return</span> i=te(e,t||<span class=\"code-number\">0</span>),n.push(i),n},se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-number\">0</span>,r=e.byteLength,a=e.length,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r+<span class=\"code-number\">4</span>*a),o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(s.buffer);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],o.setUint32(n,i.data.byteLength),n+=<span class=\"code-number\">4</span>,s.set(i.data,n),n+=i.data.byteLength;<span class=\"code-keyword\">return</span> s},oe=[<span class=\"code-number\">33</span>,<span class=\"code-number\">16</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">164</span>,<span class=\"code-number\">27</span>],ue=[<span class=\"code-number\">33</span>,<span class=\"code-number\">65</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">84</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">168</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">191</span>,<span class=\"code-number\">252</span>],de=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[];e--;)t.push(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> t},le=<span class=\"code-number\">9e4</span>;Y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> j(Q(e,t))},K=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> z(X(e),t)},$=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> X(i?e:e-t)};<span class=\"code-keyword\">var</span> he=le,ce=j=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e*le},fe=(z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},X=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/le}),me=(Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},Y),pe=K,ge=$,ye=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d=<span class=\"code-number\">0</span>,l=<span class=\"code-number\">0</span>,h=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t.length&amp;&amp;(r=me(e.baseMediaDecodeTime,e.samplerate),a=<span class=\"code-built_in\">Math</span>.ceil(he/(e.samplerate/<span class=\"code-number\">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class=\"code-built_in\">Math</span>.max(i,n),h=(l=<span class=\"code-built_in\">Math</span>.floor(d/a))*a),!(l&lt;<span class=\"code-number\">1</span>||h&gt;<span class=\"code-number\">45e3</span>))){<span class=\"code-keyword\">for</span>((s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!G){<span class=\"code-keyword\">var</span> e={<span class=\"code-number\">96e3</span>:[oe,[<span class=\"code-number\">227</span>,<span class=\"code-number\">64</span>],de(<span class=\"code-number\">154</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">88200</span>:[oe,[<span class=\"code-number\">231</span>],de(<span class=\"code-number\">170</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">64e3</span>:[oe,[<span class=\"code-number\">248</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">240</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">48e3</span>:[oe,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">148</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">54</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">44100</span>:[oe,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">163</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">84</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">32e3</span>:[oe,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">234</span>],de(<span class=\"code-number\">226</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">24e3</span>:[oe,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">112</span>],de(<span class=\"code-number\">126</span>),[<span class=\"code-number\">224</span>]],<span class=\"code-number\">16e3</span>:[oe,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">255</span>],de(<span class=\"code-number\">269</span>),[<span class=\"code-number\">223</span>,<span class=\"code-number\">108</span>],de(<span class=\"code-number\">195</span>),[<span class=\"code-number\">1</span>,<span class=\"code-number\">192</span>]],<span class=\"code-number\">12e3</span>:[ue,de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">253</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">259</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">11025</span>:[ue,de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">175</span>,<span class=\"code-number\">128</span>],de(<span class=\"code-number\">108</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">8e3</span>:[ue,de(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">16</span>],de(<span class=\"code-number\">47</span>),[<span class=\"code-number\">7</span>]]};t=e,G=<span class=\"code-built_in\">Object</span>.keys(t).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> e[i]=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t[i].reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)}),[])),e}),{})}<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span> G}()[e.samplerate])||(s=t[<span class=\"code-number\">0</span>].data),o=<span class=\"code-number\">0</span>;o&lt;l;o++)u=t[<span class=\"code-number\">0</span>],t.splice(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,{<span class=\"code-attr\">data</span>:s,<span class=\"code-attr\">dts</span>:u.dts-a,<span class=\"code-attr\">pts</span>:u.pts-a});<span class=\"code-keyword\">return</span> e.baseMediaDecodeTime-=<span class=\"code-built_in\">Math</span>.floor(pe(h,e.samplerate)),h}},ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class=\"code-number\">0</span>)})))},_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[];<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class=\"code-attr\">size</span>:i.data.byteLength,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">1024</span>});<span class=\"code-keyword\">return</span> n},be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class=\"code-keyword\">return</span> i}(e));<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class=\"code-keyword\">return</span> r},Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">delete</span> e.minSegmentDts,<span class=\"code-keyword\">delete</span> e.maxSegmentDts,<span class=\"code-keyword\">delete</span> e.minSegmentPts,<span class=\"code-keyword\">delete</span> e.maxSegmentPts},Se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=e.minSegmentDts;<span class=\"code-keyword\">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,i),<span class=\"code-string\">\"audio\"</span>===e.type&amp;&amp;(i*=e.samplerate/<span class=\"code-number\">9e4</span>,i=<span class=\"code-built_in\">Math</span>.floor(i)),i},Ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.pts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentPts,t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentPts,t.pts)),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.dts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentDts,t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentDts,t.dts))},we=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{t=t||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.parse708captions_=<span class=\"code-string\">\"boolean\"</span>!=<span class=\"code-keyword\">typeof</span> t.parse708captions||t.parse708captions,<span class=\"code-keyword\">this</span>.captionPackets_=[],<span class=\"code-keyword\">this</span>.ccStreams_=[<span class=\"code-keyword\">new</span> xe(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> xe(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>),<span class=\"code-keyword\">new</span> xe(<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> xe(<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>)],<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;(<span class=\"code-keyword\">this</span>.cc708Stream_=<span class=\"code-keyword\">new</span> Pe),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),e.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),e.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))}),<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;(<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>)))};(we.prototype=<span class=\"code-keyword\">new</span> V).push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"sei_rbsp\"</span>===e.nalUnitType&amp;&amp;(t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i={<span class=\"code-attr\">payloadType</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">payloadSize</span>:<span class=\"code-number\">0</span>},n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;t&lt;e.byteLength&amp;&amp;<span class=\"code-number\">128</span>!==e[t];){<span class=\"code-keyword\">for</span>(;<span class=\"code-number\">255</span>===e[t];)n+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">for</span>(n+=e[t++];<span class=\"code-number\">255</span>===e[t];)r+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class=\"code-number\">4</span>===n){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"GA94\"</span>===<span class=\"code-built_in\">String</span>.fromCharCode(e[t+<span class=\"code-number\">3</span>],e[t+<span class=\"code-number\">4</span>],e[t+<span class=\"code-number\">5</span>],e[t+<span class=\"code-number\">6</span>])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class=\"code-keyword\">break</span>}i.payload=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}t+=r,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> i}(e.escapedRBSP)).payload&amp;&amp;<span class=\"code-number\">4</span>===t.payloadType&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">181</span>!==e.payload[<span class=\"code-number\">0</span>]||<span class=\"code-number\">49</span>!=(e.payload[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">8</span>|e.payload[<span class=\"code-number\">2</span>])||<span class=\"code-string\">\"GA94\"</span>!==<span class=\"code-built_in\">String</span>.fromCharCode(e.payload[<span class=\"code-number\">3</span>],e.payload[<span class=\"code-number\">4</span>],e.payload[<span class=\"code-number\">5</span>],e.payload[<span class=\"code-number\">6</span>])||<span class=\"code-number\">3</span>!==e.payload[<span class=\"code-number\">7</span>]?<span class=\"code-literal\">null</span>:e.payload.subarray(<span class=\"code-number\">8</span>,e.payload.length<span class=\"code-number\">-1</span>)}(t)))<span class=\"code-keyword\">if</span>(e.dts&lt;<span class=\"code-keyword\">this</span>.latestDts_)<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.dts===<span class=\"code-keyword\">this</span>.latestDts_&amp;&amp;<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.numSameDts_--,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.numSameDts_||(<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>));n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s=[];<span class=\"code-keyword\">if</span>(!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">0</span>],i=<span class=\"code-number\">0</span>;i&lt;n;i++)a={<span class=\"code-attr\">type</span>:<span class=\"code-number\">3</span>&amp;t[<span class=\"code-number\">2</span>+(r=<span class=\"code-number\">3</span>*i)],<span class=\"code-attr\">pts</span>:e},<span class=\"code-number\">4</span>&amp;t[r+<span class=\"code-number\">2</span>]&amp;&amp;(a.ccData=t[r+<span class=\"code-number\">3</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[r+<span class=\"code-number\">4</span>],s.push(a));<span class=\"code-keyword\">return</span> s}(e.pts,i),<span class=\"code-keyword\">this</span>.captionPackets_=<span class=\"code-keyword\">this</span>.captionPackets_.concat(n),<span class=\"code-keyword\">this</span>.latestDts_!==e.dts&amp;&amp;(<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.numSameDts_++,<span class=\"code-keyword\">this</span>.latestDts_=e.dts}},we.prototype.flushCCStreams=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"flush\"</span>===e?t.flush():t.partialFlush()}),<span class=\"code-keyword\">this</span>)},we.prototype.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionPackets_.length?(<span class=\"code-keyword\">this</span>.captionPackets_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.presortIndex=t})),<span class=\"code-keyword\">this</span>.captionPackets_.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),<span class=\"code-keyword\">this</span>.captionPackets_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type&lt;<span class=\"code-number\">2</span>?<span class=\"code-keyword\">this</span>.dispatchCea608Packet(e):<span class=\"code-keyword\">this</span>.dispatchCea708Packet(e)}),<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.flushCCStreams(e)):<span class=\"code-keyword\">this</span>.flushCCStreams(e)},we.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"flush\"</span>)},we.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"partialFlush\"</span>)},we.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.latestDts_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.activeCea608Channel_=[<span class=\"code-literal\">null</span>,<span class=\"code-literal\">null</span>],<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.reset()}))},we.prototype.dispatchCea608Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.setsTextOrXDSActive(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.setsChannel1Active(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.setsChannel2Active(e)&amp;&amp;(<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">1</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class=\"code-keyword\">this</span>.ccStreams_[(e.type&lt;&lt;<span class=\"code-number\">1</span>)+<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]].push(e)},we.prototype.setsChannel1Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">4096</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},we.prototype.setsChannel2Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},we.prototype.setsTextOrXDSActive=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">256</span>==(<span class=\"code-number\">28928</span>&amp;e.ccData)||<span class=\"code-number\">4138</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)||<span class=\"code-number\">6186</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)},we.prototype.dispatchCea708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;<span class=\"code-keyword\">this</span>.cc708Stream_.push(e)};<span class=\"code-keyword\">var</span> Le={<span class=\"code-number\">127</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">4128</span>:<span class=\"code-number\">32</span>,<span class=\"code-number\">4129</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">4133</span>:<span class=\"code-number\">8230</span>,<span class=\"code-number\">4138</span>:<span class=\"code-number\">352</span>,<span class=\"code-number\">4140</span>:<span class=\"code-number\">338</span>,<span class=\"code-number\">4144</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">4145</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">4146</span>:<span class=\"code-number\">8217</span>,<span class=\"code-number\">4147</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">4148</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">4149</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">4153</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">4154</span>:<span class=\"code-number\">353</span>,<span class=\"code-number\">4156</span>:<span class=\"code-number\">339</span>,<span class=\"code-number\">4157</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">4159</span>:<span class=\"code-number\">376</span>,<span class=\"code-number\">4214</span>:<span class=\"code-number\">8539</span>,<span class=\"code-number\">4215</span>:<span class=\"code-number\">8540</span>,<span class=\"code-number\">4216</span>:<span class=\"code-number\">8541</span>,<span class=\"code-number\">4217</span>:<span class=\"code-number\">8542</span>,<span class=\"code-number\">4218</span>:<span class=\"code-number\">9168</span>,<span class=\"code-number\">4219</span>:<span class=\"code-number\">9124</span>,<span class=\"code-number\">4220</span>:<span class=\"code-number\">9123</span>,<span class=\"code-number\">4221</span>:<span class=\"code-number\">9135</span>,<span class=\"code-number\">4222</span>:<span class=\"code-number\">9126</span>,<span class=\"code-number\">4223</span>:<span class=\"code-number\">9121</span>,<span class=\"code-number\">4256</span>:<span class=\"code-number\">12600</span>},ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32</span>&lt;=e&amp;&amp;e&lt;=<span class=\"code-number\">127</span>||<span class=\"code-number\">160</span>&lt;=e&amp;&amp;e&lt;=<span class=\"code-number\">255</span>},Ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.windowNum=e,<span class=\"code-keyword\">this</span>.reset()};Ae.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.clearText(),<span class=\"code-keyword\">this</span>.pendingNewLine=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.winAttr={},<span class=\"code-keyword\">this</span>.penAttr={},<span class=\"code-keyword\">this</span>.penLoc={},<span class=\"code-keyword\">this</span>.penColor={},<span class=\"code-keyword\">this</span>.visible=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.rowLock=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.columnLock=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.priority=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.relativePositioning=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorVertical=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorHorizontal=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorPoint=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.rowCount=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.virtualRowCount=<span class=\"code-keyword\">this</span>.rowCount+<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.columnCount=<span class=\"code-number\">41</span>,<span class=\"code-keyword\">this</span>.windowStyle=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.penStyle=<span class=\"code-number\">0</span>},Ae.prototype.getText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.rows.join(<span class=\"code-string\">\"\\n\"</span>)},Ae.prototype.clearText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.rows=[<span class=\"code-string\">\"\"</span>],<span class=\"code-keyword\">this</span>.rowIdx=<span class=\"code-number\">0</span>},Ae.prototype.newLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.rows.length&gt;=<span class=\"code-keyword\">this</span>.virtualRowCount&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.beforeRowOverflow&amp;&amp;<span class=\"code-keyword\">this</span>.beforeRowOverflow(e),<span class=\"code-keyword\">this</span>.rows.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(<span class=\"code-keyword\">this</span>.rows.push(<span class=\"code-string\">\"\"</span>),<span class=\"code-keyword\">this</span>.rowIdx++);<span class=\"code-keyword\">this</span>.rows.length&gt;<span class=\"code-keyword\">this</span>.virtualRowCount;)<span class=\"code-keyword\">this</span>.rows.shift(),<span class=\"code-keyword\">this</span>.rowIdx--},Ae.prototype.isEmpty=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.rows.length||<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.rows.length&amp;&amp;<span class=\"code-string\">\"\"</span>===<span class=\"code-keyword\">this</span>.rows[<span class=\"code-number\">0</span>]},Ae.prototype.addText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx]+=e},Ae.prototype.backspace=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isEmpty()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx];<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx]=e.substr(<span class=\"code-number\">0</span>,e.length<span class=\"code-number\">-1</span>)}};<span class=\"code-keyword\">var</span> Ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.serviceNum=e,<span class=\"code-keyword\">this</span>.text=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">this</span>.currentWindow=<span class=\"code-keyword\">new</span> Ae(<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.windows=[]};Ee.prototype.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.startPts=e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-number\">8</span>;i++)<span class=\"code-keyword\">this</span>.windows[i]=<span class=\"code-keyword\">new</span> Ae(i),<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;(<span class=\"code-keyword\">this</span>.windows[i].beforeRowOverflow=t)},Ee.prototype.setCurrentWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.currentWindow=<span class=\"code-keyword\">this</span>.windows[e]};<span class=\"code-keyword\">var</span> Pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>);<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.current708Packet=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.services={},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-number\">3</span>===e.type?(t.new708Packet(),t.add708Bytes(e)):(<span class=\"code-literal\">null</span>===t.current708Packet&amp;&amp;t.new708Packet(),t.add708Bytes(e))}};Pe.prototype=<span class=\"code-keyword\">new</span> V,Pe.prototype.new708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.current708Packet&amp;&amp;<span class=\"code-keyword\">this</span>.push708Packet(),<span class=\"code-keyword\">this</span>.current708Packet={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">ptsVals</span>:[]}},Pe.prototype.add708Bytes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.ccData,i=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,n=<span class=\"code-number\">255</span>&amp;t;<span class=\"code-keyword\">this</span>.current708Packet.ptsVals.push(e.pts),<span class=\"code-keyword\">this</span>.current708Packet.data.push(i),<span class=\"code-keyword\">this</span>.current708Packet.data.push(n)},Pe.prototype.push708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.current708Packet,t=e.data,i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r=<span class=\"code-number\">0</span>,a=t[r++];<span class=\"code-keyword\">for</span>(e.seq=a&gt;&gt;<span class=\"code-number\">6</span>,e.sizeCode=<span class=\"code-number\">63</span>&amp;a;r&lt;t.length;r++)n=<span class=\"code-number\">31</span>&amp;(a=t[r++]),<span class=\"code-number\">7</span>==(i=a&gt;&gt;<span class=\"code-number\">5</span>)&amp;&amp;n&gt;<span class=\"code-number\">0</span>&amp;&amp;(i=a=t[r++]),<span class=\"code-keyword\">this</span>.pushServiceBlock(i,r,n),n&gt;<span class=\"code-number\">0</span>&amp;&amp;(r+=n<span class=\"code-number\">-1</span>)},Pe.prototype.pushServiceBlock=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=t,a=<span class=\"code-keyword\">this</span>.current708Packet.data,s=<span class=\"code-keyword\">this</span>.services[e];<span class=\"code-keyword\">for</span>(s||(s=<span class=\"code-keyword\">this</span>.initService(e,r));r&lt;t+i&amp;&amp;r&lt;a.length;r++)n=a[r],ke(n)?r=<span class=\"code-keyword\">this</span>.handleText(r,s):<span class=\"code-number\">16</span>===n?r=<span class=\"code-keyword\">this</span>.extendedCommands(r,s):<span class=\"code-number\">128</span>&lt;=n&amp;&amp;n&lt;=<span class=\"code-number\">135</span>?r=<span class=\"code-keyword\">this</span>.setCurrentWindow(r,s):<span class=\"code-number\">152</span>&lt;=n&amp;&amp;n&lt;=<span class=\"code-number\">159</span>?r=<span class=\"code-keyword\">this</span>.defineWindow(r,s):<span class=\"code-number\">136</span>===n?r=<span class=\"code-keyword\">this</span>.clearWindows(r,s):<span class=\"code-number\">140</span>===n?r=<span class=\"code-keyword\">this</span>.deleteWindows(r,s):<span class=\"code-number\">137</span>===n?r=<span class=\"code-keyword\">this</span>.displayWindows(r,s):<span class=\"code-number\">138</span>===n?r=<span class=\"code-keyword\">this</span>.hideWindows(r,s):<span class=\"code-number\">139</span>===n?r=<span class=\"code-keyword\">this</span>.toggleWindows(r,s):<span class=\"code-number\">151</span>===n?r=<span class=\"code-keyword\">this</span>.setWindowAttributes(r,s):<span class=\"code-number\">144</span>===n?r=<span class=\"code-keyword\">this</span>.setPenAttributes(r,s):<span class=\"code-number\">145</span>===n?r=<span class=\"code-keyword\">this</span>.setPenColor(r,s):<span class=\"code-number\">146</span>===n?r=<span class=\"code-keyword\">this</span>.setPenLocation(r,s):<span class=\"code-number\">143</span>===n?s=<span class=\"code-keyword\">this</span>.reset(r,s):<span class=\"code-number\">8</span>===n?s.currentWindow.backspace():<span class=\"code-number\">12</span>===n?s.currentWindow.clearText():<span class=\"code-number\">13</span>===n?s.currentWindow.pendingNewLine=!<span class=\"code-number\">0</span>:<span class=\"code-number\">14</span>===n?s.currentWindow.clearText():<span class=\"code-number\">141</span>===n&amp;&amp;r++},Pe.prototype.extendedCommands=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e];<span class=\"code-keyword\">return</span> ke(i)&amp;&amp;(e=<span class=\"code-keyword\">this</span>.handleText(e,t,!<span class=\"code-number\">0</span>)),e},Pe.prototype.getPts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.current708Packet.ptsVals[<span class=\"code-built_in\">Math</span>.floor(e/<span class=\"code-number\">2</span>)]},Pe.prototype.initService=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.services[e]=<span class=\"code-keyword\">new</span> Ee(e),<span class=\"code-keyword\">this</span>.services[e].init(<span class=\"code-keyword\">this</span>.getPts(t),(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i.flushDisplayed(t,i.services[e])})),<span class=\"code-keyword\">this</span>.services[e]},Pe.prototype.handleText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a=<span class=\"code-keyword\">this</span>.current708Packet.data[e],s=(r=Le[n=(i?<span class=\"code-number\">4096</span>:<span class=\"code-number\">0</span>)|a]||n,<span class=\"code-number\">4096</span>&amp;n&amp;&amp;n===r?<span class=\"code-string\">\"\"</span>:<span class=\"code-built_in\">String</span>.fromCharCode(r)),o=t.currentWindow;<span class=\"code-keyword\">return</span> o.pendingNewLine&amp;&amp;!o.isEmpty()&amp;&amp;o.newLine(<span class=\"code-keyword\">this</span>.getPts(e)),o.pendingNewLine=!<span class=\"code-number\">1</span>,o.addText(s),e},Pe.prototype.setCurrentWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">7</span>&amp;<span class=\"code-keyword\">this</span>.current708Packet.data[e];<span class=\"code-keyword\">return</span> t.setCurrentWindow(i),e},Pe.prototype.defineWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=<span class=\"code-number\">7</span>&amp;n;t.setCurrentWindow(r);<span class=\"code-keyword\">var</span> a=t.currentWindow;<span class=\"code-keyword\">return</span> n=i[++e],a.visible=(<span class=\"code-number\">32</span>&amp;n)&gt;&gt;<span class=\"code-number\">5</span>,a.rowLock=(<span class=\"code-number\">16</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,a.columnLock=(<span class=\"code-number\">8</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,a.priority=<span class=\"code-number\">7</span>&amp;n,n=i[++e],a.relativePositioning=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">7</span>,a.anchorVertical=<span class=\"code-number\">127</span>&amp;n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,a.rowCount=<span class=\"code-number\">15</span>&amp;n,n=i[++e],a.columnCount=<span class=\"code-number\">63</span>&amp;n,n=i[++e],a.windowStyle=(<span class=\"code-number\">56</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,a.penStyle=<span class=\"code-number\">7</span>&amp;n,a.virtualRowCount=a.rowCount+<span class=\"code-number\">1</span>,e},Pe.prototype.setWindowAttributes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;<span class=\"code-keyword\">return</span> n=i[++e],r.fillOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.fillRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.fillGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.fillBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.borderType=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.borderRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.borderGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.borderBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.borderType+=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">5</span>,r.wordWrap=(<span class=\"code-number\">64</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.printDirection=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.scrollDirection=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.justify=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.effectSpeed=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.effectDirection=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.displayEffect=<span class=\"code-number\">3</span>&amp;n,e},Pe.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=<span class=\"code-number\">0</span>;n&lt;<span class=\"code-number\">8</span>;n++)t.windows[n].visible&amp;&amp;!t.windows[n].isEmpty()&amp;&amp;i.push(t.windows[n].getText());t.endPts=e,t.text=i.join(<span class=\"code-string\">\"\\n\\n\"</span>),<span class=\"code-keyword\">this</span>.pushCaption(t),t.startPts=e},Pe.prototype.pushCaption=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"\"</span>!==e.text&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:e.startPts,<span class=\"code-attr\">endPts</span>:e.endPts,<span class=\"code-attr\">text</span>:e.text,<span class=\"code-attr\">stream</span>:<span class=\"code-string\">\"cc708_\"</span>+e.serviceNum}),e.text=<span class=\"code-string\">\"\"</span>,e.startPts=e.endPts)},Pe.prototype.displayWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e},Pe.prototype.hideWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e},Pe.prototype.toggleWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible^=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e},Pe.prototype.clearWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;t.windows[r].clearText();<span class=\"code-keyword\">return</span> e},Pe.prototype.deleteWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;t.windows[r].reset();<span class=\"code-keyword\">return</span> e},Pe.prototype.setPenAttributes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;<span class=\"code-keyword\">return</span> n=i[++e],r.textTag=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.offset=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.penSize=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.italics=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">7</span>,r.underline=(<span class=\"code-number\">64</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.edgeType=(<span class=\"code-number\">56</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,r.fontStyle=<span class=\"code-number\">7</span>&amp;n,e},Pe.prototype.setPenColor=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penColor;<span class=\"code-keyword\">return</span> n=i[++e],r.fgOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.fgRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.fgGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.fgBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.bgOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.bgRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.bgGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.bgBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.edgeRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.edgeGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.edgeBlue=<span class=\"code-number\">3</span>&amp;n,e},Pe.prototype.setPenLocation=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;<span class=\"code-keyword\">return</span> t.currentWindow.pendingNewLine=!<span class=\"code-number\">0</span>,n=i[++e],r.row=<span class=\"code-number\">15</span>&amp;n,n=i[++e],r.column=<span class=\"code-number\">63</span>&amp;n,e},Pe.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushDisplayed(i,t),<span class=\"code-keyword\">this</span>.initService(t.serviceNum,e)};<span class=\"code-keyword\">var</span> Ce={<span class=\"code-number\">42</span>:<span class=\"code-number\">225</span>,<span class=\"code-number\">92</span>:<span class=\"code-number\">233</span>,<span class=\"code-number\">94</span>:<span class=\"code-number\">237</span>,<span class=\"code-number\">95</span>:<span class=\"code-number\">243</span>,<span class=\"code-number\">96</span>:<span class=\"code-number\">250</span>,<span class=\"code-number\">123</span>:<span class=\"code-number\">231</span>,<span class=\"code-number\">124</span>:<span class=\"code-number\">247</span>,<span class=\"code-number\">125</span>:<span class=\"code-number\">209</span>,<span class=\"code-number\">126</span>:<span class=\"code-number\">241</span>,<span class=\"code-number\">127</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">304</span>:<span class=\"code-number\">174</span>,<span class=\"code-number\">305</span>:<span class=\"code-number\">176</span>,<span class=\"code-number\">306</span>:<span class=\"code-number\">189</span>,<span class=\"code-number\">307</span>:<span class=\"code-number\">191</span>,<span class=\"code-number\">308</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">309</span>:<span class=\"code-number\">162</span>,<span class=\"code-number\">310</span>:<span class=\"code-number\">163</span>,<span class=\"code-number\">311</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">312</span>:<span class=\"code-number\">224</span>,<span class=\"code-number\">313</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">314</span>:<span class=\"code-number\">232</span>,<span class=\"code-number\">315</span>:<span class=\"code-number\">226</span>,<span class=\"code-number\">316</span>:<span class=\"code-number\">234</span>,<span class=\"code-number\">317</span>:<span class=\"code-number\">238</span>,<span class=\"code-number\">318</span>:<span class=\"code-number\">244</span>,<span class=\"code-number\">319</span>:<span class=\"code-number\">251</span>,<span class=\"code-number\">544</span>:<span class=\"code-number\">193</span>,<span class=\"code-number\">545</span>:<span class=\"code-number\">201</span>,<span class=\"code-number\">546</span>:<span class=\"code-number\">211</span>,<span class=\"code-number\">547</span>:<span class=\"code-number\">218</span>,<span class=\"code-number\">548</span>:<span class=\"code-number\">220</span>,<span class=\"code-number\">549</span>:<span class=\"code-number\">252</span>,<span class=\"code-number\">550</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">551</span>:<span class=\"code-number\">161</span>,<span class=\"code-number\">552</span>:<span class=\"code-number\">42</span>,<span class=\"code-number\">553</span>:<span class=\"code-number\">39</span>,<span class=\"code-number\">554</span>:<span class=\"code-number\">8212</span>,<span class=\"code-number\">555</span>:<span class=\"code-number\">169</span>,<span class=\"code-number\">556</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">557</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">558</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">559</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">560</span>:<span class=\"code-number\">192</span>,<span class=\"code-number\">561</span>:<span class=\"code-number\">194</span>,<span class=\"code-number\">562</span>:<span class=\"code-number\">199</span>,<span class=\"code-number\">563</span>:<span class=\"code-number\">200</span>,<span class=\"code-number\">564</span>:<span class=\"code-number\">202</span>,<span class=\"code-number\">565</span>:<span class=\"code-number\">203</span>,<span class=\"code-number\">566</span>:<span class=\"code-number\">235</span>,<span class=\"code-number\">567</span>:<span class=\"code-number\">206</span>,<span class=\"code-number\">568</span>:<span class=\"code-number\">207</span>,<span class=\"code-number\">569</span>:<span class=\"code-number\">239</span>,<span class=\"code-number\">570</span>:<span class=\"code-number\">212</span>,<span class=\"code-number\">571</span>:<span class=\"code-number\">217</span>,<span class=\"code-number\">572</span>:<span class=\"code-number\">249</span>,<span class=\"code-number\">573</span>:<span class=\"code-number\">219</span>,<span class=\"code-number\">574</span>:<span class=\"code-number\">171</span>,<span class=\"code-number\">575</span>:<span class=\"code-number\">187</span>,<span class=\"code-number\">800</span>:<span class=\"code-number\">195</span>,<span class=\"code-number\">801</span>:<span class=\"code-number\">227</span>,<span class=\"code-number\">802</span>:<span class=\"code-number\">205</span>,<span class=\"code-number\">803</span>:<span class=\"code-number\">204</span>,<span class=\"code-number\">804</span>:<span class=\"code-number\">236</span>,<span class=\"code-number\">805</span>:<span class=\"code-number\">210</span>,<span class=\"code-number\">806</span>:<span class=\"code-number\">242</span>,<span class=\"code-number\">807</span>:<span class=\"code-number\">213</span>,<span class=\"code-number\">808</span>:<span class=\"code-number\">245</span>,<span class=\"code-number\">809</span>:<span class=\"code-number\">123</span>,<span class=\"code-number\">810</span>:<span class=\"code-number\">125</span>,<span class=\"code-number\">811</span>:<span class=\"code-number\">92</span>,<span class=\"code-number\">812</span>:<span class=\"code-number\">94</span>,<span class=\"code-number\">813</span>:<span class=\"code-number\">95</span>,<span class=\"code-number\">814</span>:<span class=\"code-number\">124</span>,<span class=\"code-number\">815</span>:<span class=\"code-number\">126</span>,<span class=\"code-number\">816</span>:<span class=\"code-number\">196</span>,<span class=\"code-number\">817</span>:<span class=\"code-number\">228</span>,<span class=\"code-number\">818</span>:<span class=\"code-number\">214</span>,<span class=\"code-number\">819</span>:<span class=\"code-number\">246</span>,<span class=\"code-number\">820</span>:<span class=\"code-number\">223</span>,<span class=\"code-number\">821</span>:<span class=\"code-number\">165</span>,<span class=\"code-number\">822</span>:<span class=\"code-number\">164</span>,<span class=\"code-number\">823</span>:<span class=\"code-number\">9474</span>,<span class=\"code-number\">824</span>:<span class=\"code-number\">197</span>,<span class=\"code-number\">825</span>:<span class=\"code-number\">229</span>,<span class=\"code-number\">826</span>:<span class=\"code-number\">216</span>,<span class=\"code-number\">827</span>:<span class=\"code-number\">248</span>,<span class=\"code-number\">828</span>:<span class=\"code-number\">9484</span>,<span class=\"code-number\">829</span>:<span class=\"code-number\">9488</span>,<span class=\"code-number\">830</span>:<span class=\"code-number\">9492</span>,<span class=\"code-number\">831</span>:<span class=\"code-number\">9496</span>},Ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===e?<span class=\"code-string\">\"\"</span>:(e=Ce[e]||e,<span class=\"code-built_in\">String</span>.fromCharCode(e))},Oe=[<span class=\"code-number\">4352</span>,<span class=\"code-number\">4384</span>,<span class=\"code-number\">4608</span>,<span class=\"code-number\">4640</span>,<span class=\"code-number\">5376</span>,<span class=\"code-number\">5408</span>,<span class=\"code-number\">5632</span>,<span class=\"code-number\">5664</span>,<span class=\"code-number\">5888</span>,<span class=\"code-number\">5920</span>,<span class=\"code-number\">4096</span>,<span class=\"code-number\">4864</span>,<span class=\"code-number\">4896</span>,<span class=\"code-number\">5120</span>,<span class=\"code-number\">5152</span>],De=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=[],t=<span class=\"code-number\">15</span>;t--;)e.push(<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e},xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.field_=t||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.dataChannel_=i||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.name_=<span class=\"code-string\">\"CC\"</span>+(<span class=\"code-number\">1</span>+(<span class=\"code-keyword\">this</span>.field_&lt;&lt;<span class=\"code-number\">1</span>|<span class=\"code-keyword\">this</span>.dataChannel_)),<span class=\"code-keyword\">this</span>.setConstants(),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a;<span class=\"code-keyword\">if</span>((t=<span class=\"code-number\">32639</span>&amp;e.ccData)!==<span class=\"code-keyword\">this</span>.lastControlCode_){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4096</span>==(<span class=\"code-number\">61440</span>&amp;t)?<span class=\"code-keyword\">this</span>.lastControlCode_=t:t!==<span class=\"code-keyword\">this</span>.PADDING_&amp;&amp;(<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>),n=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,r=<span class=\"code-number\">255</span>&amp;t,t!==<span class=\"code-keyword\">this</span>.PADDING_)<span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.END_OF_CAPTION_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),i=<span class=\"code-keyword\">this</span>.displayed_,<span class=\"code-keyword\">this</span>.displayed_=<span class=\"code-keyword\">this</span>.nonDisplayed_,<span class=\"code-keyword\">this</span>.nonDisplayed_=i,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">3</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">4</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_)<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.shiftRowsUp_(),<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.BACKSPACE_)<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=De();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.nonDisplayed_=De();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_)<span class=\"code-string\">\"paintOn\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=De()),<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"paintOn\"</span>,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isSpecialCharacter(n,r))a=Ue((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isExtCharacter(n,r))<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>),a=Ue((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isMidRowCode(n,r))<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,<span class=\"code-string\">\" \"</span>),<span class=\"code-keyword\">this</span>.column_++,<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>]),<span class=\"code-number\">1</span>==(<span class=\"code-number\">1</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isOffsetControlCode(n,r))<span class=\"code-keyword\">this</span>.column_+=<span class=\"code-number\">3</span>&amp;r;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isPAC(n,r)){<span class=\"code-keyword\">var</span> s=Oe.indexOf(<span class=\"code-number\">7968</span>&amp;t);<span class=\"code-string\">\"rollUp\"</span>===<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(s-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>&lt;<span class=\"code-number\">0</span>&amp;&amp;(s=<span class=\"code-keyword\">this</span>.rollUpRows_<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.setRollUp(e.pts,s)),s!==<span class=\"code-keyword\">this</span>.row_&amp;&amp;(<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.row_=s),<span class=\"code-number\">1</span>&amp;r&amp;&amp;<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.formatting_.indexOf(<span class=\"code-string\">\"u\"</span>)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]),<span class=\"code-number\">16</span>==(<span class=\"code-number\">16</span>&amp;t)&amp;&amp;(<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">4</span>*((<span class=\"code-number\">14</span>&amp;t)&gt;&gt;<span class=\"code-number\">1</span>)),<span class=\"code-keyword\">this</span>.isColorPAC(r)&amp;&amp;<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>])}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.isNormalChar(n)&amp;&amp;(<span class=\"code-number\">0</span>===r&amp;&amp;(r=<span class=\"code-literal\">null</span>),a=Ue(n),a+=Ue(r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_+=a.length)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>}};xe.prototype=<span class=\"code-keyword\">new</span> V,xe.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.displayed_.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> e.trim()}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">console</span>.error(<span class=\"code-string\">\"Skipping malformed caption.\"</span>),<span class=\"code-string\">\"\"</span>}})).join(<span class=\"code-string\">\"\\n\"</span>).replace(<span class=\"code-regexp\">/^\\n+|\\n+$/g</span>,<span class=\"code-string\">\"\"</span>);t.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:<span class=\"code-keyword\">this</span>.startPts_,<span class=\"code-attr\">endPts</span>:e,<span class=\"code-attr\">text</span>:t,<span class=\"code-attr\">stream</span>:<span class=\"code-keyword\">this</span>.name_})},xe.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.topRow_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.startPts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.displayed_=De(),<span class=\"code-keyword\">this</span>.nonDisplayed_=De(),<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.formatting_=[]},xe.prototype.setConstants=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.dataChannel_?(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">16</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">17</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">20</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">23</span>):<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.dataChannel_&amp;&amp;(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">24</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">25</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">28</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">31</span>),<span class=\"code-keyword\">this</span>.PADDING_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_=<span class=\"code-number\">32</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.END_OF_CAPTION_=<span class=\"code-number\">47</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_=<span class=\"code-number\">37</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_=<span class=\"code-number\">38</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_=<span class=\"code-number\">39</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_=<span class=\"code-number\">45</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_=<span class=\"code-number\">41</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.BACKSPACE_=<span class=\"code-number\">33</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_=<span class=\"code-number\">44</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class=\"code-number\">46</span>|<span class=\"code-keyword\">this</span>.CONTROL_},xe.prototype.isSpecialCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">48</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},xe.prototype.isExtCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>(e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">1</span>||e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">2</span>)&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},xe.prototype.isMidRowCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">47</span>},xe.prototype.isOffsetControlCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.OFFSET_&amp;&amp;t&gt;=<span class=\"code-number\">33</span>&amp;&amp;t&lt;=<span class=\"code-number\">35</span>},xe.prototype.isPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-keyword\">this</span>.BASE_&amp;&amp;e&lt;<span class=\"code-keyword\">this</span>.BASE_+<span class=\"code-number\">8</span>&amp;&amp;t&gt;=<span class=\"code-number\">64</span>&amp;&amp;t&lt;=<span class=\"code-number\">127</span>},xe.prototype.isColorPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">64</span>&amp;&amp;e&lt;=<span class=\"code-number\">79</span>||e&gt;=<span class=\"code-number\">96</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},xe.prototype.isNormalChar=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},xe.prototype.setRollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"rollUp\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"rollUp\"</span>,<span class=\"code-keyword\">this</span>.flushDisplayed(e),<span class=\"code-keyword\">this</span>.nonDisplayed_=De(),<span class=\"code-keyword\">this</span>.displayed_=De()),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-keyword\">this</span>.row_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-keyword\">this</span>.rollUpRows_;i++)<span class=\"code-keyword\">this</span>.displayed_[t-i]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i],<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.row_),<span class=\"code-keyword\">this</span>.topRow_=t-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>},xe.prototype.addFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.formatting_=<span class=\"code-keyword\">this</span>.formatting_.concat(t);<span class=\"code-keyword\">var</span> i=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>}),<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,i)},xe.prototype.clearFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.formatting_.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.formatting_.reverse().reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;/\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>}),<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>.formatting_=[],<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,t)}},xe.prototype.popOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=i},xe.prototype.rollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i},xe.prototype.shiftRowsUp_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-keyword\">this</span>.topRow_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.row_+<span class=\"code-number\">1</span>;e&lt;<span class=\"code-number\">15</span>;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.topRow_;e&lt;<span class=\"code-keyword\">this</span>.row_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-keyword\">this</span>.displayed_[e+<span class=\"code-number\">1</span>];<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-string\">\"\"</span>},xe.prototype.paintOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i};<span class=\"code-keyword\">var</span> Re={<span class=\"code-attr\">CaptionStream</span>:we,<span class=\"code-attr\">Cea608Stream</span>:xe,<span class=\"code-attr\">Cea708Stream</span>:Pe},Me={<span class=\"code-attr\">H264_STREAM_TYPE</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">ADTS_STREAM_TYPE</span>:<span class=\"code-number\">15</span>,<span class=\"code-attr\">METADATA_STREAM_TYPE</span>:<span class=\"code-number\">21</span>},Be=<span class=\"code-string\">\"shared\"</span>,Fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(e&gt;t&amp;&amp;(i=<span class=\"code-number\">-1</span>);<span class=\"code-built_in\">Math</span>.abs(t-e)&gt;<span class=\"code-number\">4294967296</span>;)e+=<span class=\"code-number\">8589934592</span>*i;<span class=\"code-keyword\">return</span> e},Ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.type_=t||Be,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.type_!==Be&amp;&amp;e.type!==<span class=\"code-keyword\">this</span>.type_||(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.dts),e.dts=Fe(e.dts,n),e.pts=Fe(e.pts,n),i=e.dts,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e))},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=i,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.discontinuity=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.discontinuity(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};Ne.prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> qe,We=Ne,Ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=t;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r},He=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(Ve(e,t,i))},Ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},je={<span class=\"code-attr\">TXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=He(e.data,<span class=\"code-number\">1</span>,t),e.value=He(e.data,t+<span class=\"code-number\">1</span>,e.data.length).replace(<span class=\"code-regexp\">/\\0*$/</span>,<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">break</span>}e.data=e.value}},<span class=\"code-attr\">WXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>])<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=He(e.data,<span class=\"code-number\">1</span>,t),e.url=He(e.data,t+<span class=\"code-number\">1</span>,e.data.length);<span class=\"code-keyword\">break</span>}},<span class=\"code-attr\">PRIV</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.owner=(i=e.data,<span class=\"code-built_in\">unescape</span>(Ve(i,<span class=\"code-number\">0</span>,t)));<span class=\"code-keyword\">break</span>}e.privateData=e.data.subarray(t+<span class=\"code-number\">1</span>),e.data=e.privateData}};(qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">debug</span>:!(!e||!e.debug),<span class=\"code-attr\">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class=\"code-number\">0</span>,r=[],a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(qe.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.dispatchType=Me.METADATA_STREAM_TYPE.toString(<span class=\"code-number\">16</span>),i.descriptor)<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;i.descriptor.length;t++)<span class=\"code-keyword\">this</span>.dispatchType+=(<span class=\"code-string\">\"00\"</span>+i.descriptor[t].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,s,o,u,d;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"timed-metadata\"</span>===e.type)<span class=\"code-keyword\">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class=\"code-number\">0</span>,r.length=<span class=\"code-number\">0</span>),<span class=\"code-number\">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class=\"code-number\">10</span>||e.data[<span class=\"code-number\">0</span>]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)))i.debug&amp;&amp;<span class=\"code-built_in\">console</span>.log(<span class=\"code-string\">\"Skipping unrecognized metadata packet\"</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(r.push(e),a+=e.data.byteLength,<span class=\"code-number\">1</span>===r.length&amp;&amp;(n=Ge(e.data.subarray(<span class=\"code-number\">6</span>,<span class=\"code-number\">10</span>)),n+=<span class=\"code-number\">10</span>),!(a&lt;n)){<span class=\"code-keyword\">for</span>(t={<span class=\"code-attr\">data</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),<span class=\"code-attr\">frames</span>:[],<span class=\"code-attr\">pts</span>:r[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">dts</span>:r[<span class=\"code-number\">0</span>].dts},d=<span class=\"code-number\">0</span>;d&lt;n;)t.data.set(r[<span class=\"code-number\">0</span>].data.subarray(<span class=\"code-number\">0</span>,n-d),d),d+=r[<span class=\"code-number\">0</span>].data.byteLength,a-=r[<span class=\"code-number\">0</span>].data.byteLength,r.shift();s=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;t.data[<span class=\"code-number\">5</span>]&amp;&amp;(s+=<span class=\"code-number\">4</span>,s+=Ge(t.data.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)),n-=Ge(t.data.subarray(<span class=\"code-number\">16</span>,<span class=\"code-number\">20</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((o=Ge(t.data.subarray(s+<span class=\"code-number\">4</span>,s+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">console</span>.log(<span class=\"code-string\">\"Malformed ID3 frame encountered. Skipping metadata parsing.\"</span>);<span class=\"code-keyword\">if</span>((u={<span class=\"code-attr\">id</span>:<span class=\"code-built_in\">String</span>.fromCharCode(t.data[s],t.data[s+<span class=\"code-number\">1</span>],t.data[s+<span class=\"code-number\">2</span>],t.data[s+<span class=\"code-number\">3</span>]),<span class=\"code-attr\">data</span>:t.data.subarray(s+<span class=\"code-number\">10</span>,s+o+<span class=\"code-number\">10</span>)}).key=u.id,je[u.id]&amp;&amp;(je[u.id](u),<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===u.owner)){<span class=\"code-keyword\">var</span> l=u.data,h=(<span class=\"code-number\">1</span>&amp;l[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|l[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|l[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|l[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|l[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;h*=<span class=\"code-number\">4</span>,h+=<span class=\"code-number\">3</span>&amp;l[<span class=\"code-number\">7</span>],u.timeStamp=h,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.pts&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.dts&amp;&amp;(t.pts=u.timeStamp,t.dts=u.timeStamp),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestamp\"</span>,u)}t.frames.push(u),s+=<span class=\"code-number\">10</span>,s+=o}<span class=\"code-keyword\">while</span>(s&lt;n);<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t)}}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> ze,Xe,Qe,Ye=qe,Ke=We,$e=<span class=\"code-number\">188</span>;(ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>($e),t=<span class=\"code-number\">0</span>;ze.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-number\">0</span>,a=$e;<span class=\"code-keyword\">for</span>(t?((n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class=\"code-number\">0</span>,t)),n.set(i,t),t=<span class=\"code-number\">0</span>):n=i;a&lt;n.byteLength;)<span class=\"code-number\">71</span>!==n[r]||<span class=\"code-number\">71</span>!==n[a]?(r++,a++):(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,n.subarray(r,a)),r+=$e,a+=$e);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class=\"code-number\">0</span>),t=n.byteLength-r)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t===$e&amp;&amp;<span class=\"code-number\">71</span>===e[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e),t=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V,(Xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n;Xe.prototype.init.call(<span class=\"code-keyword\">this</span>),n=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt=[],<span class=\"code-keyword\">this</span>.programMapTable=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class=\"code-number\">1</span>),<span class=\"code-string\">\"pat\"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.section_number=e[<span class=\"code-number\">7</span>],t.last_section_number=e[<span class=\"code-number\">8</span>],n.pmtPid=(<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>],t.pmtPid=n.pmtPid},i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,r;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">for</span>(n.programMapTable={<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"timed-metadata\"</span>:{}},i=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>,r=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>]);r&lt;i;){<span class=\"code-keyword\">var</span> a=e[r],s=(<span class=\"code-number\">31</span>&amp;e[r+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">2</span>];a===Me.H264_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Me.ADTS_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Me.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][s]=a),r+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[r+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">4</span>])}t.programMapTable=n.programMapTable}},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={},n=<span class=\"code-number\">4</span>;<span class=\"code-keyword\">if</span>(i.payloadUnitStartIndicator=!!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">1</span>]),i.pid=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">1</span>],i.pid&lt;&lt;=<span class=\"code-number\">8</span>,i.pid|=t[<span class=\"code-number\">2</span>],(<span class=\"code-number\">48</span>&amp;t[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(n+=t[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">0</span>===i.pid)i.type=<span class=\"code-string\">\"pat\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(i.pid===<span class=\"code-keyword\">this</span>.pmtPid)<span class=\"code-keyword\">for</span>(i.type=<span class=\"code-string\">\"pmt\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.length;)<span class=\"code-keyword\">this</span>.processPes_.apply(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.shift());<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.programMapTable?<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class=\"code-keyword\">this</span>.processPes_(t,n,i)},<span class=\"code-keyword\">this</span>.processPes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{i.pid===<span class=\"code-keyword\">this</span>.programMapTable.video?i.streamType=Me.H264_STREAM_TYPE:i.pid===<span class=\"code-keyword\">this</span>.programMapTable.audio?i.streamType=Me.ADTS_STREAM_TYPE:i.streamType=<span class=\"code-keyword\">this</span>.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][i.pid],i.type=<span class=\"code-string\">\"pes\"</span>,i.data=e.subarray(t),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i)}}).prototype=<span class=\"code-keyword\">new</span> V,Xe.STREAM_TYPES={<span class=\"code-attr\">h264</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">adts</span>:<span class=\"code-number\">15</span>},(Qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>,i={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},n={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},r={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.size),o={<span class=\"code-attr\">type</span>:i},u=<span class=\"code-number\">0</span>,d=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class=\"code-number\">9</span>)){<span class=\"code-keyword\">for</span>(o.trackId=e.data[<span class=\"code-number\">0</span>].pid,u=<span class=\"code-number\">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class=\"code-keyword\">var</span> l,h,c;l=s,(h=o).packetLength=<span class=\"code-number\">6</span>+(l[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">8</span>|l[<span class=\"code-number\">5</span>]),h.dataAlignmentIndicator=<span class=\"code-number\">0</span>!=(<span class=\"code-number\">4</span>&amp;l[<span class=\"code-number\">6</span>]),<span class=\"code-number\">192</span>&amp;(c=l[<span class=\"code-number\">7</span>])&amp;&amp;(h.pts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,h.pts*=<span class=\"code-number\">4</span>,h.pts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,h.dts=h.pts,<span class=\"code-number\">64</span>&amp;c&amp;&amp;(h.dts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,h.dts*=<span class=\"code-number\">4</span>,h.dts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),h.data=l.subarray(<span class=\"code-number\">9</span>+l[<span class=\"code-number\">8</span>]),r=<span class=\"code-string\">\"video\"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class=\"code-number\">0</span>,e.data.length=<span class=\"code-number\">0</span>),r&amp;&amp;t.trigger(<span class=\"code-string\">\"data\"</span>,o)}};Qe.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">s</span>)</span>{({<span class=\"code-attr\">pat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">pes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t;<span class=\"code-keyword\">switch</span>(s.streamType){<span class=\"code-keyword\">case</span> Me.H264_STREAM_TYPE:e=i,t=<span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Me.ADTS_STREAM_TYPE:e=n,t=<span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Me.METADATA_STREAM_TYPE:e=r,t=<span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span>}s.payloadUnitStartIndicator&amp;&amp;a(e,t,!<span class=\"code-number\">0</span>),e.data.push(s),e.size+=s.data.byteLength},<span class=\"code-attr\">pmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">tracks</span>:[]};<span class=\"code-literal\">null</span>!==(e=s.programMapTable).video&amp;&amp;i.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.video,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"avc\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>}),<span class=\"code-literal\">null</span>!==e.audio&amp;&amp;i.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.audio,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>}),t.trigger(<span class=\"code-string\">\"data\"</span>,i)}})[s.type]()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.size=<span class=\"code-number\">0</span>,i.data.length=<span class=\"code-number\">0</span>,n.size=<span class=\"code-number\">0</span>,n.data.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flushStreams_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a(i,<span class=\"code-string\">\"video\"</span>),a(n,<span class=\"code-string\">\"audio\"</span>),a(r,<span class=\"code-string\">\"timed-metadata\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flushStreams_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> Je={<span class=\"code-attr\">PAT_PID</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MP2T_PACKET_LENGTH</span>:$e,<span class=\"code-attr\">TransportPacketStream</span>:ze,<span class=\"code-attr\">TransportParseStream</span>:Xe,<span class=\"code-attr\">ElementaryStream</span>:Qe,<span class=\"code-attr\">TimestampRolloverStream</span>:Ke,<span class=\"code-attr\">CaptionStream</span>:Re.CaptionStream,<span class=\"code-attr\">Cea608Stream</span>:Re.Cea608Stream,<span class=\"code-attr\">Cea708Stream</span>:Re.Cea708Stream,<span class=\"code-attr\">MetadataStream</span>:Ye};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> Ze <span class=\"code-keyword\">in</span> Me)Me.hasOwnProperty(Ze)&amp;&amp;(Je[Ze]=Me[Ze]);<span class=\"code-keyword\">var</span> et,tt=Je,it=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>];(et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;et.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d,l=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e||(i=<span class=\"code-number\">0</span>),<span class=\"code-string\">\"audio\"</span>===n.type)<span class=\"code-keyword\">for</span>(t?(o=t,(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;l+<span class=\"code-number\">5</span>&lt;t.length;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===t[l]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;t[l+<span class=\"code-number\">1</span>])){<span class=\"code-keyword\">if</span>(a=<span class=\"code-number\">2</span>*(<span class=\"code-number\">1</span>&amp;~t[l+<span class=\"code-number\">1</span>]),r=(<span class=\"code-number\">3</span>&amp;t[l+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">11</span>|t[l+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>|(<span class=\"code-number\">224</span>&amp;t[l+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,d=<span class=\"code-number\">9e4</span>*(u=<span class=\"code-number\">1024</span>*(<span class=\"code-number\">1</span>+(<span class=\"code-number\">3</span>&amp;t[l+<span class=\"code-number\">6</span>])))/it[(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],s=l+r,t.byteLength&lt;s)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">pts</span>:n.pts+i*d,<span class=\"code-attr\">dts</span>:n.dts+i*d,<span class=\"code-attr\">sampleCount</span>:u,<span class=\"code-attr\">audioobjecttype</span>:<span class=\"code-number\">1</span>+(t[l+<span class=\"code-number\">2</span>]&gt;&gt;&gt;<span class=\"code-number\">6</span>&amp;<span class=\"code-number\">3</span>),<span class=\"code-attr\">channelcount</span>:(<span class=\"code-number\">1</span>&amp;t[l+<span class=\"code-number\">2</span>])&lt;&lt;<span class=\"code-number\">2</span>|(<span class=\"code-number\">192</span>&amp;t[l+<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">samplerate</span>:it[(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],<span class=\"code-attr\">samplingfrequencyindex</span>:(<span class=\"code-number\">60</span>&amp;t[l+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">samplesize</span>:<span class=\"code-number\">16</span>,<span class=\"code-attr\">data</span>:t.subarray(l+<span class=\"code-number\">7</span>+a,s)}),i++,t.byteLength===s)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span>(t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>);t=t.subarray(s)}<span class=\"code-keyword\">else</span> l++},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> nt,rt,at,st=et,ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byteLength,i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.length=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t},<span class=\"code-keyword\">this</span>.bitsAvailable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t+n},<span class=\"code-keyword\">this</span>.loadWord=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=e.byteLength-t,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>),s=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">4</span>,t);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"no bytes available\"</span>);a.set(e.subarray(r,r+s)),i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer).getUint32(<span class=\"code-number\">0</span>),n=<span class=\"code-number\">8</span>*s,t-=s},<span class=\"code-keyword\">this</span>.skipBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class=\"code-number\">8</span>*(r=<span class=\"code-built_in\">Math</span>.floor(e/<span class=\"code-number\">8</span>)),t-=r,<span class=\"code-keyword\">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class=\"code-keyword\">this</span>.readBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class=\"code-number\">32</span>-r;<span class=\"code-keyword\">return</span>(n-=r)&gt;<span class=\"code-number\">0</span>?i&lt;&lt;=r:t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.loadWord(),(r=e-r)&gt;<span class=\"code-number\">0</span>?a&lt;&lt;r|<span class=\"code-keyword\">this</span>.readBits(r):a},<span class=\"code-keyword\">this</span>.skipLeadingZeros=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;n;++e)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!=(i&amp;<span class=\"code-number\">2147483648</span>&gt;&gt;&gt;e))<span class=\"code-keyword\">return</span> i&lt;&lt;=e,n-=e,e;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.loadWord(),e+<span class=\"code-keyword\">this</span>.skipLeadingZeros()},<span class=\"code-keyword\">this</span>.skipUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.skipExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.skipLeadingZeros();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(e+<span class=\"code-number\">1</span>)<span class=\"code-number\">-1</span>},<span class=\"code-keyword\">this</span>.readExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb();<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>&amp;e?<span class=\"code-number\">1</span>+e&gt;&gt;&gt;<span class=\"code-number\">1</span>:<span class=\"code-number\">-1</span>*(e&gt;&gt;&gt;<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readBoolean=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readUnsignedByte=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">8</span>)},<span class=\"code-keyword\">this</span>.loadWord()};(rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i=<span class=\"code-number\">0</span>;rt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r;t?((r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=t.byteLength;i&lt;a<span class=\"code-number\">-3</span>;i++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===t[i+<span class=\"code-number\">2</span>]){e=i+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;e&lt;a;)<span class=\"code-keyword\">switch</span>(t[e]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]){e+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e++;<span class=\"code-keyword\">break</span>}i+<span class=\"code-number\">3</span>!==e<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>));<span class=\"code-keyword\">do</span>{e++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>)),i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:e+=<span class=\"code-number\">3</span>}t=t.subarray(i),e-=i,i=<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>)),t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V,at={<span class=\"code-number\">100</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">110</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">122</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">244</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">44</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">128</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">138</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">139</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">134</span>:!<span class=\"code-number\">0</span>},(nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s,o=<span class=\"code-keyword\">new</span> rt;nt.prototype.init.call(<span class=\"code-keyword\">this</span>),e=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"video\"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">s</span>)</span>{<span class=\"code-keyword\">var</span> o={<span class=\"code-attr\">trackId</span>:t,<span class=\"code-attr\">pts</span>:i,<span class=\"code-attr\">dts</span>:n,<span class=\"code-attr\">data</span>:s};<span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;s[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:o.nalUnitType=<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:o.nalUnitType=<span class=\"code-string\">\"sei_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>));<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:o.nalUnitType=<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>)),o.config=a(o.escapedRBSP);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:o.nalUnitType=<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:o.nalUnitType=<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>}e.trigger(<span class=\"code-string\">\"data\"</span>,o)})),o.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"done\"</span>)})),o.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"partialdone\"</span>)})),o.on(<span class=\"code-string\">\"reset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"reset\"</span>)})),o.on(<span class=\"code-string\">\"endedtimeline\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)})),<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.flush()},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.partialFlush()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.reset()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.endTimeline()},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">8</span>,r=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e;i++)<span class=\"code-number\">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class=\"code-number\">256</span>)%<span class=\"code-number\">256</span>),n=<span class=\"code-number\">0</span>===r?n:r},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d,l,h,c,f,m,p=<span class=\"code-number\">0</span>,g=<span class=\"code-number\">0</span>,y=<span class=\"code-number\">0</span>,v=<span class=\"code-number\">0</span>,_=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(i=(t=<span class=\"code-keyword\">new</span> ot(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),at[i]&amp;&amp;(<span class=\"code-number\">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()))<span class=\"code-keyword\">for</span>(c=<span class=\"code-number\">3</span>!==a?<span class=\"code-number\">8</span>:<span class=\"code-number\">12</span>,m=<span class=\"code-number\">0</span>;m&lt;c;m++)t.readBoolean()&amp;&amp;s(m&lt;<span class=\"code-number\">6</span>?<span class=\"code-number\">16</span>:<span class=\"code-number\">64</span>,t);<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===o)<span class=\"code-keyword\">for</span>(t.skipBits(<span class=\"code-number\">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),m=<span class=\"code-number\">0</span>;m&lt;u;m++)t.skipExpGolomb();<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(h=t.readBits(<span class=\"code-number\">1</span>))&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()&amp;&amp;(p=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class=\"code-keyword\">switch</span>(t.readUnsignedByte()){<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:f=[<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">2</span>:f=[<span class=\"code-number\">12</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">3</span>:f=[<span class=\"code-number\">10</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">4</span>:f=[<span class=\"code-number\">16</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:f=[<span class=\"code-number\">40</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:f=[<span class=\"code-number\">24</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:f=[<span class=\"code-number\">20</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:f=[<span class=\"code-number\">32</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:f=[<span class=\"code-number\">80</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">10</span>:f=[<span class=\"code-number\">18</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">11</span>:f=[<span class=\"code-number\">15</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">12</span>:f=[<span class=\"code-number\">64</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">13</span>:f=[<span class=\"code-number\">160</span>,<span class=\"code-number\">99</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">14</span>:f=[<span class=\"code-number\">4</span>,<span class=\"code-number\">3</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">15</span>:f=[<span class=\"code-number\">3</span>,<span class=\"code-number\">2</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">16</span>:f=[<span class=\"code-number\">2</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">255</span>:f=[t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte()]}f&amp;&amp;(_=f[<span class=\"code-number\">0</span>]/f[<span class=\"code-number\">1</span>])}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">profileIdc</span>:i,<span class=\"code-attr\">levelIdc</span>:n,<span class=\"code-attr\">profileCompatibility</span>:r,<span class=\"code-attr\">width</span>:<span class=\"code-built_in\">Math</span>.ceil((<span class=\"code-number\">16</span>*(d+<span class=\"code-number\">1</span>)<span class=\"code-number\">-2</span>*p<span class=\"code-number\">-2</span>*g)*_),<span class=\"code-attr\">height</span>:(<span class=\"code-number\">2</span>-h)*(l+<span class=\"code-number\">1</span>)*<span class=\"code-number\">16</span><span class=\"code-number\">-2</span>*y<span class=\"code-number\">-2</span>*v,<span class=\"code-attr\">sarRatio</span>:f}}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> ut,dt={<span class=\"code-attr\">H264Stream</span>:nt,<span class=\"code-attr\">NalByteStream</span>:rt},lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span> i=i&gt;=<span class=\"code-number\">0</span>?i:<span class=\"code-number\">0</span>,(<span class=\"code-number\">16</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">4</span>?i+<span class=\"code-number\">20</span>:i+<span class=\"code-number\">10</span>},ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.length-i&lt;<span class=\"code-number\">10</span>||t[i]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?i:e(t,i+=lt(t,i))},ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=ht(e,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e.length&gt;=t+<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-number\">255</span>==(<span class=\"code-number\">255</span>&amp;e[t])&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])&amp;&amp;<span class=\"code-number\">16</span>==(<span class=\"code-number\">22</span>&amp;e[t+<span class=\"code-number\">1</span>])},ft=lt,mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-number\">224</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,n=e[t+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>&amp;e[t+<span class=\"code-number\">3</span>]|n|i};(ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,t=<span class=\"code-number\">0</span>;ut.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.setTimestamp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t=e},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(e.length?(s=e.length,(e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class=\"code-number\">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class=\"code-number\">3</span>;)<span class=\"code-keyword\">if</span>(e[u]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>))<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>!=(<span class=\"code-number\">255</span>&amp;e[u])||<span class=\"code-number\">240</span>!=(<span class=\"code-number\">240</span>&amp;e[u+<span class=\"code-number\">1</span>]))u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">7</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=mt(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;a={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o),<span class=\"code-attr\">pts</span>:t,<span class=\"code-attr\">dts</span>:t},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,a),u+=o}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">10</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=ft(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;r={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"timed-metadata\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o)},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class=\"code-number\">0</span>?e.subarray(u):<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> pt,gt,yt,vt,_t=ut,bt=[<span class=\"code-string\">\"audioobjecttype\"</span>,<span class=\"code-string\">\"channelcount\"</span>,<span class=\"code-string\">\"samplerate\"</span>,<span class=\"code-string\">\"samplingfrequencyindex\"</span>,<span class=\"code-string\">\"samplesize\"</span>],Tt=[<span class=\"code-string\">\"width\"</span>,<span class=\"code-string\">\"height\"</span>,<span class=\"code-string\">\"profileIdc\"</span>,<span class=\"code-string\">\"levelIdc\"</span>,<span class=\"code-string\">\"profileCompatibility\"</span>,<span class=\"code-string\">\"sarRatio\"</span>],St=dt.H264Stream,It=ct,wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(e.length!==t.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">if</span>(e[i]!==t[i])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},Lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">dts</span>:e,<span class=\"code-attr\">pts</span>:e+(i-t)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">dts</span>:e+(n-t),<span class=\"code-attr\">pts</span>:e+(r-i)},<span class=\"code-attr\">prependedContentDuration</span>:a,<span class=\"code-attr\">baseMediaDecodeTime</span>:e}};(gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=[],n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;t=t||{},gt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{Ie(e,t),e&amp;&amp;bt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{e[i]=t[i]})),i.push(t)},<span class=\"code-keyword\">this</span>.setEarliestDts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r=e},<span class=\"code-keyword\">this</span>.setVideoBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{a=e},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> o,u,d,l,h,c,f;<span class=\"code-number\">0</span>!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=Se(e,t.keepOriginalTimestamps),f=ye(e,o,a,s),e.samples=_e(o),d=J(be(o)),i=[],u=Z(n,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),n++,l.set(u),l.set(d,u.byteLength),Te(e),h=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9216e4</span>/e.samplerate),o.length&amp;&amp;(c=o.length*h,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"segmentTimingInfo\"</span>,Lt(me(e.baseMediaDecodeTime,e.samplerate),o[<span class=\"code-number\">0</span>].dts,o[<span class=\"code-number\">0</span>].pts,o[<span class=\"code-number\">0</span>].dts+c,o[<span class=\"code-number\">0</span>].pts+c,f||<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">end</span>:o[<span class=\"code-number\">0</span>].pts+c})),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Te(e),i=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> V,(pt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=<span class=\"code-number\">0</span>,a=[],s=[];t=t||{},pt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">delete</span> e.minPTS,<span class=\"code-keyword\">this</span>.gopCache_=[],<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{Ie(e,t),<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Tt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]=i[t]}),<span class=\"code-keyword\">this</span>)),<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n,o,u,d,l,h,c,f=<span class=\"code-number\">0</span>;a.length&amp;&amp;<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>!==a[<span class=\"code-number\">0</span>].nalUnitType;)a.shift();<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===a.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);<span class=\"code-keyword\">if</span>(i=ie(a),(o=ne(i))[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame||((n=<span class=\"code-keyword\">this</span>.getGopForFusion_(a[<span class=\"code-number\">0</span>],e))?(f=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),s.length){<span class=\"code-keyword\">var</span> m;<span class=\"code-keyword\">if</span>(!(m=t.alignGopsAtEnd?<span class=\"code-keyword\">this</span>.alignGopsAtEnd_(o):<span class=\"code-keyword\">this</span>.alignGopsAtStart_(o)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);Te(e),o=m}Ie(e,o),e.samples=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=t||<span class=\"code-number\">0</span>,u=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">for</span>(a=e[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=te(s,o)).size,u.push(r);<span class=\"code-keyword\">return</span> u}(o),d=J(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,s,o=<span class=\"code-number\">0</span>,u=e.byteLength,d=e.nalCount,l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u+<span class=\"code-number\">4</span>*d),h=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(l.buffer);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-keyword\">for</span>(r=e[t],i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)<span class=\"code-keyword\">for</span>(a=r[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],h.setUint32(o,s.data.byteLength),o+=<span class=\"code-number\">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class=\"code-keyword\">return</span> l}(o)),e.baseMediaDecodeTime=Se(e,t.keepOriginalTimestamps),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"processedGopsInfo\"</span>,o.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">pts</span>:e.pts,<span class=\"code-attr\">dts</span>:e.dts,<span class=\"code-attr\">byteLength</span>:e.byteLength}}))),h=o[<span class=\"code-number\">0</span>],c=o[o.length<span class=\"code-number\">-1</span>],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"segmentTimingInfo\"</span>,Lt(e.baseMediaDecodeTime,h.dts,h.pts,c.dts+c.duration,c.pts+c.duration,f)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">end</span>:o[o.length<span class=\"code-number\">-1</span>].pts+o[o.length<span class=\"code-number\">-1</span>].duration}),<span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,e.baseMediaDecodeTime),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelineStartInfo\"</span>,e.timelineStartInfo),u=Z(r,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),r++,l.set(u),l.set(d,u.byteLength),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.resetStream_(),a=[],<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-number\">0</span>,s.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.resetStream_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Te(e),i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.getGopForFusion_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(s=<span class=\"code-number\">0</span>;s&lt;<span class=\"code-keyword\">this</span>.gopCache_.length;s++)r=(a=<span class=\"code-keyword\">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;wt(e.pps[<span class=\"code-number\">0</span>],a.pps[<span class=\"code-number\">0</span>])&amp;&amp;e.sps&amp;&amp;wt(e.sps[<span class=\"code-number\">0</span>],a.sps[<span class=\"code-number\">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class=\"code-number\">-1e4</span>&amp;&amp;i&lt;=<span class=\"code-number\">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class=\"code-keyword\">return</span> n?n.gop:<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.alignGopsAtStart_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d;<span class=\"code-keyword\">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class=\"code-number\">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?e:i===e.length?<span class=\"code-literal\">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d)},<span class=\"code-keyword\">this</span>.alignGopsAtEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u;<span class=\"code-keyword\">for</span>(t=s.length<span class=\"code-number\">-1</span>,i=e.length<span class=\"code-number\">-1</span>,a=<span class=\"code-literal\">null</span>,o=!<span class=\"code-number\">1</span>;t&gt;=<span class=\"code-number\">0</span>&amp;&amp;i&gt;=<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class=\"code-number\">-1</span>&amp;&amp;(a=i),i--)}<span class=\"code-keyword\">if</span>(!o&amp;&amp;<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(u=o?i:a))<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> d=e.slice(u),l=d.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{<span class=\"code-attr\">byteLength</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">nalCount</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e}}).prototype=<span class=\"code-keyword\">new</span> V,(vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.numberOfTracks=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.metadataStream=t,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(e=e||{}).remux?<span class=\"code-keyword\">this</span>.remuxTracks=!!e.remux:<span class=\"code-keyword\">this</span>.remuxTracks=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"boolean\"</span>==<span class=\"code-keyword\">typeof</span> e.keepOriginalTimestamps?<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.pendingTracks=[],<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes=[],<span class=\"code-keyword\">this</span>.pendingCaptions=[],<span class=\"code-keyword\">this</span>.pendingMetadata=[],<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>,vt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.text?<span class=\"code-keyword\">this</span>.pendingCaptions.push(e):e.frames?<span class=\"code-keyword\">this</span>.pendingMetadata.push(e):(<span class=\"code-keyword\">this</span>.pendingTracks.push(e.track),<span class=\"code-keyword\">this</span>.pendingBytes+=e.boxes.byteLength,<span class=\"code-string\">\"video\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.videoTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.push(e.boxes)),<span class=\"code-keyword\">void</span>(<span class=\"code-string\">\"audio\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.audioTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.unshift(e.boxes))))}}).prototype=<span class=\"code-keyword\">new</span> V,vt.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a=<span class=\"code-number\">0</span>,s={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{},<span class=\"code-attr\">metadata</span>:[],<span class=\"code-attr\">info</span>:{}},o=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingTracks.length&lt;<span class=\"code-keyword\">this</span>.numberOfTracks){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"VideoSegmentStream\"</span>!==e&amp;&amp;<span class=\"code-string\">\"AudioSegmentStream\"</span>!==e)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.remuxTracks)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.emittedTracks++,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoTrack?(o=<span class=\"code-keyword\">this</span>.videoTrack.timelineStartInfo.pts,Tt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s.info[e]=<span class=\"code-keyword\">this</span>.videoTrack[e]}),<span class=\"code-keyword\">this</span>)):<span class=\"code-keyword\">this</span>.audioTrack&amp;&amp;(o=<span class=\"code-keyword\">this</span>.audioTrack.timelineStartInfo.pts,bt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s.info[e]=<span class=\"code-keyword\">this</span>.audioTrack[e]}),<span class=\"code-keyword\">this</span>)),<span class=\"code-keyword\">this</span>.videoTrack||<span class=\"code-keyword\">this</span>.audioTrack){<span class=\"code-keyword\">for</span>(<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length?s.type=<span class=\"code-keyword\">this</span>.pendingTracks[<span class=\"code-number\">0</span>].type:s.type=<span class=\"code-string\">\"combined\"</span>,<span class=\"code-keyword\">this</span>.emittedTracks+=<span class=\"code-keyword\">this</span>.pendingTracks.length,n=ee(<span class=\"code-keyword\">this</span>.pendingTracks),s.initSegment=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.byteLength),s.initSegment.set(n),s.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">this</span>.pendingBytes),r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingBoxes.length;r++)s.data.set(<span class=\"code-keyword\">this</span>.pendingBoxes[r],a),a+=<span class=\"code-keyword\">this</span>.pendingBoxes[r].byteLength;<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingCaptions.length;r++)(t=<span class=\"code-keyword\">this</span>.pendingCaptions[r]).startTime=ge(t.startPts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),t.endTime=ge(t.endPts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),s.captionStreams[t.stream]=!<span class=\"code-number\">0</span>,s.captions.push(t);<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-keyword\">this</span>.pendingMetadata.length;r++)(i=<span class=\"code-keyword\">this</span>.pendingMetadata[r]).cueTime=ge(i.pts,o,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),s.metadata.push(i);<span class=\"code-keyword\">for</span>(s.metadata.dispatchType=<span class=\"code-keyword\">this</span>.metadataStream.dispatchType,<span class=\"code-keyword\">this</span>.pendingTracks.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingCaptions.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingMetadata.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,s),r=<span class=\"code-number\">0</span>;r&lt;s.captions.length;r++)t=s.captions[r],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"caption\"</span>,t);<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r&lt;s.metadata.length;r++)i=s.metadata[r],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"id3Frame\"</span>,i)}<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>)},vt.prototype.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.remuxTracks=e},(yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>,r=!<span class=\"code-number\">0</span>;yt.prototype.init.call(<span class=\"code-keyword\">this</span>),e=e||{},<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_={},<span class=\"code-keyword\">this</span>.setupAacPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"aac\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> tt.MetadataStream,r.aacStream=<span class=\"code-keyword\">new</span> _t,r.audioTimestampRolloverStream=<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream(<span class=\"code-string\">\"audio\"</span>),r.timedMetadataTimestampRolloverStream=<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream(<span class=\"code-string\">\"timed-metadata\"</span>),r.adtsStream=<span class=\"code-keyword\">new</span> st,r.coalesceStream=<span class=\"code-keyword\">new</span> vt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class=\"code-string\">\"timestamp\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-string\">\"timed-metadata\"</span>!==a.type&amp;&amp;<span class=\"code-string\">\"audio\"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> gt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t}))})),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>.setupTsPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"ts\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> tt.MetadataStream,r.packetStream=<span class=\"code-keyword\">new</span> tt.TransportPacketStream,r.parseStream=<span class=\"code-keyword\">new</span> tt.TransportParseStream,r.elementaryStream=<span class=\"code-keyword\">new</span> tt.ElementaryStream,r.timestampRolloverStream=<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream,r.adtsStream=<span class=\"code-keyword\">new</span> st,r.h264Stream=<span class=\"code-keyword\">new</span> St,r.captionStream=<span class=\"code-keyword\">new</span> tt.CaptionStream(e),r.coalesceStream=<span class=\"code-keyword\">new</span> vt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-keyword\">var</span> s;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"metadata\"</span>===a.type){<span class=\"code-keyword\">for</span>(s=a.tracks.length;s--;)t||<span class=\"code-string\">\"video\"</span>!==a.tracks[s].type?i||<span class=\"code-string\">\"audio\"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class=\"code-keyword\">new</span> pt(t,e),r.videoSegmentStream.on(<span class=\"code-string\">\"timelineStartInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on(<span class=\"code-string\">\"processedGopsInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"gopInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"segmentTimingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoTimingInfo\"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> gt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.audioSegmentStream.on(<span class=\"code-string\">\"segmentTimingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t})}})),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class=\"code-string\">\"id3Frame\"</span>,e)})),r.coalesceStream.on(<span class=\"code-string\">\"caption\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"caption\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))},<span class=\"code-keyword\">this</span>.setBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,Te(i),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,t.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,Te(t),r.captionStream.reset()),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class=\"code-keyword\">this</span>.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> t=It(e);t&amp;&amp;<span class=\"code-string\">\"aac\"</span>!==<span class=\"code-keyword\">this</span>.transmuxPipeline_.type?<span class=\"code-keyword\">this</span>.setupAacPipeline():t||<span class=\"code-string\">\"ts\"</span>===<span class=\"code-keyword\">this</span>.transmuxPipeline_.type||<span class=\"code-keyword\">this</span>.setupTsPipeline(),r=!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class=\"code-keyword\">this</span>.resetCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> kt={<span class=\"code-attr\">Transmuxer</span>:yt,<span class=\"code-attr\">VideoSegmentStream</span>:pt,<span class=\"code-attr\">AudioSegmentStream</span>:gt,<span class=\"code-attr\">AUDIO_PROPERTIES</span>:bt,<span class=\"code-attr\">VIDEO_PROPERTIES</span>:Tt,<span class=\"code-attr\">generateSegmentTimingInfo</span>:Lt},At={<span class=\"code-attr\">Adts</span>:st,<span class=\"code-attr\">h264</span>:dt},Et=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=[],r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">0</span>,o=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,u=<span class=\"code-literal\">null</span>,d=<span class=\"code-literal\">null</span>;i=i||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Ie(t,e),t&amp;&amp;bt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t[i]=e[i]})),n.push(e)},<span class=\"code-keyword\">this</span>.setEarliestDts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{a=e},<span class=\"code-keyword\">this</span>.setVideoBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{o=e},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e},<span class=\"code-keyword\">this</span>.processFrames_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,l,h,c,f;<span class=\"code-number\">0</span>!==n.length&amp;&amp;<span class=\"code-number\">0</span>!==(e=ve(n,t,a)).length&amp;&amp;(t.baseMediaDecodeTime=Se(t,i.keepOriginalTimestamps),ye(t,e,s,o),t.samples=_e(e),h=J(be(e)),n=[],l=Z(r,[t]),r++,t.initSegment=ee([t]),(c=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(l.byteLength+h.byteLength)).set(l),c.set(h,l.byteLength),Te(t),<span class=\"code-literal\">null</span>===u&amp;&amp;(d=u=e[<span class=\"code-number\">0</span>].pts),d+=e.length*(<span class=\"code-number\">9216e4</span>/t.samplerate),f={<span class=\"code-attr\">start</span>:u},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,f),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:t,<span class=\"code-attr\">boxes</span>:c}))},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.processFrames_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:u,<span class=\"code-attr\">end</span>:d}),<span class=\"code-keyword\">this</span>.resetTiming_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.processFrames_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.resetTiming_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Te(t),u=<span class=\"code-literal\">null</span>,d=<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.resetTiming_(),n=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};Et.prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> Pt=Et,Ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s=<span class=\"code-number\">0</span>,o=[],u=[],d=<span class=\"code-literal\">null</span>,l=<span class=\"code-literal\">null</span>,h=!<span class=\"code-number\">0</span>;i=i||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Ie(t,e),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.timelineStartInfo.dts&amp;&amp;(t.timelineStartInfo.dts=e.dts),<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],Tt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t[e]=n[e]}),<span class=\"code-keyword\">this</span>)),<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),o.push(e)},<span class=\"code-keyword\">this</span>.processNals_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">for</span>(o=u.concat(o);o.length&amp;&amp;<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>!==o[<span class=\"code-number\">0</span>].nalUnitType;)o.shift();<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==o.length){<span class=\"code-keyword\">var</span> r=ie(o);<span class=\"code-keyword\">if</span>(r.length)<span class=\"code-keyword\">if</span>(u=r[r.length<span class=\"code-number\">-1</span>],e&amp;&amp;(r.pop(),r.duration-=u.duration,r.nalCount-=u.length,r.byteLength-=u.byteLength),r.length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelineStartInfo\"</span>,t.timelineStartInfo),h){<span class=\"code-keyword\">if</span>(!(a=ne(r))[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame){<span class=\"code-keyword\">if</span>(!(a=re(a))[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame)<span class=\"code-keyword\">return</span> o=[].concat.apply([],r).concat(u),<span class=\"code-keyword\">void</span>(u=[]);(r=[].concat.apply([],a)).duration=a.duration}h=!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">for</span>(<span class=\"code-literal\">null</span>===d&amp;&amp;(d=r[<span class=\"code-number\">0</span>].pts,l=d),l+=r.duration,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:d,<span class=\"code-attr\">end</span>:l}),n=<span class=\"code-number\">0</span>;n&lt;r.length;n++){<span class=\"code-keyword\">var</span> c=r[n];t.samples=ae(c);<span class=\"code-keyword\">var</span> f=J(se(c));Te(t),Ie(t,c),t.baseMediaDecodeTime=Se(t,i.keepOriginalTimestamps);<span class=\"code-keyword\">var</span> m=Z(s,[t]);s++,t.initSegment=ee([t]);<span class=\"code-keyword\">var</span> p=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(m.byteLength+f.byteLength);p.set(m),p.set(f,m.byteLength),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:t,<span class=\"code-attr\">boxes</span>:p,<span class=\"code-attr\">sequence</span>:s,<span class=\"code-attr\">videoFrameDts</span>:c.dts,<span class=\"code-attr\">videoFramePts</span>:c.pts})}o=[]}<span class=\"code-keyword\">else</span> o=[]}},<span class=\"code-keyword\">this</span>.resetTimingAndConfig_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=<span class=\"code-literal\">null</span>,l=<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.processNals_(!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.processNals_(!<span class=\"code-number\">1</span>),<span class=\"code-keyword\">this</span>.resetTimingAndConfig_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.resetTimingAndConfig_(),u=[],o=[],h=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};Ct.prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> Ut=Ct,Ot=ct,Dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.prototype=<span class=\"code-keyword\">new</span> V,e.prototype.init.call(e),e},xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.on(<span class=\"code-string\">\"data\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"data\"</span>)),e.on(<span class=\"code-string\">\"done\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"done\"</span>)),e.on(<span class=\"code-string\">\"partialdone\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"partialdone\"</span>)),e.on(<span class=\"code-string\">\"endedtimeline\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"endedtimeline\"</span>)),e.on(<span class=\"code-string\">\"audioTimingInfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"audioTimingInfo\"</span>)),e.on(<span class=\"code-string\">\"videoTimingInfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"videoTimingInfo\"</span>)),e.on(<span class=\"code-string\">\"trackinfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"trackinfo\"</span>)),e.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{i.dispatchType=e.metadataStream.dispatchType,i.cueTime=fe(i.pts),t.trigger(<span class=\"code-string\">\"id3Frame\"</span>,i)})),e.on(<span class=\"code-string\">\"caption\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.trigger(<span class=\"code-string\">\"caption\"</span>,e)}))},Rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-literal\">null</span>,n=!<span class=\"code-number\">0</span>;t=t||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>),t.baseMediaDecodeTime=t.baseMediaDecodeTime||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(n){<span class=\"code-keyword\">var</span> r=Ot(e);!r||i&amp;&amp;<span class=\"code-string\">\"aac\"</span>===i.type?r||i&amp;&amp;<span class=\"code-string\">\"ts\"</span>===i.type||(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"ts\"</span>,<span class=\"code-attr\">tracks</span>:{<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">packet</span>:<span class=\"code-keyword\">new</span> tt.TransportPacketStream,<span class=\"code-attr\">parse</span>:<span class=\"code-keyword\">new</span> tt.TransportParseStream,<span class=\"code-attr\">elementary</span>:<span class=\"code-keyword\">new</span> tt.ElementaryStream,<span class=\"code-attr\">timestampRollover</span>:<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream,<span class=\"code-attr\">adts</span>:<span class=\"code-keyword\">new</span> At.Adts,<span class=\"code-attr\">h264</span>:<span class=\"code-keyword\">new</span> At.h264.H264Stream,<span class=\"code-attr\">captionStream</span>:<span class=\"code-keyword\">new</span> tt.CaptionStream(e),<span class=\"code-attr\">metadataStream</span>:<span class=\"code-keyword\">new</span> tt.MetadataStream};<span class=\"code-keyword\">return</span> t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"metadata\"</span>===i.type){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;i.tracks.length;n++)t.tracks[i.tracks[n].type]||(t.tracks[i.tracks[n].type]=i.tracks[n],t.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&amp;&amp;!t.videoSegmentStream&amp;&amp;(t.videoSegmentStream=<span class=\"code-keyword\">new</span> Ut(t.tracks.video,e),t.videoSegmentStream.on(<span class=\"code-string\">\"timelineStartInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t.tracks.audio&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;t.audioSegmentStream.setEarliestDts(i.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"videoTimingInfo\"</span>)),t.videoSegmentStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">data</span>:e})})),t.videoSegmentStream.on(<span class=\"code-string\">\"done\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"done\"</span>)),t.videoSegmentStream.on(<span class=\"code-string\">\"partialdone\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"partialdone\"</span>)),t.videoSegmentStream.on(<span class=\"code-string\">\"endedtimeline\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"endedtimeline\"</span>)),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&amp;&amp;!t.audioSegmentStream&amp;&amp;(t.audioSegmentStream=<span class=\"code-keyword\">new</span> Pt(t.tracks.audio,e),t.audioSegmentStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">data</span>:e})})),t.audioSegmentStream.on(<span class=\"code-string\">\"done\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"done\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"partialdone\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"partialdone\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"endedtimeline\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"endedtimeline\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"audioTimingInfo\"</span>)),t.adts.pipe(t.audioSegmentStream)),t.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!t.tracks.audio,<span class=\"code-attr\">hasVideo</span>:!!t.tracks.video})}})),t.captionStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n;n=t.tracks.video&amp;&amp;t.tracks.video.timelineStartInfo.pts||<span class=\"code-number\">0</span>,i.startTime=ge(i.startPts,n,e.keepOriginalTimestamps),i.endTime=ge(i.endPts,n,e.keepOriginalTimestamps),t.trigger(<span class=\"code-string\">\"caption\"</span>,i)})),(t=Dt(t)).metadataStream.on(<span class=\"code-string\">\"data\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"id3Frame\"</span>)),t}(t),xt(i,<span class=\"code-keyword\">this</span>)):(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"aac\"</span>,<span class=\"code-attr\">tracks</span>:{<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">metadataStream</span>:<span class=\"code-keyword\">new</span> tt.MetadataStream,<span class=\"code-attr\">aacStream</span>:<span class=\"code-keyword\">new</span> _t,<span class=\"code-attr\">audioRollover</span>:<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream(<span class=\"code-string\">\"audio\"</span>),<span class=\"code-attr\">timedMetadataRollover</span>:<span class=\"code-keyword\">new</span> tt.TimestampRolloverStream(<span class=\"code-string\">\"timed-metadata\"</span>),<span class=\"code-attr\">adtsStream</span>:<span class=\"code-keyword\">new</span> st(!<span class=\"code-number\">0</span>)};<span class=\"code-keyword\">return</span> t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on(<span class=\"code-string\">\"timestamp\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-string\">\"timed-metadata\"</span>!==i.type&amp;&amp;<span class=\"code-string\">\"audio\"</span>!==i.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:e.baseMediaDecodeTime},<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>},t.audioSegmentStream=<span class=\"code-keyword\">new</span> Pt(t.tracks.audio,e),t.audioSegmentStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">data</span>:e})})),t.audioSegmentStream.on(<span class=\"code-string\">\"partialdone\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"partialdone\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"done\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"done\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"endedtimeline\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"endedtimeline\"</span>)),t.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"audioTimingInfo\"</span>)),t.adtsStream.pipe(t.audioSegmentStream),t.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!t.tracks.audio,<span class=\"code-attr\">hasVideo</span>:!!t.tracks.video}))})),(t=Dt(t)).metadataStream.on(<span class=\"code-string\">\"data\"</span>,t.trigger.bind(t,<span class=\"code-string\">\"id3Frame\"</span>)),t}(t),xt(i,<span class=\"code-keyword\">this</span>)),n=!<span class=\"code-number\">1</span>}i.headOfPipeline.push(e)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i&amp;&amp;(n=!<span class=\"code-number\">0</span>,i.headOfPipeline.flush())},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i&amp;&amp;i.headOfPipeline.partialFlush()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i&amp;&amp;i.headOfPipeline.endTimeline()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i&amp;&amp;i.headOfPipeline.reset()},<span class=\"code-keyword\">this</span>.setBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),i&amp;&amp;(i.tracks.audio&amp;&amp;(i.tracks.audio.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i.tracks.audio.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,Te(i.tracks.audio),i.audioRollover&amp;&amp;i.audioRollover.discontinuity()),i.tracks.video&amp;&amp;(i.videoSegmentStream&amp;&amp;(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i.tracks.video.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,Te(i.tracks.video)),i.timestampRollover&amp;&amp;i.timestampRollover.discontinuity())},<span class=\"code-keyword\">this</span>.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.remux=e,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(e)},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;i.tracks.audio&amp;&amp;i.audioSegmentStream&amp;&amp;i.audioSegmentStream.setAudioAppendStart(e)},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{}};Rt.prototype=<span class=\"code-keyword\">new</span> V;<span class=\"code-keyword\">var</span> Mt=Rt,Bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;&gt;&gt;<span class=\"code-number\">0</span>},Ft=Bt,Nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u,d,l=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;t.byteLength;)r=Ft(t[n]&lt;&lt;<span class=\"code-number\">24</span>|t[n+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[n+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[n+<span class=\"code-number\">3</span>]),u=t.subarray(n+<span class=\"code-number\">4</span>,n+<span class=\"code-number\">8</span>),d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=<span class=\"code-string\">\"\"</span>,d+=<span class=\"code-built_in\">String</span>.fromCharCode(u[<span class=\"code-number\">0</span>]),d+=<span class=\"code-built_in\">String</span>.fromCharCode(u[<span class=\"code-number\">1</span>]),a=(d+=<span class=\"code-built_in\">String</span>.fromCharCode(u[<span class=\"code-number\">2</span>]))+<span class=\"code-built_in\">String</span>.fromCharCode(u[<span class=\"code-number\">3</span>]),s=r&gt;<span class=\"code-number\">1</span>?n+r:t.byteLength,a===i[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-number\">1</span>===i.length?l.push(t.subarray(n+<span class=\"code-number\">8</span>,s)):(o=e(t.subarray(n+<span class=\"code-number\">8</span>,s),i.slice(<span class=\"code-number\">1</span>))).length&amp;&amp;(l=l.concat(o))),n=s;<span class=\"code-keyword\">return</span> l},qt=Bt,Wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">isLeading</span>:(<span class=\"code-number\">12</span>&amp;e[<span class=\"code-number\">0</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">3</span>&amp;e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">isDependedOn</span>:(<span class=\"code-number\">192</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">hasRedundancy</span>:(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">paddingValue</span>:(<span class=\"code-number\">14</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">1</span>],<span class=\"code-attr\">degradationPriority</span>:e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">3</span>]}},Vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},Ht=Re.CaptionStream,Gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e,n=<span class=\"code-number\">0</span>;n&lt;t.length;n++){<span class=\"code-keyword\">var</span> r=t[n];<span class=\"code-keyword\">if</span>(i&lt;r.size)<span class=\"code-keyword\">return</span> r;i-=r.size}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},jt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Nt(e,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),n=Nt(e,[<span class=\"code-string\">\"mdat\"</span>]),r={},a=[];<span class=\"code-keyword\">return</span> n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t];a.push({<span class=\"code-attr\">mdat</span>:e,<span class=\"code-attr\">traf</span>:n})})),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,a,s,o,u,d,l,h,c,f,m,p=e.mdat,g=e.traf,y=Nt(g,[<span class=\"code-string\">\"tfhd\"</span>]),v=(n=y[<span class=\"code-number\">0</span>],s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(n.buffer,n.byteOffset,n.byteLength),o={<span class=\"code-attr\">version</span>:n[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">trackId</span>:s.getUint32(<span class=\"code-number\">4</span>)},u=<span class=\"code-number\">1</span>&amp;o.flags[<span class=\"code-number\">2</span>],d=<span class=\"code-number\">2</span>&amp;o.flags[<span class=\"code-number\">2</span>],l=<span class=\"code-number\">8</span>&amp;o.flags[<span class=\"code-number\">2</span>],h=<span class=\"code-number\">16</span>&amp;o.flags[<span class=\"code-number\">2</span>],c=<span class=\"code-number\">32</span>&amp;o.flags[<span class=\"code-number\">2</span>],f=<span class=\"code-number\">65536</span>&amp;o.flags[<span class=\"code-number\">0</span>],m=<span class=\"code-number\">131072</span>&amp;o.flags[<span class=\"code-number\">0</span>],a=<span class=\"code-number\">8</span>,u&amp;&amp;(a+=<span class=\"code-number\">4</span>,o.baseDataOffset=s.getUint32(<span class=\"code-number\">12</span>),a+=<span class=\"code-number\">4</span>),d&amp;&amp;(o.sampleDescriptionIndex=s.getUint32(a),a+=<span class=\"code-number\">4</span>),l&amp;&amp;(o.defaultSampleDuration=s.getUint32(a),a+=<span class=\"code-number\">4</span>),h&amp;&amp;(o.defaultSampleSize=s.getUint32(a),a+=<span class=\"code-number\">4</span>),c&amp;&amp;(o.defaultSampleFlags=s.getUint32(a)),f&amp;&amp;(o.durationIsEmpty=!<span class=\"code-number\">0</span>),!u&amp;&amp;m&amp;&amp;(o.baseDataOffsetIsMoof=!<span class=\"code-number\">0</span>),o),_=v.trackId,b=Nt(g,[<span class=\"code-string\">\"tfdt\"</span>]),T=b.length&gt;<span class=\"code-number\">0</span>?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">baseMediaDecodeTime</span>:qt(e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>])};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===t.version&amp;&amp;(t.baseMediaDecodeTime*=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),t.baseMediaDecodeTime+=qt(e[<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">9</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">10</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>])),t}(b[<span class=\"code-number\">0</span>]).baseMediaDecodeTime:<span class=\"code-number\">0</span>,S=Nt(g,[<span class=\"code-string\">\"trun\"</span>]);t===_&amp;&amp;S.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u=[];<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r+<span class=\"code-number\">4</span>&lt;e.length;r+=a)<span class=\"code-keyword\">if</span>(a=o.getUint32(r),r+=<span class=\"code-number\">4</span>,!(a&lt;=<span class=\"code-number\">0</span>))<span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;e[r]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">var</span> d=e.subarray(r+<span class=\"code-number\">1</span>,r+<span class=\"code-number\">1</span>+a),l=Gt(r,t);<span class=\"code-keyword\">if</span>(n={<span class=\"code-attr\">nalUnitType</span>:<span class=\"code-string\">\"sei_rbsp\"</span>,<span class=\"code-attr\">size</span>:a,<span class=\"code-attr\">data</span>:d,<span class=\"code-attr\">escapedRBSP</span>:Vt(d),<span class=\"code-attr\">trackId</span>:i},l)n.pts=l.pts,n.dts=l.dts,s=l;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(!s){<span class=\"code-built_in\">console</span>.log(<span class=\"code-string\">\"We've encountered a nal unit without data. See mux.js#233.\"</span>);<span class=\"code-keyword\">break</span>}n.pts=s.pts,n.dts=s.dts}u.push(n)}<span class=\"code-keyword\">return</span> u}(p,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t,r=i.defaultSampleDuration||<span class=\"code-number\">0</span>,a=i.defaultSampleSize||<span class=\"code-number\">0</span>,s=i.trackId,o=[];<span class=\"code-keyword\">return</span> e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">samples</span>:[]},n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">2</span>],a=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">2</span>],s=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">1</span>],o=<span class=\"code-number\">2</span>&amp;i.flags[<span class=\"code-number\">1</span>],u=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">1</span>],d=<span class=\"code-number\">8</span>&amp;i.flags[<span class=\"code-number\">1</span>],l=n.getUint32(<span class=\"code-number\">4</span>),h=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(h),h+=<span class=\"code-number\">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class=\"code-attr\">flags</span>:Wt(e.subarray(h,h+<span class=\"code-number\">4</span>))},h+=<span class=\"code-number\">4</span>,s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class=\"code-number\">4</span>),d&amp;&amp;(<span class=\"code-number\">1</span>===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=<span class=\"code-number\">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class=\"code-number\">4</span>),u&amp;&amp;(t.flags=Wt(e.subarray(h,h+<span class=\"code-number\">4</span>)),h+=<span class=\"code-number\">4</span>),d&amp;&amp;(<span class=\"code-number\">1</span>===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=<span class=\"code-number\">4</span>),i.samples.push(t);<span class=\"code-keyword\">return</span> i}(e).samples;t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.duration&amp;&amp;(e.duration=r),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class=\"code-number\">0</span>),e.pts=n+e.compositionTimeOffset,n+=e.duration})),o=o.concat(t)})),o}(S,T,v),_),r[_]||(r[_]=[]),r[_]=r[_].concat(i))})),r},zt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.isInitialized=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s},<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e=<span class=\"code-keyword\">new</span> Ht,s=!<span class=\"code-number\">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class=\"code-number\">0</span>}))},<span class=\"code-keyword\">this</span>.isNewInit=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!(e&amp;&amp;<span class=\"code-number\">0</span>===e.length||t&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-built_in\">Object</span>.keys(t).length||i===e[<span class=\"code-number\">0</span>]&amp;&amp;n===t[i])},<span class=\"code-keyword\">this</span>.parse=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,a,s</span>)</span>{<span class=\"code-keyword\">var</span> o;<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!a||!s)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isNewInit(a,s))i=a[<span class=\"code-number\">0</span>],n=s[i];<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===i||!n)<span class=\"code-keyword\">return</span> t.push(e),<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(;t.length&gt;<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">var</span> u=t.shift();<span class=\"code-keyword\">this</span>.parse(u,a,s)}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==(o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===t?<span class=\"code-literal\">null</span>:{<span class=\"code-attr\">seiNals</span>:jt(e,t)[t],<span class=\"code-attr\">timescale</span>:i}}(e,i,n))&amp;&amp;o.seiNals?(<span class=\"code-keyword\">this</span>.pushNals(o.seiNals),<span class=\"code-keyword\">this</span>.flushStream(),r):<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.pushNals=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized()||!t||<span class=\"code-number\">0</span>===t.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},<span class=\"code-keyword\">this</span>.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;a?e.partialFlush():e.flush()},<span class=\"code-keyword\">this</span>.clearParsedCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r.captions=[],r.captionStreams={}},<span class=\"code-keyword\">this</span>.resetCaptionStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;e.reset()},<span class=\"code-keyword\">this</span>.clearAllCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.clearParsedCaptions(),<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=[],i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r?<span class=\"code-keyword\">this</span>.clearParsedCaptions():r={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{}},<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset()},Xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"AudioSegmentStream\"</span>===e?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-string\">\"VideoSegmentStream\"</span>===e?<span class=\"code-string\">\"video\"</span>:<span class=\"code-string\">\"\"</span>},Qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.options=t||{},<span class=\"code-keyword\">this</span>.self=e,<span class=\"code-keyword\">this</span>.init()}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer.dispose(),<span class=\"code-keyword\">this</span>.transmuxer=<span class=\"code-keyword\">this</span>.options.handlePartialData?<span class=\"code-keyword\">new</span> Mt(<span class=\"code-keyword\">this</span>.options):<span class=\"code-keyword\">new</span> kt.Transmuxer(<span class=\"code-keyword\">this</span>.options),<span class=\"code-keyword\">this</span>.options.handlePartialData?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">data</span>:t.data.track.initSegment.buffer,<span class=\"code-attr\">byteOffset</span>:t.data.track.initSegment.byteOffset,<span class=\"code-attr\">byteLength</span>:t.data.track.initSegment.byteLength},n={<span class=\"code-attr\">boxes</span>:{<span class=\"code-attr\">data</span>:t.data.boxes.buffer,<span class=\"code-attr\">byteOffset</span>:t.data.boxes.byteOffset,<span class=\"code-attr\">byteLength</span>:t.data.boxes.byteLength},<span class=\"code-attr\">initSegment</span>:i,<span class=\"code-attr\">type</span>:t.type,<span class=\"code-attr\">sequence</span>:t.data.sequence};<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t.data.videoFrameDts&amp;&amp;(n.videoFrameDtsTime=fe(t.data.videoFrameDts)),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t.data.videoFramePts&amp;&amp;(n.videoFramePtsTime=fe(t.data.videoFramePts)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"data\"</span>,<span class=\"code-attr\">segment</span>:n},[n.boxes.data,n.initSegment.data])})),t.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"id3Frame\"</span>,<span class=\"code-attr\">id3Frame</span>:t})})),t.on(<span class=\"code-string\">\"caption\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"caption\"</span>,<span class=\"code-attr\">caption</span>:t})})),t.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>,<span class=\"code-attr\">type</span>:Xt(t)})})),t.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-attr\">type</span>:Xt(t)})})),t.on(<span class=\"code-string\">\"endedsegment\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"endedSegment\"</span>,<span class=\"code-attr\">type</span>:Xt(t)})})),t.on(<span class=\"code-string\">\"trackinfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"trackinfo\"</span>,<span class=\"code-attr\">trackInfo</span>:t})})),t.on(<span class=\"code-string\">\"audioTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==t.start){<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:fe(t.start)};t.end&amp;&amp;(i.end=fe(t.end)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioTimingInfo\"</span>,<span class=\"code-attr\">audioTimingInfo</span>:i})}<span class=\"code-keyword\">else</span> e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioTimingInfo\"</span>,<span class=\"code-attr\">audioTimingInfo</span>:t})})),t.on(<span class=\"code-string\">\"videoTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:fe(t.start)};t.end&amp;&amp;(i.end=fe(t.end)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoTimingInfo\"</span>,<span class=\"code-attr\">videoTimingInfo</span>:i})}))}(<span class=\"code-keyword\">this</span>.self,<span class=\"code-keyword\">this</span>.transmuxer):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.initSegment;t.initSegment={<span class=\"code-attr\">data</span>:i.buffer,<span class=\"code-attr\">byteOffset</span>:i.byteOffset,<span class=\"code-attr\">byteLength</span>:i.byteLength};<span class=\"code-keyword\">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"data\"</span>,<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength},[t.data])})),t.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>})})),t.on(<span class=\"code-string\">\"gopInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"gopInfo\"</span>,<span class=\"code-attr\">gopInfo</span>:t})})),t.on(<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">decode</span>:fe(t.start.dts),<span class=\"code-attr\">presentation</span>:fe(t.start.pts)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">decode</span>:fe(t.end.dts),<span class=\"code-attr\">presentation</span>:fe(t.end.pts)},<span class=\"code-attr\">baseMediaDecodeTime</span>:fe(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=fe(t.prependedContentDuration)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,<span class=\"code-attr\">videoSegmentTimingInfo</span>:i})})),t.on(<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">decode</span>:fe(t.start.dts),<span class=\"code-attr\">presentation</span>:fe(t.start.pts)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">decode</span>:fe(t.end.dts),<span class=\"code-attr\">presentation</span>:fe(t.end.pts)},<span class=\"code-attr\">baseMediaDecodeTime</span>:fe(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=fe(t.prependedContentDuration)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>,<span class=\"code-attr\">audioSegmentTimingInfo</span>:i})})),t.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"id3Frame\"</span>,<span class=\"code-attr\">id3Frame</span>:t})})),t.on(<span class=\"code-string\">\"caption\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"caption\"</span>,<span class=\"code-attr\">caption</span>:t})})),t.on(<span class=\"code-string\">\"trackinfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"trackinfo\"</span>,<span class=\"code-attr\">trackInfo</span>:t})})),t.on(<span class=\"code-string\">\"audioTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioTimingInfo\"</span>,<span class=\"code-attr\">audioTimingInfo</span>:{<span class=\"code-attr\">start</span>:fe(t.start),<span class=\"code-attr\">end</span>:fe(t.end)}})})),t.on(<span class=\"code-string\">\"videoTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoTimingInfo\"</span>,<span class=\"code-attr\">videoTimingInfo</span>:{<span class=\"code-attr\">start</span>:fe(t.start),<span class=\"code-attr\">end</span>:fe(t.end)}})}))}(<span class=\"code-keyword\">this</span>.self,<span class=\"code-keyword\">this</span>.transmuxer)},t.pushMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionParser||(<span class=\"code-keyword\">this</span>.captionParser=<span class=\"code-keyword\">new</span> zt,<span class=\"code-keyword\">this</span>.captionParser.init());<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.data,e.byteOffset,e.byteLength),i=<span class=\"code-keyword\">this</span>.captionParser.parse(t,e.trackIds,e.timescales);<span class=\"code-keyword\">this</span>.self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"mp4Captions\"</span>,<span class=\"code-attr\">captions</span>:i&amp;&amp;i.captions||[],<span class=\"code-attr\">data</span>:t.buffer},[t.buffer])},t.clearAllMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.captionParser&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.captionParser&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser.clearParsedCaptions()},t.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class=\"code-keyword\">this</span>.transmuxer.push(t)},t.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.reset()},t.setTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timestampOffset||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.transmuxer.setBaseMediaDecodeTime(<span class=\"code-built_in\">Math</span>.round(ce(t)))},t.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.setAudioAppendStart(<span class=\"code-built_in\">Math</span>.ceil(ce(e.appendStart)))},t.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.setRemux(e.remux)},t.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.flush(),i.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"transmuxed\"</span>})},t.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.partialFlush(),i.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"transmuxed\"</span>})},t.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.endTimeline(),i.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"transmuxed\"</span>})},t.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();<span class=\"code-keyword\">new</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"init\"</span>===t.data.action&amp;&amp;t.data.options?<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> Qt(e,t.data.options):(<span class=\"code-keyword\">this</span>.messageHandlers||(<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> Qt(e)),t.data&amp;&amp;t.data.action&amp;&amp;<span class=\"code-string\">\"init\"</span>!==t.data.action&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[t.data.action]&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[t.data.action](t.data))}}(i)}()})),Ri={<span class=\"code-attr\">mp4</span>:<span class=\"code-regexp\">/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/</span>,<span class=\"code-attr\">webm</span>:<span class=\"code-regexp\">/^(vp0?[89]|av0?1|opus|vorbis)/</span>,<span class=\"code-attr\">ogg</span>:<span class=\"code-regexp\">/^(vp0?[89]|theora|flac|opus|vorbis)/</span>,<span class=\"code-attr\">video</span>:<span class=\"code-regexp\">/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/</span>,<span class=\"code-attr\">audio</span>:<span class=\"code-regexp\">/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/</span>,<span class=\"code-attr\">text</span>:<span class=\"code-regexp\">/^(stpp.ttml.im1t)/</span>,<span class=\"code-attr\">muxerVideo</span>:<span class=\"code-regexp\">/^(avc0?1)/</span>,<span class=\"code-attr\">muxerAudio</span>:<span class=\"code-regexp\">/^(mp4a)/</span>,<span class=\"code-attr\">muxerText</span>:<span class=\"code-regexp\">/a^/</span>},Mi=[<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"text\"</span>],Bi=[<span class=\"code-string\">\"Video\"</span>,<span class=\"code-string\">\"Audio\"</span>,<span class=\"code-string\">\"Text\"</span>],Fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e?e.replace(<span class=\"code-regexp\">/avc1\\.(\\d+)\\.(\\d+)/i</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"avc1.\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(t).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)+<span class=\"code-string\">\"00\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(i).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)})):e},Ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">var</span> t=e.split(<span class=\"code-string\">\",\"</span>),i=[];<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;e=e.trim(),Mi.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=Ri[n].exec(e.toLowerCase());<span class=\"code-keyword\">if</span>(r&amp;&amp;!(r.length&lt;=<span class=\"code-number\">1</span>)){t=n;<span class=\"code-keyword\">var</span> a=e.substring(<span class=\"code-number\">0</span>,r[<span class=\"code-number\">1</span>].length),s=e.replace(a,<span class=\"code-string\">\"\"</span>);i.push({<span class=\"code-attr\">type</span>:a,<span class=\"code-attr\">details</span>:s,<span class=\"code-attr\">mediaType</span>:n})}})),t||i.push({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">details</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">mediaType</span>:<span class=\"code-string\">\"unknown\"</span>})})),i},qi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),Ri.audio.test(e.trim().toLowerCase())},Wi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">var</span> t,i=e.toLowerCase().split(<span class=\"code-string\">\",\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Fi(e.trim())})),n=<span class=\"code-string\">\"video\"</span>;<span class=\"code-number\">1</span>===i.length&amp;&amp;qi(i[<span class=\"code-number\">0</span>])?n=<span class=\"code-string\">\"audio\"</span>:<span class=\"code-number\">1</span>===i.length&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===(t=i[<span class=\"code-number\">0</span>])&amp;&amp;(t=<span class=\"code-string\">\"\"</span>),Ri.text.test(t.trim().toLowerCase()))&amp;&amp;(n=<span class=\"code-string\">\"application\"</span>);<span class=\"code-keyword\">var</span> r=<span class=\"code-string\">\"mp4\"</span>;<span class=\"code-keyword\">return</span> i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ri.mp4.test(e)}))?r=<span class=\"code-string\">\"mp4\"</span>:i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ri.webm.test(e)}))?r=<span class=\"code-string\">\"webm\"</span>:i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ri.ogg.test(e)}))&amp;&amp;(r=<span class=\"code-string\">\"ogg\"</span>),n+<span class=\"code-string\">\"/\"</span>+r+<span class=\"code-string\">';codecs=\"'</span>+e+<span class=\"code-string\">'\"'</span>}},Vi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),o.default.MediaSource&amp;&amp;o.default.MediaSource.isTypeSupported&amp;&amp;o.default.MediaSource.isTypeSupported(Wi(e))||!<span class=\"code-number\">1</span>},Hi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),e.toLowerCase().split(<span class=\"code-string\">\",\"</span>).every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=e.trim();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;Bi.length;t++)<span class=\"code-keyword\">if</span>(Ri[<span class=\"code-string\">\"muxer\"</span>+Bi[t]].test(e))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}))},Gi=<span class=\"code-string\">\"mp4a.40.2\"</span>,ji=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.debug?u.default.log.debug.bind(u.default,<span class=\"code-string\">\"VHS:\"</span>,e+<span class=\"code-string\">\" &gt;\"</span>):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}},zi=ji(<span class=\"code-string\">\"CodecUtils\"</span>),Xi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.attributes||{};<span class=\"code-keyword\">return</span> e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO&amp;&amp;i.AUDIO&amp;&amp;e.mediaGroups.AUDIO[i.AUDIO]},Qi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(Fi(<span class=\"code-string\">\"\"</span>+n+r))})),<span class=\"code-built_in\">Object</span>.keys(t).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(t[e].length&gt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> zi(<span class=\"code-string\">\"multiple \"</span>+e+<span class=\"code-string\">\" codecs found as attributes: \"</span>+t[e].join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.\"</span>),<span class=\"code-keyword\">void</span>(t[e]=<span class=\"code-literal\">null</span>);t[e]=t[e][<span class=\"code-number\">0</span>]})),t},Yi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.audio&amp;&amp;t++,e.video&amp;&amp;t++,t},Ki=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.attributes||{},n=Qi(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes||{};<span class=\"code-keyword\">if</span>(t.CODECS)<span class=\"code-keyword\">return</span> Ni(t.CODECS)}(t)||[]);<span class=\"code-keyword\">if</span>(Xi(e,t)&amp;&amp;!n.audio&amp;&amp;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!Xi(e,t))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> n)<span class=\"code-keyword\">if</span>(!n[r].uri&amp;&amp;!n[r].playlists)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}(e,t)){<span class=\"code-keyword\">var</span> r=Qi(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e.mediaGroups.AUDIO||!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=e.mediaGroups.AUDIO[t];<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(r.default&amp;&amp;r.playlists)<span class=\"code-keyword\">return</span> Ni(r.playlists[<span class=\"code-number\">0</span>].attributes.CODECS)}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}(e,i.AUDIO)||[]);r.audio&amp;&amp;(n.audio=r.audio)}<span class=\"code-keyword\">return</span> n},$i=ji(<span class=\"code-string\">\"PlaylistSelector\"</span>),Ji=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;e.playlist){<span class=\"code-keyword\">var</span> t=e.playlist;<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.stringify({<span class=\"code-attr\">id</span>:t.id,<span class=\"code-attr\">bandwidth</span>:e.bandwidth,<span class=\"code-attr\">width</span>:e.width,<span class=\"code-attr\">height</span>:e.height,<span class=\"code-attr\">codecs</span>:t.attributes&amp;&amp;t.attributes.CODECS||<span class=\"code-string\">\"\"</span>})}},Zi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">var</span> i=o.default.getComputedStyle(e);<span class=\"code-keyword\">return</span> i?i[t]:<span class=\"code-string\">\"\"</span>},en=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.slice();e.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=t(e,n);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===r?i.indexOf(e)-i.indexOf(n):r}))},tn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||o.default.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n||o.default.Number.MAX_VALUE)},nn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">bandwidth</span>:t,<span class=\"code-attr\">width</span>:i,<span class=\"code-attr\">height</span>:n,<span class=\"code-attr\">limitRenditionByPlayerDimensions</span>:r},s=e.playlists.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bandwidth</span>:e.attributes.BANDWIDTH||o.default.Number.MAX_VALUE,<span class=\"code-attr\">width</span>:t,<span class=\"code-attr\">height</span>:i,<span class=\"code-attr\">playlist</span>:e}}));en(s,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth-t.bandwidth}));<span class=\"code-keyword\">var</span> u=(s=s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Z.isIncompatible(e.playlist)}))).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Z.isEnabled(e.playlist)}));u.length||(u=s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Z.isDisabled(e.playlist)})));<span class=\"code-keyword\">var</span> d=u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth*Ut.BANDWIDTH_VARIANCE&lt;t})),l=d[d.length<span class=\"code-number\">-1</span>],h=d.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===l.bandwidth}))[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!<span class=\"code-number\">1</span>===r){<span class=\"code-keyword\">var</span> c=h||u[<span class=\"code-number\">0</span>]||s[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(c&amp;&amp;c.playlist){<span class=\"code-keyword\">var</span> f=<span class=\"code-string\">\"sortedPlaylistReps\"</span>;<span class=\"code-keyword\">return</span> h&amp;&amp;(f=<span class=\"code-string\">\"bandwidthBestRep\"</span>),u[<span class=\"code-number\">0</span>]&amp;&amp;(f=<span class=\"code-string\">\"enabledPlaylistReps\"</span>),$i(<span class=\"code-string\">\"choosing \"</span>+Ji(c)+<span class=\"code-string\">\" using \"</span>+f+<span class=\"code-string\">\" with options\"</span>,a),c.playlist}<span class=\"code-keyword\">return</span> $i(<span class=\"code-string\">\"could not choose a playlist with options\"</span>,a),<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">var</span> m=d.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&amp;&amp;e.height}));en(m,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.width-t.width}));<span class=\"code-keyword\">var</span> p=m.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===i&amp;&amp;e.height===n}));l=p[p.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">var</span> g,y,v,_=p.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===l.bandwidth}))[<span class=\"code-number\">0</span>];_||(y=(g=m.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&gt;i||e.height&gt;n}))).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===g[<span class=\"code-number\">0</span>].width&amp;&amp;e.height===g[<span class=\"code-number\">0</span>].height})),l=y[y.length<span class=\"code-number\">-1</span>],v=y.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===l.bandwidth}))[<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">var</span> b=v||_||h||u[<span class=\"code-number\">0</span>]||s[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(b&amp;&amp;b.playlist){<span class=\"code-keyword\">var</span> T=<span class=\"code-string\">\"sortedPlaylistReps\"</span>;<span class=\"code-keyword\">return</span> v?T=<span class=\"code-string\">\"resolutionPlusOneRep\"</span>:_?T=<span class=\"code-string\">\"resolutionBestRep\"</span>:h?T=<span class=\"code-string\">\"bandwidthBestRep\"</span>:u[<span class=\"code-number\">0</span>]&amp;&amp;(T=<span class=\"code-string\">\"enabledPlaylistReps\"</span>),$i(<span class=\"code-string\">\"choosing \"</span>+Ji(b)+<span class=\"code-string\">\" using \"</span>+T+<span class=\"code-string\">\" with options\"</span>,a),b.playlist}<span class=\"code-keyword\">return</span> $i(<span class=\"code-string\">\"could not choose a playlist with options\"</span>,a),<span class=\"code-literal\">null</span>}},rn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.useDevicePixelRatio&amp;&amp;o.default.devicePixelRatio||<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> nn(<span class=\"code-keyword\">this</span>.playlists.master,<span class=\"code-keyword\">this</span>.systemBandwidth,<span class=\"code-built_in\">parseInt</span>(Zi(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"width\"</span>),<span class=\"code-number\">10</span>)*e,<span class=\"code-built_in\">parseInt</span>(Zi(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"height\"</span>),<span class=\"code-number\">10</span>)*e,<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions)},an=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r;<span class=\"code-keyword\">if</span>(i&amp;&amp;i.cues)<span class=\"code-keyword\">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&gt;=e&amp;&amp;r.endTime&lt;=t&amp;&amp;i.removeCue(r)},sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-built_in\">isFinite</span>(e)},on=<span class=\"code-number\">1</span>/<span class=\"code-number\">60</span>,un=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"TimingInfo\"</span>},dn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered;<span class=\"code-keyword\">return</span> e.overrideCheck||t!==i?t&lt;i?n:r.length?r.end(r.length<span class=\"code-number\">-1</span>):n:<span class=\"code-literal\">null</span>},ln=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;<span class=\"code-keyword\">if</span>(i===n)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"audio\"</span>===r){<span class=\"code-keyword\">var</span> s=t.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"main\"</span>});<span class=\"code-keyword\">return</span>!s||s.to!==n}<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"main\"</span>===r&amp;&amp;a){<span class=\"code-keyword\">var</span> o=t.pendingTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>});<span class=\"code-keyword\">return</span>!o||o.to!==n}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},hn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segmentDuration,i=e.maxDuration;<span class=\"code-keyword\">return</span>!!t&amp;&amp;<span class=\"code-built_in\">Math</span>.round(t)&gt;i+R},cn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">if</span>(n=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Initialization settings are required\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t.currentTime)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No currentTime getter specified\"</span>);<span class=\"code-keyword\">if</span>(!t.mediaSource)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No MediaSource specified\"</span>);<span class=\"code-keyword\">return</span> n.bandwidth=t.bandwidth,n.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>},n.roundTrip=<span class=\"code-literal\">NaN</span>,n.resetStats_(),n.mediaIndex=<span class=\"code-literal\">null</span>,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.startingMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_=<span class=\"code-string\">\"INIT\"</span>,n.handlePartialData_=t.handlePartialData,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!<span class=\"code-number\">0</span>,n.parse708captions_=t.parse708captions,n.checkBufferTimeout_=<span class=\"code-literal\">null</span>,n.error_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.currentTimeline_=<span class=\"code-number\">-1</span>,n.pendingSegment_=<span class=\"code-literal\">null</span>,n.xhrOptions_=<span class=\"code-literal\">null</span>,n.pendingSegments_=[],n.audioDisabled_=!<span class=\"code-number\">1</span>,n.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,n.gopBuffer_=[],n.timeMapping_=<span class=\"code-number\">0</span>,n.safeAppend_=u.default.browser.IE_VERSION&gt;=<span class=\"code-number\">11</span>,n.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},n.playlistOfLastInitSegment_={<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={<span class=\"code-attr\">id3</span>:[],<span class=\"code-attr\">caption</span>:[]},n.activeInitSegmentId_=<span class=\"code-literal\">null</span>,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>)},n.syncController_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.isEndOfStream_()||(n.ended_=!<span class=\"code-number\">1</span>)})),n.fetchAtBuffer_=!<span class=\"code-number\">1</span>,n.logger_=ji(<span class=\"code-string\">\"SegmentLoader[\"</span>+n.loaderType_+<span class=\"code-string\">\"]\"</span>),<span class=\"code-built_in\">Object</span>.defineProperty(d(n),<span class=\"code-string\">\"state\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state_},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e!==<span class=\"code-keyword\">this</span>.state_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-keyword\">this</span>.state_+<span class=\"code-string\">\" -&gt; \"</span>+e),<span class=\"code-keyword\">this</span>.state_=e,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"statechange\"</span>))}}),n.sourceUpdater_.on(<span class=\"code-string\">\"ready\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class=\"code-string\">\"main\"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class=\"code-string\">\"pendingtimelinechange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class=\"code-string\">\"audio\"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class=\"code-string\">\"timelinechange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToLoad_()&amp;&amp;n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),n}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.createTransmuxer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> xi;<span class=\"code-keyword\">return</span> e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"init\"</span>,<span class=\"code-attr\">options</span>:{<span class=\"code-attr\">parse708captions</span>:<span class=\"code-keyword\">this</span>.parse708captions_,<span class=\"code-attr\">remux</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">alignGopsAtEnd</span>:<span class=\"code-keyword\">this</span>.safeAppend_,<span class=\"code-attr\">keepOriginalTimestamps</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">handlePartialData</span>:<span class=\"code-keyword\">this</span>.handlePartialData_}}),e},i.resetStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaBytesTransferred=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequests=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsAborted=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsTimedout=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsErrored=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaTransferDuration=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded=<span class=\"code-number\">0</span>},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"DISPOSED\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;(<span class=\"code-keyword\">this</span>.transmuxer_.terminate(),Tt=<span class=\"code-literal\">null</span>,Dt.length=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.resetStats_(),<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.syncController_&amp;&amp;<span class=\"code-keyword\">this</span>.triggerSyncInfoUpdate_&amp;&amp;<span class=\"code-keyword\">this</span>.syncController_.off(<span class=\"code-string\">\"syncinfoupdate\"</span>,<span class=\"code-keyword\">this</span>.triggerSyncInfoUpdate_),<span class=\"code-keyword\">this</span>.off()},i.setAudio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.audioDisabled_=!e,e?<span class=\"code-keyword\">this</span>.appendInitSegment_.audio=!<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.sourceUpdater_.removeAudio(<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.duration_())},i.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"WAITING\"</span>===<span class=\"code-keyword\">this</span>.state?(<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_()):<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;(<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>)},i.abort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.pendingSegment_.abortRequests&amp;&amp;<span class=\"code-keyword\">this</span>.pendingSegment_.abortRequests(),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.callQueue_=[],<span class=\"code-keyword\">this</span>.loadQueue_=[],<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[],<span class=\"code-keyword\">this</span>.timelineChangeController_.clearPendingTimelineChange(<span class=\"code-keyword\">this</span>.loaderType_)},i.checkForAbort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"APPENDING\"</span>!==<span class=\"code-keyword\">this</span>.state||<span class=\"code-keyword\">this</span>.pendingSegment_?!<span class=\"code-keyword\">this</span>.pendingSegment_||<span class=\"code-keyword\">this</span>.pendingSegment_.requestId!==e:(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,!<span class=\"code-number\">0</span>)},i.error=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"error occurred:\"</span>,e),<span class=\"code-keyword\">this</span>.error_=e),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.error_},i.endOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;Ft(<span class=\"code-keyword\">this</span>.transmuxer_),<span class=\"code-keyword\">this</span>.gopBuffer_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"ended\"</span>)},i.buffered_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_||!<span class=\"code-keyword\">this</span>.startingMediaInfo_)<span class=\"code-keyword\">return</span> u.default.createTimeRanges();<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;<span class=\"code-keyword\">if</span>(i&amp;&amp;t&amp;&amp;!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;!n)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.buffered();<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.videoBuffered()}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.audioBuffered()},i.initSegmentForMap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=ce(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:e.bytes,<span class=\"code-attr\">tracks</span>:e.tracks,<span class=\"code-attr\">timescales</span>:e.timescales}),n||e},i.segmentKey=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=fe(e),n=<span class=\"code-keyword\">this</span>.keyCache_[i];<span class=\"code-keyword\">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.keyCache_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">bytes</span>:e.bytes});<span class=\"code-keyword\">var</span> r={<span class=\"code-attr\">resolvedUri</span>:(n||e).resolvedUri};<span class=\"code-keyword\">return</span> n&amp;&amp;(r.bytes=n.bytes),r},i.couldBeginLoading_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.monitorBuffer_(),<span class=\"code-keyword\">this</span>.playlist_){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.syncController_.setDateTimeMapping(<span class=\"code-keyword\">this</span>.playlist_),<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.init_();!<span class=\"code-keyword\">this</span>.couldBeginLoading_()||<span class=\"code-string\">\"READY\"</span>!==<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-string\">\"INIT\"</span>!==<span class=\"code-keyword\">this</span>.state||(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>)}},i.init_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()},i.playlist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),e){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.playlist_,n=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.playlist_=e,<span class=\"code-keyword\">this</span>.xhrOptions_=t,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(e.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">var</span> r=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist update [\"</span>+r+<span class=\"code-string\">\" =&gt; \"</span>+(e.id||e.uri)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.init_();<span class=\"code-keyword\">if</span>(!i||i.uri!==e.uri)<span class=\"code-keyword\">return</span>(<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex||<span class=\"code-keyword\">this</span>.handlePartialData_)&amp;&amp;<span class=\"code-keyword\">this</span>.resyncLoader(),<span class=\"code-keyword\">this</span>.currentMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistupdate\"</span>);<span class=\"code-keyword\">var</span> a=e.mediaSequence-i.mediaSequence;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"live window shift [\"</span>+a+<span class=\"code-string\">\"]\"</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaIndex-=a),n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&gt;=<span class=\"code-number\">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex])),<span class=\"code-keyword\">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;(o.default.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=<span class=\"code-literal\">null</span>)},i.paused=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.checkBufferTimeout_},i.resetEverything=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.resetLoader(),<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearAllMp4Captions\"</span>})},i.resetLoader=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.resyncLoader()},i.resyncLoader=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;Ft(<span class=\"code-keyword\">this</span>.transmuxer_),<span class=\"code-keyword\">this</span>.mediaIndex=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.callQueue_=[],<span class=\"code-keyword\">this</span>.loadQueue_=[],<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[],<span class=\"code-keyword\">this</span>.abort(),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearParsedMp4Captions\"</span>})},i.remove=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}),t===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-keyword\">this</span>.duration_()),<span class=\"code-keyword\">this</span>.sourceUpdater_&amp;&amp;<span class=\"code-keyword\">this</span>.currentMediaInfo_){<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">1</span>,r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>==--n&amp;&amp;i()};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.audioDisabled_||(n++,<span class=\"code-keyword\">this</span>.sourceUpdater_.removeAudio(e,t,r)),<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;<span class=\"code-keyword\">this</span>.currentMediaInfo_&amp;&amp;<span class=\"code-keyword\">this</span>.currentMediaInfo_.hasVideo&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.ceil((t-n)*Jt),a=<span class=\"code-built_in\">Math</span>.ceil((i-n)*Jt),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===o)<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=o+<span class=\"code-number\">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class=\"code-keyword\">return</span> u=<span class=\"code-built_in\">Math</span>.max(u,<span class=\"code-number\">0</span>),s.splice(u,o-u+<span class=\"code-number\">1</span>),s}(<span class=\"code-keyword\">this</span>.gopBuffer_,e,t,<span class=\"code-keyword\">this</span>.timeMapping_),n++,<span class=\"code-keyword\">this</span>.sourceUpdater_.removeVideo(e,t,r)),<span class=\"code-keyword\">this</span>.inbandTextTracks_)an(e,t,<span class=\"code-keyword\">this</span>.inbandTextTracks_[a]);an(e,t,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_),r()}},i.monitorBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=o.default.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1</span>)},i.monitorBufferTick_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"READY\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.fillBuffer_(),<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=o.default.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">500</span>)},i.fillBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_.updating()){<span class=\"code-keyword\">this</span>.syncPoint_||(<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-keyword\">this</span>.syncController_.getSyncPoint(<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-keyword\">this</span>.currentTime_()));<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.buffered_(),t=<span class=\"code-keyword\">this</span>.checkBuffer_(e,<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.mediaIndex,<span class=\"code-keyword\">this</span>.hasPlayed_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.syncPoint_);t&amp;&amp;(t.timestampOffset=dn({<span class=\"code-attr\">segmentTimeline</span>:t.timeline,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">startOfSegment</span>:t.startOfSegment,<span class=\"code-attr\">buffered</span>:e,<span class=\"code-attr\">overrideCheck</span>:<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_}),<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.timestampOffset&amp;&amp;<span class=\"code-keyword\">this</span>.timelineChangeController_.pendingTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:t.timeline}),<span class=\"code-keyword\">this</span>.loadSegment_(t))}},i.isEndOfStream_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.mediaIndex),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.playlist_),!t||!<span class=\"code-keyword\">this</span>.mediaSource_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=e+<span class=\"code-number\">1</span>===t.segments.length;<span class=\"code-keyword\">return</span> t.endList&amp;&amp;<span class=\"code-string\">\"open\"</span>===<span class=\"code-keyword\">this</span>.mediaSource_.readyState&amp;&amp;i},i.checkBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;e.length&amp;&amp;(s=e.end(e.length<span class=\"code-number\">-1</span>));<span class=\"code-keyword\">var</span> o=<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,s-r);<span class=\"code-keyword\">if</span>(!t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(o&gt;=<span class=\"code-keyword\">this</span>.goalBufferLength_())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!n&amp;&amp;o&gt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> u,d=<span class=\"code-literal\">null</span>,l=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===a)d=<span class=\"code-keyword\">this</span>.getSyncSegmentCandidate_(t),l=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==i){<span class=\"code-keyword\">var</span> h=t.segments[i];u=h&amp;&amp;h.end?h.end:s,d=i+<span class=\"code-number\">1</span>}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.fetchAtBuffer_){<span class=\"code-keyword\">var</span> c=Z.getMediaInfoForTime(t,s,a.segmentIndex,a.time);d=c.mediaIndex,u=c.startTime}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> f=Z.getMediaInfoForTime(t,r,a.segmentIndex,a.time);d=f.mediaIndex,u=f.startTime}<span class=\"code-keyword\">var</span> m=<span class=\"code-keyword\">this</span>.generateSegmentInfo_(t,d,u,l);<span class=\"code-keyword\">return</span>!m||<span class=\"code-keyword\">this</span>.mediaSource_&amp;&amp;<span class=\"code-keyword\">this</span>.playlist_&amp;&amp;m.mediaIndex===<span class=\"code-keyword\">this</span>.playlist_.segments.length<span class=\"code-number\">-1</span>&amp;&amp;<span class=\"code-string\">\"ended\"</span>===<span class=\"code-keyword\">this</span>.mediaSource_.readyState&amp;&amp;!<span class=\"code-keyword\">this</span>.seeking_()?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"checkBuffer_ returning \"</span>+m.uri,{<span class=\"code-attr\">segmentInfo</span>:m,<span class=\"code-attr\">playlist</span>:t,<span class=\"code-attr\">currentMediaIndex</span>:i,<span class=\"code-attr\">nextMediaIndex</span>:d,<span class=\"code-attr\">startOfSegment</span>:u,<span class=\"code-attr\">isSyncRequest</span>:l}),m)},i.getSyncSegmentCandidate_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.currentTimeline_)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=e.segments.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">timeline</span>:e.timeline,<span class=\"code-attr\">segmentIndex</span>:t}})).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.timeline===t.currentTimeline_}));<span class=\"code-keyword\">return</span> i.length?i[<span class=\"code-built_in\">Math</span>.min(i.length<span class=\"code-number\">-1</span>,<span class=\"code-number\">1</span>)].segmentIndex:<span class=\"code-built_in\">Math</span>.max(e.segments.length<span class=\"code-number\">-1</span>,<span class=\"code-number\">0</span>)},i.generateSegmentInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(t&lt;<span class=\"code-number\">0</span>||t&gt;=e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> r,a,s=e.segments[t],o=<span class=\"code-keyword\">this</span>.sourceUpdater_.audioBuffered(),u=<span class=\"code-keyword\">this</span>.sourceUpdater_.videoBuffered();<span class=\"code-keyword\">return</span> o.length&amp;&amp;(r=o.end(o.length<span class=\"code-number\">-1</span>)-<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset()),u.length&amp;&amp;(a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>==t||!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">var</span> n,r=<span class=\"code-built_in\">Math</span>.ceil((t-i+<span class=\"code-number\">3</span>)*Jt);<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;e.length&amp;&amp;!(e[n].pts&gt;r);n++);<span class=\"code-keyword\">return</span> e.slice(n)}(<span class=\"code-keyword\">this</span>.gopBuffer_,<span class=\"code-keyword\">this</span>.currentTime_()-<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),<span class=\"code-keyword\">this</span>.timeMapping_)),{<span class=\"code-attr\">requestId</span>:<span class=\"code-string\">\"segment-loader-\"</span>+<span class=\"code-built_in\">Math</span>.random(),<span class=\"code-attr\">uri</span>:s.resolvedUri,<span class=\"code-attr\">mediaIndex</span>:t,<span class=\"code-attr\">isSyncRequest</span>:n,<span class=\"code-attr\">startOfSegment</span>:i,<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">bytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">encryptedBytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timestampOffset</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timeline</span>:s.timeline,<span class=\"code-attr\">duration</span>:s.duration,<span class=\"code-attr\">segment</span>:s,<span class=\"code-attr\">byteLength</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">transmuxer</span>:<span class=\"code-keyword\">this</span>.transmuxer_,<span class=\"code-attr\">audioAppendStart</span>:r,<span class=\"code-attr\">gopsToAlignWith</span>:a}},i.earlyAbortWhenNeeded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.vhs_.tech_.paused()&amp;&amp;<span class=\"code-keyword\">this</span>.xhrOptions_.timeout&amp;&amp;<span class=\"code-keyword\">this</span>.playlist_.attributes.BANDWIDTH&amp;&amp;!(<span class=\"code-built_in\">Date</span>.now()-(e.firstBytesReceivedAt||<span class=\"code-built_in\">Date</span>.now())&lt;<span class=\"code-number\">1e3</span>)){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.currentTime_(),i=e.bandwidth,n=<span class=\"code-keyword\">this</span>.pendingSegment_.duration,r=Z.estimateSegmentRequestTime(n,i,<span class=\"code-keyword\">this</span>.playlist_,e.bytesReceived),a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">1</span>),((e.length?e.end(e.length<span class=\"code-number\">-1</span>):<span class=\"code-number\">0</span>)-t)/i}(<span class=\"code-keyword\">this</span>.buffered_(),t,<span class=\"code-keyword\">this</span>.vhs_.tech_.playbackRate())<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(!(r&lt;=a)){<span class=\"code-keyword\">var</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Z.isIncompatible(e)})),d=u.filter(Z.isEnabled);d.length||(d=u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Z.isDisabled(e)})));<span class=\"code-keyword\">var</span> l=d.filter(Z.hasAttribute.bind(<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"BANDWIDTH\"</span>)).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> u=o.getSyncPoint(e,n,s,t)?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">rebufferingImpact</span>:Z.estimateSegmentRequestTime(r,i,e)*u-a}})),h=l.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact&lt;=<span class=\"code-number\">0</span>}));<span class=\"code-keyword\">return</span> en(h,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> tn(t.playlist,e.playlist)})),h.length?h[<span class=\"code-number\">0</span>]:(en(l,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact-t.rebufferingImpact})),l[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>)}({<span class=\"code-attr\">master</span>:<span class=\"code-keyword\">this</span>.vhs_.playlists.master,<span class=\"code-attr\">currentTime</span>:t,<span class=\"code-attr\">bandwidth</span>:i,<span class=\"code-attr\">duration</span>:<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-attr\">segmentDuration</span>:n,<span class=\"code-attr\">timeUntilRebuffer</span>:a,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">syncController</span>:<span class=\"code-keyword\">this</span>.syncController_});<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=r-a-s.rebufferingImpact,u=<span class=\"code-number\">.5</span>;a&lt;=R&amp;&amp;(u=<span class=\"code-number\">1</span>),!s.playlist||s.playlist.uri===<span class=\"code-keyword\">this</span>.playlist_.uri||o&lt;u||(<span class=\"code-keyword\">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*Ut.BANDWIDTH_VARIANCE+<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"earlyabort\"</span>))}}}},i.handleAbort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>},i.handleProgress_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(t.stats),<span class=\"code-keyword\">this</span>.checkForAbort_(t.requestId)||<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>)},i.handleTrackInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||<span class=\"code-keyword\">this</span>.checkForIllegalMediaSwitch(t)||(t=t||{},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">Object</span>.keys(e).sort(),n=<span class=\"code-built_in\">Object</span>.keys(t).sort();<span class=\"code-keyword\">if</span>(i.length!==n.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;i.length;r++){<span class=\"code-keyword\">var</span> a=i[r];<span class=\"code-keyword\">if</span>(a!==n[r])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e[a]!==t[a])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}(<span class=\"code-keyword\">this</span>.currentMediaInfo_,t)||(<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.startingMediaInfo_=t,<span class=\"code-keyword\">this</span>.currentMediaInfo_=t,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"trackinfo update\"</span>,t),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"trackinfo\"</span>)),<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||(<span class=\"code-keyword\">this</span>.pendingSegment_.trackInfo=t,<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class=\"code-keyword\">this</span>.processCallQueue_()))},i.handleTimingInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.pendingSegment_,a=un(t);r[a]=r[a]||{},r[a][i]=n,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"timinginfo: \"</span>+t+<span class=\"code-string\">\" - \"</span>+i+<span class=\"code-string\">\" - \"</span>+n),<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class=\"code-keyword\">this</span>.processCallQueue_()}},i.handleCaptions_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t.length)<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_.hasAppendedData_){<span class=\"code-keyword\">var</span> n=<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()?<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset():<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r[e.stream]=r[e.stream]||{<span class=\"code-attr\">startTime</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">endTime</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">var</span> t=r[e.stream];t.startTime=<span class=\"code-built_in\">Math</span>.min(t.startTime,e.startTime+n),t.endTime=<span class=\"code-built_in\">Math</span>.max(t.endTime,e.endTime+n),t.captions.push(e)})),<span class=\"code-built_in\">Object</span>.keys(r).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=r[e],a=t.startTime,s=t.endTime,u=t.captions,d=i.inbandTextTracks_;i.logger_(<span class=\"code-string\">\"adding cues from \"</span>+a+<span class=\"code-string\">\" -&gt; \"</span>+s+<span class=\"code-string\">\" for \"</span>+e),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e[i]){t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-608\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-608\"</span>});<span class=\"code-keyword\">var</span> n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">id</span>:i,<span class=\"code-attr\">label</span>:i},!<span class=\"code-number\">1</span>).track}}(d,i.vhs_.tech_,e),an(a,s,d[e]),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class=\"code-keyword\">if</span>(i){<span class=\"code-keyword\">var</span> r=o.default.WebKitDataCue||o.default.VTTCue;i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.stream;t[i].addCue(<span class=\"code-keyword\">new</span> r(e.startTime+n,e.endTime+n,e.text))}))}}({<span class=\"code-attr\">captionArray</span>:u,<span class=\"code-attr\">inbandTextTracks</span>:d,<span class=\"code-attr\">timestampOffset</span>:n})})),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearParsedMp4Captions\"</span>})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.metadataQueue_.caption.push(<span class=\"code-keyword\">this</span>.handleCaptions_.bind(<span class=\"code-keyword\">this</span>,e,t));<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"SegmentLoader received no captions from a caption event\"</span>)},i.handleId3_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_.hasAppendedData_){<span class=\"code-keyword\">var</span> n=<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()?<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset():<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset();!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"Timed Metadata\"</span>},!<span class=\"code-number\">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(<span class=\"code-keyword\">this</span>.inbandTextTracks_,i,<span class=\"code-keyword\">this</span>.vhs_.tech_),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,r=e.videoDuration;<span class=\"code-keyword\">if</span>(i){<span class=\"code-keyword\">var</span> a=o.default.WebKitDataCue||o.default.VTTCue,s=t.metadataTrack_;<span class=\"code-keyword\">if</span>(s&amp;&amp;(i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.cueTime+n;!(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t||o.default.isNaN(t)||t&lt;<span class=\"code-number\">0</span>)&amp;&amp;t&lt;<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;e.frames.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> a(t,t,e.value||e.url||e.data||<span class=\"code-string\">\"\"</span>);i.frame=e,i.value=e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperties(e.frame,{<span class=\"code-attr\">id</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"cue.frame.id is deprecated. Use cue.value.key instead.\"</span>),e.value.key}},<span class=\"code-attr\">value</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"cue.frame.value is deprecated. Use cue.value.data instead.\"</span>),e.value.data}},<span class=\"code-attr\">privateData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"cue.frame.privateData is deprecated. Use cue.value.data instead.\"</span>),e.value.data}}})}(i),s.addCue(i)}))})),s.cues&amp;&amp;s.cues.length)){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d=s.cues,l=[],h=<span class=\"code-number\">0</span>;h&lt;d.length;h++)d[h]&amp;&amp;l.push(d[h]);<span class=\"code-keyword\">var</span> c=l.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t.startTime]||[];<span class=\"code-keyword\">return</span> i.push(t),e[t.startTime]=i,e}),{}),f=<span class=\"code-built_in\">Object</span>.keys(c).sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Number</span>(e)-<span class=\"code-built_in\">Number</span>(t)}));f.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=c[e],n=<span class=\"code-built_in\">Number</span>(f[t+<span class=\"code-number\">1</span>])||r;i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.endTime=n}))}))}}}({<span class=\"code-attr\">inbandTextTracks</span>:<span class=\"code-keyword\">this</span>.inbandTextTracks_,<span class=\"code-attr\">metadataArray</span>:t,<span class=\"code-attr\">timestampOffset</span>:n,<span class=\"code-attr\">videoDuration</span>:<span class=\"code-keyword\">this</span>.duration_()})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.metadataQueue_.id3.push(<span class=\"code-keyword\">this</span>.handleId3_.bind(<span class=\"code-keyword\">this</span>,e,t,i))},i.processMetadataQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.metadataQueue_.id3.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()})),<span class=\"code-keyword\">this</span>.metadataQueue_.caption.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()})),<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[]},i.processCallQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.callQueue_;<span class=\"code-keyword\">this</span>.callQueue_=[],e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()}))},i.processLoadQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.loadQueue_;<span class=\"code-keyword\">this</span>.loadQueue_=[],e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()}))},i.hasEnoughInfoToLoad_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"audio\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">return</span>!(!e||<span class=\"code-keyword\">this</span>.currentMediaInfo_&amp;&amp;ln({<span class=\"code-attr\">timelineChangeController</span>:<span class=\"code-keyword\">this</span>.timelineChangeController_,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">segmentTimeline</span>:e.timeline,<span class=\"code-attr\">loaderType</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">audioDisabled</span>:<span class=\"code-keyword\">this</span>.audioDisabled_}))},i.hasEnoughInfoToAppend_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_.ready())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">if</span>(!e||!e.trackInfo)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.handlePartialData_){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;<span class=\"code-keyword\">if</span>(n&amp;&amp;!e.videoTimingInfo)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(i&amp;&amp;!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;!r&amp;&amp;!e.audioTimingInfo)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">return</span>!ln({<span class=\"code-attr\">timelineChangeController</span>:<span class=\"code-keyword\">this</span>.timelineChangeController_,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">segmentTimeline</span>:e.timeline,<span class=\"code-attr\">loaderType</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">audioDisabled</span>:<span class=\"code-keyword\">this</span>.audioDisabled_})},i.handleData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.callQueue_.length&amp;&amp;<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.setTimeMapping_(i.timeline),<span class=\"code-keyword\">this</span>.updateMediaSecondsLoaded_(i.segment),<span class=\"code-string\">\"closed\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource_.readyState){<span class=\"code-keyword\">if</span>(e.map&amp;&amp;(e.map=<span class=\"code-keyword\">this</span>.initSegmentForMap(e.map,!<span class=\"code-number\">0</span>),i.segment.map=e.map),e.key&amp;&amp;<span class=\"code-keyword\">this</span>.segmentKey(e.key,!<span class=\"code-number\">0</span>),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"fmp4\"</span>),i.timingInfo.start=i[un(t.type)].start;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;<span class=\"code-keyword\">this</span>.currentMediaInfo_.hasVideo;r&amp;&amp;(n=<span class=\"code-keyword\">this</span>.handlePartialData_?t.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=<span class=\"code-keyword\">this</span>.trueSegmentStart_({<span class=\"code-attr\">currentStart</span>:i.timingInfo.start,<span class=\"code-attr\">playlist</span>:i.playlist,<span class=\"code-attr\">mediaIndex</span>:i.mediaIndex,<span class=\"code-attr\">currentVideoTimestampOffset</span>:<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),<span class=\"code-attr\">useVideoTimingInfo</span>:r,<span class=\"code-attr\">firstVideoFrameTimeForData</span>:n,<span class=\"code-attr\">videoTimingInfo</span>:i.videoTimingInfo,<span class=\"code-attr\">audioTimingInfo</span>:i.audioTimingInfo})}<span class=\"code-keyword\">this</span>.updateAppendInitSegmentStatus(i,t.type),<span class=\"code-keyword\">this</span>.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.processMetadataQueue_(),<span class=\"code-keyword\">this</span>.appendData_(i,t)}}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.callQueue_.push(<span class=\"code-keyword\">this</span>.handleData_.bind(<span class=\"code-keyword\">this</span>,e,t))},i.updateAppendInitSegmentStatus=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"main\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e.timestampOffset||e.changedTimestampOffset||(<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">this</span>.playlistOfLastInitSegment_[t]!==e.playlist&amp;&amp;(<span class=\"code-keyword\">this</span>.appendInitSegment_[t]=!<span class=\"code-number\">0</span>)},i.getInitSegmentAndUpdateState_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.initSegment,n=e.map,r=e.playlist;<span class=\"code-keyword\">if</span>(n){<span class=\"code-keyword\">var</span> a=ce(n);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.activeInitSegmentId_===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;i=<span class=\"code-keyword\">this</span>.initSegmentForMap(n,!<span class=\"code-number\">0</span>).bytes,<span class=\"code-keyword\">this</span>.activeInitSegmentId_=a}<span class=\"code-keyword\">return</span> i&amp;&amp;<span class=\"code-keyword\">this</span>.appendInitSegment_[t]?(<span class=\"code-keyword\">this</span>.playlistOfLastInitSegment_[t]=r,<span class=\"code-keyword\">this</span>.appendInitSegment_[t]=!!n,<span class=\"code-keyword\">this</span>.activeInitSegmentId_=<span class=\"code-literal\">null</span>,i):<span class=\"code-literal\">null</span>},i.appendToSourceBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.segmentInfo,n=e.type,r=e.initSegment,a=e.data,s=[a],o=a.byteLength;r&amp;&amp;(s.unshift(r),o+=r.byteLength);<span class=\"code-keyword\">var</span> u,d,l,h=(l=<span class=\"code-number\">0</span>,(u={<span class=\"code-attr\">bytes</span>:o,<span class=\"code-attr\">segments</span>:s}).bytes&amp;&amp;(d=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.bytes),u.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{d.set(e,l),l+=e.byteLength}))),d);<span class=\"code-keyword\">this</span>.sourceUpdater_.appendBuffer({<span class=\"code-attr\">segmentInfo</span>:i,<span class=\"code-attr\">type</span>:n,<span class=\"code-attr\">bytes</span>:h},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e&amp;&amp;(t.error(n+<span class=\"code-string\">\" append of \"</span>+h.length+<span class=\"code-string\">\"b failed for segment #\"</span>+i.mediaIndex+<span class=\"code-string\">\" in playlist \"</span>+i.playlist.id),t.trigger(<span class=\"code-string\">\"appenderror\"</span>))}))},i.handleSegmentTimingInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;t===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.pendingSegment_.segment,r=e+<span class=\"code-string\">\"TimingInfo\"</span>;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||<span class=\"code-number\">0</span>,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.type,n=t.data;<span class=\"code-keyword\">if</span>(n&amp;&amp;n.byteLength&amp;&amp;(<span class=\"code-string\">\"audio\"</span>!==i||!<span class=\"code-keyword\">this</span>.audioDisabled_)){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.getInitSegmentAndUpdateState_({<span class=\"code-attr\">type</span>:i,<span class=\"code-attr\">initSegment</span>:t.initSegment,<span class=\"code-attr\">playlist</span>:e.playlist,<span class=\"code-attr\">map</span>:e.isFmp4?e.segment.map:<span class=\"code-literal\">null</span>});<span class=\"code-keyword\">this</span>.appendToSourceBuffer_({<span class=\"code-attr\">segmentInfo</span>:e,<span class=\"code-attr\">type</span>:i,<span class=\"code-attr\">initSegment</span>:r,<span class=\"code-attr\">data</span>:n})}},i.loadSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING\"</span>,<span class=\"code-keyword\">this</span>.pendingSegment_=e,<span class=\"code-keyword\">this</span>.trimBackBuffer_(e),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timestampOffset&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearAllMp4Captions\"</span>}),<span class=\"code-keyword\">this</span>.hasEnoughInfoToLoad_()?<span class=\"code-keyword\">this</span>.updateTransmuxerAndRequestSegment_(e):<span class=\"code-keyword\">this</span>.loadQueue_.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.buffered_();<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timestampOffset&amp;&amp;(e.timestampOffset=dn({<span class=\"code-attr\">segmentTimeline</span>:e.timeline,<span class=\"code-attr\">currentTimeline</span>:t.currentTimeline_,<span class=\"code-attr\">startOfSegment</span>:e.startOfSegment,<span class=\"code-attr\">buffered</span>:i,<span class=\"code-attr\">overrideCheck</span>:!<span class=\"code-number\">0</span>})),<span class=\"code-keyword\">delete</span> e.audioAppendStart;<span class=\"code-keyword\">var</span> n=t.sourceUpdater_.audioBuffered();n.length&amp;&amp;(e.audioAppendStart=n.end(n.length<span class=\"code-number\">-1</span>)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_.length=<span class=\"code-number\">0</span>,e.gopsToAlignWith=[],<span class=\"code-keyword\">this</span>.timeMapping_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"reset\"</span>}),<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setTimestampOffset\"</span>,<span class=\"code-attr\">timestampOffset</span>:e.timestampOffset}));<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.createSimplifiedSegmentObj_(e);e.abortRequests=Ii({<span class=\"code-attr\">xhr</span>:<span class=\"code-keyword\">this</span>.vhs_.xhr,<span class=\"code-attr\">xhrOptions</span>:<span class=\"code-keyword\">this</span>.xhrOptions_,<span class=\"code-attr\">decryptionWorker</span>:<span class=\"code-keyword\">this</span>.decrypter_,<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">handlePartialData</span>:<span class=\"code-keyword\">this</span>.handlePartialData_,<span class=\"code-attr\">abortFn</span>:<span class=\"code-keyword\">this</span>.handleAbort_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">progressFn</span>:<span class=\"code-keyword\">this</span>.handleProgress_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">trackInfoFn</span>:<span class=\"code-keyword\">this</span>.handleTrackInfo_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">timingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleTimingInfo_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleSegmentTimingInfo_.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"video\"</span>,e.requestId),<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleSegmentTimingInfo_.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"audio\"</span>,e.requestId),<span class=\"code-attr\">captionsFn</span>:<span class=\"code-keyword\">this</span>.handleCaptions_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">id3Fn</span>:<span class=\"code-keyword\">this</span>.handleId3_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">dataFn</span>:<span class=\"code-keyword\">this</span>.handleData_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">doneFn</span>:<span class=\"code-keyword\">this</span>.segmentRequestFinished_.bind(<span class=\"code-keyword\">this</span>)})},i.trimBackBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t-Ut.BACK_BUFFER_LENGTH;e.length&amp;&amp;(n=<span class=\"code-built_in\">Math</span>.max(n,e.start(<span class=\"code-number\">0</span>)));<span class=\"code-keyword\">var</span> r=t-i;<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(r,n)}(<span class=\"code-keyword\">this</span>.seekable_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.playlist_.targetDuration||<span class=\"code-number\">10</span>);t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,t)},i.createSimplifiedSegmentObj_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i={<span class=\"code-attr\">resolvedUri</span>:t.resolvedUri,<span class=\"code-attr\">byterange</span>:t.byterange,<span class=\"code-attr\">requestId</span>:e.requestId,<span class=\"code-attr\">transmuxer</span>:e.transmuxer,<span class=\"code-attr\">audioAppendStart</span>:e.audioAppendStart,<span class=\"code-attr\">gopsToAlignWith</span>:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">if</span>(n&amp;&amp;n.timeline===t.timeline&amp;&amp;(n.videoTimingInfo?i.baseStartTime=n.videoTimingInfo.transmuxedDecodeEnd:n.audioTimingInfo&amp;&amp;(i.baseStartTime=n.audioTimingInfo.transmuxedDecodeEnd)),t.key){<span class=\"code-keyword\">var</span> r=t.key.iv||<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,e.mediaIndex+e.playlist.mediaSequence]);i.key=<span class=\"code-keyword\">this</span>.segmentKey(t.key),i.key.iv=r}<span class=\"code-keyword\">return</span> t.map&amp;&amp;(i.map=<span class=\"code-keyword\">this</span>.initSegmentForMap(t.map)),i},i.saveTransferStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequests+=<span class=\"code-number\">1</span>,e&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaBytesTransferred+=e.bytesReceived,<span class=\"code-keyword\">this</span>.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_.byteLength=t.bytesReceived,e&lt;on?<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Ignoring segment's bandwidth because its duration of \"</span>+e+<span class=\"code-string\">\" is less than the min to record 0.016666666666666666\"</span>):(<span class=\"code-keyword\">this</span>.bandwidth=t.bandwidth,<span class=\"code-keyword\">this</span>.roundTrip=t.roundTripTime)},i.handleTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequestsTimedout+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.roundTrip=<span class=\"code-literal\">NaN</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)},i.segmentRequestFinished_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.callQueue_.length)<span class=\"code-keyword\">this</span>.callQueue_.push(<span class=\"code-keyword\">this</span>.segmentRequestFinished_.bind(<span class=\"code-keyword\">this</span>,e,t,i));<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.saveTransferStats_(t.stats),<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,e.code===vi)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.pause(),e.code===yi?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.handleTimeout_():(<span class=\"code-keyword\">this</span>.mediaRequestsErrored+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.error(e),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>))}<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!t.length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> t.slice();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=t[<span class=\"code-number\">0</span>].pts,r=<span class=\"code-number\">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class=\"code-keyword\">return</span> e.slice(<span class=\"code-number\">0</span>,r).concat(t)}(<span class=\"code-keyword\">this</span>.gopBuffer_,i.gopInfo,<span class=\"code-keyword\">this</span>.safeAppend_)),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>;<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.isEndOfStream_(n.mediaIndex,n.playlist),a=<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex,s=n.timeline!==<span class=\"code-keyword\">this</span>.currentTimeline_&amp;&amp;n.timeline&gt;<span class=\"code-number\">0</span>;!n.isFmp4&amp;&amp;(r||a&amp;&amp;s)&amp;&amp;(o=<span class=\"code-keyword\">this</span>.transmuxer_,Bt(<span class=\"code-string\">\"endTimeline\"</span>,o)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appending\"</span>),<span class=\"code-keyword\">this</span>.waitForAppendsToComplete_(n)}<span class=\"code-keyword\">var</span> o},i.setTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.syncController_.mappingForTimeline(e);<span class=\"code-literal\">null</span>!==t&amp;&amp;(<span class=\"code-keyword\">this</span>.timeMapping_=t)},i.updateMediaSecondsLoaded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.end?<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=e.end-e.start:<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==e&amp;&amp;(<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;e!==<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()||!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;e!==<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t)<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">if</span>(!s)<span class=\"code-keyword\">return</span> u.start;<span class=\"code-keyword\">var</span> d=i.segments[n<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>!==n&amp;&amp;d&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d.start&amp;&amp;d.end===r+a?o.start:r},i.waitForAppendsToComplete_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.currentMediaInfo_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"No starting media returned, likely due to an unsupported media format.\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;n,s=!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;i&amp;&amp;!r;<span class=\"code-keyword\">if</span>(e.waitingOnAppends=<span class=\"code-number\">0</span>,!e.hasAppendedData_)<span class=\"code-keyword\">return</span> e.timingInfo||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e.timestampOffset||(<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">0</span>),e.timingInfo={<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>},e.waitingOnAppends++,<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_||(<span class=\"code-keyword\">this</span>.updateSourceBufferTimestampOffset_(e),<span class=\"code-keyword\">this</span>.processMetadataQueue_()),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.checkAppendsDone_(e);a&amp;&amp;e.waitingOnAppends++,s&amp;&amp;e.waitingOnAppends++,a&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.videoQueueCallback(<span class=\"code-keyword\">this</span>.checkAppendsDone_.bind(<span class=\"code-keyword\">this</span>,e)),s&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.audioQueueCallback(<span class=\"code-keyword\">this</span>.checkAppendsDone_.bind(<span class=\"code-keyword\">this</span>,e))},i.checkAppendsDone_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||(e.waitingOnAppends--,<span class=\"code-number\">0</span>===e.waitingOnAppends&amp;&amp;<span class=\"code-keyword\">this</span>.handleAppendsDone_())},i.checkForIllegalMediaSwitch=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"main\"</span>===e&amp;&amp;t&amp;&amp;i?i.hasAudio||i.hasVideo?t.hasVideo&amp;&amp;!i.hasVideo?<span class=\"code-string\">\"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.\"</span>:!t.hasVideo&amp;&amp;i.hasVideo?<span class=\"code-string\">\"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.\"</span>:<span class=\"code-literal\">null</span>:<span class=\"code-string\">\"Neither audio nor video found in segment.\"</span>:<span class=\"code-literal\">null</span>}(<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-keyword\">this</span>.currentMediaInfo_,e);<span class=\"code-keyword\">return</span>!!t&amp;&amp;(<span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:t,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>),!<span class=\"code-number\">0</span>)},i.updateSourceBufferTimestampOffset_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==e.timestampOffset&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timingInfo.start&amp;&amp;!e.changedTimestampOffset&amp;&amp;<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_){<span class=\"code-keyword\">var</span> t=!<span class=\"code-number\">1</span>;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!<span class=\"code-number\">0</span>,e.timestampOffset!==<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!<span class=\"code-number\">0</span>),e.timestampOffset!==<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset()&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!<span class=\"code-number\">0</span>),t&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>)}},i.updateTimingInfoEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.timingInfo=e.timingInfo||{};<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;<span class=\"code-keyword\">this</span>.currentMediaInfo_.hasVideo&amp;&amp;e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&amp;&amp;(e.timingInfo.end=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.end?t.end:t.start+e.duration)},i.handleAppendsDone_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appendsdone\"</span>),!<span class=\"code-keyword\">this</span>.pendingSegment_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_());<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.updateTimingInfoEnd_(e),<span class=\"code-keyword\">this</span>.shouldSaveSegmentTimingInfo_&amp;&amp;<span class=\"code-keyword\">this</span>.syncController_.saveSegmentTimingInfo({<span class=\"code-attr\">segmentInfo</span>:e,<span class=\"code-attr\">shouldSaveTimelineMapping</span>:<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_}),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?[]:o,d=e.mediaIndex,l=e.timeline;<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"appending [\"</span>+d+<span class=\"code-string\">\"] of [\"</span>+a+<span class=\"code-string\">\", \"</span>+(a+u.length)+<span class=\"code-string\">\"] from playlist [\"</span>+s+<span class=\"code-string\">\"]\"</span>,<span class=\"code-string\">\"[\"</span>+i+<span class=\"code-string\">\" =&gt; \"</span>+n+<span class=\"code-string\">\"] in timeline [\"</span>+l+<span class=\"code-string\">\"]\"</span>].join(<span class=\"code-string\">\" \"</span>)}(e));<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"hls\"</span>!==t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i,n,r,a,s=(i=e.audioTimingInfo,n=e.videoTimingInfo,r=i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.end?i.end-i.start:<span class=\"code-number\">0</span>,a=n&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n.end?n.end-n.start:<span class=\"code-number\">0</span>,<span class=\"code-built_in\">Math</span>.max(r,a));<span class=\"code-keyword\">if</span>(!s)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> o=e.playlist.targetDuration,u=hn({<span class=\"code-attr\">segmentDuration</span>:s,<span class=\"code-attr\">maxDuration</span>:<span class=\"code-number\">2</span>*o}),d=hn({<span class=\"code-attr\">segmentDuration</span>:s,<span class=\"code-attr\">maxDuration</span>:o}),l=<span class=\"code-string\">\"Segment with index \"</span>+e.mediaIndex+<span class=\"code-string\">\" from playlist \"</span>+e.playlist.id+<span class=\"code-string\">\" has a duration of \"</span>+s+<span class=\"code-string\">\" when the reported duration is \"</span>+e.duration+<span class=\"code-string\">\" and the target duration is \"</span>+o+<span class=\"code-string\">\". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1\"</span>;<span class=\"code-keyword\">return</span> u||d?{<span class=\"code-attr\">severity</span>:u?<span class=\"code-string\">\"warn\"</span>:<span class=\"code-string\">\"info\"</span>,<span class=\"code-attr\">message</span>:l}:<span class=\"code-literal\">null</span>}(e,<span class=\"code-keyword\">this</span>.sourceType_);<span class=\"code-keyword\">if</span>(t&amp;&amp;(<span class=\"code-string\">\"warn\"</span>===t.severity?u.default.log.warn(t.message):<span class=\"code-keyword\">this</span>.logger_(t.message)),<span class=\"code-keyword\">this</span>.recordThroughput_(e),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,e.isSyncRequest)<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">this</span>.addSegmentMetadataCue_(e),<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.currentTimeline_!==e.timeline&amp;&amp;(<span class=\"code-keyword\">this</span>.timelineChangeController_.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:e.timeline}),<span class=\"code-string\">\"main\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_||<span class=\"code-keyword\">this</span>.audioDisabled_||<span class=\"code-keyword\">this</span>.timelineChangeController_.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:e.timeline})),<span class=\"code-keyword\">this</span>.currentTimeline_=e.timeline,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">var</span> i=e.segment;i.end&amp;&amp;<span class=\"code-keyword\">this</span>.currentTime_()-i.end&gt;<span class=\"code-number\">3</span>*e.playlist.targetDuration?<span class=\"code-keyword\">this</span>.resetEverything():(<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>),<span class=\"code-keyword\">this</span>.mediaIndex=e.mediaIndex,<span class=\"code-keyword\">this</span>.isEndOfStream_(e.mediaIndex,e.playlist)&amp;&amp;<span class=\"code-keyword\">this</span>.endOfStream(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appended\"</span>),<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_())}},i.recordThroughput_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.duration&lt;on)<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Ignoring segment's throughput because its duration of \"</span>+e.duration+<span class=\"code-string\">\" is less than the min to record 0.016666666666666666\"</span>);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.throughput.rate,i=<span class=\"code-built_in\">Date</span>.now()-e.endOfAllRequests+<span class=\"code-number\">1</span>,n=<span class=\"code-built_in\">Math</span>.floor(e.byteLength/i*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>);<span class=\"code-keyword\">this</span>.throughput.rate+=(n-t)/++<span class=\"code-keyword\">this</span>.throughput.count}},i.addSegmentMetadataCue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.segmentMetadataTrack_){<span class=\"code-keyword\">var</span> t=e.segment,i=t.start,n=t.end;<span class=\"code-keyword\">if</span>(sn(i)&amp;&amp;sn(n)){an(i,n,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_);<span class=\"code-keyword\">var</span> r=o.default.WebKitDataCue||o.default.VTTCue,a={<span class=\"code-attr\">custom</span>:t.custom,<span class=\"code-attr\">dateTimeObject</span>:t.dateTimeObject,<span class=\"code-attr\">dateTimeString</span>:t.dateTimeString,<span class=\"code-attr\">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class=\"code-attr\">resolution</span>:e.playlist.attributes.RESOLUTION,<span class=\"code-attr\">codecs</span>:e.playlist.attributes.CODECS,<span class=\"code-attr\">byteLength</span>:e.byteLength,<span class=\"code-attr\">uri</span>:e.uri,<span class=\"code-attr\">timeline</span>:e.timeline,<span class=\"code-attr\">playlist</span>:e.playlist.id,<span class=\"code-attr\">start</span>:i,<span class=\"code-attr\">end</span>:n},s=<span class=\"code-keyword\">new</span> r(i,n,<span class=\"code-built_in\">JSON</span>.stringify(a));s.value=a,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_.addCue(s)}}},t}(u.default.EventTarget);<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">fn</span>(<span class=\"code-params\"></span>)</span>{}<span class=\"code-keyword\">var</span> mn,pn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e?e:e.replace(<span class=\"code-regexp\">/./</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.toUpperCase()}))},gn=[<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>],yn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">return</span> i&amp;&amp;i.updating||t.queuePending[e]},vn=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i.queue.length){<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>,r=i.queue[n];<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>!==r.type){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>!==t&amp;&amp;i.ready()&amp;&amp;<span class=\"code-string\">\"closed\"</span>!==i.mediaSource.readyState&amp;&amp;!yn(t,i)){<span class=\"code-keyword\">if</span>(r.type!==t){<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>===n.type)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(n.type===e)<span class=\"code-keyword\">return</span> i}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}(t,i.queue)))<span class=\"code-keyword\">return</span>;r=i.queue[n]}i.queue.splice(n,<span class=\"code-number\">1</span>),r.action(t,i),r.doneFn?i.queuePending[t]=r:e(t,i)}}<span class=\"code-keyword\">else</span> i.updating()||<span class=\"code-string\">\"closed\"</span>===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&amp;&amp;r.doneFn(),e(<span class=\"code-string\">\"audio\"</span>,i),e(<span class=\"code-string\">\"video\"</span>,i))}},_n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>],n=pn(e);i&amp;&amp;(i.removeEventListener(<span class=\"code-string\">\"updateend\"</span>,t[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"UpdateEnd_\"</span>]),i.removeEventListener(<span class=\"code-string\">\"error\"</span>,t[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"Error_\"</span>]),t.codecs[e]=<span class=\"code-literal\">null</span>,t[e+<span class=\"code-string\">\"Buffer\"</span>]=<span class=\"code-literal\">null</span>)},bn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;t&amp;&amp;<span class=\"code-number\">-1</span>!==<span class=\"code-built_in\">Array</span>.prototype.indexOf.call(e.sourceBuffers,t)},Tn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n[i+<span class=\"code-string\">\"Buffer\"</span>];bn(n.mediaSource,r)&amp;&amp;(n.logger_(<span class=\"code-string\">\"Appending segment \"</span>+t.mediaIndex+<span class=\"code-string\">\"'s \"</span>+e.length+<span class=\"code-string\">\" bytes to \"</span>+i+<span class=\"code-string\">\"Buffer\"</span>),r.appendBuffer(e))}},Sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n[i+<span class=\"code-string\">\"Buffer\"</span>];bn(n.mediaSource,r)&amp;&amp;(n.logger_(<span class=\"code-string\">\"Removing \"</span>+e+<span class=\"code-string\">\" to \"</span>+t+<span class=\"code-string\">\" from \"</span>+i+<span class=\"code-string\">\"Buffer\"</span>),r.remove(e,t))}},In=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t+<span class=\"code-string\">\"Buffer\"</span>];bn(i.mediaSource,n)&amp;&amp;(i.logger_(<span class=\"code-string\">\"Setting \"</span>+t+<span class=\"code-string\">\"timestampOffset to \"</span>+e),n.timestampOffset=e)}},wn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e()}},Ln=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===t.mediaSource.readyState){t.logger_(<span class=\"code-string\">\"Calling mediaSource endOfStream(\"</span>+(e||<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\")\"</span>);<span class=\"code-keyword\">try</span>{t.mediaSource.endOfStream(e)}<span class=\"code-keyword\">catch</span>(e){u.default.log.warn(<span class=\"code-string\">\"Failed to call media source endOfStream\"</span>,e)}}}},kn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=pn(e),r=Wi(t);i.logger_(<span class=\"code-string\">\"Adding \"</span>+e+<span class=\"code-string\">\"Buffer with codec \"</span>+t+<span class=\"code-string\">\" to mediaSource\"</span>);<span class=\"code-keyword\">var</span> a=i.mediaSource.addSourceBuffer(r);a.addEventListener(<span class=\"code-string\">\"updateend\"</span>,i[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"UpdateEnd_\"</span>]),a.addEventListener(<span class=\"code-string\">\"error\"</span>,i[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"Error_\"</span>]),i.codecs[e]=t,i[e+<span class=\"code-string\">\"Buffer\"</span>]=a}},An=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(_n(e,t),bn(t.mediaSource,i)){t.logger_(<span class=\"code-string\">\"Removing \"</span>+e+<span class=\"code-string\">\"Buffer with codec \"</span>+t.codecs[e]+<span class=\"code-string\">\" from mediaSource\"</span>);<span class=\"code-keyword\">try</span>{t.mediaSource.removeSourceBuffer(i)}<span class=\"code-keyword\">catch</span>(t){u.default.log.warn(<span class=\"code-string\">\"Failed to removeSourceBuffer \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>,t)}}}},En=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t+<span class=\"code-string\">\"Buffer\"</span>],r=Wi(e);bn(i.mediaSource,n)&amp;&amp;i.codecs[t]!==e&amp;&amp;(i.logger_(<span class=\"code-string\">\"changing \"</span>+t+<span class=\"code-string\">\"Buffer codec from \"</span>+i.codecs[t]+<span class=\"code-string\">\" to \"</span>+e),n.changeType(r),i.codecs[t]=e)}},Pn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">action</span>:n,<span class=\"code-attr\">doneFn</span>:r,<span class=\"code-attr\">name</span>:a}),vn(t,i)},Cn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(t.queuePending[e]){<span class=\"code-keyword\">var</span> n=t.queuePending[e].doneFn;t.queuePending[e]=<span class=\"code-literal\">null</span>,n&amp;&amp;n(t[e+<span class=\"code-string\">\"Error_\"</span>])}vn(e,t)}},Un=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).mediaSource=t,i.sourceopenListener_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> vn(<span class=\"code-string\">\"mediaSource\"</span>,d(i))},i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,i.sourceopenListener_),i.logger_=ji(<span class=\"code-string\">\"SourceUpdater\"</span>),i.audioTimestampOffset_=<span class=\"code-number\">0</span>,i.videoTimestampOffset_=<span class=\"code-number\">0</span>,i.queue=[],i.queuePending={<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!<span class=\"code-number\">1</span>,i.codecs={},i.onVideoUpdateEnd_=Cn(<span class=\"code-string\">\"video\"</span>,d(i)),i.onAudioUpdateEnd_=Cn(<span class=\"code-string\">\"audio\"</span>,d(i)),i.onVideoError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.videoError_=e},i.onAudioError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.audioError_=e},i.createdSourceBuffers_=!<span class=\"code-number\">1</span>,i.initializedEme_=!<span class=\"code-number\">1</span>,i.triggeredReady_=!<span class=\"code-number\">1</span>,i}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.initializedEme=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.initializedEme_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.triggerReady()},i.hasCreatedSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.createdSourceBuffers_},i.hasInitializedAnyEme=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.initializedEme_},i.ready=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.hasCreatedSourceBuffers()&amp;&amp;<span class=\"code-keyword\">this</span>.hasInitializedAnyEme()},i.createSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.hasCreatedSourceBuffers()||(<span class=\"code-keyword\">this</span>.addOrChangeSourceBuffers(e),<span class=\"code-keyword\">this</span>.createdSourceBuffers_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"createdsourcebuffers\"</span>),<span class=\"code-keyword\">this</span>.triggerReady())},i.triggerReady=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ready()&amp;&amp;!<span class=\"code-keyword\">this</span>.triggeredReady_&amp;&amp;(<span class=\"code-keyword\">this</span>.triggeredReady_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"ready\"</span>))},i.addSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:kn(e,t),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"addSourceBuffer\"</span>})},i.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Pn({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===t.mediaSource.readyState){<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(bn(t.mediaSource,i)){t.logger_(<span class=\"code-string\">\"calling abort on \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>);<span class=\"code-keyword\">try</span>{i.abort()}<span class=\"code-keyword\">catch</span>(t){u.default.log.warn(<span class=\"code-string\">\"Failed to abort on \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>,t)}}}},<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"abort\"</span>})},i.removeSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.canRemoveSourceBuffer()?Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:An(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"removeSourceBuffer\"</span>}):u.default.log.error(<span class=\"code-string\">\"removeSourceBuffer is not supported!\"</span>)},i.canRemoveSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!u.default.browser.IE_VERSION&amp;&amp;!u.default.browser.IS_FIREFOX&amp;&amp;o.default.MediaSource&amp;&amp;o.default.MediaSource.prototype&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> o.default.MediaSource.prototype.removeSourceBuffer},t.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> o.default.SourceBuffer&amp;&amp;o.default.SourceBuffer.prototype&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> o.default.SourceBuffer.prototype.changeType},i.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.constructor.canChangeType()},i.changeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.canChangeType()?Pn({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:En(t),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"changeType\"</span>}):u.default.log.error(<span class=\"code-string\">\"changeType is not supported!\"</span>)},i.addOrChangeSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e||<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-number\">0</span>===<span class=\"code-built_in\">Object</span>.keys(e).length)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot addOrChangeSourceBuffers to undefined codecs\"</span>);<span class=\"code-built_in\">Object</span>.keys(e).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-keyword\">if</span>(!t.hasCreatedSourceBuffers())<span class=\"code-keyword\">return</span> t.addSourceBuffer(i,n);t.canChangeType()&amp;&amp;t.changeType(i,n)}))},i.appendBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.processedAppend_=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;!<span class=\"code-keyword\">this</span>.videoAppendQueued_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.push([e,t]),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"delayed audio append of \"</span>+a.length+<span class=\"code-string\">\" until video append\"</span>);<span class=\"code-keyword\">if</span>(Pn({<span class=\"code-attr\">type</span>:r,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:Tn(a,n||{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">-1</span>}),<span class=\"code-attr\">doneFn</span>:t,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"appendBuffer\"</span>}),<span class=\"code-string\">\"video\"</span>===r){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoAppendQueued_=!<span class=\"code-number\">0</span>,!<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.slice();<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"queuing delayed audio \"</span>+s.length+<span class=\"code-string\">\" appendBuffers\"</span>),<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length=<span class=\"code-number\">0</span>,s.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.appendBuffer.apply(i,e)}))}},i.audioBuffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> bn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.audioBuffer)&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer.buffered?<span class=\"code-keyword\">this</span>.audioBuffer.buffered:u.default.createTimeRange()},i.videoBuffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> bn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.videoBuffer)&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer.buffered?<span class=\"code-keyword\">this</span>.videoBuffer.buffered:u.default.createTimeRange()},i.buffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=bn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.videoBuffer)?<span class=\"code-keyword\">this</span>.videoBuffer:<span class=\"code-literal\">null</span>,t=bn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.audioBuffer)?<span class=\"code-keyword\">this</span>.audioBuffer:<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> t&amp;&amp;!e?<span class=\"code-keyword\">this</span>.audioBuffered():e&amp;&amp;!t?<span class=\"code-keyword\">this</span>.videoBuffered():<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r=<span class=\"code-number\">0</span>,a=[],s=[];<span class=\"code-keyword\">if</span>(!(e&amp;&amp;e.length&amp;&amp;t&amp;&amp;t.length))<span class=\"code-keyword\">return</span> u.default.createTimeRange();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=e.length;o--;)a.push({<span class=\"code-attr\">time</span>:e.start(o),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),a.push({<span class=\"code-attr\">time</span>:e.end(o),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(o=t.length;o--;)a.push({<span class=\"code-attr\">time</span>:t.start(o),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),a.push({<span class=\"code-attr\">time</span>:t.end(o),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(a.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.time-t.time})),o=<span class=\"code-number\">0</span>;o&lt;a.length;o++)<span class=\"code-string\">\"start\"</span>===a[o].type?<span class=\"code-number\">2</span>==++r&amp;&amp;(i=a[o].time):<span class=\"code-string\">\"end\"</span>===a[o].type&amp;&amp;<span class=\"code-number\">1</span>==--r&amp;&amp;(n=a[o].time),<span class=\"code-literal\">null</span>!==i&amp;&amp;<span class=\"code-literal\">null</span>!==n&amp;&amp;(s.push([i,n]),i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">return</span> u.default.createTimeRanges(s)}(<span class=\"code-keyword\">this</span>.audioBuffered(),<span class=\"code-keyword\">this</span>.videoBuffered())},i.setDuration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=fn),Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:(i=e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.logger_(<span class=\"code-string\">\"Setting mediaSource duration to \"</span>+i);<span class=\"code-keyword\">try</span>{e.mediaSource.duration=i}<span class=\"code-keyword\">catch</span>(e){u.default.log.warn(<span class=\"code-string\">\"Failed to set media source duration\"</span>,e)}}),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"duration\"</span>,<span class=\"code-attr\">doneFn</span>:t})},i.endOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=fn),<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;(e=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>),Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:Ln(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"endOfStream\"</span>,<span class=\"code-attr\">doneFn</span>:t})},i.removeAudio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=fn),<span class=\"code-keyword\">this</span>.audioBuffered().length&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.audioBuffered().end(<span class=\"code-number\">0</span>)?Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:Sn(e,t),<span class=\"code-attr\">doneFn</span>:i,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"remove\"</span>}):i()},i.removeVideo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=fn),<span class=\"code-keyword\">this</span>.videoBuffered().length&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.videoBuffered().end(<span class=\"code-number\">0</span>)?Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:Sn(e,t),<span class=\"code-attr\">doneFn</span>:i,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"remove\"</span>}):i()},i.updating=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!(!yn(<span class=\"code-string\">\"audio\"</span>,<span class=\"code-keyword\">this</span>)&amp;&amp;!yn(<span class=\"code-string\">\"video\"</span>,<span class=\"code-keyword\">this</span>))},i.audioTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer&amp;&amp;<span class=\"code-keyword\">this</span>.audioTimestampOffset_!==e&amp;&amp;(Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:In(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"timestampOffset\"</span>}),<span class=\"code-keyword\">this</span>.audioTimestampOffset_=e),<span class=\"code-keyword\">this</span>.audioTimestampOffset_},i.videoTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;<span class=\"code-keyword\">this</span>.videoTimestampOffset!==e&amp;&amp;(Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:In(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"timestampOffset\"</span>}),<span class=\"code-keyword\">this</span>.videoTimestampOffset_=e),<span class=\"code-keyword\">this</span>.videoTimestampOffset_},i.audioQueueCallback=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.audioBuffer&amp;&amp;Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:wn(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"callback\"</span>})},i.videoQueueCallback=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;Pn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:wn(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"callback\"</span>})},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),gn.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+<span class=\"code-string\">\"QueueCallback\"</span>]((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> _n(t,e)}))})),<span class=\"code-keyword\">this</span>.videoAppendQueued_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.sourceopenListener_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.sourceopenListener_),<span class=\"code-keyword\">this</span>.off()},t}(u.default.EventTarget),On=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(<span class=\"code-built_in\">escape</span>(<span class=\"code-built_in\">String</span>.fromCharCode.apply(<span class=\"code-literal\">null</span>,e)))},Dn=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-string\">\"\\n\\n\"</span>.split(<span class=\"code-string\">\"\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.charCodeAt(<span class=\"code-number\">0</span>)}))),xn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={}),(n=e.call(<span class=\"code-keyword\">this</span>,t,i)||<span class=\"code-keyword\">this</span>).handlePartialData_=!<span class=\"code-number\">1</span>,n.mediaSource_=<span class=\"code-literal\">null</span>,n.subtitlesTrack_=<span class=\"code-literal\">null</span>,n.loaderType_=<span class=\"code-string\">\"subtitle\"</span>,n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!<span class=\"code-number\">1</span>,n}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.createTransmuxer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},i.buffered_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.subtitlesTrack_||!<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues.length)<span class=\"code-keyword\">return</span> u.default.createTimeRanges();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues,t=e[<span class=\"code-number\">0</span>].startTime,i=e[e.length<span class=\"code-number\">-1</span>].startTime;<span class=\"code-keyword\">return</span> u.default.createTimeRanges([[t,i]])},i.initSegmentForMap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=ce(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class=\"code-keyword\">var</span> r=Dn.byteLength+e.bytes.byteLength,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r);a.set(e.bytes),a.set(Dn,e.bytes.byteLength),<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:a}}<span class=\"code-keyword\">return</span> n||e},i.couldBeginLoading_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()},i.init_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()},i.track=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e||(<span class=\"code-keyword\">this</span>.subtitlesTrack_=e,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_()&amp;&amp;<span class=\"code-keyword\">this</span>.init_()),<span class=\"code-keyword\">this</span>.subtitlesTrack_},i.remove=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{an(e,t,<span class=\"code-keyword\">this</span>.subtitlesTrack_)},i.fillBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.syncPoint_||(<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-keyword\">this</span>.syncController_.getSyncPoint(<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-keyword\">this</span>.currentTime_()));<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.checkBuffer_(<span class=\"code-keyword\">this</span>.buffered_(),<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.mediaIndex,<span class=\"code-keyword\">this</span>.hasPlayed_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.syncPoint_);<span class=\"code-keyword\">if</span>(t=<span class=\"code-keyword\">this</span>.skipEmptySegments_(t)){<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.syncController_.timestampOffsetForTimeline(t.timeline))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.syncController_.one(<span class=\"code-string\">\"timestampoffset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.state=<span class=\"code-string\">\"READY\"</span>,e.paused()||e.monitorBuffer_()})),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_TIMELINE\"</span>);<span class=\"code-keyword\">this</span>.loadSegment_(t)}},i.skipEmptySegments_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(;e&amp;&amp;e.segment.empty;)e=<span class=\"code-keyword\">this</span>.generateSegmentInfo_(e.playlist,e.mediaIndex+<span class=\"code-number\">1</span>,e.startOfSegment+e.duration,e.isSyncRequest);<span class=\"code-keyword\">return</span> e},i.stopForError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.error(e),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)},i.segmentRequestFinished_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.subtitlesTrack_){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.saveTransferStats_(t.stats),!<span class=\"code-keyword\">this</span>.pendingSegment_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> e.code===yi&amp;&amp;<span class=\"code-keyword\">this</span>.handleTimeout_(),e.code===vi?<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>:<span class=\"code-keyword\">this</span>.mediaRequestsErrored+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.stopForError(e);<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.saveBandwidthRelatedStats_(r.duration,t.stats),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appending\"</span>);<span class=\"code-keyword\">var</span> a=r.segment;<span class=\"code-keyword\">if</span>(a.map&amp;&amp;(a.map.bytes=t.map.bytes),r.bytes=t.bytes,<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> o.default.WebVTT&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_){<span class=\"code-keyword\">var</span> s,u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjsloaded\"</span>,s),n.stopForError({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Error loading vtt.js\"</span>})};<span class=\"code-keyword\">return</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjserror\"</span>,u),n.segmentRequestFinished_(e,t,i)},<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_VTTJS\"</span>,<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjsloaded\"</span>,s),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjserror\"</span>,u)}a.requested=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.parseVTTCues_(r)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.stopForError({<span class=\"code-attr\">message</span>:e.message})}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateTimeMapping_(r,<span class=\"code-keyword\">this</span>.syncController_.timelines[r.timeline],<span class=\"code-keyword\">this</span>.playlist_),r.cues.length?r.timingInfo={<span class=\"code-attr\">start</span>:r.cues[<span class=\"code-number\">0</span>].startTime,<span class=\"code-attr\">end</span>:r.cues[r.cues.length<span class=\"code-number\">-1</span>].endTime}:r.timingInfo={<span class=\"code-attr\">start</span>:r.startOfSegment,<span class=\"code-attr\">end</span>:r.startOfSegment+r.duration},r.isSyncRequest)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>);r.byteLength=r.bytes.byteLength,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=a.duration,r.cues.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?<span class=\"code-keyword\">new</span> o.default.VTTCue(e.startTime,e.endTime,e.text):e)})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.cues;<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;a&lt;t.length;a++)t[i].startTime===t[a].startTime&amp;&amp;t[i].endTime===t[a].endTime&amp;&amp;t[i].text===t[a].text&amp;&amp;++r&gt;<span class=\"code-number\">1</span>&amp;&amp;n.push(t[a]);n.length&amp;&amp;n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e.removeCue(t)}))}}(<span class=\"code-keyword\">this</span>.subtitlesTrack_),<span class=\"code-keyword\">this</span>.handleAppendsDone_()}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>},i.handleData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},i.updateTimingInfoEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},i.parseVTTCues_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=!<span class=\"code-number\">1</span>;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> o.default.TextDecoder?t=<span class=\"code-keyword\">new</span> o.default.TextDecoder(<span class=\"code-string\">\"utf8\"</span>):(t=o.default.WebVTT.StringDecoder(),i=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> o.default.WebVTT.Parser(o.default,o.default.vttjs,t);<span class=\"code-keyword\">if</span>(e.cues=[],e.timestampmap={<span class=\"code-attr\">MPEGTS</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">LOCAL</span>:<span class=\"code-number\">0</span>},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.timestampmap=t},n.onparsingerror=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{u.default.log.warn(<span class=\"code-string\">\"Error encountered when parsing cues: \"</span>+e.message)},e.segment.map){<span class=\"code-keyword\">var</span> r=e.segment.map.bytes;i&amp;&amp;(r=On(r)),n.parse(r)}<span class=\"code-keyword\">var</span> a=e.bytes;i&amp;&amp;(a=On(a)),n.parse(a),n.flush()},i.updateTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.segment;<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(e.cues.length){<span class=\"code-keyword\">var</span> r=e.timestampmap,a=r.MPEGTS/Jt-r.LOCAL+t.mapping;<span class=\"code-keyword\">if</span>(e.cues.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime+=a,e.endTime+=a})),!i.syncInfo){<span class=\"code-keyword\">var</span> s=e.cues[<span class=\"code-number\">0</span>].startTime,o=e.cues[e.cues.length<span class=\"code-number\">-1</span>].startTime;i.syncInfo={<span class=\"code-attr\">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class=\"code-attr\">time</span>:<span class=\"code-built_in\">Math</span>.min(s,o-n.duration)}}}<span class=\"code-keyword\">else</span> n.empty=!<span class=\"code-number\">0</span>},t}(cn),Rn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.cues,n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class=\"code-keyword\">return</span> r}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},Mn=[{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"VOD\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">return</span> i!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?{<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>}:<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"ProgramDateTime\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(!e.datetimeToDisplayTime)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> a=t.segments||[],s=<span class=\"code-literal\">null</span>,o=<span class=\"code-literal\">null</span>;r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;a.length;u++){<span class=\"code-keyword\">var</span> d=a[u];<span class=\"code-keyword\">if</span>(d.dateTimeObject){<span class=\"code-keyword\">var</span> l=d.dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>+e.datetimeToDisplayTime,h=<span class=\"code-built_in\">Math</span>.abs(r-l);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==o&amp;&amp;(<span class=\"code-number\">0</span>===h||o&lt;h))<span class=\"code-keyword\">break</span>;o=h,s={<span class=\"code-attr\">time</span>:l,<span class=\"code-attr\">segmentIndex</span>:u}}}<span class=\"code-keyword\">return</span> s}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Segment\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=t.segments||[],s=<span class=\"code-literal\">null</span>,o=<span class=\"code-literal\">null</span>;r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;a.length;u++){<span class=\"code-keyword\">var</span> d=a[u];<span class=\"code-keyword\">if</span>(d.timeline===n&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d.start){<span class=\"code-keyword\">var</span> l=<span class=\"code-built_in\">Math</span>.abs(r-d.start);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==o&amp;&amp;o&lt;l)<span class=\"code-keyword\">break</span>;(!s||<span class=\"code-literal\">null</span>===o||o&gt;=l)&amp;&amp;(o=l,s={<span class=\"code-attr\">time</span>:d.start,<span class=\"code-attr\">segmentIndex</span>:u})}}<span class=\"code-keyword\">return</span> s}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Discontinuity\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(r=r||<span class=\"code-number\">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>,o=<span class=\"code-number\">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class=\"code-keyword\">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class=\"code-number\">1</span>,l=e.discontinuities[d];<span class=\"code-keyword\">if</span>(l){<span class=\"code-keyword\">var</span> h=<span class=\"code-built_in\">Math</span>.abs(r-l.time);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==s&amp;&amp;s&lt;h)<span class=\"code-keyword\">break</span>;(!a||<span class=\"code-literal\">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class=\"code-attr\">time</span>:l.time,<span class=\"code-attr\">segmentIndex</span>:u})}}<span class=\"code-keyword\">return</span> a}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Playlist\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">return</span> t.syncInfo?{<span class=\"code-attr\">time</span>:t.syncInfo.time,<span class=\"code-attr\">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence}:<span class=\"code-literal\">null</span>}}],Bn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).timelines=[],i.discontinuities=[],i.datetimeToDisplayTime=<span class=\"code-literal\">null</span>,i.logger_=ji(<span class=\"code-string\">\"SyncController\"</span>),i}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.getSyncPoint=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,i,n);<span class=\"code-keyword\">return</span> r.length?<span class=\"code-keyword\">this</span>.selectSyncPoint_(r,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"time\"</span>,<span class=\"code-attr\">value</span>:n}):<span class=\"code-literal\">null</span>},i.getExpiredTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.selectSyncPoint_(i,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"segmentIndex\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> n.segmentIndex&gt;<span class=\"code-number\">0</span>&amp;&amp;(n.time*=<span class=\"code-number\">-1</span>),<span class=\"code-built_in\">Math</span>.abs(n.time+j(e,n.segmentIndex,<span class=\"code-number\">0</span>))},i.runStrategies_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=[],a=<span class=\"code-number\">0</span>;a&lt;Mn.length;a++){<span class=\"code-keyword\">var</span> s=Mn[a],o=s.run(<span class=\"code-keyword\">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class=\"code-attr\">strategy</span>:s.name,<span class=\"code-attr\">syncPoint</span>:o}))}<span class=\"code-keyword\">return</span> r},i.selectSyncPoint_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e[<span class=\"code-number\">0</span>].syncPoint,n=<span class=\"code-built_in\">Math</span>.abs(e[<span class=\"code-number\">0</span>].syncPoint[t.key]-t.value),r=e[<span class=\"code-number\">0</span>].strategy,a=<span class=\"code-number\">1</span>;a&lt;e.length;a++){<span class=\"code-keyword\">var</span> s=<span class=\"code-built_in\">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"syncPoint for [\"</span>+t.key+<span class=\"code-string\">\": \"</span>+t.value+<span class=\"code-string\">\"] chosen with strategy [\"</span>+r+<span class=\"code-string\">\"]: [time:\"</span>+i.time+<span class=\"code-string\">\", segmentIndex:\"</span>+i.segmentIndex+<span class=\"code-string\">\"]\"</span>),i},i.saveExpiredSegmentInfo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.mediaSequence-e.mediaSequence<span class=\"code-number\">-1</span>;i&gt;=<span class=\"code-number\">0</span>;i--){<span class=\"code-keyword\">var</span> n=e.segments[i];<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==n.start){t.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence+i,<span class=\"code-attr\">time</span>:n.start},<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist refresh sync: [time:\"</span>+t.syncInfo.time+<span class=\"code-string\">\", mediaSequence: \"</span>+t.syncInfo.mediaSequence+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">break</span>}}},i.setDateTimeMapping=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.datetimeToDisplayTime&amp;&amp;e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class=\"code-number\">0</span>].dateTimeObject){<span class=\"code-keyword\">var</span> t=e.segments[<span class=\"code-number\">0</span>].dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">this</span>.datetimeToDisplayTime=-t}},i.saveSegmentTimingInfo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segmentInfo,i=e.shouldSaveTimelineMapping;<span class=\"code-keyword\">this</span>.calculateSegmentTimeMapping_(t,t.timingInfo,i)&amp;&amp;(<span class=\"code-keyword\">this</span>.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={<span class=\"code-attr\">mediaSequence</span>:t.playlist.mediaSequence+t.mediaIndex,<span class=\"code-attr\">time</span>:t.segment.start}))},i.timestampOffsetForTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].time},i.mappingForTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].mapping},i.calculateSegmentTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.segment,r=<span class=\"code-keyword\">this</span>.timelines[e.timeline];<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==e.timestampOffset)r={<span class=\"code-attr\">time</span>:e.startOfSegment,<span class=\"code-attr\">mapping</span>:e.startOfSegment-t.start},i&amp;&amp;(<span class=\"code-keyword\">this</span>.timelines[e.timeline]=r,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"time mapping for timeline \"</span>+e.timeline+<span class=\"code-string\">\": [time: \"</span>+r.time+<span class=\"code-string\">\"] [mapping: \"</span>+r.mapping+<span class=\"code-string\">\"]\"</span>)),n.start=e.startOfSegment,n.end=t.end+r.mapping;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;n.start=t.start+r.mapping,n.end=t.end+r.mapping}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},i.saveDiscontinuitySyncInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.segment;<span class=\"code-keyword\">if</span>(i.discontinuity)<span class=\"code-keyword\">this</span>.discontinuities[i.timeline]={<span class=\"code-attr\">time</span>:i.start,<span class=\"code-attr\">accuracy</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class=\"code-keyword\">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class=\"code-number\">1</span>,s=r-e.mediaIndex,o=<span class=\"code-built_in\">Math</span>.abs(s);<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.discontinuities[a]||<span class=\"code-keyword\">this</span>.discontinuities[a].accuracy&gt;o){<span class=\"code-keyword\">var</span> u;u=s&lt;<span class=\"code-number\">0</span>?i.start-j(t,e.mediaIndex,r):i.end+j(t,e.mediaIndex+<span class=\"code-number\">1</span>,r),<span class=\"code-keyword\">this</span>.discontinuities[a]={<span class=\"code-attr\">time</span>:u,<span class=\"code-attr\">accuracy</span>:o}}}},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.off()},t}(u.default.EventTarget),Fn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.clearPendingTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[e]=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"pendingtimelinechange\"</span>)},i.pendingTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.from,n=e.to;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n&amp;&amp;(<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t]={<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">from</span>:i,<span class=\"code-attr\">to</span>:n},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"pendingtimelinechange\"</span>)),<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t]},i.lastTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.from,n=e.to;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n&amp;&amp;(<span class=\"code-keyword\">this</span>.lastTimelineChanges_[t]={<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">from</span>:i,<span class=\"code-attr\">to</span>:n},<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelinechange\"</span>)),<span class=\"code-keyword\">this</span>.lastTimelineChanges_[t]},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.pendingTimelineChanges_={},<span class=\"code-keyword\">this</span>.lastTimelineChanges_={},<span class=\"code-keyword\">this</span>.off()},t}(u.default.EventTarget),Nn=<span class=\"code-keyword\">new</span> Pi(<span class=\"code-string\">\"./decrypter-worker.worker.js\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;\n","<span class=\"code-comment\">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e]=<span class=\"code-keyword\">this</span>.listeners[e].slice(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},t.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},e}(),n=<span class=\"code-literal\">null</span>,r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,r;n||(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],d=u[<span class=\"code-number\">0</span>],l=u[<span class=\"code-number\">1</span>],h=d[<span class=\"code-number\">4</span>],c=l[<span class=\"code-number\">4</span>],f=[],m=[];<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">256</span>;e++)m[(f[e]=e&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(e&gt;&gt;<span class=\"code-number\">7</span>))^e]=e;<span class=\"code-keyword\">for</span>(t=i=<span class=\"code-number\">0</span>;!h[t];t^=n||<span class=\"code-number\">1</span>,i=m[i]||<span class=\"code-number\">1</span>)<span class=\"code-keyword\">for</span>(a=(a=i^i&lt;&lt;<span class=\"code-number\">1</span>^i&lt;&lt;<span class=\"code-number\">2</span>^i&lt;&lt;<span class=\"code-number\">3</span>^i&lt;&lt;<span class=\"code-number\">4</span>)&gt;&gt;<span class=\"code-number\">8</span>^<span class=\"code-number\">255</span>&amp;a^<span class=\"code-number\">99</span>,h[t]=a,c[a]=t,o=<span class=\"code-number\">16843009</span>*f[r=f[n=f[t]]]^<span class=\"code-number\">65537</span>*r^<span class=\"code-number\">257</span>*n^<span class=\"code-number\">16843008</span>*t,s=<span class=\"code-number\">257</span>*f[a]^<span class=\"code-number\">16843008</span>*a,e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">4</span>;e++)d[e][t]=s=s&lt;&lt;<span class=\"code-number\">24</span>^s&gt;&gt;&gt;<span class=\"code-number\">8</span>,l[e][a]=o=o&lt;&lt;<span class=\"code-number\">24</span>^o&gt;&gt;&gt;<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">5</span>;e++)d[e]=d[e].slice(<span class=\"code-number\">0</span>),l[e]=l[e].slice(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> u}()),<span class=\"code-keyword\">this</span>._tables=[[n[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].slice(),n[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>].slice(),n[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>].slice(),n[<span class=\"code-number\">0</span>][<span class=\"code-number\">3</span>].slice(),n[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>].slice()],[n[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>].slice(),n[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>].slice(),n[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>].slice(),n[<span class=\"code-number\">1</span>][<span class=\"code-number\">3</span>].slice(),n[<span class=\"code-number\">1</span>][<span class=\"code-number\">4</span>].slice()]];<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>],s=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],o=e.length,u=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>!==o&amp;&amp;<span class=\"code-number\">6</span>!==o&amp;&amp;<span class=\"code-number\">8</span>!==o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Invalid aes key size\"</span>);<span class=\"code-keyword\">var</span> d=e.slice(<span class=\"code-number\">0</span>),l=[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>._key=[d,l],t=o;t&lt;<span class=\"code-number\">4</span>*o+<span class=\"code-number\">28</span>;t++)r=d[t<span class=\"code-number\">-1</span>],(t%o==<span class=\"code-number\">0</span>||<span class=\"code-number\">8</span>===o&amp;&amp;t%o==<span class=\"code-number\">4</span>)&amp;&amp;(r=a[r&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^a[r&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^a[r&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^a[<span class=\"code-number\">255</span>&amp;r],t%o==<span class=\"code-number\">0</span>&amp;&amp;(r=r&lt;&lt;<span class=\"code-number\">8</span>^r&gt;&gt;&gt;<span class=\"code-number\">24</span>^u&lt;&lt;<span class=\"code-number\">24</span>,u=u&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(u&gt;&gt;<span class=\"code-number\">7</span>))),d[t]=d[t-o]^r;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;t;i++,t--)r=d[<span class=\"code-number\">3</span>&amp;i?t:t<span class=\"code-number\">-4</span>],l[i]=t&lt;=<span class=\"code-number\">4</span>||i&lt;<span class=\"code-number\">4</span>?r:s[<span class=\"code-number\">0</span>][a[r&gt;&gt;&gt;<span class=\"code-number\">24</span>]]^s[<span class=\"code-number\">1</span>][a[r&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]]^s[<span class=\"code-number\">2</span>][a[r&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]]^s[<span class=\"code-number\">3</span>][a[<span class=\"code-number\">255</span>&amp;r]]}<span class=\"code-keyword\">return</span> e.prototype.decrypt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s,o,u,d,l=<span class=\"code-keyword\">this</span>._key[<span class=\"code-number\">1</span>],h=e^l[<span class=\"code-number\">0</span>],c=n^l[<span class=\"code-number\">1</span>],f=i^l[<span class=\"code-number\">2</span>],m=t^l[<span class=\"code-number\">3</span>],p=l.length/<span class=\"code-number\">4</span><span class=\"code-number\">-2</span>,g=<span class=\"code-number\">4</span>,y=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],v=y[<span class=\"code-number\">0</span>],_=y[<span class=\"code-number\">1</span>],b=y[<span class=\"code-number\">2</span>],T=y[<span class=\"code-number\">3</span>],S=y[<span class=\"code-number\">4</span>];<span class=\"code-keyword\">for</span>(d=<span class=\"code-number\">0</span>;d&lt;p;d++)s=v[h&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[c&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[f&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;m]^l[g],o=v[c&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[f&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[m&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;h]^l[g+<span class=\"code-number\">1</span>],u=v[f&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[m&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[h&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;c]^l[g+<span class=\"code-number\">2</span>],m=v[m&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[h&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^b[c&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^T[<span class=\"code-number\">255</span>&amp;f]^l[g+<span class=\"code-number\">3</span>],g+=<span class=\"code-number\">4</span>,h=s,c=o,f=u;<span class=\"code-keyword\">for</span>(d=<span class=\"code-number\">0</span>;d&lt;<span class=\"code-number\">4</span>;d++)r[(<span class=\"code-number\">3</span>&amp;-d)+a]=S[h&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^S[c&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^S[f&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^S[<span class=\"code-number\">255</span>&amp;m]^l[g++],s=h,h=c,c=f,f=m,m=s},e}(),a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">i</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=e.call(<span class=\"code-keyword\">this</span>,t)||<span class=\"code-keyword\">this</span>).jobs=[],i.delay=<span class=\"code-number\">1</span>,i.timeout_=<span class=\"code-literal\">null</span>,i}<span class=\"code-keyword\">var</span> n,r;r=e,(n=i).prototype=<span class=\"code-built_in\">Object</span>.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;<span class=\"code-keyword\">var</span> a=i.prototype;<span class=\"code-keyword\">return</span> a.processJob_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.jobs.shift()(),<span class=\"code-keyword\">this</span>.jobs.length?<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay):<span class=\"code-keyword\">this</span>.timeout_=<span class=\"code-literal\">null</span>},a.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.jobs.push(e),<span class=\"code-keyword\">this</span>.timeout_||(<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay))},i}(t),s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&lt;&lt;<span class=\"code-number\">24</span>|(<span class=\"code-number\">65280</span>&amp;e)&lt;&lt;<span class=\"code-number\">8</span>|(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>|e&gt;&gt;&gt;<span class=\"code-number\">24</span>},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">e,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> o=t.STEP,u=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(e.buffer),d=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.byteLength),l=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.asyncStream_=<span class=\"code-keyword\">new</span> a,<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(u.subarray(l,l+o),i,n,d)),l=o;l&lt;u.length;l+=o)n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([s(u[l<span class=\"code-number\">-4</span>]),s(u[l<span class=\"code-number\">-3</span>]),s(u[l<span class=\"code-number\">-2</span>]),s(u[l<span class=\"code-number\">-1</span>])]),<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(u.subarray(l,l+o),i,n,d));<span class=\"code-keyword\">this</span>.asyncStream_.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{\n","<span class=\"code-comment\">/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */</span>\n","<span class=\"code-keyword\">var</span> e;\n","<span class=\"code-comment\">/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */</span>r(<span class=\"code-literal\">null</span>,(e=d).subarray(<span class=\"code-number\">0</span>,e.byteLength-e[e.byteLength<span class=\"code-number\">-1</span>]))}))}<span class=\"code-keyword\">return</span> t.prototype.decryptChunk_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,a,o,u,d,l,h,c,f,m=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class=\"code-number\">2</span>),p=<span class=\"code-keyword\">new</span> r(<span class=\"code-built_in\">Array</span>.prototype.slice.call(t)),g=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.byteLength),y=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(g.buffer);<span class=\"code-keyword\">for</span>(n=i[<span class=\"code-number\">0</span>],a=i[<span class=\"code-number\">1</span>],o=i[<span class=\"code-number\">2</span>],u=i[<span class=\"code-number\">3</span>],f=<span class=\"code-number\">0</span>;f&lt;m.length;f+=<span class=\"code-number\">4</span>)d=s(m[f]),l=s(m[f+<span class=\"code-number\">1</span>]),h=s(m[f+<span class=\"code-number\">2</span>]),c=s(m[f+<span class=\"code-number\">3</span>]),p.decrypt(d,l,h,c,y,f),y[f]=s(y[f]^n),y[f+<span class=\"code-number\">1</span>]=s(y[f+<span class=\"code-number\">1</span>]^a),y[f+<span class=\"code-number\">2</span>]=s(y[f+<span class=\"code-number\">2</span>]^o),y[f+<span class=\"code-number\">3</span>]=s(y[f+<span class=\"code-number\">3</span>]^u),n=d,a=l,o=h,u=c;<span class=\"code-keyword\">return</span> g}(e,t,i);n.set(a,e.byteOffset)}},i=t,o=[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"STEP\"</span>,<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32e3</span>}}],(n=<span class=\"code-literal\">null</span>)&amp;&amp;e(i.prototype,n),o&amp;&amp;e(i,o),t;<span class=\"code-keyword\">var</span> i,n,o}();<span class=\"code-keyword\">new</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.data,n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.key.bytes,i.key.byteOffset,i.key.byteLength/<span class=\"code-number\">4</span>),a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/<span class=\"code-number\">4</span>);<span class=\"code-keyword\">new</span> o(n,r,a,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a;e.postMessage((r={<span class=\"code-attr\">source</span>:i.source,<span class=\"code-attr\">decrypted</span>:n},a={},<span class=\"code-built_in\">Object</span>.keys(r).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=r[e];<span class=\"code-built_in\">ArrayBuffer</span>.isView(t)?a[e]={<span class=\"code-attr\">bytes</span>:t.buffer,<span class=\"code-attr\">byteOffset</span>:t.byteOffset,<span class=\"code-attr\">byteLength</span>:t.byteLength}:a[e]=t})),a),[n.buffer])}))}}(i)}()})),qn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.default?<span class=\"code-string\">\"main\"</span>:<span class=\"code-string\">\"alternative\"</span>;<span class=\"code-keyword\">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class=\"code-string\">\"public.accessibility.describes-video\"</span>)&gt;=<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-string\">\"main-desc\"</span>),t},Wn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class=\"code-literal\">null</span>)},Vn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Hn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Wn(i,n);<span class=\"code-keyword\">var</span> a=n.activeTrack(),s=n.activeGroup(),o=(s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default}))[<span class=\"code-number\">0</span>]||s[<span class=\"code-number\">0</span>]).id,d=n.tracks[o];<span class=\"code-keyword\">if</span>(a!==d){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> l <span class=\"code-keyword\">in</span> u.default.log.warn(<span class=\"code-string\">\"Problem encountered loading the alternate audio track.Switching back to default.\"</span>),n.tracks)n.tracks[l].enabled=n.tracks[l]===d;n.onTrackChanged()}<span class=\"code-keyword\">else</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Problem encountered loading the default audio track.\"</span>})}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e];u.default.log.warn(<span class=\"code-string\">\"Problem encountered loading the subtitle track.Disabling subtitle track.\"</span>),Wn(i,n);<span class=\"code-keyword\">var</span> r=n.activeTrack();r&amp;&amp;(r.mode=<span class=\"code-string\">\"disabled\"</span>),n.onTrackChanged()}}},Gn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class=\"code-string\">\"error\"</span>,Hn[e](e,i))}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class=\"code-string\">\"error\"</span>,Hn[e](e,i))}},jn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.vhs,n=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master,o=s.mediaGroups,d=s.playlists,l=t.mediaTypes[e],h=l.groups,c=l.tracks,f=t.masterPlaylistLoader;o[e]&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-built_in\">Object</span>.keys(o[e]).length||(o[e]={<span class=\"code-attr\">main</span>:{<span class=\"code-attr\">default</span>:{<span class=\"code-attr\">default</span>:!<span class=\"code-number\">0</span>}}});<span class=\"code-keyword\">var</span> m=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">r</span>)</span>{h[r]||(h[r]=[]);<span class=\"code-keyword\">var</span> s=d.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> t.attributes[e]===r})),l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">d</span>)</span>{<span class=\"code-keyword\">var</span> l=o[e][r][d];!s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.resolvedUri!==l.resolvedUri})).length&amp;&amp;s.length&amp;&amp;<span class=\"code-keyword\">delete</span> l.resolvedUri;<span class=\"code-keyword\">var</span> m;<span class=\"code-keyword\">if</span>(m=<span class=\"code-string\">\"vhs-json\"</span>===n&amp;&amp;l.playlists?<span class=\"code-keyword\">new</span> x(l.playlists[<span class=\"code-number\">0</span>],i,a):l.resolvedUri?<span class=\"code-keyword\">new</span> x(l.resolvedUri,i,a):l.playlists&amp;&amp;<span class=\"code-string\">\"dash\"</span>===n?<span class=\"code-keyword\">new</span> Ct(l.playlists[<span class=\"code-number\">0</span>],i,a,f):<span class=\"code-literal\">null</span>,l=u.default.mergeOptions({<span class=\"code-attr\">id</span>:d,<span class=\"code-attr\">playlistLoader</span>:m},l),Gn[e](e,l.playlistLoader,t),h[r].push(l),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===c[d]){<span class=\"code-keyword\">var</span> p=<span class=\"code-keyword\">new</span> u.default.AudioTrack({<span class=\"code-attr\">id</span>:d,<span class=\"code-attr\">kind</span>:qn(l),<span class=\"code-attr\">enabled</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">language</span>:l.language,<span class=\"code-attr\">default</span>:l.default,<span class=\"code-attr\">label</span>:d});c[d]=p}};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> m <span class=\"code-keyword\">in</span> o[e][r])l(m)};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> p <span class=\"code-keyword\">in</span> o[e])m(p);r.on(<span class=\"code-string\">\"error\"</span>,Hn[e](e,t))},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.tech,n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,h=d.tracks,c=t.masterPlaylistLoader;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f <span class=\"code-keyword\">in</span> o[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> m <span class=\"code-keyword\">in</span> l[f]||(l[f]=[]),o[e][f])<span class=\"code-keyword\">if</span>(!o[e][f][m].forced){<span class=\"code-keyword\">var</span> p=o[e][f][m],g=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"hls\"</span>===r)g=<span class=\"code-keyword\">new</span> x(p.resolvedUri,n,s);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"dash\"</span>===r){<span class=\"code-keyword\">if</span>(!p.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})).length)<span class=\"code-keyword\">return</span>;g=<span class=\"code-keyword\">new</span> Ct(p.playlists[<span class=\"code-number\">0</span>],n,s,c)}<span class=\"code-keyword\">else</span><span class=\"code-string\">\"vhs-json\"</span>===r&amp;&amp;(g=<span class=\"code-keyword\">new</span> x(p.playlists?p.playlists[<span class=\"code-number\">0</span>]:p.resolvedUri,n,s));<span class=\"code-keyword\">if</span>(p=u.default.mergeOptions({<span class=\"code-attr\">id</span>:m,<span class=\"code-attr\">playlistLoader</span>:g},p),Gn[e](e,p.playlistLoader,t),l[f].push(p),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h[m]){<span class=\"code-keyword\">var</span> y=i.addRemoteTextTrack({<span class=\"code-attr\">id</span>:m,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"subtitles\"</span>,<span class=\"code-attr\">default</span>:p.default&amp;&amp;p.autoselect,<span class=\"code-attr\">language</span>:p.language,<span class=\"code-attr\">label</span>:m},!<span class=\"code-number\">1</span>).track;h[m]=y}}a.on(<span class=\"code-string\">\"error\"</span>,Hn[e](e,t))},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o <span class=\"code-keyword\">in</span> n[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d <span class=\"code-keyword\">in</span> a[o]||(a[o]=[]),n[e][o]){<span class=\"code-keyword\">var</span> l=n[e][o][d];<span class=\"code-keyword\">if</span>(l.instreamId.match(<span class=\"code-regexp\">/CC\\d/</span>)&amp;&amp;(a[o].push(u.default.mergeOptions({<span class=\"code-attr\">id</span>:d},l)),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s[d])){<span class=\"code-keyword\">var</span> h=i.addRemoteTextTrack({<span class=\"code-attr\">id</span>:l.instreamId,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">default</span>:l.default&amp;&amp;l.autoselect,<span class=\"code-attr\">language</span>:l.language,<span class=\"code-attr\">label</span>:d},!<span class=\"code-number\">1</span>).track;s[d]=h}}}},zn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(i[n].enabled)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"showing\"</span>===i[n].mode||<span class=\"code-string\">\"hidden\"</span>===i[n].mode)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}}},Xn=[<span class=\"code-string\">\"mediaRequests\"</span>,<span class=\"code-string\">\"mediaRequestsAborted\"</span>,<span class=\"code-string\">\"mediaRequestsTimedout\"</span>,<span class=\"code-string\">\"mediaRequestsErrored\"</span>,<span class=\"code-string\">\"mediaTransferDuration\"</span>,<span class=\"code-string\">\"mediaBytesTransferred\"</span>],Qn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.audioSegmentLoader_[e]+<span class=\"code-keyword\">this</span>.mainSegmentLoader_[e]},Yn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">var</span> n=t.src,r=t.handleManifestRedirects,a=t.withCredentials,s=t.tech,l=t.bandwidth,h=t.externVhs,c=t.useCueTags,f=t.blacklistDuration,m=t.enableLowInitialPlaylist,p=t.sourceType,g=t.cacheEncryptionKeys,y=t.handlePartialData,v=t.experimentalBufferBasedABR;<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or JSON manifest string is required\"</span>);mn=h,i.experimentalBufferBasedABR=<span class=\"code-built_in\">Boolean</span>(v),i.withCredentials=a,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=p,i.useCueTags_=c,i.blacklistDuration=f,i.enableLowInitialPlaylist=m,i.useCueTags_&amp;&amp;(i.cueTagsTrack_=i.tech_.addTextTrack(<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-string\">\"ad-cues\"</span>),i.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class=\"code-string\">\"\"</span>),i.requestOptions_={<span class=\"code-attr\">withCredentials</span>:a,<span class=\"code-attr\">handleManifestRedirects</span>:r,<span class=\"code-attr\">timeout</span>:<span class=\"code-literal\">null</span>},i.on(<span class=\"code-string\">\"error\"</span>,i.pauseLoading),i.mediaTypes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]={<span class=\"code-attr\">groups</span>:{},<span class=\"code-attr\">tracks</span>:{},<span class=\"code-attr\">activePlaylistLoader</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">activeGroup</span>:fn,<span class=\"code-attr\">activeTrack</span>:fn,<span class=\"code-attr\">onGroupChanged</span>:fn,<span class=\"code-attr\">onTrackChanged</span>:fn}})),e}(),i.mediaSource=<span class=\"code-keyword\">new</span> o.default.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(d(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(d(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(d(i)),i.mediaSource.addEventListener(<span class=\"code-string\">\"durationchange\"</span>,i.handleDurationChange_),i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,i.handleSourceOpen_),i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceended\"</span>,i.handleSourceEnded_),i.seekable_=u.default.createTimeRanges(),i.hasPlayed_=!<span class=\"code-number\">1</span>,i.syncController_=<span class=\"code-keyword\">new</span> Bn(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"segment-metadata\"</span>},!<span class=\"code-number\">1</span>).track,i.decrypter_=<span class=\"code-keyword\">new</span> Nn,i.sourceUpdater_=<span class=\"code-keyword\">new</span> Un(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=<span class=\"code-keyword\">new</span> Fn;<span class=\"code-keyword\">var</span> _={<span class=\"code-attr\">vhs</span>:i.vhs_,<span class=\"code-attr\">parse708captions</span>:t.parse708captions,<span class=\"code-attr\">mediaSource</span>:i.mediaSource,<span class=\"code-attr\">currentTime</span>:i.tech_.currentTime.bind(i.tech_),<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.seekable()},<span class=\"code-attr\">seeking</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.seeking()},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.duration()},<span class=\"code-attr\">hasPlayed</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.hasPlayed_},<span class=\"code-attr\">goalBufferLength</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.goalBufferLength()},<span class=\"code-attr\">bandwidth</span>:l,<span class=\"code-attr\">syncController</span>:i.syncController_,<span class=\"code-attr\">decrypter</span>:i.decrypter_,<span class=\"code-attr\">sourceType</span>:i.sourceType_,<span class=\"code-attr\">inbandTextTracks</span>:i.inbandTextTracks_,<span class=\"code-attr\">cacheEncryptionKeys</span>:g,<span class=\"code-attr\">handlePartialData</span>:y,<span class=\"code-attr\">sourceUpdater</span>:i.sourceUpdater_,<span class=\"code-attr\">timelineChangeController</span>:i.timelineChangeController_};<span class=\"code-keyword\">return</span> i.masterPlaylistLoader_=<span class=\"code-string\">\"dash\"</span>===i.sourceType_?<span class=\"code-keyword\">new</span> Ct(n,i.vhs_,i.requestOptions_):<span class=\"code-keyword\">new</span> x(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=<span class=\"code-keyword\">new</span> cn(u.default.mergeOptions(_,{<span class=\"code-attr\">segmentMetadataTrack</span>:i.segmentMetadataTrack_,<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"main\"</span>}),t),i.audioSegmentLoader_=<span class=\"code-keyword\">new</span> cn(u.default.mergeOptions(_,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"audio\"</span>}),t),i.subtitleSegmentLoader_=<span class=\"code-keyword\">new</span> xn(u.default.mergeOptions(_,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"vtt\"</span>,<span class=\"code-attr\">featuresNativeTextTracks</span>:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&amp;&amp;(i.masterPlaylistLoader_.one(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.startABRTimer_()})),i.tech_.on(<span class=\"code-string\">\"pause\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.stopABRTimer_()})),i.tech_.on(<span class=\"code-string\">\"play\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.startABRTimer_()}))),Xn.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i[e+<span class=\"code-string\">\"_\"</span>]=Qn.bind(d(i),e)})),i.logger_=ji(<span class=\"code-string\">\"MPC\"</span>),i.triggeredFmp4Usage=!<span class=\"code-number\">1</span>,i.masterPlaylistLoader_.load(),i}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.checkABR_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.selectPlaylist();<span class=\"code-keyword\">this</span>.shouldSwitchToMedia_(e)&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e)},i.startABRTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.abrTimer_=o.default.setInterval((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.checkABR_()}),<span class=\"code-number\">250</span>)},i.stopABRTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.scrubbing&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.scrubbing()||(o.default.clearInterval(<span class=\"code-keyword\">this</span>.abrTimer_),<span class=\"code-keyword\">this</span>.abrTimer_=<span class=\"code-literal\">null</span>)},i.setupMasterPlaylistLoaderListeners_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media(),i=<span class=\"code-number\">1.5</span>*t.targetDuration*<span class=\"code-number\">1e3</span>;J(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=i,t.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{jn[t](t,e)}));<span class=\"code-keyword\">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs;[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t[i].activeGroup=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]),s=s||r.main,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?s:<span class=\"code-literal\">null</span>===i?<span class=\"code-literal\">null</span>:s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.id===i.id}))[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>}}(i,e),t[i].activeTrack=zn[i](i,e),t[i].onGroupChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;Wn(n,a),o&amp;&amp;(o.playlistLoader?(n.resyncLoader(),Vn(o.playlistLoader,a)):u&amp;&amp;r.resetEverything())}}(i,e),t[i].onGroupChanging=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e];i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;<span class=\"code-keyword\">if</span>(Wn(n,a),o){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"AUDIO\"</span>===e){<span class=\"code-keyword\">if</span>(!o.playlistLoader)<span class=\"code-keyword\">return</span> r.setAudio(!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> r.resetEverything();n.setAudio(!<span class=\"code-number\">0</span>),r.setAudio(!<span class=\"code-number\">1</span>)}u!==o.playlistLoader?(n.track&amp;&amp;n.track(s),n.resetEverything(),Vn(o.playlistLoader,a)):Vn(o.playlistLoader,a)}}}(i,e)}));<span class=\"code-keyword\">var</span> a=t.AUDIO.activeGroup();<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">var</span> s=(a.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default}))[<span class=\"code-number\">0</span>]||a[<span class=\"code-number\">0</span>]).id;t.AUDIO.tracks[s].enabled=!<span class=\"code-number\">0</span>,t.AUDIO.onTrackChanged()}i.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e].onGroupChanged()}))})),i.on(<span class=\"code-string\">\"mediachanging\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e].onGroupChanging()}))}));<span class=\"code-keyword\">var</span> o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-audio-change\"</span>}),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-audio-change\"</span>})};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> n.audioTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,o),n.remoteTextTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class=\"code-string\">\"dispose\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.audioTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,o),n.remoteTextTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged)})),n.clearTracks(<span class=\"code-string\">\"audio\"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])}({<span class=\"code-attr\">sourceType</span>:e.sourceType_,<span class=\"code-attr\">segmentLoaders</span>:{<span class=\"code-attr\">AUDIO</span>:e.audioSegmentLoader_,<span class=\"code-attr\">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class=\"code-attr\">main</span>:e.mainSegmentLoader_},<span class=\"code-attr\">tech</span>:e.tech_,<span class=\"code-attr\">requestOptions</span>:e.requestOptions_,<span class=\"code-attr\">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class=\"code-attr\">vhs</span>:e.vhs_,<span class=\"code-attr\">master</span>:e.master(),<span class=\"code-attr\">mediaTypes</span>:e.mediaTypes_,<span class=\"code-attr\">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>)}))})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!t){<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(e.initialMedia_=i,e.masterPlaylistLoader_.media(e.initialMedia_),<span class=\"code-string\">\"vhs-json\"</span>!==e.sourceType_||!e.initialMedia_.segments)<span class=\"code-keyword\">return</span>;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachanging\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media(),i=<span class=\"code-number\">1.5</span>*t.targetDuration*<span class=\"code-number\">1e3</span>;J(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-attr\">bubbles</span>:!<span class=\"code-number\">0</span>})})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"playlistunchanged\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Playlist no longer updating.\"</span>}),e.tech_.trigger(<span class=\"code-string\">\"playliststuck\"</span>))})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditiondisabled\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-disabled\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-disabled\"</span>})})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditionenabled\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-enabled\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-enabled\"</span>})}))},i.handleUpdatedMediaPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.useCueTags_&amp;&amp;<span class=\"code-keyword\">this</span>.updateAdCues_(e),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.playlist(e,<span class=\"code-keyword\">this</span>.requestOptions_),<span class=\"code-keyword\">this</span>.updateDuration(!e.endList),<span class=\"code-keyword\">this</span>.tech_.paused()||(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.audioSegmentLoader_&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.load())},i.triggerPresenceUsage_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaGroups||{},n=!<span class=\"code-number\">0</span>,r=<span class=\"code-built_in\">Object</span>.keys(i.AUDIO);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> i.AUDIO)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s <span class=\"code-keyword\">in</span> i.AUDIO[a])i.AUDIO[a][s].uri||(n=!<span class=\"code-number\">1</span>);n&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-demuxed\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-demuxed\"</span>})),<span class=\"code-built_in\">Object</span>.keys(i.SUBTITLES).length&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-webvtt\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-webvtt\"</span>})),mn.Playlist.isAes(t)&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-aes\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-aes\"</span>})),r.length&amp;&amp;<span class=\"code-built_in\">Object</span>.keys(i.AUDIO[r[<span class=\"code-number\">0</span>]]).length&gt;<span class=\"code-number\">1</span>&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-alternate-audio\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-alternate-audio\"</span>})),<span class=\"code-keyword\">this</span>.useCueTags_&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-playlist-cue-tags\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-playlist-cue-tags\"</span>}))},i.shouldSwitchToMedia_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(),i=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,o=e.experimentalBufferBasedABR,d=e.log;<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"We received no playlist to switch to. Please check your stream.\"</span>),!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> l=<span class=\"code-string\">\"allowing switch \"</span>+(t&amp;&amp;t.id||<span class=\"code-string\">\"null\"</span>)+<span class=\"code-string\">\" -&gt; \"</span>+i.id;<span class=\"code-keyword\">if</span>(!t||!t.endList)<span class=\"code-keyword\">return</span> d(l+<span class=\"code-string\">\" as current playlist \"</span>+(t?<span class=\"code-string\">\"is live\"</span>:<span class=\"code-string\">\"is not set\"</span>)),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(i.id===t.id)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> h=o?Ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ut.MAX_BUFFER_LOW_WATER_LINE;<span class=\"code-keyword\">if</span>(s&lt;h)<span class=\"code-keyword\">return</span> d(l+<span class=\"code-string\">\" as duration &lt; max low water line (\"</span>+s+<span class=\"code-string\">\" &lt; \"</span>+h+<span class=\"code-string\">\")\"</span>),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> c=i.attributes.BANDWIDTH,f=t.attributes.BANDWIDTH;<span class=\"code-keyword\">if</span>(c&lt;f&amp;&amp;(!o||n&lt;a)){<span class=\"code-keyword\">var</span> m=l+<span class=\"code-string\">\" as next bandwidth &lt; current bandwidth (\"</span>+c+<span class=\"code-string\">\" &lt; \"</span>+f+<span class=\"code-string\">\")\"</span>;<span class=\"code-keyword\">return</span> o&amp;&amp;(m+=<span class=\"code-string\">\" and forwardBuffer &lt; bufferHighWaterLine (\"</span>+n+<span class=\"code-string\">\" &lt; \"</span>+a+<span class=\"code-string\">\")\"</span>),d(m),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">if</span>((!o||c&gt;f)&amp;&amp;n&gt;=r){<span class=\"code-keyword\">var</span> p=l+<span class=\"code-string\">\" as forwardBuffer &gt;= bufferLowWaterLine (\"</span>+n+<span class=\"code-string\">\" &gt;= \"</span>+r+<span class=\"code-string\">\")\"</span>;<span class=\"code-keyword\">return</span> o&amp;&amp;(p+=<span class=\"code-string\">\" and next bandwidth &gt; current bandwidth (\"</span>+c+<span class=\"code-string\">\" &gt; \"</span>+f+<span class=\"code-string\">\")\"</span>),d(p),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> d(<span class=\"code-string\">\"not \"</span>+l+<span class=\"code-string\">\" as no switching criteria met\"</span>),!<span class=\"code-number\">1</span>}({<span class=\"code-attr\">currentPlaylist</span>:t,<span class=\"code-attr\">nextPlaylist</span>:e,<span class=\"code-attr\">forwardBuffer</span>:i.length?i.end(i.length<span class=\"code-number\">-1</span>)-<span class=\"code-keyword\">this</span>.tech_.currentTime():<span class=\"code-number\">0</span>,<span class=\"code-attr\">bufferLowWaterLine</span>:<span class=\"code-keyword\">this</span>.bufferLowWaterLine(),<span class=\"code-attr\">bufferHighWaterLine</span>:<span class=\"code-keyword\">this</span>.bufferHighWaterLine(),<span class=\"code-attr\">duration</span>:<span class=\"code-keyword\">this</span>.duration(),<span class=\"code-attr\">experimentalBufferBasedABR</span>:<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR,<span class=\"code-attr\">log</span>:<span class=\"code-keyword\">this</span>.logger_})},i.setupSegmentLoaderListeners_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR||(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&amp;&amp;e.masterPlaylistLoader_.media(t),e.tech_.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"progress\"</span>)}))),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"appenderror\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.error=e.mainSegmentLoader_.error_,e.trigger(<span class=\"code-string\">\"error\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"timestampoffset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-timestamp-offset\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-timestamp-offset\"</span>})})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"appenderror\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.error=e.audioSegmentLoader_.error_,e.trigger(<span class=\"code-string\">\"error\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"main segment loader ended\"</span>),e.onEndOfStream()})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"earlyabort\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.experimentalBufferBasedABR||(e.delegateLoaders_(<span class=\"code-string\">\"all\"</span>,[<span class=\"code-string\">\"abort\"</span>]),e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Aborted early because there isn't enough bandwidth to complete the request without rebuffering.\"</span>},<span class=\"code-number\">120</span>))}));<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!e.sourceUpdater_.hasCreatedSourceBuffers())<span class=\"code-keyword\">return</span> e.tryToCreateSourceBuffers_();<span class=\"code-keyword\">var</span> t=e.getCodecsOrExclude_();t&amp;&amp;e.sourceUpdater_.addOrChangeSourceBuffers(t)};<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"trackinfo\"</span>,t),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"trackinfo\"</span>,t),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"fmp4\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-fmp4\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-fmp4\"</span>}),e.triggeredFmp4Usage=!<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"fmp4\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-fmp4\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-fmp4\"</span>}),e.triggeredFmp4Usage=!<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"audioSegmentLoader ended\"</span>),e.onEndOfStream()}))},i.mediaSecondsLoaded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class=\"code-keyword\">this</span>.mainSegmentLoader_.mediaSecondsLoaded)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mainSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.load()},i.smoothQualityChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.selectPlaylist()),e!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.selectPlaylist()),e!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{u.default.browser.IE_VERSION||u.default.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+<span class=\"code-number\">.04</span>):t.tech_.setCurrentTime(t.tech_.currentTime())})))},i.play=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.setupFirstPlay()){<span class=\"code-keyword\">this</span>.tech_.ended()&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.hasPlayed_&amp;&amp;<span class=\"code-keyword\">this</span>.load();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.seekable();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.duration()===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.currentTime()&lt;e.start(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e.end(e.length<span class=\"code-number\">-1</span>)):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},i.setupFirstPlay=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!t||<span class=\"code-keyword\">this</span>.tech_.paused()||<span class=\"code-keyword\">this</span>.hasPlayed_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!t.endList){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.seekable();<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(u.default.browser.IE_VERSION&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.tech_.readyState())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"firstplay\"</span>),e.tech_.setCurrentTime(i.end(<span class=\"code-number\">0</span>)),e.hasPlayed_=!<span class=\"code-number\">0</span>})),!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"firstplay\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(i.end(<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.hasPlayed_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.load(),!<span class=\"code-number\">0</span>},i.handleSourceOpen_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tryToCreateSourceBuffers_(),<span class=\"code-keyword\">this</span>.tech_.autoplay()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.play();<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.then&amp;&amp;e.then(<span class=\"code-literal\">null</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{}))}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"sourceopen\"</span>)},i.handleSourceEnded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.inbandTextTracks_.metadataTrack_){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.inbandTextTracks_.metadataTrack_.cues;<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.duration();e[e.length<span class=\"code-number\">-1</span>].endTime=<span class=\"code-built_in\">isNaN</span>(t)||<span class=\"code-built_in\">Math</span>.abs(t)===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?<span class=\"code-built_in\">Number</span>.MAX_VALUE:t}}},i.handleDurationChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"durationchange\"</span>)},i.onEndOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.mainSegmentLoader_.ended_;<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(e=!<span class=\"code-keyword\">this</span>.mainSegmentLoader_.currentMediaInfo_||<span class=\"code-keyword\">this</span>.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_:<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_),e&amp;&amp;(<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.seekable().length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(e,<span class=\"code-keyword\">this</span>.duration());<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=mn.Playlist.playlistEnd(e,t),n=<span class=\"code-keyword\">this</span>.tech_.currentTime(),r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(!r.length)<span class=\"code-keyword\">return</span> i-n&lt;=M;<span class=\"code-keyword\">var</span> a=r.end(r.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> a-n&lt;=M&amp;&amp;i-a&lt;=M},i.blacklistCurrentPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e={});<span class=\"code-keyword\">var</span> i=e.playlist||<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(t=t||e.blacklistDuration||<span class=\"code-keyword\">this</span>.blacklistDuration,!i)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error=e,<span class=\"code-keyword\">void</span>(<span class=\"code-string\">\"open\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource.readyState?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>):<span class=\"code-keyword\">this</span>.sourceUpdater_.endOfStream(<span class=\"code-string\">\"network\"</span>));<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists,r=n.filter(K),a=<span class=\"code-number\">1</span>===r.length&amp;&amp;r[<span class=\"code-number\">0</span>]===i;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===n.length&amp;&amp;t!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"Problem encountered with playlist \"</span>+i.id+<span class=\"code-string\">\". Trying again since it is the only playlist.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.load(a);<span class=\"code-keyword\">if</span>(a){<span class=\"code-keyword\">var</span> s=!<span class=\"code-number\">1</span>;n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e!==i){<span class=\"code-keyword\">var</span> t=e.excludeUntil;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;(s=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">delete</span> e.excludeUntil)}})),s&amp;&amp;(u.default.log.warn(<span class=\"code-string\">\"Removing other playlists from the exclusion list because the last rendition is about to be excluded.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>))}i.excludeUntil=<span class=\"code-built_in\">Date</span>.now()+<span class=\"code-number\">1e3</span>*t,<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"blacklistplaylist\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-blacklisted\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-blacklisted\"</span>});<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">this</span>.selectPlaylist();<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error=<span class=\"code-string\">\"Playback cannot continue. No available working or supported playlists.\"</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">var</span> d=e.internal?<span class=\"code-keyword\">this</span>.logger_:u.default.log.warn,l=e.message?<span class=\"code-string\">\" \"</span>+e.message:<span class=\"code-string\">\"\"</span>;d((e.internal?<span class=\"code-string\">\"Internal problem\"</span>:<span class=\"code-string\">\"Problem\"</span>)+<span class=\"code-string\">\" encountered with playlist \"</span>+i.id+<span class=\"code-string\">\".\"</span>+l+<span class=\"code-string\">\" Switching to playlist \"</span>+o.id+<span class=\"code-string\">\".\"</span>),o.attributes.AUDIO!==i.attributes.AUDIO&amp;&amp;<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"audio\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),o.attributes.SUBTITLES!==i.attributes.SUBTITLES&amp;&amp;<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"subtitle\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"main\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]);<span class=\"code-keyword\">var</span> h=o.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>||<span class=\"code-number\">5e3</span>,c=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> o.lastRequest&amp;&amp;<span class=\"code-built_in\">Date</span>.now()-o.lastRequest&lt;=h;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(o,a||c)},i.pauseLoading=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"all\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),<span class=\"code-keyword\">this</span>.stopABRTimer_()},i.delegateLoaders_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=[],r=<span class=\"code-string\">\"all\"</span>===e;(r||<span class=\"code-string\">\"main\"</span>===e)&amp;&amp;n.push(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_);<span class=\"code-keyword\">var</span> a=[];(r||<span class=\"code-string\">\"audio\"</span>===e)&amp;&amp;a.push(<span class=\"code-string\">\"AUDIO\"</span>),(r||<span class=\"code-string\">\"subtitle\"</span>===e)&amp;&amp;(a.push(<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>),a.push(<span class=\"code-string\">\"SUBTITLES\"</span>)),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.mediaTypes_[e]&amp;&amp;i.mediaTypes_[e].activePlaylistLoader;t&amp;&amp;n.push(t)})),[<span class=\"code-string\">\"main\"</span>,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"subtitle\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> r=i[t+<span class=\"code-string\">\"SegmentLoader_\"</span>];!r||e!==t&amp;&amp;<span class=\"code-string\">\"all\"</span>!==e||n.push(r)})),n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e[t]&amp;&amp;e[t]()}))}))},i.setCurrentTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=F(<span class=\"code-keyword\">this</span>.tech_.buffered(),e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.abort(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.abort()),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.abort()),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.load()):<span class=\"code-number\">0</span>},i.duration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">return</span> e?e.endList?<span class=\"code-keyword\">this</span>.mediaSource?<span class=\"code-keyword\">this</span>.mediaSource.duration:mn.Playlist.duration(e):<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:<span class=\"code-number\">0</span>},i.seekable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.seekable_},i.onSyncInfoUpdate_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(t,<span class=\"code-keyword\">this</span>.duration());<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==i){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.suggestedPresentationDelay,r=mn.Playlist.seekable(t,i,n);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==r.length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class=\"code-keyword\">if</span>(t=<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class=\"code-literal\">null</span>===(i=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(t,<span class=\"code-keyword\">this</span>.duration())))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(e=mn.Playlist.seekable(t,i,n)).length)<span class=\"code-keyword\">return</span>}<span class=\"code-keyword\">var</span> a,s;<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;(a=<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>),s=<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)),e?e.start(<span class=\"code-number\">0</span>)&gt;r.end(<span class=\"code-number\">0</span>)||r.start(<span class=\"code-number\">0</span>)&gt;e.end(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.seekable_=r:<span class=\"code-keyword\">this</span>.seekable_=u.default.createTimeRanges([[e.start(<span class=\"code-number\">0</span>)&gt;r.start(<span class=\"code-number\">0</span>)?e.start(<span class=\"code-number\">0</span>):r.start(<span class=\"code-number\">0</span>),e.end(<span class=\"code-number\">0</span>)&lt;r.end(<span class=\"code-number\">0</span>)?e.end(<span class=\"code-number\">0</span>):r.end(<span class=\"code-number\">0</span>)]]):<span class=\"code-keyword\">this</span>.seekable_=r,<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>)===a&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)===s||(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"seekable updated [\"</span>+q(<span class=\"code-keyword\">this</span>.seekable_)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"seekablechanged\"</span>))}}}}},i.updateDuration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateDuration_&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_),<span class=\"code-keyword\">this</span>.updateDuration_=<span class=\"code-literal\">null</span>),<span class=\"code-string\">\"open\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource.readyState)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.updateDuration_=<span class=\"code-keyword\">this</span>.updateDuration.bind(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_);<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.seekable();<span class=\"code-keyword\">if</span>(!t.length)<span class=\"code-keyword\">return</span>;(<span class=\"code-built_in\">isNaN</span>(<span class=\"code-keyword\">this</span>.mediaSource.duration)||<span class=\"code-keyword\">this</span>.mediaSource.duration&lt;t.end(t.length<span class=\"code-number\">-1</span>))&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.setDuration(t.end(t.length<span class=\"code-number\">-1</span>))}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.tech_.buffered(),n=mn.Playlist.duration(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media());i.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(n=<span class=\"code-built_in\">Math</span>.max(n,i.end(i.length<span class=\"code-number\">-1</span>))),<span class=\"code-keyword\">this</span>.mediaSource.duration!==n&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.setDuration(n)}},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.decrypter_.terminate(),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.dispose(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.dispose(),[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaTypes_[t].groups;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)i[n].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()}))})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.sourceUpdater_.dispose(),<span class=\"code-keyword\">this</span>.timelineChangeController_.dispose(),<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.updateDuration_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"durationchange\"</span>,<span class=\"code-keyword\">this</span>.handleDurationChange_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.handleSourceOpen_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceended\"</span>,<span class=\"code-keyword\">this</span>.handleSourceEnded_),<span class=\"code-keyword\">this</span>.off()},i.master=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()||<span class=\"code-keyword\">this</span>.initialMedia_},i.areMediaTypesKnown_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=!!<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class=\"code-keyword\">return</span>!(!<span class=\"code-keyword\">this</span>.mainSegmentLoader_.currentMediaInfo_||e&amp;&amp;!<span class=\"code-keyword\">this</span>.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t={<span class=\"code-attr\">main</span>:<span class=\"code-keyword\">this</span>.mainSegmentLoader_.currentMediaInfo_||{},<span class=\"code-attr\">audio</span>:<span class=\"code-keyword\">this</span>.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;<span class=\"code-keyword\">var</span> i=Ki(<span class=\"code-keyword\">this</span>.master(),<span class=\"code-keyword\">this</span>.media()),n={},r=!!<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class=\"code-keyword\">if</span>(t.main.hasVideo&amp;&amp;(n.video=i.video||t.main.videoCodec||<span class=\"code-string\">\"avc1.4d400d\"</span>),t.main.isMuxed&amp;&amp;(n.video+=<span class=\"code-string\">\",\"</span>+(i.audio||t.main.audioCodec||Gi)),(t.main.hasAudio&amp;&amp;!t.main.isMuxed||t.audio.hasAudio||r)&amp;&amp;(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||Gi,t.audio.isFmp4=t.main.hasAudio&amp;&amp;!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){<span class=\"code-keyword\">var</span> a,s={};<span class=\"code-keyword\">if</span>([<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(n.hasOwnProperty(e)&amp;&amp;(r=t[e].isFmp4,o=n[e],!(r?Vi(o):Hi(o)))){<span class=\"code-keyword\">var</span> i=t[e].isFmp4?<span class=\"code-string\">\"browser\"</span>:<span class=\"code-string\">\"muxer\"</span>;s[i]=s[i]||[],s[i].push(n[e]),<span class=\"code-string\">\"audio\"</span>===e&amp;&amp;(a=i)}<span class=\"code-keyword\">var</span> r,o})),r&amp;&amp;a&amp;&amp;<span class=\"code-keyword\">this</span>.media().attributes.AUDIO){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">this</span>.media().attributes.AUDIO;<span class=\"code-keyword\">this</span>.master().playlists.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{(t.attributes&amp;&amp;t.attributes.AUDIO)===o&amp;&amp;t!==e.media()&amp;&amp;(t.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"excluding audio group \"</span>+o+<span class=\"code-string\">\" as \"</span>+a+<span class=\"code-string\">' does not support codec(s): \"'</span>+n.audio+<span class=\"code-string\">'\"'</span>)}<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">Object</span>.keys(s).length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;!<span class=\"code-keyword\">this</span>.sourceUpdater_.canChangeType()){<span class=\"code-keyword\">var</span> u=[];<span class=\"code-keyword\">if</span>([<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=(Ni(e.sourceUpdater_.codecs[t]||<span class=\"code-string\">\"\"</span>)[<span class=\"code-number\">0</span>]||{}).type,r=(Ni(n[t]||<span class=\"code-string\">\"\"</span>)[<span class=\"code-number\">0</span>]||{}).type;i&amp;&amp;r&amp;&amp;i.toLowerCase()!==r.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'\"'</span>+e.sourceUpdater_.codecs[t]+<span class=\"code-string\">'\" -&gt; \"'</span>+n[t]+<span class=\"code-string\">'\"'</span>)})),u.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Codec switching not supported: \"</span>+u.join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>})}<span class=\"code-keyword\">return</span> n}<span class=\"code-keyword\">var</span> d=<span class=\"code-built_in\">Object</span>.keys(s).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;(e+=<span class=\"code-string\">\", \"</span>),e+(t+<span class=\"code-string\">' does not support codec(s): \"'</span>)+s[t].join(<span class=\"code-string\">\",\"</span>)+<span class=\"code-string\">'\"'</span>}),<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\".\"</span>;<span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">message</span>:d,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Could not determine codecs for playlist.\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})},i.tryToCreateSourceBuffers_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===<span class=\"code-keyword\">this</span>.mediaSource.readyState&amp;&amp;!<span class=\"code-keyword\">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;<span class=\"code-keyword\">this</span>.areMediaTypesKnown_()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.getCodecsOrExclude_();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">this</span>.sourceUpdater_.createSourceBuffers(e);<span class=\"code-keyword\">var</span> t=[e.video,e.audio].filter(<span class=\"code-built_in\">Boolean</span>).join(<span class=\"code-string\">\",\"</span>);<span class=\"code-keyword\">this</span>.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.master().playlists,i=[];<span class=\"code-built_in\">Object</span>.keys(t).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=t[n];<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===i.indexOf(r.id)){i.push(r.id);<span class=\"code-keyword\">var</span> a=Ki(e.master,r),s=[];!a.audio||Hi(a.audio)||Vi(a.audio)||s.push(<span class=\"code-string\">\"audio codec \"</span>+a.audio),!a.video||Hi(a.video)||Vi(a.video)||s.push(<span class=\"code-string\">\"video codec \"</span>+a.video),a.text&amp;&amp;<span class=\"code-string\">\"stpp.ttml.im1t\"</span>===a.text&amp;&amp;s.push(<span class=\"code-string\">\"text codec \"</span>+a.text),s.length&amp;&amp;(r.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e.logger_(<span class=\"code-string\">\"excluding \"</span>+r.id+<span class=\"code-string\">\" for unsupported: \"</span>+s.join(<span class=\"code-string\">\", \"</span>)))}}))},i.excludeIncompatibleVariants_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=[],n=<span class=\"code-keyword\">this</span>.master().playlists,r=Qi(Ni(e)),a=Yi(r),s=r.video&amp;&amp;Ni(r.video)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>,o=r.audio&amp;&amp;Ni(r.audio)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>;<span class=\"code-built_in\">Object</span>.keys(n).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r=n[e];<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===i.indexOf(r.id)&amp;&amp;r.excludeUntil!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>){i.push(r.id);<span class=\"code-keyword\">var</span> u=[],d=Ki(t.masterPlaylistLoader_.master,r),l=Yi(d);<span class=\"code-keyword\">if</span>(d.audio||d.video){<span class=\"code-keyword\">if</span>(l!==a&amp;&amp;u.push(<span class=\"code-string\">'codec count \"'</span>+l+<span class=\"code-string\">'\" !== \"'</span>+a+<span class=\"code-string\">'\"'</span>),!t.sourceUpdater_.canChangeType()){<span class=\"code-keyword\">var</span> h=d.video&amp;&amp;Ni(d.video)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>,c=d.audio&amp;&amp;Ni(d.audio)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>;h&amp;&amp;s&amp;&amp;h.type.toLowerCase()!==s.type.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'video codec \"'</span>+h.type+<span class=\"code-string\">'\" !== \"'</span>+s.type+<span class=\"code-string\">'\"'</span>),c&amp;&amp;o&amp;&amp;c.type.toLowerCase()!==o.type.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'audio codec \"'</span>+c.type+<span class=\"code-string\">'\" !== \"'</span>+o.type+<span class=\"code-string\">'\"'</span>)}u.length&amp;&amp;(r.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,t.logger_(<span class=\"code-string\">\"blacklisting \"</span>+r.id+<span class=\"code-string\">\": \"</span>+u.join(<span class=\"code-string\">\" &amp;&amp; \"</span>)))}}}))},i.updateAdCues_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class=\"code-number\">0</span>)),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">0</span>),e.segments)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r=i,a=<span class=\"code-number\">0</span>;a&lt;e.segments.length;a++){<span class=\"code-keyword\">var</span> s=e.segments[a];<span class=\"code-keyword\">if</span>(n||(n=Rn(t,r+s.duration/<span class=\"code-number\">2</span>)),n){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueIn\"</span><span class=\"code-keyword\">in</span> s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">continue</span>}<span class=\"code-keyword\">if</span>(r&lt;n.endTime){r+=s.duration;<span class=\"code-keyword\">continue</span>}n.endTime+=s.duration}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueOut\"</span><span class=\"code-keyword\">in</span> s&amp;&amp;((n=<span class=\"code-keyword\">new</span> o.default.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+<span class=\"code-built_in\">parseFloat</span>(s.cueOut),t.addCue(n)),<span class=\"code-string\">\"cueOutCont\"</span><span class=\"code-keyword\">in</span> s){<span class=\"code-keyword\">var</span> u=s.cueOutCont.split(<span class=\"code-string\">\"/\"</span>).map(<span class=\"code-built_in\">parseFloat</span>),d=u[<span class=\"code-number\">0</span>],l=u[<span class=\"code-number\">1</span>];(n=<span class=\"code-keyword\">new</span> o.default.VTTCue(r,r+s.duration,<span class=\"code-string\">\"\"</span>)).adStartTime=r-d,n.adEndTime=n.adStartTime+l,t.addCue(n)}r+=s.duration}}(e,<span class=\"code-keyword\">this</span>.cueTagsTrack_,t)},i.goalBufferLength=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=Ut.GOAL_BUFFER_LENGTH,i=Ut.GOAL_BUFFER_LENGTH_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,Ut.MAX_GOAL_BUFFER_LENGTH);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,n)},i.bufferLowWaterLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=Ut.BUFFER_LOW_WATER_LINE,i=Ut.BUFFER_LOW_WATER_LINE_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,Ut.MAX_BUFFER_LOW_WATER_LINE),r=<span class=\"code-built_in\">Math</span>.max(t,Ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> Ut.BUFFER_HIGH_WATER_LINE},t}(u.default.EventTarget),Kn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?<span class=\"code-string\">\"smooth\"</span>:<span class=\"code-string\">\"fast\"</span>)+<span class=\"code-string\">\"QualityChange_\"</span>].bind(s);<span class=\"code-keyword\">if</span>(t.attributes.RESOLUTION){<span class=\"code-keyword\">var</span> u=t.attributes.RESOLUTION;<span class=\"code-keyword\">this</span>.width=u.width,<span class=\"code-keyword\">this</span>.height=u.height}<span class=\"code-keyword\">this</span>.bandwidth=t.attributes.BANDWIDTH,<span class=\"code-keyword\">this</span>.codecs=Ki(s.master(),t),<span class=\"code-keyword\">this</span>.playlist=t,<span class=\"code-keyword\">this</span>.id=i,<span class=\"code-keyword\">this</span>.enabled=(n=e.playlists,r=t.id,a=o,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=n.master.playlists[r],i=Y(t),s=K(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e?s:(e?<span class=\"code-keyword\">delete</span> t.disabled:t.disabled=!<span class=\"code-number\">0</span>,e===s||i||(a(),e?n.trigger(<span class=\"code-string\">\"renditionenabled\"</span>):n.trigger(<span class=\"code-string\">\"renditiondisabled\"</span>)),e)})},$n=[<span class=\"code-string\">\"seeking\"</span>,<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"pause\"</span>,<span class=\"code-string\">\"playing\"</span>,<span class=\"code-string\">\"error\"</span>],Jn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.masterPlaylistController_=e.masterPlaylistController,<span class=\"code-keyword\">this</span>.tech_=e.tech,<span class=\"code-keyword\">this</span>.seekable=e.seekable,<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,<span class=\"code-keyword\">this</span>.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,<span class=\"code-keyword\">this</span>.media=e.media,<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.logger_=ji(<span class=\"code-string\">\"PlaybackWatcher\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"initialize\"</span>);<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.monitorCurrentTime_()},n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.techWaiting_()},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.cancelTimer_()},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.fixesBadSeeks_()},s=<span class=\"code-keyword\">this</span>.masterPlaylistController_,u=[<span class=\"code-string\">\"main\"</span>,<span class=\"code-string\">\"subtitle\"</span>,<span class=\"code-string\">\"audio\"</span>],d={};u.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{d[e]={<span class=\"code-attr\">reset</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.resetSegmentDownloads_(e)},<span class=\"code-attr\">updateend</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.checkSegmentDownloads_(e)}},s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].on(<span class=\"code-string\">\"appendsdone\"</span>,d[e].updateend),s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].on(<span class=\"code-string\">\"playlistupdate\"</span>,d[e].reset),t.tech_.on([<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"seeking\"</span>],d[e].reset)})),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"seekablechanged\"</span>,a),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"waiting\"</span>,n),<span class=\"code-keyword\">this</span>.tech_.on($n,r),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"canplay\"</span>,i),<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.logger_(<span class=\"code-string\">\"dispose\"</span>),t.tech_.off(<span class=\"code-string\">\"seekablechanged\"</span>,a),t.tech_.off(<span class=\"code-string\">\"waiting\"</span>,n),t.tech_.off($n,r),t.tech_.off(<span class=\"code-string\">\"canplay\"</span>,i),u.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].off(<span class=\"code-string\">\"appendsdone\"</span>,d[e].updateend),s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].off(<span class=\"code-string\">\"playlistupdate\"</span>,d[e].reset),t.tech_.off([<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"seeking\"</span>],d[e].reset)})),t.checkCurrentTimeTimeout_&amp;&amp;o.default.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.monitorCurrentTime_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkCurrentTime_(),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_&amp;&amp;o.default.clearTimeout(<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=o.default.setTimeout(<span class=\"code-keyword\">this</span>.monitorCurrentTime_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">250</span>)},t.resetSegmentDownloads_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistController_[e+<span class=\"code-string\">\"SegmentLoader_\"</span>];<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"resetting possible stalled download count for \"</span>+e+<span class=\"code-string\">\" loader\"</span>),<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>]=t.buffered_()},t.checkSegmentDownloads_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistController_,i=t[e+<span class=\"code-string\">\"SegmentLoader_\"</span>],n=i.buffered_(),r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!e&amp;&amp;t||!t&amp;&amp;e)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.length!==t.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">if</span>(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}(<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>],n);<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>]=n,r?<span class=\"code-keyword\">this</span>.resetSegmentDownloads_(e):(<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]++,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"found #\"</span>+<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]+<span class=\"code-string\">\" \"</span>+e+<span class=\"code-string\">\" appends that did not increase buffer (possible stalled download)\"</span>,{<span class=\"code-attr\">playlistId</span>:i.playlist_&amp;&amp;i.playlist_.id,<span class=\"code-attr\">buffered</span>:W(n)}),<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]&lt;<span class=\"code-number\">10</span>||(<span class=\"code-keyword\">this</span>.logger_(e+<span class=\"code-string\">\" loader stalled download exclusion\"</span>),<span class=\"code-keyword\">this</span>.resetSegmentDownloads_(e),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-\"</span>+e+<span class=\"code-string\">\"-download-exclusion\"</span>}),<span class=\"code-string\">\"subtitle\"</span>!==e&amp;&amp;t.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Excessive \"</span>+e+<span class=\"code-string\">\" segment downloading detected.\"</span>},<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)))},t.checkCurrentTime_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()&amp;&amp;<span class=\"code-keyword\">this</span>.fixesBadSeeks_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.lastRecordedTime=<span class=\"code-keyword\">this</span>.tech_.currentTime());<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.paused()&amp;&amp;!<span class=\"code-keyword\">this</span>.tech_.seeking()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+M&gt;=t.end(t.length<span class=\"code-number\">-1</span>)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.techWaiting_();<span class=\"code-keyword\">this</span>.consecutiveUpdates&gt;=<span class=\"code-number\">5</span>&amp;&amp;e===<span class=\"code-keyword\">this</span>.lastRecordedTime?(<span class=\"code-keyword\">this</span>.consecutiveUpdates++,<span class=\"code-keyword\">this</span>.waiting_()):e===<span class=\"code-keyword\">this</span>.lastRecordedTime?<span class=\"code-keyword\">this</span>.consecutiveUpdates++:(<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=e)}},t.cancelTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.timer_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"cancelTimer_\"</span>),clearTimeout(<span class=\"code-keyword\">this</span>.timer_)),<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>},t.fixesBadSeeks_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.seeking())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>.seekable(),i=<span class=\"code-keyword\">this</span>.tech_.currentTime();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.afterSeekableWindow_(t,i,<span class=\"code-keyword\">this</span>.media(),<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(e=t.end(t.length<span class=\"code-number\">-1</span>)),<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(t,i)){<span class=\"code-keyword\">var</span> n=t.start(<span class=\"code-number\">0</span>);e=n+(n===t.end(<span class=\"code-number\">0</span>)?<span class=\"code-number\">0</span>:M)}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Trying to seek outside of seekable at time \"</span>+i+<span class=\"code-string\">\" with seekable range \"</span>+q(t)+<span class=\"code-string\">\". Seeking to \"</span>+e+<span class=\"code-string\">\".\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">return</span>!!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.buffered,i=e.targetDuration,n=e.currentTime;<span class=\"code-keyword\">return</span>!(!t.length||t.end(<span class=\"code-number\">0</span>)-t.start(<span class=\"code-number\">0</span>)&lt;<span class=\"code-number\">2</span>*i||n&gt;t.start(<span class=\"code-number\">0</span>)||!(t.start(<span class=\"code-number\">0</span>)-n&lt;i))}({<span class=\"code-attr\">buffered</span>:r,<span class=\"code-attr\">targetDuration</span>:<span class=\"code-keyword\">this</span>.media().targetDuration,<span class=\"code-attr\">currentTime</span>:i})&amp;&amp;(e=r.start(<span class=\"code-number\">0</span>)+M,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Buffered region starts (\"</span>+r.start(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\")  just beyond seek point (\"</span>+i+<span class=\"code-string\">\"). Seeking to \"</span>+e+<span class=\"code-string\">\".\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),!<span class=\"code-number\">0</span>)},t.waiting_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.techWaiting_()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=F(t,e);<span class=\"code-keyword\">return</span> i.length&amp;&amp;e+<span class=\"code-number\">3</span>&lt;=i.end(<span class=\"code-number\">0</span>)?(<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+e+<span class=\"code-string\">\" while inside a buffered region [\"</span>+i.start(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\" -&gt; \"</span>+i.end(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\"]. Attempting to resume playback by seeking to the current time.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-unknown-waiting\"</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-unknown-waiting\"</span>})):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},t.techWaiting_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.seekable(),t=<span class=\"code-keyword\">this</span>.tech_.currentTime();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()&amp;&amp;<span class=\"code-keyword\">this</span>.fixesBadSeeks_())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()||<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.timer_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(e,t)){<span class=\"code-keyword\">var</span> i=e.end(e.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Fell out of live window at time \"</span>+t+<span class=\"code-string\">\". Seeking to live point (seekable end) \"</span>+i),<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(i),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-live-resync\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-live-resync\"</span>}),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoUnderflow_({<span class=\"code-attr\">audioBuffered</span>:n.audioBuffered(),<span class=\"code-attr\">videoBuffered</span>:n.videoBuffered(),<span class=\"code-attr\">currentTime</span>:t}))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(t),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-video-underflow\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-video-underflow\"</span>}),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> a=N(r,t);<span class=\"code-keyword\">if</span>(a.length&gt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> s=a.start(<span class=\"code-number\">0</span>)-t;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+t+<span class=\"code-string\">\", setting timer for \"</span>+s+<span class=\"code-string\">\", seeking to \"</span>+a.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.timer_=setTimeout(<span class=\"code-keyword\">this</span>.skipTheGap_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1e3</span>*s,t),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},t.afterSeekableWindow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>),!e.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> r=e.end(e.length<span class=\"code-number\">-1</span>)+M;<span class=\"code-keyword\">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class=\"code-number\">-1</span>)+<span class=\"code-number\">3</span>*i.targetDuration),t&gt;r},t.beforeSeekableWindow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!!(e.length&amp;&amp;e.start(<span class=\"code-number\">0</span>)&gt;<span class=\"code-number\">0</span>&amp;&amp;t&lt;e.start(<span class=\"code-number\">0</span>)-<span class=\"code-keyword\">this</span>.liveRangeSafeTimeDelta)},t.videoUnderflow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> r;<span class=\"code-keyword\">if</span>(t.length&amp;&amp;i.length){<span class=\"code-keyword\">var</span> a=F(t,n<span class=\"code-number\">-3</span>),s=F(t,n),o=F(i,n);o.length&amp;&amp;!s.length&amp;&amp;a.length&amp;&amp;(r={<span class=\"code-attr\">start</span>:a.end(<span class=\"code-number\">0</span>),<span class=\"code-attr\">end</span>:o.end(<span class=\"code-number\">0</span>)})}<span class=\"code-keyword\">else</span> N(t,n).length||(r=<span class=\"code-keyword\">this</span>.gapFromVideoUnderflow_(t,n));<span class=\"code-keyword\">return</span>!!r&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Encountered a gap in video from \"</span>+r.start+<span class=\"code-string\">\" to \"</span>+r.end+<span class=\"code-string\">\". Seeking to current time \"</span>+n),!<span class=\"code-number\">0</span>)}},t.skipTheGap_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=<span class=\"code-keyword\">this</span>.tech_.currentTime(),n=N(t,i);<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-number\">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipTheGap_:\"</span>,<span class=\"code-string\">\"currentTime:\"</span>,i,<span class=\"code-string\">\"scheduled currentTime:\"</span>,e,<span class=\"code-string\">\"nextRange start:\"</span>,n.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(n.start(<span class=\"code-number\">0</span>)+R),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-gap-skip\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-gap-skip\"</span>}))},t.gapFromVideoUnderflow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.length&lt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span> u.default.createTimeRanges();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">1</span>;i&lt;e.length;i++){<span class=\"code-keyword\">var</span> n=e.end(i<span class=\"code-number\">-1</span>),r=e.start(i);t.push([n,r])}<span class=\"code-keyword\">return</span> u.default.createTimeRanges(t)}(e),n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> r=i.start(n),a=i.end(n);<span class=\"code-keyword\">if</span>(t-r&lt;<span class=\"code-number\">4</span>&amp;&amp;t-r&gt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:r,<span class=\"code-attr\">end</span>:a}}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},e}(),Zn={<span class=\"code-attr\">errorInterval</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">getSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e(<span class=\"code-keyword\">this</span>.tech({<span class=\"code-attr\">IWillNotUseThisInPlugins</span>:!<span class=\"code-number\">0</span>}).currentSource_||<span class=\"code-keyword\">this</span>.currentSource())}},er=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=u.default.mergeOptions(Zn,i);t.ready((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload-initialized\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-initialized\"</span>})}));<span class=\"code-keyword\">var</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r&amp;&amp;t.currentTime(r)},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-literal\">null</span>!=e&amp;&amp;(r=t.duration()!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;t.currentTime()||<span class=\"code-number\">0</span>,t.one(<span class=\"code-string\">\"loadedmetadata\"</span>,s),t.src(e),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload\"</span>}),t.play())},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Date</span>.now()-n&lt;<span class=\"code-number\">1e3</span>*a.errorInterval?(t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload-canceled\"</span>}),<span class=\"code-keyword\">void</span> t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-canceled\"</span>})):a.getSource&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> a.getSource?(n=<span class=\"code-built_in\">Date</span>.now(),a.getSource.call(t,o)):<span class=\"code-keyword\">void</span> u.default.log.error(<span class=\"code-string\">\"ERROR: reloadSourceOnError - The option getSource must be a function!\"</span>)},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{t.off(<span class=\"code-string\">\"loadedmetadata\"</span>,s),t.off(<span class=\"code-string\">\"error\"</span>,d),t.off(<span class=\"code-string\">\"dispose\"</span>,e)};t.on(<span class=\"code-string\">\"error\"</span>,d),t.on(<span class=\"code-string\">\"dispose\"</span>,l),t.reloadSourceOnError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{l(),e(t,i)}},tr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{er(<span class=\"code-keyword\">this</span>,e)},ir=<span class=\"code-string\">\"2.5.0\"</span>,nr={<span class=\"code-attr\">PlaylistLoader</span>:x,<span class=\"code-attr\">Playlist</span>:Z,<span class=\"code-attr\">utils</span>:pe,<span class=\"code-attr\">STANDARD_PLAYLIST_SELECTOR</span>:rn,<span class=\"code-attr\">INITIAL_PLAYLIST_SELECTOR</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.playlists.master.playlists.filter(Z.isEnabled);<span class=\"code-keyword\">return</span> en(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> tn(e,t)})),t.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span>!!Ki(e.playlists.master,t).video}))[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>},<span class=\"code-attr\">lastBandwidthSelector</span>:rn,<span class=\"code-attr\">movingAverageBandwidthSelector</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(e&lt;<span class=\"code-number\">0</span>||e&gt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Moving average bandwidth decay must be between 0 and 1.\"</span>);<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.useDevicePixelRatio&amp;&amp;o.default.devicePixelRatio||<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> t&lt;<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-keyword\">this</span>.systemBandwidth),t=e*<span class=\"code-keyword\">this</span>.systemBandwidth+(<span class=\"code-number\">1</span>-e)*t,nn(<span class=\"code-keyword\">this</span>.playlists.master,t,<span class=\"code-built_in\">parseInt</span>(Zi(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"width\"</span>),<span class=\"code-number\">10</span>)*i,<span class=\"code-built_in\">parseInt</span>(Zi(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"height\"</span>),<span class=\"code-number\">10</span>)*i,<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions)}},<span class=\"code-attr\">comparePlaylistBandwidth</span>:tn,<span class=\"code-attr\">comparePlaylistResolution</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||o.default.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||o.default.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class=\"code-attr\">xhr</span>:ne()};<span class=\"code-built_in\">Object</span>.keys(Ut).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperty(nr,e,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"using Vhs.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),Ut[e]},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{u.default.log.warn(<span class=\"code-string\">\"using Vhs.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t||t&lt;<span class=\"code-number\">0</span>?u.default.log.warn(<span class=\"code-string\">\"value of Vhs.\"</span>+e+<span class=\"code-string\">\" must be greater than or equal to 0\"</span>):Ut[e]=t}})}));<span class=\"code-keyword\">var</span> rr=<span class=\"code-string\">\"videojs-vhs\"</span>,ar=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.media(),n=<span class=\"code-number\">-1</span>,r=<span class=\"code-number\">0</span>;r&lt;e.length;r++)<span class=\"code-keyword\">if</span>(e[r].id===i.id){n=r;<span class=\"code-keyword\">break</span>}e.selectedIndex_=n,e.trigger({<span class=\"code-attr\">selectedIndex</span>:n,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"change\"</span>})};nr.canPlaySource=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> sr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n={<span class=\"code-attr\">video</span>:t&amp;&amp;t.attributes&amp;&amp;t.attributes.CODECS,<span class=\"code-attr\">audio</span>:i&amp;&amp;i.attributes&amp;&amp;i.attributes.CODECS};!n.audio&amp;&amp;n.video&amp;&amp;n.video.split(<span class=\"code-string\">\",\"</span>).length&gt;<span class=\"code-number\">1</span>&amp;&amp;n.video.split(<span class=\"code-string\">\",\"</span>).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=e.trim(),qi(e)?n.audio=e:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),Ri.video.test(e.trim().toLowerCase())}(e)&amp;&amp;(n.video=e)}));<span class=\"code-keyword\">var</span> r=n.video?<span class=\"code-string\">'video/mp4;codecs=\"'</span>+n.video+<span class=\"code-string\">'\"'</span>:<span class=\"code-literal\">null</span>,a=n.audio?<span class=\"code-string\">'audio/mp4;codecs=\"'</span>+n.audio+<span class=\"code-string\">'\"'</span>:<span class=\"code-literal\">null</span>,s={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o <span class=\"code-keyword\">in</span> e)s[o]={<span class=\"code-attr\">audioContentType</span>:a,<span class=\"code-attr\">videoContentType</span>:r},t.contentProtection&amp;&amp;t.contentProtection[o]&amp;&amp;t.contentProtection[o].pssh&amp;&amp;(s[o].pssh=t.contentProtection[o].pssh),<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e[o]&amp;&amp;(s[o].url=e[o]);<span class=\"code-keyword\">return</span> u.default.mergeOptions(e,s)},or=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">if</span>(!i.contentProtection)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> n=i.contentProtection[t];<span class=\"code-keyword\">return</span> n&amp;&amp;n.pssh&amp;&amp;(e[t]={<span class=\"code-attr\">pssh</span>:n.pssh}),e}),{});<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(n).length&amp;&amp;e.push(n),e}),[])},ur=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;<span class=\"code-keyword\">if</span>(!t.eme.initializeMediaKeys)<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.resolve();<span class=\"code-keyword\">var</span> a=n?r.concat([n]):r,s=or(a,<span class=\"code-built_in\">Object</span>.keys(i)),o=[],u=[];<span class=\"code-keyword\">return</span> s.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{u.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{t.tech_.one(<span class=\"code-string\">\"keysessioncreated\"</span>,e)}))),o.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{t.eme.initializeMediaKeys({<span class=\"code-attr\">keySystems</span>:e},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e?n(e):i()}))})))})),<span class=\"code-built_in\">Promise</span>.race([<span class=\"code-built_in\">Promise</span>.all(o),<span class=\"code-built_in\">Promise</span>.race(u)])},dr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.player,i=e.sourceKeySystems,n=e.media,r=e.audioMedia,a=sr(i,n,r);<span class=\"code-keyword\">return</span>!(!a||(t.currentSource().keySystems=a,a&amp;&amp;!t.eme&amp;&amp;(u.default.log.warn(<span class=\"code-string\">\"DRM encrypted source cannot be decrypted without a DRM plugin\"</span>),<span class=\"code-number\">1</span>)))},lr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!o.default.localStorage)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> e=o.default.localStorage.getItem(rr);<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.parse(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},hr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===e.toLowerCase().indexOf(<span class=\"code-string\">\"data:application/vnd.videojs.vhs+json,\"</span>)?<span class=\"code-built_in\">JSON</span>.parse(e.substring(e.indexOf(<span class=\"code-string\">\",\"</span>)+<span class=\"code-number\">1</span>)):e};nr.supportsNativeHls=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!s.default||!s.default.createElement)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e=s.default.createElement(<span class=\"code-string\">\"video\"</span>);<span class=\"code-keyword\">return</span>!!u.default.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported()&amp;&amp;[<span class=\"code-string\">\"application/vnd.apple.mpegurl\"</span>,<span class=\"code-string\">\"audio/mpegurl\"</span>,<span class=\"code-string\">\"audio/x-mpegurl\"</span>,<span class=\"code-string\">\"application/x-mpegurl\"</span>,<span class=\"code-string\">\"video/x-mpegurl\"</span>,<span class=\"code-string\">\"video/mpegurl\"</span>,<span class=\"code-string\">\"application/mpegurl\"</span>].some((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/maybe|probably/i</span>.test(e.canPlayType(t))}))}(),nr.supportsNativeDash=!!(s.default&amp;&amp;s.default.createElement&amp;&amp;u.default.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported())&amp;&amp;<span class=\"code-regexp\">/maybe|probably/i</span>.test(s.default.createElement(<span class=\"code-string\">\"video\"</span>).canPlayType(<span class=\"code-string\">\"application/dash+xml\"</span>)),nr.supportsTypeNatively=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"hls\"</span>===e?nr.supportsNativeHls:<span class=\"code-string\">\"dash\"</span>===e&amp;&amp;nr.supportsNativeDash},nr.isSupported=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> cr=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r;<span class=\"code-keyword\">if</span>(r=e.call(<span class=\"code-keyword\">this</span>,i,u.default.mergeOptions(n.hls,n.vhs))||<span class=\"code-keyword\">this</span>,n.hls&amp;&amp;<span class=\"code-built_in\">Object</span>.keys(n.hls).length&amp;&amp;u.default.log.warn(<span class=\"code-string\">\"Using hls options is deprecated. Use vhs instead.\"</span>),r.logger_=ji(<span class=\"code-string\">\"VhsHandler\"</span>),i.options_&amp;&amp;i.options_.playerId){<span class=\"code-keyword\">var</span> a=u.default(i.options_.playerId);a.hasOwnProperty(<span class=\"code-string\">\"hls\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(a,<span class=\"code-string\">\"hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"player.hls is deprecated. Use player.tech().vhs instead.\"</span>),i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-player-access\"</span>}),d(r)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),a.hasOwnProperty(<span class=\"code-string\">\"vhs\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(a,<span class=\"code-string\">\"vhs\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"player.vhs is deprecated. Use player.tech().vhs instead.\"</span>),i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-player-access\"</span>}),d(r)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),a.hasOwnProperty(<span class=\"code-string\">\"dash\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(a,<span class=\"code-string\">\"dash\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"player.dash is deprecated. Use player.tech().vhs instead.\"</span>),d(r)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),r.player_=a}<span class=\"code-keyword\">if</span>(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!<span class=\"code-number\">1</span>,r.setOptions_(),r.options_.overrideNative&amp;&amp;i.overrideNativeAudioTracks&amp;&amp;i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!<span class=\"code-number\">0</span>),i.overrideNativeVideoTracks(!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(r.options_.overrideNative&amp;&amp;(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB\"</span>);<span class=\"code-keyword\">return</span> r.on(s.default,[<span class=\"code-string\">\"fullscreenchange\"</span>,<span class=\"code-string\">\"webkitfullscreenchange\"</span>,<span class=\"code-string\">\"mozfullscreenchange\"</span>,<span class=\"code-string\">\"MSFullscreenChange\"</span>],(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=s.default.fullscreenElement||s.default.webkitFullscreenElement||s.default.mozFullScreenElement||s.default.msFullscreenElement;t&amp;&amp;t.contains(r.tech_.el())&amp;&amp;r.masterPlaylistController_.smoothQualityChange_()})),r.on(r.tech_,<span class=\"code-string\">\"seeking\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_?<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_=!<span class=\"code-number\">1</span>:<span class=\"code-keyword\">this</span>.setCurrentTime(<span class=\"code-keyword\">this</span>.tech_.currentTime())})),r.on(r.tech_,<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.error()&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,<span class=\"code-string\">\"play\"</span>,r.play),r}l(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.setOptions_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.options_.withCredentials=<span class=\"code-keyword\">this</span>.options_.withCredentials||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects=!<span class=\"code-number\">1</span>!==<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects,<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions=!<span class=\"code-number\">1</span>!==<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio=<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.smoothQualityChange=<span class=\"code-keyword\">this</span>.options_.smoothQualityChange||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage?<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage:<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.customTagParsers=<span class=\"code-keyword\">this</span>.options_.customTagParsers||[],<span class=\"code-keyword\">this</span>.options_.customTagMappers=<span class=\"code-keyword\">this</span>.options_.customTagMappers||[],<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys=<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.handlePartialData=<span class=\"code-keyword\">this</span>.options_.handlePartialData||!<span class=\"code-number\">1</span>,<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.blacklistDuration&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.blacklistDuration=<span class=\"code-number\">300</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage){<span class=\"code-keyword\">var</span> t=lr();t&amp;&amp;t.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=t.bandwidth,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-bandwidth-from-local-storage\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-bandwidth-from-local-storage\"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.throughput=t.throughput,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-throughput-from-local-storage\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-throughput-from-local-storage\"</span>}))}<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=Ut.INITIAL_BANDWIDTH),<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist=<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class=\"code-keyword\">this</span>.options_.bandwidth===Ut.INITIAL_BANDWIDTH,[<span class=\"code-string\">\"withCredentials\"</span>,<span class=\"code-string\">\"useDevicePixelRatio\"</span>,<span class=\"code-string\">\"limitRenditionByPlayerDimensions\"</span>,<span class=\"code-string\">\"bandwidth\"</span>,<span class=\"code-string\">\"smoothQualityChange\"</span>,<span class=\"code-string\">\"customTagParsers\"</span>,<span class=\"code-string\">\"customTagMappers\"</span>,<span class=\"code-string\">\"handleManifestRedirects\"</span>,<span class=\"code-string\">\"cacheEncryptionKeys\"</span>,<span class=\"code-string\">\"handlePartialData\"</span>,<span class=\"code-string\">\"playlistSelector\"</span>,<span class=\"code-string\">\"initialPlaylistSelector\"</span>,<span class=\"code-string\">\"experimentalBufferBasedABR\"</span>,<span class=\"code-string\">\"liveRangeSafeTimeDelta\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])})),<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions=<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.useDevicePixelRatio=<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio},i.src=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">this</span>.setOptions_(),<span class=\"code-keyword\">this</span>.options_.src=hr(<span class=\"code-keyword\">this</span>.source_.src),<span class=\"code-keyword\">this</span>.options_.tech=<span class=\"code-keyword\">this</span>.tech_,<span class=\"code-keyword\">this</span>.options_.externVhs=nr,<span class=\"code-keyword\">this</span>.options_.sourceType=oe(t),<span class=\"code-keyword\">this</span>.options_.seekTo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.tech_.setCurrentTime(e)},<span class=\"code-keyword\">this</span>.masterPlaylistController_=<span class=\"code-keyword\">new</span> Yn(<span class=\"code-keyword\">this</span>.options_);<span class=\"code-keyword\">var</span> n=u.default.mergeOptions({<span class=\"code-attr\">liveRangeSafeTimeDelta</span>:M},<span class=\"code-keyword\">this</span>.options_,{<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.seekable()},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.media()},<span class=\"code-attr\">masterPlaylistController</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_});<span class=\"code-keyword\">this</span>.playbackWatcher_=<span class=\"code-keyword\">new</span> Jn(n),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=u.default.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> t||t.code?<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;(t={<span class=\"code-attr\">message</span>:t,<span class=\"code-attr\">code</span>:<span class=\"code-number\">3</span>}):t.code=<span class=\"code-number\">3</span>,e.error(t)}));<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.options_.experimentalBufferBasedABR?nr.movingAverageBandwidthSelector(<span class=\"code-number\">.55</span>):nr.STANDARD_PLAYLIST_SELECTOR;<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=<span class=\"code-keyword\">this</span>.selectPlaylist?<span class=\"code-keyword\">this</span>.selectPlaylist.bind(<span class=\"code-keyword\">this</span>):r.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectInitialPlaylist=nr.INITIAL_PLAYLIST_SELECTOR.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.playlists=<span class=\"code-keyword\">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class=\"code-keyword\">this</span>.mediaSource=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource,<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">selectPlaylist</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class=\"code-keyword\">this</span>)}},<span class=\"code-attr\">throughput</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class=\"code-number\">1</span>}},<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>}}},<span class=\"code-attr\">systemBandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-number\">1</span>/(<span class=\"code-keyword\">this</span>.bandwidth||<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e=<span class=\"code-keyword\">this</span>.throughput&gt;<span class=\"code-number\">0</span>?<span class=\"code-number\">1</span>/<span class=\"code-keyword\">this</span>.throughput:<span class=\"code-number\">0</span>,<span class=\"code-built_in\">Math</span>.floor(<span class=\"code-number\">1</span>/(t+e))},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{u.default.log.error(<span class=\"code-string\">'The \"systemBandwidth\" property is read-only'</span>)}}}),<span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-keyword\">this</span>.options_.bandwidth),<span class=\"code-keyword\">this</span>.options_.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.throughput=<span class=\"code-keyword\">this</span>.options_.throughput),<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>.stats,{<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.bandwidth||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequests</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequests_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsAborted</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsAborted_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsTimedout</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsTimedout_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsErrored</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsErrored_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaTransferDuration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaTransferDuration_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaBytesTransferred</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaBytesTransferred_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaSecondsLoaded</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaSecondsLoaded_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">buffered</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> W(i.tech_.buffered())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTime</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentTime()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentSource</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentSource_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTech</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.name_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">duration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.duration()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">master</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.playlists.master},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">playerDimensions</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentDimensions()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">seekable</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> W(i.tech_.seekable())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">timestamp</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Date</span>.now()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">videoPlaybackQuality</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.getVideoPlaybackQuality()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>}}),<span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"canplay\"</span>,<span class=\"code-keyword\">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class=\"code-keyword\">this</span>.masterPlaylistController_)),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.options_.useBandwidthFromLocalStorage&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!o.default.localStorage)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=lr();t=t?u.default.mergeOptions(t,e):e;<span class=\"code-keyword\">try</span>{o.default.localStorage.setItem(rr,<span class=\"code-built_in\">JSON</span>.stringify(t))}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}}({<span class=\"code-attr\">bandwidth</span>:i.bandwidth,<span class=\"code-attr\">throughput</span>:<span class=\"code-built_in\">Math</span>.round(i.throughput)})})),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t;t=(e=i).playlists,e.representations=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t&amp;&amp;t.master&amp;&amp;t.master.playlists?t.master.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Y(e)})).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Kn(e,t,t.id)})):[]}})),<span class=\"code-keyword\">this</span>.masterPlaylistController_.sourceUpdater_.on(<span class=\"code-string\">\"createdsourcebuffers\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.setupEme_()})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-keyword\">this</span>.masterPlaylistController_,<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"progress\"</span>)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-keyword\">this</span>.masterPlaylistController_,<span class=\"code-string\">\"firstplay\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_=!<span class=\"code-number\">0</span>})),<span class=\"code-keyword\">this</span>.setupQualityLevels_(),<span class=\"code-keyword\">this</span>.tech_.el()&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaSourceUrl_=o.default.URL.createObjectURL(<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource),<span class=\"code-keyword\">this</span>.tech_.src(<span class=\"code-keyword\">this</span>.mediaSourceUrl_))}},i.setupEme_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=dr({<span class=\"code-attr\">player</span>:<span class=\"code-keyword\">this</span>.player_,<span class=\"code-attr\">sourceKeySystems</span>:<span class=\"code-keyword\">this</span>.source_.keySystems,<span class=\"code-attr\">media</span>:<span class=\"code-keyword\">this</span>.playlists.media(),<span class=\"code-attr\">audioMedia</span>:t&amp;&amp;t.media()});<span class=\"code-number\">11</span>!==u.default.browser.IE_VERSION&amp;&amp;i?(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"waiting for EME key session creation\"</span>),ur({<span class=\"code-attr\">player</span>:<span class=\"code-keyword\">this</span>.player_,<span class=\"code-attr\">sourceKeySystems</span>:<span class=\"code-keyword\">this</span>.source_.keySystems,<span class=\"code-attr\">audioMedia</span>:t&amp;&amp;t.media(),<span class=\"code-attr\">mainPlaylists</span>:<span class=\"code-keyword\">this</span>.playlists.master.playlists}).then((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"created EME key session\"</span>),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.logger_(<span class=\"code-string\">\"error while creating EME key session\"</span>,t),e.player_.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Failed to initialize media keys for EME\"</span>,<span class=\"code-attr\">code</span>:<span class=\"code-number\">3</span>})}))):<span class=\"code-keyword\">this</span>.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=u.default.players[<span class=\"code-keyword\">this</span>.tech_.options_.playerId];t&amp;&amp;t.qualityLevels&amp;&amp;!<span class=\"code-keyword\">this</span>.qualityLevels_&amp;&amp;(<span class=\"code-keyword\">this</span>.qualityLevels_=t.qualityLevels(),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.addQualityLevel(e)})),ar(t,i.playlists)})),<span class=\"code-keyword\">this</span>.playlists.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{ar(e.qualityLevels_,e.playlists)})))},t.version=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-string\">\"@videojs/http-streaming\"</span>:ir,<span class=\"code-string\">\"mux.js\"</span>:<span class=\"code-string\">\"5.9.1\"</span>,<span class=\"code-string\">\"mpd-parser\"</span>:<span class=\"code-string\">\"0.15.2\"</span>,<span class=\"code-string\">\"m3u8-parser\"</span>:<span class=\"code-string\">\"4.5.2\"</span>,<span class=\"code-string\">\"aes-decrypter\"</span>:<span class=\"code-string\">\"3.1.2\"</span>}},i.version=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.constructor.version()},i.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> Un.canChangeType()},i.play=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.play()},i.setCurrentTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.setCurrentTime(e)},i.duration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.duration()},i.seekable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.seekable()},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.playbackWatcher_&amp;&amp;<span class=\"code-keyword\">this</span>.playbackWatcher_.dispose(),<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.dispose(),<span class=\"code-keyword\">this</span>.qualityLevels_&amp;&amp;<span class=\"code-keyword\">this</span>.qualityLevels_.dispose(),<span class=\"code-keyword\">this</span>.player_&amp;&amp;(<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.vhs,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.dash,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.hls),<span class=\"code-keyword\">this</span>.tech_&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.vhs&amp;&amp;<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.tech_.vhs,<span class=\"code-keyword\">this</span>.tech_&amp;&amp;<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.tech_.hls,<span class=\"code-keyword\">this</span>.mediaSourceUrl_&amp;&amp;o.default.URL.revokeObjectURL&amp;&amp;(o.default.URL.revokeObjectURL(<span class=\"code-keyword\">this</span>.mediaSourceUrl_),<span class=\"code-keyword\">this</span>.mediaSourceUrl_=<span class=\"code-literal\">null</span>),e.prototype.dispose.call(<span class=\"code-keyword\">this</span>)},i.convertToProgramTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.time,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:i,r=e.callback;<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"getProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(!t||<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"getProgramTime: playlist and time must be provided\"</span>});<span class=\"code-keyword\">var</span> a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);<span class=\"code-keyword\">var</span> a=t.segments[t.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e&gt;n){<span class=\"code-keyword\">if</span>(e&gt;n+<span class=\"code-number\">.25</span>*a.duration)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;i=a}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segment</span>:i,<span class=\"code-attr\">estimatedStart</span>:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,<span class=\"code-attr\">type</span>:i.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>}}(n,t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"valid programTime was not found\"</span>});<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===a.type)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Accurate programTime could not be determined. Please seek to e.seekTime and try again\"</span>,<span class=\"code-attr\">seekTime</span>:a.estimatedStart});<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">mediaSeconds</span>:n},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t.dateTimeObject.getTime()+<span class=\"code-number\">1e3</span>*n)}(n,a.segment);<span class=\"code-keyword\">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class=\"code-literal\">null</span>,s)}({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">time</span>:e,<span class=\"code-attr\">callback</span>:t})},i.seekToProgramTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">2</span>),ge({<span class=\"code-attr\">programTime</span>:e,<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">retryCount</span>:n,<span class=\"code-attr\">pauseAfterSeek</span>:i,<span class=\"code-attr\">seekTo</span>:<span class=\"code-keyword\">this</span>.options_.seekTo,<span class=\"code-attr\">tech</span>:<span class=\"code-keyword\">this</span>.options_.tech,<span class=\"code-attr\">callback</span>:t})},t}(u.default.getComponent(<span class=\"code-string\">\"Component\"</span>)),fr={<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"videojs-http-streaming\"</span>,<span class=\"code-attr\">VERSION</span>:ir,<span class=\"code-attr\">canHandleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=u.default.mergeOptions(u.default.options,t);<span class=\"code-keyword\">return</span> fr.canPlayType(e.type,i)},<span class=\"code-attr\">handleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={});<span class=\"code-keyword\">var</span> n=u.default.mergeOptions(u.default.options,i);<span class=\"code-keyword\">return</span> t.vhs=<span class=\"code-keyword\">new</span> cr(e,t,n),u.default.hasOwnProperty(<span class=\"code-string\">\"hls\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(t,<span class=\"code-string\">\"hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"player.tech().hls is deprecated. Use player.tech().vhs instead.\"</span>),t.vhs},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),t.vhs.xhr=ne(),t.vhs.src(e.src,e.type),t.vhs},<span class=\"code-attr\">canPlayType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=u.default.mergeOptions(u.default.options,t).vhs.overrideNative,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?!u.default.browser.IS_ANY_SAFARI:i,r=oe(e);<span class=\"code-keyword\">return</span>!r||nr.supportsTypeNatively(r)&amp;&amp;!n?<span class=\"code-string\">\"\"</span>:<span class=\"code-string\">\"maybe\"</span>}};Vi(<span class=\"code-string\">\"avc1.4d400d,mp4a.40.2\"</span>)&amp;&amp;u.default.getTech(<span class=\"code-string\">\"Html5\"</span>).registerSourceHandler(fr,<span class=\"code-number\">0</span>),u.default.VhsHandler=cr,<span class=\"code-built_in\">Object</span>.defineProperty(u.default,<span class=\"code-string\">\"HlsHandler\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.\"</span>),cr},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),u.default.VhsSourceHandler=fr,<span class=\"code-built_in\">Object</span>.defineProperty(u.default,<span class=\"code-string\">\"HlsSourceHandler\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.\"</span>),fr},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),u.default.Vhs=nr,<span class=\"code-built_in\">Object</span>.defineProperty(u.default,<span class=\"code-string\">\"Hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> u.default.log.warn(<span class=\"code-string\">\"videojs.Hls is deprecated. Use videojs.Vhs instead.\"</span>),nr},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),u.default.use||(u.default.registerComponent(<span class=\"code-string\">\"Hls\"</span>,nr),u.default.registerComponent(<span class=\"code-string\">\"Vhs\"</span>,nr)),u.default.options.vhs=u.default.options.vhs||{},u.default.options.hls=u.default.options.hls||{},u.default.registerPlugin?u.default.registerPlugin(<span class=\"code-string\">\"reloadSourceOnError\"</span>,tr):u.default.plugin(<span class=\"code-string\">\"reloadSourceOnError\"</span>,tr),e.LOCAL_STORAGE_KEY=rr,e.Vhs=nr,e.VhsHandler=cr,e.VhsSourceHandler=fr,e.emeKeySystems=sr,e.expandDataUri=hr,e.getAllPsshKeySystemsOptions=or,e.setupEmeOptions=dr,e.simpleTypeFromSourceType=oe,e.waitForKeySessionCreation=ur,<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"__esModule\"</span>,{<span class=\"code-attr\">value</span>:!<span class=\"code-number\">0</span>})}));\n",""]}}}</script></head><body><div id="root"><style data-emotion-css="gtfibm">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;overflow-wrap:break-word;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="i51og3">.css-i51og3{margin-top:2rem;}</style><header class="css-i51og3"><style data-emotion-css="1y7u1xh">.css-1y7u1xh{text-align:center;font-size:3rem;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}</style><h1 class="css-1y7u1xh"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header></div><div class="css-1cfuj1t"><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="1dlpvgi">.css-1dlpvgi{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;word-break:break-all;}</style><h1 class="css-1dlpvgi"><nav><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/@videojs/http-streaming@2.5.0/" class="css-xt128v">@videojs/http-streaming</a><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><a href="/browse/@videojs/http-streaming@2.5.0/dist/" class="css-xt128v">dist</a><span class="css-lllnmq">/</span><strong>videojs-http-streaming.min.js</strong></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.1.0">0.1.0</option><option value="0.2.0">0.2.0</option><option value="0.2.1">0.2.1</option><option value="0.3.0">0.3.0</option><option value="0.3.1">0.3.1</option><option value="0.4.0">0.4.0</option><option value="0.5.0">0.5.0</option><option value="0.5.1">0.5.1</option><option value="0.5.2">0.5.2</option><option value="0.5.3">0.5.3</option><option value="0.6.1">0.6.1</option><option value="0.7.0">0.7.0</option><option value="0.7.1">0.7.1</option><option value="0.7.2">0.7.2</option><option value="0.8.0">0.8.0</option><option value="0.9.0">0.9.0</option><option value="1.0.0">1.0.0</option><option value="1.0.1">1.0.1</option><option value="1.0.2">1.0.2</option><option value="1.1.0">1.1.0</option><option value="1.2.0">1.2.0</option><option value="1.2.1">1.2.1</option><option value="1.2.2">1.2.2</option><option value="1.2.3">1.2.3</option><option value="1.2.4">1.2.4</option><option value="1.2.5">1.2.5</option><option value="1.2.6">1.2.6</option><option value="1.3.0">1.3.0</option><option value="1.3.1">1.3.1</option><option value="1.4.0">1.4.0</option><option value="1.4.1">1.4.1</option><option value="1.4.2">1.4.2</option><option value="1.5.0">1.5.0</option><option value="1.5.1">1.5.1</option><option value="1.6.0">1.6.0</option><option value="1.7.0">1.7.0</option><option value="1.8.0">1.8.0</option><option value="1.9.0">1.9.0</option><option value="1.9.1">1.9.1</option><option value="1.9.2">1.9.2</option><option value="1.9.3">1.9.3</option><option value="1.10.0">1.10.0</option><option value="1.10.1">1.10.1</option><option value="1.10.2">1.10.2</option><option value="1.10.3-alpha.0">1.10.3-alpha.0</option><option value="1.10.3">1.10.3</option><option value="1.10.4">1.10.4</option><option value="1.10.5-0">1.10.5-0</option><option value="1.10.5-1">1.10.5-1</option><option value="1.10.5">1.10.5</option><option value="1.10.6">1.10.6</option><option value="1.11.0-0">1.11.0-0</option><option value="1.11.0-alpha.0">1.11.0-alpha.0</option><option value="1.11.0-alpha.1">1.11.0-alpha.1</option><option value="1.11.0">1.11.0</option><option value="1.11.1">1.11.1</option><option value="1.11.2">1.11.2</option><option value="1.11.3">1.11.3</option><option value="1.12.0">1.12.0</option><option value="1.12.1">1.12.1</option><option value="1.12.2">1.12.2</option><option value="1.12.3">1.12.3</option><option value="1.13.0">1.13.0</option><option value="1.13.1">1.13.1</option><option value="1.13.2">1.13.2</option><option value="1.13.3">1.13.3</option><option value="1.13.4">1.13.4</option><option value="2.0.0-rc.0">2.0.0-rc.0</option><option value="2.0.0-rc.1">2.0.0-rc.1</option><option value="2.0.0-rc.2">2.0.0-rc.2</option><option value="2.0.0">2.0.0</option><option value="2.1.0">2.1.0</option><option value="2.2.0">2.2.0</option><option value="2.2.1">2.2.1</option><option value="2.2.2">2.2.2</option><option value="2.2.3">2.2.3</option><option value="2.2.4">2.2.4</option><option value="2.3.0">2.3.0</option><option value="2.3.1">2.3.1</option><option value="2.3.2">2.3.2</option><option value="2.4.0">2.4.0</option><option value="2.4.1">2.4.1</option><option value="2.4.2">2.4.2</option><option selected="" value="2.5.0">2.5.0</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>290 kB</span><span>JavaScript</span><span><style data-emotion-css="18x593j">.css-18x593j{display:inline-block;margin-left:8px;padding:2px 8px;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-18x593j:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-18x593j:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a href="/@videojs/http-streaming@2.5.0/dist/videojs-http-streaming.min.js" class="css-18x593j">View Raw</a></span></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code><span class="code-comment">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code>!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> exports&amp;&amp;<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">module</span>?t(exports,<span class="code-built_in">require</span>(<span class="code-string">"global/document"</span>),<span class="code-built_in">require</span>(<span class="code-string">"global/window"</span>),<span class="code-built_in">require</span>(<span class="code-string">"video.js"</span>),<span class="code-built_in">require</span>(<span class="code-string">"xmldom"</span>)):<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> define&amp;&amp;define.amd?define([<span class="code-string">"exports"</span>,<span class="code-string">"global/document"</span>,<span class="code-string">"global/window"</span>,<span class="code-string">"video.js"</span>,<span class="code-string">"xmldom"</span>],t):t((e=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> globalThis?globalThis:e||self).httpStreaming={},e.document,e.window,e.videojs,e.window)}(<span class="code-keyword">this</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-string">"use strict"</span>;<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">a</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-string">"default"</span><span class="code-keyword">in</span> e?e:{<span class="code-attr">default</span>:e}}<span class="code-keyword">var</span> s=a(t),o=a(i),u=a(n),d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span> e},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.prototype=<span class="code-built_in">Object</span>.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">h</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e(i={<span class="code-attr">path</span>:t,<span class="code-attr">exports</span>:{},<span class="code-attr">require</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Dynamic requires are not currently supported by @rollup/plugin-commonjs"</span>)}(<span class="code-literal">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class="code-keyword">var</span> c=h((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s;i=<span class="code-regexp">/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/</span>,n=<span class="code-regexp">/^([^\/?#]*)(.*)$/</span>,r=<span class="code-regexp">/(?:\/|^)\.(?=\/)/g</span>,a=<span class="code-regexp">/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g</span>,s={<span class="code-attr">buildAbsoluteURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class="code-keyword">if</span>(!i.alwaysNormalize)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> r=s.parseURL(e);<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class="code-keyword">var</span> a=s.parseURL(t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse relative URL."</span>);<span class="code-keyword">if</span>(a.scheme)<span class="code-keyword">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class="code-keyword">var</span> o=s.parseURL(e);<span class="code-keyword">if</span>(!o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class="code-string">"/"</span>!==o.path[<span class="code-number">0</span>]){<span class="code-keyword">var</span> u=n.exec(o.path);o.netLoc=u[<span class="code-number">1</span>],o.path=u[<span class="code-number">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class="code-string">"/"</span>);<span class="code-keyword">var</span> d={<span class="code-attr">scheme</span>:o.scheme,<span class="code-attr">netLoc</span>:a.netLoc,<span class="code-attr">path</span>:<span class="code-literal">null</span>,<span class="code-attr">params</span>:a.params,<span class="code-attr">query</span>:a.query,<span class="code-attr">fragment</span>:a.fragment};<span class="code-keyword">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class="code-string">"/"</span>!==a.path[<span class="code-number">0</span>]))<span class="code-keyword">if</span>(a.path){<span class="code-keyword">var</span> l=o.path,h=l.substring(<span class="code-number">0</span>,l.lastIndexOf(<span class="code-string">"/"</span>)+<span class="code-number">1</span>)+a.path;d.path=s.normalizePath(h)}<span class="code-keyword">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class="code-keyword">return</span> <span class="code-literal">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class="code-attr">parseURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.exec(e);<span class="code-keyword">return</span> t?{<span class="code-attr">scheme</span>:t[<span class="code-number">1</span>]||<span class="code-string">""</span>,<span class="code-attr">netLoc</span>:t[<span class="code-number">2</span>]||<span class="code-string">""</span>,<span class="code-attr">path</span>:t[<span class="code-number">3</span>]||<span class="code-string">""</span>,<span class="code-attr">params</span>:t[<span class="code-number">4</span>]||<span class="code-string">""</span>,<span class="code-attr">query</span>:t[<span class="code-number">5</span>]||<span class="code-string">""</span>,<span class="code-attr">fragment</span>:t[<span class="code-number">6</span>]||<span class="code-string">""</span>}:<span class="code-literal">null</span>},<span class="code-attr">normalizePath</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(e=e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>).replace(r,<span class="code-string">""</span>);e.length!==(e=e.replace(a,<span class="code-string">""</span>)).length;);<span class="code-keyword">return</span> e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>)},<span class="code-attr">buildURLFromParts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^[a-z]+:/i</span>.test(t)?t:(<span class="code-regexp">/\/\//i</span>.test(e)||(e=c.buildAbsoluteURL(o.default.location&amp;&amp;o.default.location.href||<span class="code-string">""</span>,e)),c.buildAbsoluteURL(e,t))},m=f,p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;i&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t},g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e]=<span class="code-keyword">this</span>.listeners[e].slice(<span class="code-number">0</span>),<span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},t.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},e}(),y=h((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.exports=t=<span class="code-built_in">Object</span>.assign||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++){<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>[t];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-built_in">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class="code-keyword">return</span> e},t.apply(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>)}e.exports=t}));<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">v</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=(t=e,o.default.atob?o.default.atob(t):Buffer.from(t,<span class="code-string">"base64"</span>).toString(<span class="code-string">"binary"</span>)),n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.length),r=<span class="code-number">0</span>;r&lt;i.length;r++)n[r]=i.charCodeAt(r);<span class="code-keyword">return</span> n}
</code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code><span class="code-comment">/*! @name m3u8-parser @version 4.5.2 @license Apache-2.0 */</span><span class="code-keyword">var</span> _=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).buffer=<span class="code-string">""</span>,t}<span class="code-keyword">return</span> l(t,e),t.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.buffer+=e,t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>);t&gt;<span class="code-number">-1</span>;t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>))<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.buffer.substring(<span class="code-number">0</span>,t)),<span class="code-keyword">this</span>.buffer=<span class="code-keyword">this</span>.buffer.substring(t+<span class="code-number">1</span>)},t}(g),b=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=e.split(<span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">'(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class="code-string">""</span>!==i[r]&amp;&amp;((t=<span class="code-regexp">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class="code-number">1</span>))[<span class="code-number">0</span>]=t[<span class="code-number">0</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^['"](.*)['"]$/g</span>,<span class="code-string">"$1"</span>),n[t[<span class="code-number">0</span>]]=t[<span class="code-number">1</span>]);<span class="code-keyword">return</span> n},T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).customParsers=[],t.tagMappers=[],t}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>;<span class="code-number">0</span>!==(e=e.trim()).length&amp;&amp;(<span class="code-string">"#"</span>===e[<span class="code-number">0</span>]?<span class="code-keyword">this</span>.tagMappers.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i(e);<span class="code-keyword">return</span> n===e?t:t.concat([n])}),[e]).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.customParsers.length;r++)<span class="code-keyword">if</span>(n.customParsers[r].call(n,e))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.indexOf(<span class="code-string">"#EXT"</span>))<span class="code-keyword">if</span>(e=e.replace(<span class="code-string">"\r"</span>,<span class="code-string">""</span>),t=<span class="code-regexp">/^#EXTM3U/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"m3u"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXTINF:?([0-9\.]*)?,?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"inf"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseFloat</span>(t[<span class="code-number">1</span>])),t[<span class="code-number">2</span>]&amp;&amp;(i.title=t[<span class="code-number">2</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"targetduration"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"totalduration"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"version"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.version=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"playlist-type"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.playlistType=t[<span class="code-number">1</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"byterange"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.length=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),t[<span class="code-number">2</span>]&amp;&amp;(i.offset=<span class="code-built_in">parseInt</span>(t[<span class="code-number">2</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"allow-cache"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.allowed=!<span class="code-regexp">/NO/</span>.test(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"map"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">var</span> a=b(t[<span class="code-number">1</span>]);<span class="code-keyword">if</span>(a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE){<span class="code-keyword">var</span> s=a.BYTERANGE.split(<span class="code-string">"@"</span>),o=s[<span class="code-number">0</span>],u=s[<span class="code-number">1</span>];i.byterange={},o&amp;&amp;(i.byterange.length=<span class="code-built_in">parseInt</span>(o,<span class="code-number">10</span>)),u&amp;&amp;(i.byterange.offset=<span class="code-built_in">parseInt</span>(u,<span class="code-number">10</span>))}}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"stream-inf"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">if</span>(i.attributes=b(t[<span class="code-number">1</span>]),i.attributes.RESOLUTION){<span class="code-keyword">var</span> d=i.attributes.RESOLUTION.split(<span class="code-string">"x"</span>),l={};d[<span class="code-number">0</span>]&amp;&amp;(l.width=<span class="code-built_in">parseInt</span>(d[<span class="code-number">0</span>],<span class="code-number">10</span>)),d[<span class="code-number">1</span>]&amp;&amp;(l.height=<span class="code-built_in">parseInt</span>(d[<span class="code-number">1</span>],<span class="code-number">10</span>)),i.attributes.RESOLUTION=l}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class="code-built_in">parseInt</span>(i.attributes.BANDWIDTH,<span class="code-number">10</span>)),i.attributes[<span class="code-string">"PROGRAM-ID"</span>]&amp;&amp;(i.attributes[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-built_in">parseInt</span>(i.attributes[<span class="code-string">"PROGRAM-ID"</span>],<span class="code-number">10</span>))}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=b(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"endlist"</span>});<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"program-date-time"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.dateTimeString=t[<span class="code-number">1</span>],i.dateTimeObject=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"key"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=b(t[<span class="code-number">1</span>]),i.attributes.IV&amp;&amp;(<span class="code-string">"0x"</span>===i.attributes.IV.substring(<span class="code-number">0</span>,<span class="code-number">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class="code-number">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class="code-regexp">/.{8}/g</span>),i.attributes.IV[<span class="code-number">0</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">0</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">1</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">1</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">2</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">2</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">3</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">3</span>],<span class="code-number">16</span>),i.attributes.IV=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.attributes.IV))),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"start"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=b(t[<span class="code-number">1</span>]),i.attributes[<span class="code-string">"TIME-OFFSET"</span>]=<span class="code-built_in">parseFloat</span>(i.attributes[<span class="code-string">"TIME-OFFSET"</span>]),i.attributes.PRECISE=<span class="code-regexp">/YES/</span>.test(i.attributes.PRECISE)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out-cont"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-in"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">data</span>:e.slice(<span class="code-number">4</span>)})}}}<span class="code-keyword">else</span> n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"comment"</span>,<span class="code-attr">text</span>:e.slice(<span class="code-number">1</span>)})})):<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"uri"</span>,<span class="code-attr">uri</span>:e}))},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> r&amp;&amp;(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}),<span class="code-keyword">this</span>.customParsers.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(i.exec(e))<span class="code-keyword">return</span> t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"custom"</span>,<span class="code-attr">data</span>:r(e),<span class="code-attr">customType</span>:n,<span class="code-attr">segment</span>:a}),!<span class="code-number">0</span>}))},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.expression,i=e.map;<span class="code-keyword">this</span>.tagMappers.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.test(e)?i(e):e}))},t}(g),S=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).lineStream=<span class="code-keyword">new</span> _,t.parseStream=<span class="code-keyword">new</span> T,t.lineStream.pipe(t.parseStream);<span class="code-keyword">var</span> i,n,r=d(t),a=[],s={},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},u={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},l=<span class="code-number">0</span>;t.manifest={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[]};<span class="code-keyword">var</span> h=<span class="code-number">0</span>;<span class="code-keyword">return</span> t.parseStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,d;({<span class="code-attr">tag</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{({<span class="code-string">"allow-cache"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.allowCache=e.allowed,<span class="code-string">"allowed"</span><span class="code-keyword">in</span> e||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting allowCache to YES"</span>}),<span class="code-keyword">this</span>.manifest.allowCache=!<span class="code-number">0</span>)},<span class="code-attr">byterange</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-string">"length"</span><span class="code-keyword">in</span> e&amp;&amp;(s.byterange=t,t.length=e.length,<span class="code-string">"offset"</span><span class="code-keyword">in</span> e||(e.offset=h)),<span class="code-string">"offset"</span><span class="code-keyword">in</span> e&amp;&amp;(s.byterange=t,t.offset=e.offset),h=t.offset+t.length},<span class="code-attr">endlist</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.endList=!<span class="code-number">0</span>},<span class="code-attr">inf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"mediaSequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.mediaSequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting media sequence to zero"</span>})),<span class="code-string">"discontinuitySequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.discontinuitySequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting discontinuity sequence to zero"</span>})),e.duration&gt;<span class="code-number">0</span>&amp;&amp;(s.duration=e.duration),<span class="code-number">0</span>===e.duration&amp;&amp;(s.duration=<span class="code-number">.01</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"updating zero segment duration to a small value"</span>})),<span class="code-keyword">this</span>.manifest.segments=a},<span class="code-attr">key</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(e.attributes)<span class="code-keyword">if</span>(<span class="code-string">"NONE"</span>!==e.attributes.METHOD)<span class="code-keyword">if</span>(e.attributes.URI){<span class="code-keyword">if</span>(<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>===e.attributes.KEYFORMAT)<span class="code-keyword">return</span><span class="code-number">-1</span>===[<span class="code-string">"SAMPLE-AES"</span>,<span class="code-string">"SAMPLE-AES-CTR"</span>,<span class="code-string">"SAMPLE-AES-CENC"</span>].indexOf(e.attributes.METHOD)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key method provided for Widevine"</span>}):(<span class="code-string">"SAMPLE-AES-CENC"</span>===e.attributes.METHOD&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"</span>}),<span class="code-string">"data:text/plain;base64,"</span>!==e.attributes.URI.substring(<span class="code-number">0</span>,<span class="code-number">23</span>)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key URI provided for Widevine"</span>}):e.attributes.KEYID&amp;&amp;<span class="code-string">"0x"</span>===e.attributes.KEYID.substring(<span class="code-number">0</span>,<span class="code-number">2</span>)?<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.manifest.contentProtection={<span class="code-string">"com.widevine.alpha"</span>:{<span class="code-attr">attributes</span>:{<span class="code-attr">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class="code-attr">keyId</span>:e.attributes.KEYID.substring(<span class="code-number">2</span>)},<span class="code-attr">pssh</span>:v(e.attributes.URI.split(<span class="code-string">","</span>)[<span class="code-number">1</span>])}}):<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key ID provided for Widevine"</span>}));e.attributes.METHOD||<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting key method to AES-128"</span>}),n={<span class="code-attr">method</span>:e.attributes.METHOD||<span class="code-string">"AES-128"</span>,<span class="code-attr">uri</span>:e.attributes.URI},<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without URI"</span>});<span class="code-keyword">else</span> n=<span class="code-literal">null</span>;<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without attribute list"</span>})},<span class="code-string">"media-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?<span class="code-keyword">this</span>.manifest.mediaSequence=e.number:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid media sequence: "</span>+e.number})},<span class="code-string">"discontinuity-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?(<span class="code-keyword">this</span>.manifest.discontinuitySequence=e.number,l=e.number):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid discontinuity sequence: "</span>+e.number})},<span class="code-string">"playlist-type"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class="code-keyword">this</span>.manifest.playlistType=e.playlistType:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring unknown playlist type: "</span>+e.playlist})},<span class="code-attr">map</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange)},<span class="code-string">"stream-inf"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.playlists=a,<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),y(s.attributes,e.attributes)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring empty stream-inf attributes"</span>})},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||u,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class="code-string">"GROUP-ID"</span>]&amp;&amp;e.attributes.NAME){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]||{},t=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]],(d={<span class="code-attr">default</span>:<span class="code-regexp">/yes/i</span>.test(e.attributes.DEFAULT)}).default?d.autoselect=!<span class="code-number">0</span>:d.autoselect=<span class="code-regexp">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(d.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(d.uri=e.attributes.URI),e.attributes[<span class="code-string">"INSTREAM-ID"</span>]&amp;&amp;(d.instreamId=e.attributes[<span class="code-string">"INSTREAM-ID"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(d.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(d.forced=<span class="code-regexp">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=d}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring incomplete or missing media group"</span>})},<span class="code-attr">discontinuity</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{l+=<span class="code-number">1</span>,s.discontinuity=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.manifest.discontinuityStarts.push(a.length)},<span class="code-string">"program-date-time"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.manifest.dateTimeString&amp;&amp;(<span class="code-keyword">this</span>.manifest.dateTimeString=e.dateTimeString,<span class="code-keyword">this</span>.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},<span class="code-attr">targetduration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{!<span class="code-built_in">isFinite</span>(e.duration)||e.duration&lt;<span class="code-number">0</span>?<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid target duration: "</span>+e.duration}):<span class="code-keyword">this</span>.manifest.targetDuration=e.duration},<span class="code-attr">totalduration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{!<span class="code-built_in">isFinite</span>(e.duration)||e.duration&lt;<span class="code-number">0</span>?<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid total duration: "</span>+e.duration}):<span class="code-keyword">this</span>.manifest.totalDuration=e.duration},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.attributes&amp;&amp;!<span class="code-built_in">isNaN</span>(e.attributes[<span class="code-string">"TIME-OFFSET"</span>])?<span class="code-keyword">this</span>.manifest.start={<span class="code-attr">timeOffset</span>:e.attributes[<span class="code-string">"TIME-OFFSET"</span>],<span class="code-attr">precise</span>:e.attributes.PRECISE}:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring start declaration without appropriate attribute list"</span>})},<span class="code-string">"cue-out"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueOut=e.data},<span class="code-string">"cue-out-cont"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueOutCont=e.data},<span class="code-string">"cue-in"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.cueIn=e.data}}[e.tagType]||o).call(r)},<span class="code-attr">uri</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s.uri=e.uri,a.push(s),<span class="code-keyword">this</span>.manifest.targetDuration&amp;&amp;!(<span class="code-string">"duration"</span><span class="code-keyword">in</span> s)&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting segment duration to the target duration"</span>}),s.duration=<span class="code-keyword">this</span>.manifest.targetDuration),n&amp;&amp;(s.key=n),s.timeline=l,i&amp;&amp;(s.map=i),s={}},<span class="code-attr">comment</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">custom</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(<span class="code-keyword">this</span>.manifest.custom=<span class="code-keyword">this</span>.manifest.custom||{},<span class="code-keyword">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.lineStream.push(e)},i.end=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.lineStream.push(<span class="code-string">"\n"</span>)},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addTagMapper(e)},t}(g),I=u.default.log,w=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"-"</span>+t},L=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.manifestString,i=e.customTagParsers,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?[]:i,r=e.customTagMappers,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?[]:r,s=<span class="code-keyword">new</span> S;<span class="code-keyword">return</span> n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> s.addParser(e)})),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> s.addTagMapper(e)})),s.push(t),s.end(),s.manifest},k=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> e.mediaGroups[i])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> e.mediaGroups[i][n]){<span class="code-keyword">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}}))},A=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.uri,n=e.id;t.id=n,i&amp;&amp;(t.uri=i),t.attributes=t.attributes||{}},E=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.uri=t;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.playlists.length;i++)<span class="code-keyword">if</span>(!e.playlists[i].uri){<span class="code-keyword">var</span> n=<span class="code-string">"placeholder-uri-"</span>+i;e.playlists[i].uri=n}k(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(t.playlists&amp;&amp;t.playlists.length&amp;&amp;!t.playlists[<span class="code-number">0</span>].uri){<span class="code-keyword">var</span> a=<span class="code-string">"placeholder-uri-"</span>+i+<span class="code-string">"-"</span>+n+<span class="code-string">"-"</span>+r,s=w(<span class="code-number">0</span>,a);t.playlists[<span class="code-number">0</span>].uri=a,t.playlists[<span class="code-number">0</span>].id=s,e.playlists[s]=t.playlists[<span class="code-number">0</span>],e.playlists[a]=t.playlists[<span class="code-number">0</span>]}})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=e.playlists.length;t--;){<span class="code-keyword">var</span> i=e.playlists[t];A({<span class="code-attr">playlist</span>:i,<span class="code-attr">id</span>:w(t,i.uri)}),i.resolvedUri=m(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||I.warn(<span class="code-string">"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."</span>)}}(e),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{k(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=m(e.uri,t.uri))}))}(e)},P=u.default.mergeOptions,C=u.default.EventTarget,U=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.resolvedUri||(e.resolvedUri=m(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=m(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=m(t,e.map.uri))},O=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=P(e,{}),n=i.playlists[t.id];<span class="code-keyword">if</span>(!n)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(n.segments&amp;&amp;t.segments&amp;&amp;n.segments.length===t.segments.length&amp;&amp;n.endList===t.endList&amp;&amp;n.mediaSequence===t.mediaSequence)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> r=P(n,t);n.segments&amp;&amp;(r.segments=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t.slice();i=i||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.min(e.length,t.length+i),a=i;a&lt;r;a++)n[a-i]=P(e[a],n[a-i]);<span class="code-keyword">return</span> n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{U(e,r.resolvedUri)}));<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;i.playlists.length;a++)i.playlists[a].id===t.id&amp;&amp;(i.playlists[a]=r);<span class="code-keyword">return</span> i.playlists[t.id]=r,i.playlists[t.uri]=r,i},D=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.segments[e.segments.length<span class="code-number">-1</span>];<span class="code-keyword">return</span> t&amp;&amp;i&amp;&amp;i.duration?<span class="code-number">1e3</span>*i.duration:<span class="code-number">500</span>*(e.targetDuration||<span class="code-number">10</span>)},x=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> r;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n={}),r=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or object is required"</span>);<span class="code-keyword">var</span> a=n,s=a.withCredentials,o=<span class="code-keyword">void</span> <span class="code-number">0</span>!==s&amp;&amp;s,u=a.handleManifestRedirects,d=<span class="code-keyword">void</span> <span class="code-number">0</span>!==u&amp;&amp;u;r.src=t,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=d;<span class="code-keyword">var</span> l=i.options_;<span class="code-keyword">return</span> r.customTagParsers=l&amp;&amp;l.customTagParsers||[],r.customTagMappers=l&amp;&amp;l.customTagMappers||[],r.state=<span class="code-string">"HAVE_NOTHING"</span>,r.on(<span class="code-string">"mediaupdatetimeout"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"HAVE_METADATA"</span>===r.state&amp;&amp;(r.state=<span class="code-string">"HAVE_CURRENT_METADATA"</span>,r.request=r.vhs_.xhr({<span class="code-attr">uri</span>:m(r.master.uri,r.media().uri),<span class="code-attr">withCredentials</span>:r.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(r.request)<span class="code-keyword">return</span> e?r.playlistRequestError(r.request,r.media(),<span class="code-string">"HAVE_METADATA"</span>):<span class="code-keyword">void</span> r.haveMetadata({<span class="code-attr">playlistString</span>:r.request.responseText,<span class="code-attr">url</span>:r.media().uri,<span class="code-attr">id</span>:r.media().id})})))})),r}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.playlistRequestError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t.uri,r=t.id;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,i&amp;&amp;(<span class="code-keyword">this</span>.state=i),<span class="code-keyword">this</span>.error={<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.master.playlists[r],<span class="code-attr">status</span>:e.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+n+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:e.responseText,<span class="code-attr">code</span>:e.status&gt;=<span class="code-number">500</span>?<span class="code-number">4</span>:<span class="code-number">2</span>},<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)},i.haveMetadata=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.playlistString,n=e.playlistObject,r=e.url,a=e.id;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>;<span class="code-keyword">var</span> s=n||L({<span class="code-attr">manifestString</span>:i,<span class="code-attr">customTagParsers</span>:<span class="code-keyword">this</span>.customTagParsers,<span class="code-attr">customTagMappers</span>:<span class="code-keyword">this</span>.customTagMappers});s.lastRequest=<span class="code-built_in">Date</span>.now(),A({<span class="code-attr">playlist</span>:s,<span class="code-attr">uri</span>:r,<span class="code-attr">id</span>:a});<span class="code-keyword">var</span> u=O(<span class="code-keyword">this</span>.master,s);<span class="code-keyword">this</span>.targetDuration=s.targetDuration,u?(<span class="code-keyword">this</span>.master=u,<span class="code-keyword">this</span>.media_=<span class="code-keyword">this</span>.master.playlists[a]):<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>),<span class="code-keyword">this</span>.media().endList||(o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger(<span class="code-string">"mediaupdatetimeout"</span>)}),D(<span class="code-keyword">this</span>.media(),!!u))),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.stopRequest(),o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout),<span class="code-keyword">this</span>.off()},i.stopRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.master.playlists[e]}<span class="code-keyword">if</span>(o.default.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout),t){<span class="code-keyword">var</span> n=e.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>||<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.finalRenditionTimeout=o.default.setTimeout(<span class="code-keyword">this</span>.media.bind(<span class="code-keyword">this</span>,e,!<span class="code-number">1</span>),n)}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.state,a=!<span class="code-keyword">this</span>.media_||e.id!==<span class="code-keyword">this</span>.media_.id;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.master.playlists[e.id].endList||e.endList&amp;&amp;e.segments.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request&amp;&amp;(<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(a&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-string">"HAVE_MASTER"</span>===r?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));<span class="code-keyword">if</span>(a){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"SWITCHING_MEDIA"</span>,<span class="code-keyword">this</span>.request){<span class="code-keyword">if</span>(e.resolvedUri===<span class="code-keyword">this</span>.request.url)<span class="code-keyword">return</span>;<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>}<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:e.resolvedUri,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,n</span>)</span>{<span class="code-keyword">if</span>(i.request){<span class="code-keyword">if</span>(e.lastRequest=<span class="code-built_in">Date</span>.now(),e.resolvedUri=p(i.handleManifestRedirects,e.resolvedUri,n),t)<span class="code-keyword">return</span> i.playlistRequestError(i.request,e,r);i.haveMetadata({<span class="code-attr">playlistString</span>:n.responseText,<span class="code-attr">url</span>:e.uri,<span class="code-attr">id</span>:e.id}),<span class="code-string">"HAVE_MASTER"</span>===r?i.trigger(<span class="code-string">"loadedmetadata"</span>):i.trigger(<span class="code-string">"mediachange"</span>)}}))}}},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>),<span class="code-string">"SWITCHING_MEDIA"</span>===<span class="code-keyword">this</span>.state?<span class="code-keyword">this</span>.media_?<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>:<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>:<span class="code-string">"HAVE_CURRENT_METADATA"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?i.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.load()}),n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?i&amp;&amp;!i.endList?<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediaupdatetimeout"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()},i.start=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.src)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.src.uri||(<span class="code-keyword">this</span>.src.uri=o.default.location.href),<span class="code-keyword">this</span>.src.resolvedUri=<span class="code-keyword">this</span>.src.uri,<span class="code-keyword">void</span> setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.setupInitialPlaylist(e.src)}),<span class="code-number">0</span>);<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.src,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request){<span class="code-keyword">if</span>(e.request=<span class="code-literal">null</span>,t)<span class="code-keyword">return</span> e.error={<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+e.src+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:i.responseText,<span class="code-attr">code</span>:<span class="code-number">2</span>},<span class="code-string">"HAVE_NOTHING"</span>===e.state&amp;&amp;(e.started=!<span class="code-number">1</span>),e.trigger(<span class="code-string">"error"</span>);e.src=p(e.handleManifestRedirects,e.src,i);<span class="code-keyword">var</span> n=L({<span class="code-attr">manifestString</span>:i.responseText,<span class="code-attr">customTagParsers</span>:e.customTagParsers,<span class="code-attr">customTagMappers</span>:e.customTagMappers});e.setupInitialPlaylist(n)}}))},i.srcUri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.src?<span class="code-keyword">this</span>.src:<span class="code-keyword">this</span>.src.uri},i.setupInitialPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>,e.playlists)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.master=e,E(<span class="code-keyword">this</span>.master,<span class="code-keyword">this</span>.srcUri()),e.playlists.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.segments&amp;&amp;e.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{U(t,e.resolvedUri)}))})),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.request||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.master.playlists[<span class="code-number">0</span>]));<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.srcUri()||o.default.location.href;<span class="code-keyword">this</span>.master=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=w(<span class="code-number">0</span>,t),n={<span class="code-attr">mediaGroups</span>:{<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},<span class="code-attr">uri</span>:o.default.location.href,<span class="code-attr">resolvedUri</span>:o.default.location.href,<span class="code-attr">playlists</span>:[{<span class="code-attr">uri</span>:t,<span class="code-attr">id</span>:i,<span class="code-attr">resolvedUri</span>:t,<span class="code-attr">attributes</span>:{}}]};<span class="code-keyword">return</span> n.playlists[i]=n.playlists[<span class="code-number">0</span>],n.playlists[t]=n.playlists[<span class="code-number">0</span>],n}(<span class="code-number">0</span>,t),<span class="code-keyword">this</span>.haveMetadata({<span class="code-attr">playlistObject</span>:e,<span class="code-attr">url</span>:t,<span class="code-attr">id</span>:<span class="code-keyword">this</span>.master.playlists[<span class="code-number">0</span>].id}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>)},t}(C),R=<span class="code-number">1</span>/<span class="code-number">30</span>,M=<span class="code-number">.1</span>,B=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=[];<span class="code-keyword">if</span>(e&amp;&amp;e.length)<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)t(e.start(i),e.end(i))&amp;&amp;n.push([e.start(i),e.end(i)]);<span class="code-keyword">return</span> u.default.createTimeRanges(n)},F=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> B(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> e-M&lt;=t&amp;&amp;i+M&gt;=t}))},N=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> B(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e-R&gt;=t}))},q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=[];<span class="code-keyword">if</span>(!e||!e.length)<span class="code-keyword">return</span><span class="code-string">""</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class="code-string">" =&gt; "</span>+e.end(i));<span class="code-keyword">return</span> t.join(<span class="code-string">", "</span>)},W=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push({<span class="code-attr">start</span>:e.start(i),<span class="code-attr">end</span>:e.end(i)});<span class="code-keyword">return</span> t},V=u.default.createTimeRange,H=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class="code-keyword">if</span>(r){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.end-r.duration,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">for</span>(;n--;){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(r=e.segments[n]).end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.end,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(i+=r.duration,<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t);<span class="code-keyword">if</span>(n.precise)<span class="code-keyword">return</span> n.result;<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(i=e.segments[r]).start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i.start-n,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(n+=i.duration,<span class="code-keyword">void</span> <span class="code-number">0</span>!==i.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i.end-n,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:<span class="code-number">-1</span>,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t);<span class="code-keyword">return</span> r.precise?r.result:n.result+i},G=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i&amp;&amp;(i=<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===t){<span class="code-keyword">if</span>(e.totalDuration)<span class="code-keyword">return</span> e.totalDuration;<span class="code-keyword">if</span>(!e.endList)<span class="code-keyword">return</span> o.default.Infinity}<span class="code-keyword">return</span> H(e,t,i)},j=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-number">0</span>;<span class="code-keyword">if</span>(t&gt;i){<span class="code-keyword">var</span> r=[i,t];t=r[<span class="code-number">0</span>],i=r[<span class="code-number">1</span>]}<span class="code-keyword">if</span>(t&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=t;a&lt;<span class="code-built_in">Math</span>.min(<span class="code-number">0</span>,i);a++)n+=e.targetDuration;t=<span class="code-number">0</span>}<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=t;s&lt;i;s++)n+=e.segments[s].duration;<span class="code-keyword">return</span> n},z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e.segments.length)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=e.segments.length,n=e.segments[i<span class="code-number">-1</span>].duration||e.targetDuration,r=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t?t:n+<span class="code-number">2</span>*e.targetDuration;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r)<span class="code-keyword">return</span> i;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;i--&amp;&amp;!((a+=e.segments[i].duration)&gt;=r););<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,i)},X=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e.endList)<span class="code-keyword">return</span> G(e);<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t=t||<span class="code-number">0</span>;<span class="code-keyword">var</span> r=i?z(e,n):e.segments.length;<span class="code-keyword">return</span> H(e,e.mediaSequence+r,t)},Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class="code-built_in">Date</span>.now()},Y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class="code-number">1</span>/<span class="code-number">0</span>},K=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Q(e);<span class="code-keyword">return</span>!e.disabled&amp;&amp;!t},$=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.attributes&amp;&amp;t.attributes[e]},J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">1</span>===e.playlists.length)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.attributes.BANDWIDTH||<span class="code-built_in">Number</span>.MAX_VALUE;<span class="code-keyword">return</span> <span class="code-number">0</span>===e.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!K(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class="code-number">0</span>)&lt;i})).length},Z={<span class="code-attr">duration</span>:G,<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t||<span class="code-number">0</span>,r=X(e,t,!<span class="code-number">0</span>,i);<span class="code-keyword">return</span> <span class="code-literal">null</span>===r?V():V(n,r)},<span class="code-attr">safeLiveIndex</span>:z,<span class="code-attr">getMediaInfoForTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r,a=e.segments.length,s=t-n;<span class="code-keyword">if</span>(s&lt;<span class="code-number">0</span>){<span class="code-keyword">if</span>(i&gt;<span class="code-number">0</span>)<span class="code-keyword">for</span>(r=i<span class="code-number">-1</span>;r&gt;=<span class="code-number">0</span>;r--)<span class="code-keyword">if</span>((s+=e.segments[r].duration+R)&gt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:r,<span class="code-attr">startTime</span>:n-j(e,i,r)};<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:<span class="code-number">0</span>,<span class="code-attr">startTime</span>:t}}<span class="code-keyword">if</span>(i&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(r=i;r&lt;<span class="code-number">0</span>;r++)<span class="code-keyword">if</span>((s-=e.targetDuration)&lt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:<span class="code-number">0</span>,<span class="code-attr">startTime</span>:t};i=<span class="code-number">0</span>}<span class="code-keyword">for</span>(r=i;r&lt;a;r++)<span class="code-keyword">if</span>((s-=e.segments[r].duration+R)&lt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:r,<span class="code-attr">startTime</span>:n+j(e,i,r)};<span class="code-keyword">return</span>{<span class="code-attr">mediaIndex</span>:a<span class="code-number">-1</span>,<span class="code-attr">startTime</span>:t}},<span class="code-attr">isEnabled</span>:K,<span class="code-attr">isDisabled</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.disabled},<span class="code-attr">isBlacklisted</span>:Q,<span class="code-attr">isIncompatible</span>:Y,<span class="code-attr">playlistEnd</span>:X,<span class="code-attr">isAes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(e.segments[t].key)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">hasAttribute</span>:$,<span class="code-attr">estimateSegmentRequestTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">0</span>),$(<span class="code-string">"BANDWIDTH"</span>,i)?(e*i.attributes.BANDWIDTH<span class="code-number">-8</span>*n)/t:<span class="code-literal">NaN</span>},<span class="code-attr">isLowestEnabledRendition</span>:J},ee=u.default.xhr,te=u.default.mergeOptions,ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-string">"arraybuffer"</span>===e.responseType?e.response:e.responseText;!t&amp;&amp;r&amp;&amp;(e.responseTime=<span class="code-built_in">Date</span>.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=<span class="code-built_in">Math</span>.floor(e.bytesReceived/e.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>))),i.headers&amp;&amp;(e.responseHeaders=i.headers),t&amp;&amp;<span class="code-string">"ETIMEDOUT"</span>===t.code&amp;&amp;(e.timedout=!<span class="code-number">0</span>),t||e.aborted||<span class="code-number">200</span>===i.statusCode||<span class="code-number">206</span>===i.statusCode||<span class="code-number">0</span>===i.statusCode||(t=<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"XHR Failed with a response of: "</span>+(e&amp;&amp;(r||e.responseText)))),n(t,e)},ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{t=te({<span class="code-attr">timeout</span>:<span class="code-number">45e3</span>},t);<span class="code-keyword">var</span> n=e.beforeRequest||u.default.Vhs.xhr.beforeRequest;<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> n){<span class="code-keyword">var</span> r=n(t);r&amp;&amp;(t=r)}<span class="code-keyword">var</span> a=ee(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> ie(a,e,t,i)})),s=a.abort;<span class="code-keyword">return</span> a.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> a.aborted=!<span class="code-number">0</span>,s.apply(a,<span class="code-built_in">arguments</span>)},a.uri=t.uri,a.requestTime=<span class="code-built_in">Date</span>.now(),a}},re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n={};<span class="code-keyword">return</span> e.byterange&amp;&amp;(n.Range=(i=(t=e.byterange).offset+t.length<span class="code-number">-1</span>,<span class="code-string">"bytes="</span>+t.offset+<span class="code-string">"-"</span>+i)),n},ae=<span class="code-regexp">/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i</span>,se=<span class="code-regexp">/^application\/dash\+xml/i</span>,oe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> ae.test(e)?<span class="code-string">"hls"</span>:se.test(e)?<span class="code-string">"dash"</span>:<span class="code-string">"application/vnd.videojs.vhs+json"</span>===e?<span class="code-string">"vhs-json"</span>:<span class="code-literal">null</span>},ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.start(t)+<span class="code-string">"-"</span>+e.end(t)},de=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.toString(<span class="code-number">16</span>);<span class="code-keyword">return</span><span class="code-string">"00"</span>.substring(<span class="code-number">0</span>,<span class="code-number">2</span>-i.length)+i+(t%<span class="code-number">2</span>?<span class="code-string">" "</span>:<span class="code-string">""</span>)},le=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;<span class="code-number">126</span>?<span class="code-built_in">String</span>.fromCharCode(e):<span class="code-string">"."</span>},he=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(e).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=e[i];<span class="code-built_in">ArrayBuffer</span>.isView(n)?t[i]={<span class="code-attr">bytes</span>:n.buffer,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength}:t[i]=n})),t},ce=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byterange||{<span class="code-attr">length</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">offset</span>:<span class="code-number">0</span>};<span class="code-keyword">return</span>[t.length,t.offset,e.resolvedUri].join(<span class="code-string">","</span>)},fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.resolvedUri},me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">Array</span>.prototype.slice.call(e),i=<span class="code-number">16</span>,n=<span class="code-string">""</span>,r=<span class="code-number">0</span>;r&lt;t.length/i;r++)n+=t.slice(r*i,r*i+i).map(de).join(<span class="code-string">""</span>)+<span class="code-string">" "</span>+t.slice(r*i,r*i+i).map(le).join(<span class="code-string">""</span>)+<span class="code-string">"\n"</span>;<span class="code-keyword">return</span> n},pe=<span class="code-built_in">Object</span>.freeze({<span class="code-attr">__proto__</span>:<span class="code-literal">null</span>,<span class="code-attr">createTransferableMessage</span>:he,<span class="code-attr">initSegmentId</span>:ce,<span class="code-attr">segmentKeyId</span>:fe,<span class="code-attr">hexDump</span>:me,<span class="code-attr">tagDump</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.bytes;<span class="code-keyword">return</span> me(t)},<span class="code-attr">textRanges</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-string">""</span>;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i+=ue(e,t)+<span class="code-string">" "</span>;<span class="code-keyword">return</span> i}}),ge=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o||o,d=t.tech,l=t.callback;<span class="code-keyword">if</span>(!l)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"seekToProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i||!n||!s)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"seekToProgramTime: programTime, seekTo and playlist must be provided"</span>});<span class="code-keyword">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"player must be playing a live stream to start buffering"</span>});<span class="code-keyword">if</span>(!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.segments||<span class="code-number">0</span>===e.segments.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(!e.segments[t].dateTimeObject)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>}(n))<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"programDateTime tags must be provided in the manifest "</span>+n.resolvedUri});<span class="code-keyword">var</span> h=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=t.segments[<span class="code-number">0</span>];<span class="code-keyword">if</span>(i&lt;n.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;t.segments.length<span class="code-number">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class="code-number">1</span>].dateTimeObject));r++);<span class="code-keyword">var</span> a,s=t.segments[t.segments.length<span class="code-number">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class="code-number">.25</span>*s.duration;<span class="code-keyword">return</span> i&gt;<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(o.getTime()+<span class="code-number">1e3</span>*u)?<span class="code-literal">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class="code-attr">segment</span>:n,<span class="code-attr">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Z.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class="code-attr">type</span>:n.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>})}(i,n);<span class="code-keyword">if</span>(!h)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:i+<span class="code-string">" was not found in the stream"</span>});<span class="code-keyword">var</span> c=h.segment,f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e),n=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t)}<span class="code-keyword">catch</span>(e){}<span class="code-keyword">var</span> r=i.getTime();<span class="code-keyword">return</span>(n.getTime()-r)/<span class="code-number">1e3</span>}(c.dateTimeObject,i);<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===h.type)<span class="code-keyword">return</span> <span class="code-number">0</span>===a?l({<span class="code-attr">message</span>:i+<span class="code-string">" is not buffered yet. Try again"</span>}):(s(h.estimatedStart+f),<span class="code-keyword">void</span> d.one(<span class="code-string">"seeked"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e({<span class="code-attr">programTime</span>:i,<span class="code-attr">playlist</span>:n,<span class="code-attr">retryCount</span>:a<span class="code-number">-1</span>,<span class="code-attr">seekTo</span>:s,<span class="code-attr">pauseAfterSeek</span>:u,<span class="code-attr">tech</span>:d,<span class="code-attr">callback</span>:l})})));<span class="code-keyword">var</span> m=c.start+f;d.one(<span class="code-string">"seeked"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> l(<span class="code-literal">null</span>,d.currentTime())})),u&amp;&amp;d.pause(),s(m)},ye=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!e&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> e},ve=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(t),n=<span class="code-number">0</span>;n&lt;t;n++)i[n]=<span class="code-built_in">arguments</span>[n];<span class="code-keyword">return</span> i.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> i||<span class="code-built_in">Object</span>.keys(i).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-built_in">Array</span>.isArray(t[n])&amp;&amp;<span class="code-built_in">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):ye(t[n])&amp;&amp;ye(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},_e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)}),[])},be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class="code-keyword">return</span> t},Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?<span class="code-string">""</span>:t,n=e.source,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=e.range,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.indexRange,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-string">""</span>:o,d={<span class="code-attr">uri</span>:r,<span class="code-attr">resolvedUri</span>:f(i||<span class="code-string">""</span>,r)};<span class="code-keyword">if</span>(s||u){<span class="code-keyword">var</span> l=(s||u).split(<span class="code-string">"-"</span>),h=<span class="code-built_in">parseInt</span>(l[<span class="code-number">0</span>],<span class="code-number">10</span>),c=<span class="code-built_in">parseInt</span>(l[<span class="code-number">1</span>],<span class="code-number">10</span>);d.byterange={<span class="code-attr">length</span>:c-h+<span class="code-number">1</span>,<span class="code-attr">offset</span>:h}}<span class="code-keyword">return</span> d},Se={<span class="code-attr">static</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.duration,i=e.timescale,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-number">1</span>:i,r=e.sourceDuration;<span class="code-keyword">return</span>{<span class="code-attr">start</span>:<span class="code-number">0</span>,<span class="code-attr">end</span>:<span class="code-built_in">Math</span>.ceil(r/(t/n))}},<span class="code-attr">dynamic</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.duration,o=e.start,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,d=e.minimumUpdatePeriod,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">0</span>:d,h=e.timeShiftBufferDepth,c=<span class="code-keyword">void</span> <span class="code-number">0</span>===h?<span class="code-number">1</span>/<span class="code-number">0</span>:h,f=(t+i)/<span class="code-number">1e3</span>,m=n+u,p=f+l-m,g=<span class="code-built_in">Math</span>.ceil(p*a/s),y=<span class="code-built_in">Math</span>.floor((f-m-c)*a/s),v=<span class="code-built_in">Math</span>.floor((f-m)*a/s);<span class="code-keyword">return</span>{<span class="code-attr">start</span>:<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,y),<span class="code-attr">end</span>:<span class="code-built_in">Math</span>.min(g,v)}}},Ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?<span class="code-string">"static"</span>:t,n=e.duration,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.sourceDuration,o=Se[i](e),u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class="code-keyword">return</span> i}(o.start,o.end).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=e.duration,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class="code-keyword">return</span>{<span class="code-attr">number</span>:(<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">1</span>:o)+t,<span class="code-attr">duration</span>:n/a,<span class="code-attr">timeline</span>:s,<span class="code-attr">time</span>:i*n}}}(e));<span class="code-keyword">if</span>(<span class="code-string">"static"</span>===i){<span class="code-keyword">var</span> d=u.length<span class="code-number">-1</span>;u[d].duration=s-n/a*d}<span class="code-keyword">return</span> u},we=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=e.initialization,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.duration;<span class="code-keyword">if</span>(!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"NO_BASE_URL"</span>);<span class="code-keyword">var</span> u=Te({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:n.sourceURL,<span class="code-attr">range</span>:n.range}),d=Te({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:t,<span class="code-attr">indexRange</span>:s});<span class="code-keyword">if</span>(d.map=u,o){<span class="code-keyword">var</span> l=Ie(e);l.length&amp;&amp;(d.duration=l[<span class="code-number">0</span>].duration,d.timeline=l[<span class="code-number">0</span>].timeline)}<span class="code-keyword">else</span> r&amp;&amp;(d.duration=r,d.timeline=<span class="code-number">0</span>);<span class="code-keyword">return</span> d.number=<span class="code-number">0</span>,[d]},Le=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=e.sidx.map?e.sidx.map:<span class="code-literal">null</span>,r=e.sidx.duration,a=e.timeline||<span class="code-number">0</span>,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,d=t.references.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>!==e.referenceType})),l=[],h=o+t.firstOffset,c=<span class="code-number">0</span>;c&lt;d.length;c++){<span class="code-keyword">var</span> f=t.references[c],m=f.referencedSize,p=f.subsegmentDuration,g=we({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">timescale</span>:u,<span class="code-attr">timeline</span>:a,<span class="code-attr">periodIndex</span>:a,<span class="code-attr">duration</span>:p,<span class="code-attr">sourceDuration</span>:r,<span class="code-attr">indexRange</span>:h+<span class="code-string">"-"</span>+(h+m<span class="code-number">-1</span>)})[<span class="code-number">0</span>];n&amp;&amp;(g.map=n),l.push(g),h+=m}<span class="code-keyword">return</span> e.segments=l,e},ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class="code-string">""</span>);<span class="code-keyword">return</span> e[n]?(t.segments[<span class="code-number">0</span>]&amp;&amp;(t.segments[<span class="code-number">0</span>].discontinuity=!<span class="code-number">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e}),{}),<span class="code-built_in">Object</span>.keys(t).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e]}))).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span> e.discontinuityStarts=(t=e.segments,<span class="code-string">"discontinuity"</span>,t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.discontinuity&amp;&amp;e.push(i),e}),[])),e}))},Ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),!<span class="code-built_in">Object</span>.keys(t).length)<span class="code-keyword">return</span> e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i <span class="code-keyword">in</span> e){<span class="code-keyword">var</span> n=e[i];<span class="code-keyword">if</span>(n.sidx){<span class="code-keyword">var</span> r=n.sidx.uri+<span class="code-string">"-"</span>+(<span class="code-keyword">void</span> <span class="code-number">0</span>,o=(s=n.sidx.byterange).offset+s.length<span class="code-number">-1</span>,s.offset+<span class="code-string">"-"</span>+o),a=t[r]&amp;&amp;t[r].sidx;n.sidx&amp;&amp;a&amp;&amp;Le(n,a,n.sidx.resolvedUri)}}<span class="code-keyword">var</span> s,o;<span class="code-keyword">return</span> e},Ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class="code-attr">attributes</span>:(t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">BANDWIDTH</span>:i.bandwidth,<span class="code-attr">CODECS</span>:i.codecs},t[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(i.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments;<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=[{<span class="code-attr">uri</span>:i.baseUrl,<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:i.baseUrl||<span class="code-string">""</span>,<span class="code-attr">duration</span>:i.sourceDuration,<span class="code-attr">number</span>:<span class="code-number">0</span>}],i.duration=i.sourceDuration);<span class="code-keyword">var</span> r=((t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">BANDWIDTH</span>:i.bandwidth})[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t);<span class="code-keyword">return</span> i.codecs&amp;&amp;(r.CODECS=i.codecs),{<span class="code-attr">attributes</span>:r,<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(i.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:i.baseUrl||<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>}},Ce=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class="code-attr">attributes</span>:(t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">AUDIO</span>:<span class="code-string">"audio"</span>,<span class="code-attr">SUBTITLES</span>:<span class="code-string">"subs"</span>,<span class="code-attr">RESOLUTION</span>:{<span class="code-attr">width</span>:i.width,<span class="code-attr">height</span>:i.height},<span class="code-attr">CODECS</span>:i.codecs,<span class="code-attr">BANDWIDTH</span>:i.bandwidth},t[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===(i.type||<span class="code-string">"static"</span>),<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},Ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-number">1</span>:s,u=e.start,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===u?<span class="code-number">0</span>:u,l=e.minimumUpdatePeriod,h=(n+r)/<span class="code-number">1e3</span>+(<span class="code-keyword">void</span> <span class="code-number">0</span>===l?<span class="code-number">0</span>:l)-(a+d);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.ceil((h*o-t)/i)},Oe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.type,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-string">"static"</span>:i,r=e.minimumUpdatePeriod,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">0</span>:r,s=e.media,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-string">""</span>:s,u=e.sourceDuration,d=e.timescale,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">1</span>:d,h=e.startNumber,c=<span class="code-keyword">void</span> <span class="code-number">0</span>===h?<span class="code-number">1</span>:h,f=e.periodIndex,m=[],p=<span class="code-number">-1</span>,g=<span class="code-number">0</span>;g&lt;t.length;g++){<span class="code-keyword">var</span> y=t[g],v=y.d,_=y.r||<span class="code-number">0</span>,b=y.t||<span class="code-number">0</span>;p&lt;<span class="code-number">0</span>&amp;&amp;(p=b),b&amp;&amp;b&gt;p&amp;&amp;(p=b);<span class="code-keyword">var</span> T=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(_&lt;<span class="code-number">0</span>){<span class="code-keyword">var</span> S=g+<span class="code-number">1</span>;T=S===t.length?<span class="code-string">"dynamic"</span>===n&amp;&amp;a&gt;<span class="code-number">0</span>&amp;&amp;o.indexOf(<span class="code-string">"$Number$"</span>)&gt;<span class="code-number">0</span>?Ue(e,p,v):(u*l-p)/v:(t[S].t-p)/v}<span class="code-keyword">else</span> T=_+<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> I=c+m.length+T,w=c+m.length;w&lt;I;)m.push({<span class="code-attr">number</span>:w,<span class="code-attr">duration</span>:v/l,<span class="code-attr">time</span>:p,<span class="code-attr">timeline</span>:f}),p+=v,w++}<span class="code-keyword">return</span> m},De=<span class="code-regexp">/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g</span>,xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.replace(De,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"$$"</span>===t)<span class="code-keyword">return</span><span class="code-string">"$"</span>;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e[i])<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> a=<span class="code-string">""</span>+e[i];<span class="code-keyword">return</span><span class="code-string">"RepresentationID"</span>===i?a:(r=n?<span class="code-built_in">parseInt</span>(r,<span class="code-number">10</span>):<span class="code-number">1</span>,a.length&gt;=r?a:<span class="code-string">""</span>+<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(r-a.length+<span class="code-number">1</span>).join(<span class="code-string">"0"</span>)+a)}}(t))},Re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">RepresentationID</span>:e.id,<span class="code-attr">Bandwidth</span>:e.bandwidth||<span class="code-number">0</span>},n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{<span class="code-attr">sourceURL</span>:<span class="code-string">""</span>,<span class="code-attr">range</span>:<span class="code-string">""</span>}:n,a=Te({<span class="code-attr">baseUrl</span>:e.baseUrl,<span class="code-attr">source</span>:xe(r.sourceURL,i),<span class="code-attr">range</span>:r.range});<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.duration||t?e.duration?Ie(e):Oe(e,t):[{<span class="code-attr">number</span>:e.startNumber||<span class="code-number">1</span>,<span class="code-attr">duration</span>:e.sourceDuration,<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">timeline</span>:e.periodIndex}]}(e,t).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class="code-keyword">var</span> n=xe(e.media||<span class="code-string">""</span>,i);<span class="code-keyword">return</span>{<span class="code-attr">uri</span>:n,<span class="code-attr">timeline</span>:t.timeline,<span class="code-attr">duration</span>:t.duration,<span class="code-attr">resolvedUri</span>:f(e.baseUrl||<span class="code-string">""</span>,n),<span class="code-attr">map</span>:a,<span class="code-attr">number</span>:t.number}}))},Me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.duration,n=e.segmentUrls,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?[]:n;<span class="code-keyword">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"SEGMENT_TIME_UNSPECIFIED"</span>);<span class="code-keyword">var</span> a,s=r.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.baseUrl,n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{}:n,a=Te({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:r.sourceURL,<span class="code-attr">range</span>:r.range}),s=Te({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:t.media,<span class="code-attr">range</span>:t.mediaRange});<span class="code-keyword">return</span> s.map=a,s}(e,t)}));<span class="code-keyword">return</span> i&amp;&amp;(a=Ie(e)),t&amp;&amp;(a=Oe(e,t)),a.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(s[t]){<span class="code-keyword">var</span> i=s[t];<span class="code-keyword">return</span> i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}})).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}))},Be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Re,t=ve(n,r.template)):r.base?(i=we,t=ve(n,r.base)):r.list&amp;&amp;(i=Me,t=ve(n,r.list));<span class="code-keyword">var</span> a={<span class="code-attr">attributes</span>:n};<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> a;<span class="code-keyword">var</span> s=i(t,r.timeline);<span class="code-keyword">if</span>(t.duration){<span class="code-keyword">var</span> o=t,u=o.duration,d=o.timescale,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">1</span>:d;t.duration=u/l}<span class="code-keyword">else</span> s.length?t.duration=s.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(e,<span class="code-built_in">Math</span>.ceil(t.duration))}),<span class="code-number">0</span>):t.duration=<span class="code-number">0</span>;<span class="code-keyword">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class="code-number">0</span>],a.segments=[]),a},Fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> be(e.childNodes).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.tagName===t}))},Ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.textContent.trim()},qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-regexp">/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/</span>.exec(e);<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.slice(<span class="code-number">1</span>),n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>],a=i[<span class="code-number">2</span>],s=i[<span class="code-number">3</span>],o=i[<span class="code-number">4</span>],u=i[<span class="code-number">5</span>];<span class="code-keyword">return</span> <span class="code-number">31536e3</span>*<span class="code-built_in">parseFloat</span>(n||<span class="code-number">0</span>)+<span class="code-number">2592e3</span>*<span class="code-built_in">parseFloat</span>(r||<span class="code-number">0</span>)+<span class="code-number">86400</span>*<span class="code-built_in">parseFloat</span>(a||<span class="code-number">0</span>)+<span class="code-number">3600</span>*<span class="code-built_in">parseFloat</span>(s||<span class="code-number">0</span>)+<span class="code-number">60</span>*<span class="code-built_in">parseFloat</span>(o||<span class="code-number">0</span>)+<span class="code-built_in">parseFloat</span>(u||<span class="code-number">0</span>)},We={<span class="code-attr">mediaPresentationDuration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qe(e)},<span class="code-attr">availabilityStartTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class="code-string">"Z"</span>),<span class="code-built_in">Date</span>.parse(t)/<span class="code-number">1e3</span>;<span class="code-keyword">var</span> t},<span class="code-attr">minimumUpdatePeriod</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qe(e)},<span class="code-attr">suggestedPresentationDelay</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qe(e)},<span class="code-attr">type</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e},<span class="code-attr">timeShiftBufferDepth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qe(e)},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qe(e)},<span class="code-attr">width</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">height</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">bandwidth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">startNumber</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">timescale</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>);<span class="code-keyword">return</span> <span class="code-built_in">isNaN</span>(t)?qe(e):t},<span class="code-attr">d</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">t</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">r</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">DEFAULT</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}},Ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;e.attributes?be(e.attributes).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=We[t.name]||We.DEFAULT;<span class="code-keyword">return</span> e[t.name]=i(t.value),e}),{}):{}},He={<span class="code-string">"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"</span>:<span class="code-string">"org.w3.clearkey"</span>,<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>:<span class="code-string">"com.widevine.alpha"</span>,<span class="code-string">"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95"</span>:<span class="code-string">"com.microsoft.playready"</span>,<span class="code-string">"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb"</span>:<span class="code-string">"com.adobe.primetime"</span>},Ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.length?_e(e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> f(e,Ne(t))}))}))):e},je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Fe(e,<span class="code-string">"SegmentTemplate"</span>)[<span class="code-number">0</span>],i=Fe(e,<span class="code-string">"SegmentList"</span>)[<span class="code-number">0</span>],n=i&amp;&amp;Fe(i,<span class="code-string">"SegmentURL"</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> ve({<span class="code-attr">tag</span>:<span class="code-string">"SegmentURL"</span>},Ve(e))})),r=Fe(e,<span class="code-string">"SegmentBase"</span>)[<span class="code-number">0</span>],a=i||t,s=a&amp;&amp;Fe(a,<span class="code-string">"SegmentTimeline"</span>)[<span class="code-number">0</span>],o=i||r||t,u=o&amp;&amp;Fe(o,<span class="code-string">"Initialization"</span>)[<span class="code-number">0</span>],d=t&amp;&amp;Ve(t);d&amp;&amp;u?d.initialization=u&amp;&amp;Ve(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class="code-attr">sourceURL</span>:d.initialization});<span class="code-keyword">var</span> l={<span class="code-attr">template</span>:d,<span class="code-attr">timeline</span>:s&amp;&amp;Fe(s,<span class="code-string">"S"</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ve(e)})),<span class="code-attr">list</span>:i&amp;&amp;ve(Ve(i),{<span class="code-attr">segmentUrls</span>:n,<span class="code-attr">initialization</span>:Ve(u)}),<span class="code-attr">base</span>:r&amp;&amp;ve(Ve(r),{<span class="code-attr">initialization</span>:Ve(u)})};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(l).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{l[e]||<span class="code-keyword">delete</span> l[e]})),l},ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=Ge(t,Fe(i,<span class="code-string">"BaseURL"</span>)),a=Ve(i),s=<span class="code-built_in">parseInt</span>(a.id,<span class="code-number">10</span>),u=o.default.isNaN(s)?n:s,d=ve(e,{<span class="code-attr">periodIndex</span>:u}),l=Fe(i,<span class="code-string">"AdaptationSet"</span>),h=je(i);<span class="code-keyword">return</span> _e(l.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=Ve(n),a=Ge(t,Fe(n,<span class="code-string">"BaseURL"</span>)),s=Fe(n,<span class="code-string">"Role"</span>)[<span class="code-number">0</span>],o={<span class="code-attr">role</span>:Ve(s)},u=ve(e,r,o),d=Fe(n,<span class="code-string">"ContentProtection"</span>).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Ve(t),n=He[i.schemeIdUri];<span class="code-keyword">if</span>(n){e[n]={<span class="code-attr">attributes</span>:i};<span class="code-keyword">var</span> r=Fe(t,<span class="code-string">"cenc:pssh"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> a=Ne(r),s=a&amp;&amp;v(a);e[n].pssh=s}}<span class="code-keyword">return</span> e}),{});<span class="code-built_in">Object</span>.keys(d).length&amp;&amp;(u=ve(u,{<span class="code-attr">contentProtection</span>:d}));<span class="code-keyword">var</span> l=je(n),h=Fe(n,<span class="code-string">"Representation"</span>),c=ve(i,l);<span class="code-keyword">return</span> _e(h.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=Fe(n,<span class="code-string">"BaseURL"</span>),a=Ge(t,r),s=ve(e,Ve(n)),o=je(n);<span class="code-keyword">return</span> a.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">segmentInfo</span>:ve(i,o),<span class="code-attr">attributes</span>:ve(s,{<span class="code-attr">baseUrl</span>:e})}}))}}(u,a,c)))}}(d,r,h)))}},Xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">""</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"DASH_EMPTY_MANIFEST"</span>);<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">new</span> r.DOMParser;<span class="code-keyword">try</span>{i=(t=n.parseFromString(e,<span class="code-string">"application/xml"</span>))&amp;&amp;<span class="code-string">"MPD"</span>===t.documentElement.tagName?t.documentElement:<span class="code-literal">null</span>}<span class="code-keyword">catch</span>(e){}<span class="code-keyword">if</span>(!i||i&amp;&amp;i.getElementsByTagName(<span class="code-string">"parsererror"</span>).length&gt;<span class="code-number">0</span>)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"DASH_INVALID_XML"</span>);<span class="code-keyword">return</span> i},Qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=t,n=i.manifestUri,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=i.NOW,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-built_in">Date</span>.now():a,o=i.clientOffset,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,d=Fe(e,<span class="code-string">"Period"</span>);<span class="code-keyword">if</span>(!d.length)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"INVALID_NUMBER_OF_PERIOD"</span>);<span class="code-keyword">var</span> l=Fe(e,<span class="code-string">"Location"</span>),h=Ve(e),c=Ge([r],Fe(e,<span class="code-string">"BaseURL"</span>));<span class="code-keyword">return</span> h.sourceDuration=h.mediaPresentationDuration||<span class="code-number">0</span>,h.NOW=s,h.clientOffset=u,l.length&amp;&amp;(h.locations=l.map(Ne)),{<span class="code-attr">locations</span>:h.locations,<span class="code-attr">representationInfo</span>:_e(d.map(ze(h,c)))}}(Xe(e),t);<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={}),!e.length)<span class="code-keyword">return</span>{};<span class="code-keyword">var</span> r=e[<span class="code-number">0</span>].attributes,a=r.sourceDuration,s=r.type,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-string">"static"</span>:s,u=r.suggestedPresentationDelay,d=r.minimumUpdatePeriod,l=ke(e.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"video/mp4"</span>===t.mimeType||<span class="code-string">"video/webm"</span>===t.mimeType||<span class="code-string">"video"</span>===t.contentType}))).map(Ce),h=ke(e.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"audio/mp4"</span>===t.mimeType||<span class="code-string">"audio/webm"</span>===t.mimeType||<span class="code-string">"audio"</span>===t.contentType}))),c=e.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"text/vtt"</span>===t.mimeType||<span class="code-string">"text"</span>===t.contentType})),f={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[],<span class="code-attr">endList</span>:!<span class="code-number">0</span>,<span class="code-attr">mediaGroups</span>:(n={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{}},n[<span class="code-string">"CLOSED-CAPTIONS"</span>]={},n.SUBTITLES={},n),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">duration</span>:a,<span class="code-attr">playlists</span>:Ae(l,i)};<span class="code-keyword">return</span> d&gt;=<span class="code-number">0</span>&amp;&amp;(f.minimumUpdatePeriod=<span class="code-number">1e3</span>*d),t&amp;&amp;(f.locations=t),<span class="code-string">"dynamic"</span>===o&amp;&amp;(f.suggestedPresentationDelay=u),h.length&amp;&amp;(f.mediaGroups.AUDIO.audio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> n=e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=n.attributes.role&amp;&amp;n.attributes.role.value||<span class="code-string">""</span>,a=n.attributes.lang||<span class="code-string">""</span>,s=<span class="code-string">"main"</span>;<span class="code-keyword">if</span>(a){<span class="code-keyword">var</span> o=r?<span class="code-string">" ("</span>+r+<span class="code-string">")"</span>:<span class="code-string">""</span>;s=<span class="code-string">""</span>+n.attributes.lang+o}<span class="code-keyword">return</span> e[s]&amp;&amp;e[s].playlists[<span class="code-number">0</span>].attributes.BANDWIDTH&gt;n.attributes.bandwidth||(e[s]={<span class="code-attr">language</span>:a,<span class="code-attr">autoselect</span>:!<span class="code-number">0</span>,<span class="code-attr">default</span>:<span class="code-string">"main"</span>===r,<span class="code-attr">playlists</span>:Ae([Ee(n)],t),<span class="code-attr">uri</span>:<span class="code-string">""</span>},<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;<span class="code-string">"main"</span>===r&amp;&amp;((i=n).default=!<span class="code-number">0</span>)),e}),{});<span class="code-keyword">return</span> i||(n[<span class="code-built_in">Object</span>.keys(n)[<span class="code-number">0</span>]].default=!<span class="code-number">0</span>),n}(h,i)),c.length&amp;&amp;(f.mediaGroups.SUBTITLES.subs=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=i.attributes.lang||<span class="code-string">"text"</span>;<span class="code-keyword">return</span> e[n]||(e[n]={<span class="code-attr">language</span>:n,<span class="code-attr">default</span>:!<span class="code-number">1</span>,<span class="code-attr">autoselect</span>:!<span class="code-number">1</span>,<span class="code-attr">playlists</span>:Ae([Pe(i)],t),<span class="code-attr">uri</span>:<span class="code-string">""</span>}),e}),{})}(c,i)),f}(i.representationInfo.map(Be),i.locations,t.sidxMapping)},Ye=Le,Ke=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),$e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e <span class="code-keyword">instanceof</span> <span class="code-built_in">Uint8Array</span>?e:(<span class="code-built_in">Array</span>.isArray(e)||(t=e,<span class="code-built_in">ArrayBuffer</span>.isView(t))||e <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>||(e=<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;e!=e?<span class="code-number">0</span>:[e]),<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e&amp;&amp;e.buffer||e,e&amp;&amp;e.byteOffset||<span class="code-number">0</span>,e&amp;&amp;e.byteLength||<span class="code-number">0</span>));<span class="code-keyword">var</span> t},Je=o.default.BigInt||<span class="code-built_in">Number</span>,Ze=[Je(<span class="code-string">"0x1"</span>),Je(<span class="code-string">"0x100"</span>),Je(<span class="code-string">"0x10000"</span>),Je(<span class="code-string">"0x1000000"</span>),Je(<span class="code-string">"0x100000000"</span>),Je(<span class="code-string">"0x10000000000"</span>),Je(<span class="code-string">"0x1000000000000"</span>),Je(<span class="code-string">"0x100000000000000"</span>),Je(<span class="code-string">"0x10000000000000000"</span>)],et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?{}:t,n=i.signed,r=<span class="code-keyword">void</span> <span class="code-number">0</span>!==n&amp;&amp;n,a=i.le,s=<span class="code-keyword">void</span> <span class="code-number">0</span>!==a&amp;&amp;a;e=$e(e);<span class="code-keyword">var</span> o=s?<span class="code-string">"reduce"</span>:<span class="code-string">"reduceRight"</span>,u=(e[o]?e[o]:<span class="code-built_in">Array</span>.prototype[o]).call(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> r=s?n:<span class="code-built_in">Math</span>.abs(n+<span class="code-number">1</span>-e.length);<span class="code-keyword">return</span> t+Je(i)*Ze[r]}),Je(<span class="code-number">0</span>));<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> d=Ze[e.length]/Je(<span class="code-number">2</span>)-Je(<span class="code-number">1</span>);(u=Je(u))&gt;d&amp;&amp;(u-=d,u-=d,u-=Je(<span class="code-number">2</span>))}<span class="code-keyword">return</span> <span class="code-built_in">Number</span>(u)},tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;e&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.toString&amp;&amp;(e=e.toString()),<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e)<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>;t||(e=<span class="code-built_in">unescape</span>(<span class="code-built_in">encodeURIComponent</span>(e)));<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.length),n=<span class="code-number">0</span>;n&lt;e.length;n++)i[n]=e.charCodeAt(n);<span class="code-keyword">return</span> i},it=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?{}:i,r=n.offset,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">0</span>:r,s=n.mask,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?[]:s;e=$e(e);<span class="code-keyword">var</span> u=(t=$e(t)).every?t.every:<span class="code-built_in">Array</span>.prototype.every;<span class="code-keyword">return</span> t.length&amp;&amp;e.length-a&gt;=t.length&amp;&amp;u.call(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> t===(o[i]?o[i]&amp;e[a+i]:e[a+i])}))},nt=$e([<span class="code-number">73</span>,<span class="code-number">68</span>,<span class="code-number">51</span>]),rt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">0</span>),(t=$e(t)).length-i&lt;<span class="code-number">10</span>||!it(t,nt,{<span class="code-attr">offset</span>:i})?i:(i+=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-number">0</span>);<span class="code-keyword">var</span> i=(e=$e(e))[t+<span class="code-number">5</span>],n=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span>(<span class="code-number">16</span>&amp;i)&gt;&gt;<span class="code-number">4</span>?n+<span class="code-number">20</span>:n+<span class="code-number">10</span>}(t,i),e(t,i))},at=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e?tt(e):e},st=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>),i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Array</span>.isArray(e)?e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> at(e)})):[at(e)]}(i),t=$e(t);<span class="code-keyword">var</span> r=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> r;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;t.length;){<span class="code-keyword">var</span> s=(t[a]&lt;&lt;<span class="code-number">24</span>|t[a+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[a+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[a+<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">0</span>,o=t.subarray(a+<span class="code-number">4</span>,a+<span class="code-number">8</span>);<span class="code-keyword">if</span>(<span class="code-number">0</span>===s)<span class="code-keyword">break</span>;<span class="code-keyword">var</span> u=a+s;<span class="code-keyword">if</span>(u&gt;t.length){<span class="code-keyword">if</span>(n)<span class="code-keyword">break</span>;u=t.length}<span class="code-keyword">var</span> d=t.subarray(a+<span class="code-number">8</span>,u);it(o,i[<span class="code-number">0</span>])&amp;&amp;(<span class="code-number">1</span>===i.length?r.push(d):r.push.apply(r,e(d,i.slice(<span class="code-number">1</span>),n))),a=u}<span class="code-keyword">return</span> r},ot={<span class="code-attr">EBML</span>:$e([<span class="code-number">26</span>,<span class="code-number">69</span>,<span class="code-number">223</span>,<span class="code-number">163</span>]),<span class="code-attr">DocType</span>:$e([<span class="code-number">66</span>,<span class="code-number">130</span>]),<span class="code-attr">Segment</span>:$e([<span class="code-number">24</span>,<span class="code-number">83</span>,<span class="code-number">128</span>,<span class="code-number">103</span>]),<span class="code-attr">SegmentInfo</span>:$e([<span class="code-number">21</span>,<span class="code-number">73</span>,<span class="code-number">169</span>,<span class="code-number">102</span>]),<span class="code-attr">Tracks</span>:$e([<span class="code-number">22</span>,<span class="code-number">84</span>,<span class="code-number">174</span>,<span class="code-number">107</span>]),<span class="code-attr">Track</span>:$e([<span class="code-number">174</span>]),<span class="code-attr">TrackNumber</span>:$e([<span class="code-number">215</span>]),<span class="code-attr">DefaultDuration</span>:$e([<span class="code-number">35</span>,<span class="code-number">227</span>,<span class="code-number">131</span>]),<span class="code-attr">TrackEntry</span>:$e([<span class="code-number">174</span>]),<span class="code-attr">TrackType</span>:$e([<span class="code-number">131</span>]),<span class="code-attr">FlagDefault</span>:$e([<span class="code-number">136</span>]),<span class="code-attr">CodecID</span>:$e([<span class="code-number">134</span>]),<span class="code-attr">CodecPrivate</span>:$e([<span class="code-number">99</span>,<span class="code-number">162</span>]),<span class="code-attr">VideoTrack</span>:$e([<span class="code-number">224</span>]),<span class="code-attr">AudioTrack</span>:$e([<span class="code-number">225</span>]),<span class="code-attr">Cluster</span>:$e([<span class="code-number">31</span>,<span class="code-number">67</span>,<span class="code-number">182</span>,<span class="code-number">117</span>]),<span class="code-attr">Timestamp</span>:$e([<span class="code-number">231</span>]),<span class="code-attr">TimestampScale</span>:$e([<span class="code-number">42</span>,<span class="code-number">215</span>,<span class="code-number">177</span>]),<span class="code-attr">BlockGroup</span>:$e([<span class="code-number">160</span>]),<span class="code-attr">BlockDuration</span>:$e([<span class="code-number">155</span>]),<span class="code-attr">Block</span>:$e([<span class="code-number">161</span>]),<span class="code-attr">SimpleBlock</span>:$e([<span class="code-number">163</span>])},ut=[<span class="code-number">128</span>,<span class="code-number">64</span>,<span class="code-number">32</span>,<span class="code-number">16</span>,<span class="code-number">8</span>,<span class="code-number">4</span>,<span class="code-number">2</span>,<span class="code-number">1</span>],dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=!<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>);<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">1</span>,i=<span class="code-number">0</span>;i&lt;ut.length&amp;&amp;!(e&amp;ut[i]);i++)t++;<span class="code-keyword">return</span> t}(e[t]),a=e.subarray(t,t+r);<span class="code-keyword">return</span> i&amp;&amp;((a=<span class="code-built_in">Array</span>.prototype.slice.call(e,t,t+r))[<span class="code-number">0</span>]^=ut[r<span class="code-number">-1</span>]),{<span class="code-attr">length</span>:r,<span class="code-attr">value</span>:et(a,{<span class="code-attr">signed</span>:n}),<span class="code-attr">bytes</span>:a}},lt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> t?t.match(<span class="code-regexp">/.{1,2}/g</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e(t)})):<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-keyword">void</span> <span class="code-number">0</span>===t?{}:t).le,n=<span class="code-keyword">void</span> <span class="code-number">0</span>!==i&amp;&amp;i;(<span class="code-string">"bigint"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;e!=e)&amp;&amp;(e=<span class="code-number">0</span>);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r,a=(r=e=Je(e),<span class="code-built_in">Math</span>.ceil(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.toString(<span class="code-number">2</span>).length}(r)/<span class="code-number">8</span>)),s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">new</span> <span class="code-built_in">ArrayBuffer</span>(a)),o=<span class="code-number">0</span>;o&lt;a;o++){<span class="code-keyword">var</span> u=n?o:<span class="code-built_in">Math</span>.abs(o+<span class="code-number">1</span>-s.length);s[u]=<span class="code-built_in">Number</span>(e/Ze[o]&amp;Je(<span class="code-number">255</span>)),e&lt;<span class="code-number">0</span>&amp;&amp;(s[u]=<span class="code-built_in">Math</span>.abs(~s[u]),s[u]-=<span class="code-number">0</span>===o?<span class="code-number">1</span>:<span class="code-number">2</span>)}<span class="code-keyword">return</span> s}(t):t},ht=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">if</span>(n&gt;=i.length)<span class="code-keyword">return</span> i.length;<span class="code-keyword">var</span> r=dt(i,n,!<span class="code-number">1</span>);<span class="code-keyword">if</span>(it(t.bytes,r.bytes))<span class="code-keyword">return</span> n;<span class="code-keyword">var</span> a=dt(i,n+r.length);<span class="code-keyword">return</span> e(t,i,n+a.length+a.value+r.length)},ct=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Array</span>.isArray(e)?e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> lt(e)})):[lt(e)]}(i),t=$e(t);<span class="code-keyword">var</span> n=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> n;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;t.length;){<span class="code-keyword">var</span> a=dt(t,r,!<span class="code-number">1</span>),s=dt(t,r+a.length),o=r+a.length+s.length;<span class="code-number">127</span>===s.value&amp;&amp;(s.value=ht(a,t,o),s.value!==t.length&amp;&amp;(s.value-=o));<span class="code-keyword">var</span> u=o+s.value&gt;t.length?t.length:o+s.value,d=t.subarray(o,u);it(i[<span class="code-number">0</span>],a.bytes)&amp;&amp;(<span class="code-number">1</span>===i.length?n.push(d):n=n.concat(e(d,i.slice(<span class="code-number">1</span>)))),r+=a.length+s.length+d.length}<span class="code-keyword">return</span> n},ft=$e([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),mt=$e([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),pt=$e([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>]),gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">1</span>;i&lt;e.length<span class="code-number">-2</span>;)it(e.subarray(i,i+<span class="code-number">3</span>),pt)&amp;&amp;(t.push(i+<span class="code-number">2</span>),i++),i++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===t.length)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n=e.length-t.length,r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),a=<span class="code-number">0</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;n;a++,i++)a===t[<span class="code-number">0</span>]&amp;&amp;(a++,t.shift()),r[i]=e[a];<span class="code-keyword">return</span> r},yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">1</span>/<span class="code-number">0</span>),e=$e(e),i=[].concat(i);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r,a=<span class="code-number">0</span>,s=<span class="code-number">0</span>;a&lt;e.length&amp;&amp;(s&lt;n||r);){<span class="code-keyword">var</span> o=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(it(e.subarray(a),ft)?o=<span class="code-number">4</span>:it(e.subarray(a),mt)&amp;&amp;(o=<span class="code-number">3</span>),o){<span class="code-keyword">if</span>(s++,r)<span class="code-keyword">return</span> gt(e.subarray(r,a));<span class="code-keyword">var</span> u=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-string">"h264"</span>===t?u=<span class="code-number">31</span>&amp;e[a+o]:<span class="code-string">"h265"</span>===t&amp;&amp;(u=e[a+o]&gt;&gt;<span class="code-number">1</span>&amp;<span class="code-number">63</span>),<span class="code-number">-1</span>!==i.indexOf(u)&amp;&amp;(r=a+o),a+=o+(<span class="code-string">"h264"</span>===t?<span class="code-number">1</span>:<span class="code-number">2</span>)}<span class="code-keyword">else</span> a++}<span class="code-keyword">return</span> e.subarray(<span class="code-number">0</span>,<span class="code-number">0</span>)},vt={<span class="code-attr">webm</span>:$e([<span class="code-number">119</span>,<span class="code-number">101</span>,<span class="code-number">98</span>,<span class="code-number">109</span>]),<span class="code-attr">matroska</span>:$e([<span class="code-number">109</span>,<span class="code-number">97</span>,<span class="code-number">116</span>,<span class="code-number">114</span>,<span class="code-number">111</span>,<span class="code-number">115</span>,<span class="code-number">107</span>,<span class="code-number">97</span>]),<span class="code-attr">flac</span>:$e([<span class="code-number">102</span>,<span class="code-number">76</span>,<span class="code-number">97</span>,<span class="code-number">67</span>]),<span class="code-attr">ogg</span>:$e([<span class="code-number">79</span>,<span class="code-number">103</span>,<span class="code-number">103</span>,<span class="code-number">83</span>]),<span class="code-attr">ac3</span>:$e([<span class="code-number">11</span>,<span class="code-number">119</span>]),<span class="code-attr">riff</span>:$e([<span class="code-number">82</span>,<span class="code-number">73</span>,<span class="code-number">70</span>,<span class="code-number">70</span>]),<span class="code-attr">avi</span>:$e([<span class="code-number">65</span>,<span class="code-number">86</span>,<span class="code-number">73</span>]),<span class="code-attr">wav</span>:$e([<span class="code-number">87</span>,<span class="code-number">65</span>,<span class="code-number">86</span>,<span class="code-number">69</span>]),<span class="code-string">"3gp"</span>:$e([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>,<span class="code-number">51</span>,<span class="code-number">103</span>]),<span class="code-attr">mp4</span>:$e([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>]),<span class="code-attr">fmp4</span>:$e([<span class="code-number">115</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>]),<span class="code-attr">mov</span>:$e([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>,<span class="code-number">113</span>,<span class="code-number">116</span>])},_t={<span class="code-attr">aac</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=rt(e);<span class="code-keyword">return</span> it(e,[<span class="code-number">255</span>,<span class="code-number">16</span>],{<span class="code-attr">offset</span>:t,<span class="code-attr">mask</span>:[<span class="code-number">255</span>,<span class="code-number">22</span>]})},<span class="code-attr">mp3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=rt(e);<span class="code-keyword">return</span> it(e,[<span class="code-number">255</span>,<span class="code-number">2</span>],{<span class="code-attr">offset</span>:t,<span class="code-attr">mask</span>:[<span class="code-number">255</span>,<span class="code-number">6</span>]})},<span class="code-attr">webm</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=ct(e,[ot.EBML,ot.DocType])[<span class="code-number">0</span>];<span class="code-keyword">return</span> it(t,vt.webm)},<span class="code-attr">mkv</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=ct(e,[ot.EBML,ot.DocType])[<span class="code-number">0</span>];<span class="code-keyword">return</span> it(t,vt.matroska)},<span class="code-attr">mp4</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!_t[<span class="code-string">"3gp"</span>](e)&amp;&amp;!_t.mov(e)&amp;&amp;(it(e,vt.mp4,{<span class="code-attr">offset</span>:<span class="code-number">4</span>})||it(e,vt.fmp4,{<span class="code-attr">offset</span>:<span class="code-number">4</span>}))},<span class="code-attr">mov</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it(e,vt.mov,{<span class="code-attr">offset</span>:<span class="code-number">4</span>})},<span class="code-string">"3gp"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it(e,vt[<span class="code-string">"3gp"</span>],{<span class="code-attr">offset</span>:<span class="code-number">4</span>})},<span class="code-attr">ac3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=rt(e);<span class="code-keyword">return</span> it(e,vt.ac3,{<span class="code-attr">offset</span>:t})},<span class="code-attr">ts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.length&lt;<span class="code-number">189</span>&amp;&amp;e.length&gt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-number">71</span>===e[<span class="code-number">0</span>];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t+<span class="code-number">188</span>&lt;e.length&amp;&amp;t&lt;<span class="code-number">188</span>;){<span class="code-keyword">if</span>(<span class="code-number">71</span>===e[t]&amp;&amp;<span class="code-number">71</span>===e[t+<span class="code-number">188</span>])<span class="code-keyword">return</span>!<span class="code-number">0</span>;t+=<span class="code-number">1</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">flac</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=rt(e);<span class="code-keyword">return</span> it(e,vt.flac,{<span class="code-attr">offset</span>:t})},<span class="code-attr">ogg</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it(e,vt.ogg)},<span class="code-attr">avi</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it(e,vt.riff)&amp;&amp;it(e,vt.avi,{<span class="code-attr">offset</span>:<span class="code-number">8</span>})},<span class="code-attr">wav</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> it(e,vt.riff)&amp;&amp;it(e,vt.wav,{<span class="code-attr">offset</span>:<span class="code-number">8</span>})},<span class="code-attr">h264</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> yt(e,<span class="code-string">"h264"</span>,<span class="code-number">7</span>,<span class="code-number">3</span>)}(e).length},<span class="code-attr">h265</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> yt(e,<span class="code-string">"h265"</span>,[<span class="code-number">32</span>,<span class="code-number">33</span>],<span class="code-number">3</span>)}(e).length}},bt=<span class="code-built_in">Object</span>.keys(_t).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"ts"</span>!==e&amp;&amp;<span class="code-string">"h264"</span>!==e&amp;&amp;<span class="code-string">"h265"</span>!==e})).concat([<span class="code-string">"ts"</span>,<span class="code-string">"h264"</span>,<span class="code-string">"h265"</span>]);bt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=_t[e];_t[e]=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t($e(e))}}));<span class="code-keyword">var</span> Tt,St=_t,It=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=$e(e);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;bt.length;t++){<span class="code-keyword">var</span> i=bt[t];<span class="code-keyword">if</span>(St[i](e))<span class="code-keyword">return</span> i}<span class="code-keyword">return</span><span class="code-string">""</span>},wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> st(e,[<span class="code-string">"moof"</span>]).length&gt;<span class="code-number">0</span>},Lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">4</span>===e.readyState)<span class="code-keyword">return</span> t()},kt=u.default.EventTarget,At=u.default.mergeOptions,Et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byterange.offset+e.byterange.length<span class="code-number">-1</span>;<span class="code-keyword">return</span> e.uri+<span class="code-string">"-"</span>+e.byterange.offset+<span class="code-string">"-"</span>+t},Pt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> e){<span class="code-keyword">var</span> s=e[a].sidx;<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=Et(s);<span class="code-keyword">if</span>(!t[o])<span class="code-keyword">break</span>;i=t[o].sidxInfo,n=s,(<span class="code-built_in">Boolean</span>(!i.map&amp;&amp;!n.map)||<span class="code-built_in">Boolean</span>(i.map&amp;&amp;n.map&amp;&amp;i.map.byterange.offset===n.map.byterange.offset&amp;&amp;i.map.byterange.length===n.map.byterange.length))&amp;&amp;i.uri===n.uri&amp;&amp;i.byterange.offset===n.byterange.offset&amp;&amp;i.byterange.length===n.byterange.length&amp;&amp;(r[o]=t[o])}}<span class="code-keyword">return</span> r},Ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a;<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n={}),(a=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).masterPlaylistLoader_=r||d(a),r||(a.isMaster_=!<span class="code-number">0</span>);<span class="code-keyword">var</span> s=n,o=s.withCredentials,u=<span class="code-keyword">void</span> <span class="code-number">0</span>!==o&amp;&amp;o,l=s.handleManifestRedirects,h=<span class="code-keyword">void</span> <span class="code-number">0</span>!==l&amp;&amp;l;<span class="code-keyword">if</span>(a.vhs_=i,a.withCredentials=u,a.handleManifestRedirects=h,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or object is required"</span>);<span class="code-keyword">return</span> a.on(<span class="code-string">"minimumUpdatePeriod"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshXml_()})),a.on(<span class="code-string">"mediaupdatetimeout"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshMedia_(a.media().id)})),a.state=<span class="code-string">"HAVE_NOTHING"</span>,a.loadedPlaylists_={},a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.requestErrored_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span>!<span class="code-keyword">this</span>.request||(<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e?(<span class="code-keyword">this</span>.error=<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> e||e <span class="code-keyword">instanceof</span> <span class="code-built_in">Error</span>?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"DASH request error at URL: "</span>+t.uri,<span class="code-attr">response</span>:t.response,<span class="code-attr">code</span>:<span class="code-number">2</span>}:e,i&amp;&amp;(<span class="code-keyword">this</span>.state=i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>),!<span class="code-number">0</span>):<span class="code-keyword">void</span> <span class="code-number">0</span>)},i.addSidxSegments_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>,r=e.sidx&amp;&amp;Et(e.sidx);<span class="code-keyword">if</span>(e.sidx&amp;&amp;r&amp;&amp;!<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_[r]){<span class="code-keyword">var</span> a=p(<span class="code-keyword">this</span>.handleManifestRedirects,e.sidx.resolvedUri),s=<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_;s[r]={<span class="code-attr">sidxInfo</span>:e.sidx};<span class="code-keyword">var</span> u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a,o</span>)</span>{<span class="code-keyword">if</span>(!n.requestErrored_(a,o,t)){<span class="code-keyword">var</span> u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">references</span>:[],<span class="code-attr">referenceId</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">timescale</span>:t.getUint32(<span class="code-number">8</span>)},n=<span class="code-number">12</span>;<span class="code-number">0</span>===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+<span class="code-number">4</span>),n+=<span class="code-number">8</span>):(i.earliestPresentationTime=t.getUint32(n)*Ke+t.getUint32(n+<span class="code-number">4</span>),i.firstOffset=t.getUint32(n+<span class="code-number">8</span>)*Ke+t.getUint32(n+<span class="code-number">12</span>),n+=<span class="code-number">16</span>),n+=<span class="code-number">2</span>;<span class="code-keyword">var</span> r=t.getUint16(n);<span class="code-keyword">for</span>(n+=<span class="code-number">2</span>;r&gt;<span class="code-number">0</span>;n+=<span class="code-number">12</span>,r--)i.references.push({<span class="code-attr">referenceType</span>:(<span class="code-number">128</span>&amp;e[n])&gt;&gt;&gt;<span class="code-number">7</span>,<span class="code-attr">referencedSize</span>:<span class="code-number">2147483647</span>&amp;t.getUint32(n),<span class="code-attr">subsegmentDuration</span>:t.getUint32(n+<span class="code-number">4</span>),<span class="code-attr">startsWithSap</span>:!!(<span class="code-number">128</span>&amp;e[n+<span class="code-number">8</span>]),<span class="code-attr">sapType</span>:(<span class="code-number">112</span>&amp;e[n+<span class="code-number">8</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">sapDeltaTime</span>:<span class="code-number">268435455</span>&amp;t.getUint32(n+<span class="code-number">8</span>)});<span class="code-keyword">return</span> i}($e(o.response).subarray(<span class="code-number">8</span>));<span class="code-keyword">return</span> s[r].sidx=u,Ye(e,u,e.sidx.resolvedUri),i(!<span class="code-number">0</span>)}};<span class="code-keyword">this</span>.request=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=[],a=!<span class="code-number">1</span>,s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,n,r</span>)</span>{<span class="code-keyword">return</span> t.abort(),a=!<span class="code-number">0</span>,i(e,t,n,r)},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!a){<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r);<span class="code-keyword">var</span> i=t.responseText.substring(r&amp;&amp;r.byteLength||<span class="code-number">0</span>,t.responseText.length);<span class="code-keyword">if</span>(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=<span class="code-built_in">arguments</span>.length,t=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(e),i=<span class="code-number">0</span>;i&lt;e;i++)t[i]=<span class="code-built_in">arguments</span>[i];<span class="code-keyword">if</span>((t=t.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;(e.byteLength||e.length)&amp;&amp;<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e}))).length&lt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> $e(t[<span class="code-number">0</span>]);<span class="code-keyword">var</span> n=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e+(t.byteLength||t.length)}),<span class="code-number">0</span>),r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),a=<span class="code-number">0</span>;<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=$e(e),r.set(e,a),a+=e.byteLength})),r}(r,tt(i,!<span class="code-number">0</span>)),n=n||rt(r),r.length&lt;<span class="code-number">10</span>||n&amp;&amp;r.length&lt;n+<span class="code-number">2</span>)<span class="code-keyword">return</span> Lt(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r)}));<span class="code-keyword">var</span> o=It(r);<span class="code-keyword">return</span><span class="code-string">"ts"</span>===o&amp;&amp;r.length&lt;<span class="code-number">188</span>||!o&amp;&amp;r.length&lt;<span class="code-number">376</span>?Lt(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r)})):s(<span class="code-literal">null</span>,t,o,r)}},u=t({<span class="code-attr">uri</span>:e,<span class="code-attr">beforeSend</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.overrideMimeType(<span class="code-string">"text/plain; charset=x-user-defined"</span>),e.addEventListener(<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> t.total,t.loaded,ie(e,<span class="code-literal">null</span>,{<span class="code-attr">statusCode</span>:e.status},o)}))}},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> ie(u,e,t,o)}));<span class="code-keyword">return</span> u}(a,<span class="code-keyword">this</span>.vhs_.xhr,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,r,s</span>)</span>{<span class="code-keyword">if</span>(t)<span class="code-keyword">return</span> u(t,i);<span class="code-keyword">if</span>(!r||<span class="code-string">"mp4"</span>!==r)<span class="code-keyword">return</span> u({<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"Unsupported "</span>+(r||<span class="code-string">"unknown"</span>)+<span class="code-string">" container type for sidx segment at URL: "</span>+a,<span class="code-attr">response</span>:<span class="code-string">""</span>,<span class="code-attr">playlist</span>:e,<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">code</span>:<span class="code-number">2</span>},i);<span class="code-keyword">var</span> o=e.sidx.byterange,d=o.offset,l=o.length;<span class="code-keyword">if</span>(s.length&gt;=l+d)<span class="code-keyword">return</span> u(t,{<span class="code-attr">response</span>:s.subarray(d,d+l),<span class="code-attr">status</span>:i.status,<span class="code-attr">uri</span>:i.uri});n.request=n.vhs_.xhr({<span class="code-attr">uri</span>:a,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:re({<span class="code-attr">byterange</span>:e.sidx.byterange})},u)}))}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.mediaRequest_=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i(!<span class="code-number">1</span>)}),<span class="code-number">0</span>)},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.stopRequest(),<span class="code-keyword">this</span>.loadedPlaylists_={},o.default.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_),o.default.clearTimeout(<span class="code-keyword">this</span>.mediaRequest_),o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.off()},i.hasPendingRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request||<span class="code-keyword">this</span>.mediaRequest_},i.stopRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.state;<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists[e]}<span class="code-keyword">var</span> n=!<span class="code-keyword">this</span>.media_||e.id!==<span class="code-keyword">this</span>.media_.id;<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.id]&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.id].endList)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(n&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));n&amp;&amp;(<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.addSidxSegments_(e,i,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{t.haveMetadata({<span class="code-attr">startingState</span>:i,<span class="code-attr">playlist</span>:e})})))},i.haveMetadata=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.startingState,i=e.playlist;<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.loadedPlaylists_[i.id]=i,<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.refreshMedia_(i.id),<span class="code-string">"HAVE_MASTER"</span>===t?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.stopRequest(),o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;o.default.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),o.default.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?i.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.load()}),n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?i&amp;&amp;!i.endList?<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediaupdatetimeout"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()},i.start=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.isMaster_?<span class="code-keyword">this</span>.requestMaster_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[<span class="code-number">0</span>])})):<span class="code-keyword">this</span>.mediaRequest_=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.haveMaster_()}),<span class="code-number">0</span>)},i.requestMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">if</span>(!t.requestErrored_(i,n)){<span class="code-keyword">var</span> r=n.responseText!==t.masterPlaylistLoader_.masterXml_;<span class="code-keyword">return</span> t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&amp;&amp;n.responseHeaders.date?t.masterLoaded_=<span class="code-built_in">Date</span>.parse(n.responseHeaders.date):t.masterLoaded_=<span class="code-built_in">Date</span>.now(),t.masterPlaylistLoader_.srcUrl=p(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),<span class="code-keyword">void</span> t.syncClientServerClock_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e(n,r)}))):e(n,r)}<span class="code-string">"HAVE_NOTHING"</span>===t.state&amp;&amp;(t.started=!<span class="code-number">1</span>)}))},i.syncClientServerClock_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">this</span>,n=(t=<span class="code-keyword">this</span>.masterPlaylistLoader_.masterXml_,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Fe(e,<span class="code-string">"UTCTiming"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=Ve(t);<span class="code-keyword">switch</span>(i.schemeIdUri){<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2012"</span>:i.method=<span class="code-string">"HEAD"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2012"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2012"</span>:i.method=<span class="code-string">"GET"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2012"</span>:i.method=<span class="code-string">"DIRECT"</span>,i.value=<span class="code-built_in">Date</span>.parse(i.value);<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-ntp:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:ntp:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:sntp:2014"</span>:<span class="code-keyword">default</span>:<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"UNSUPPORTED_UTC_TIMING_SCHEME"</span>)}<span class="code-keyword">return</span> i}(Xe(t)));<span class="code-keyword">return</span> <span class="code-literal">null</span>===n?(<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_=<span class="code-keyword">this</span>.masterLoaded_-<span class="code-built_in">Date</span>.now(),e()):<span class="code-string">"DIRECT"</span>===n.method?(<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_=n.value-<span class="code-built_in">Date</span>.now(),e()):<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:m(<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,n.value),<span class="code-attr">method</span>:n.method,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,r</span>)</span>{<span class="code-keyword">if</span>(i.request){<span class="code-keyword">if</span>(t)<span class="code-keyword">return</span> i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-<span class="code-built_in">Date</span>.now(),e();<span class="code-keyword">var</span> a;a=<span class="code-string">"HEAD"</span>===n.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class="code-built_in">Date</span>.parse(r.responseHeaders.date):i.masterLoaded_:<span class="code-built_in">Date</span>.parse(r.responseText),i.masterPlaylistLoader_.clientOffset_=a-<span class="code-built_in">Date</span>.now(),e()}})))},i.haveMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>,<span class="code-keyword">this</span>.isMaster_?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.childPlaylist_)},i.handleMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>;<span class="code-keyword">var</span> e,t,i,n=(e={<span class="code-attr">masterXml</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.masterXml_,<span class="code-attr">srcUrl</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,<span class="code-attr">clientOffset</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_,<span class="code-attr">sidxMapping</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_},i=Qe(e.masterXml,{<span class="code-attr">manifestUri</span>:t=e.srcUrl,<span class="code-attr">clientOffset</span>:e.clientOffset,<span class="code-attr">sidxMapping</span>:e.sidxMapping}),E(i,t),i),r=<span class="code-keyword">this</span>.masterPlaylistLoader_.master;r&amp;&amp;(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=!<span class="code-number">0</span>,r=At(e,{<span class="code-attr">duration</span>:t.duration,<span class="code-attr">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),a=<span class="code-number">0</span>;a&lt;t.playlists.length;a++){<span class="code-keyword">var</span> s=t.playlists[a];<span class="code-keyword">if</span>(s.sidx){<span class="code-keyword">var</span> o=Et(s.sidx);i&amp;&amp;i[o]&amp;&amp;Ye(s,i[o].sidx,s.sidx.resolvedUri)}<span class="code-keyword">var</span> u=O(r,s);u&amp;&amp;(r=u,n=!<span class="code-number">1</span>)}<span class="code-keyword">return</span> k(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,a</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists[<span class="code-number">0</span>].id,o=O(r,e.playlists[<span class="code-number">0</span>]);o&amp;&amp;((r=o).mediaGroups[t][i][a].playlists[<span class="code-number">0</span>]=r.playlists[s],n=!<span class="code-number">1</span>)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&amp;&amp;(n=!<span class="code-number">1</span>),n?<span class="code-literal">null</span>:r}(r,n,<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_)),<span class="code-keyword">this</span>.masterPlaylistLoader_.master=n||r;<span class="code-keyword">var</span> a=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.locations&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.master.locations[<span class="code-number">0</span>];<span class="code-keyword">return</span> a&amp;&amp;a!==<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl=a),(!r||n&amp;&amp;r.minimumUpdatePeriod!==n.minimumUpdatePeriod)&amp;&amp;<span class="code-keyword">this</span>.updateMinimumUpdatePeriodTimeout_(),<span class="code-built_in">Boolean</span>(n)},i.updateMinimumUpdatePeriodTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;o.default.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_);<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">i</span>)</span>{e.minimumUpdatePeriodTimeout_=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"minimumUpdatePeriod"</span>),t(i)}),i)},i=<span class="code-keyword">this</span>.masterPlaylistLoader_.master&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.master.minimumUpdatePeriod;i&gt;<span class="code-number">0</span>?t(i):<span class="code-number">0</span>===i&amp;&amp;(<span class="code-keyword">this</span>.media()?t(<span class="code-number">1e3</span>*<span class="code-keyword">this</span>.media().targetDuration):<span class="code-keyword">this</span>.one(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t(<span class="code-number">1e3</span>*e.media().targetDuration)})))},i.refreshXml_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.requestMaster_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a;i&amp;&amp;(e.media_&amp;&amp;(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=Pt(n.playlists,r),k(n,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists;a=At(a,Pt(s,r))}})),a),e.addSidxSegments_(e.media(),e.state,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"refreshMedia_ must take a media id"</span>);<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.isMaster_&amp;&amp;<span class="code-keyword">this</span>.handleMaster_();<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists,n=!<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media_!==i[e];n?<span class="code-keyword">this</span>.media_=i[e]:<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>),<span class="code-keyword">this</span>.media().endList||(<span class="code-keyword">this</span>.mediaUpdateTimeout=o.default.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger(<span class="code-string">"mediaupdatetimeout"</span>)}),D(<span class="code-keyword">this</span>.media(),<span class="code-built_in">Boolean</span>(n)))),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)},t}(kt),Ut={<span class="code-attr">GOAL_BUFFER_LENGTH</span>:<span class="code-number">30</span>,<span class="code-attr">MAX_GOAL_BUFFER_LENGTH</span>:<span class="code-number">60</span>,<span class="code-attr">BACK_BUFFER_LENGTH</span>:<span class="code-number">30</span>,<span class="code-attr">GOAL_BUFFER_LENGTH_RATE</span>:<span class="code-number">1</span>,<span class="code-attr">INITIAL_BANDWIDTH</span>:<span class="code-number">4194304</span>,<span class="code-attr">BANDWIDTH_VARIANCE</span>:<span class="code-number">1.2</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE</span>:<span class="code-number">0</span>,<span class="code-attr">MAX_BUFFER_LOW_WATER_LINE</span>:<span class="code-number">30</span>,<span class="code-attr">EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE</span>:<span class="code-number">16</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE_RATE</span>:<span class="code-number">1</span>,<span class="code-attr">BUFFER_HIGH_WATER_LINE</span>:<span class="code-number">30</span>},Ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">new</span> <span class="code-built_in">ArrayBuffer</span>(e.length)),i=<span class="code-number">0</span>;i&lt;e.length;i++)t[i]=e.charCodeAt(i);<span class="code-keyword">return</span> t.buffer},Dt=[],xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,u=e.onTrackInfo,d=e.onAudioTimingInfo,l=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,f=e.onId3,m=e.onCaptions,p=e.onDone,g={<span class="code-attr">isPartial</span>:a,<span class="code-attr">buffer</span>:[]};<span class="code-keyword">if</span>(t.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Tt&amp;&amp;(<span class="code-string">"data"</span>===e.data.action&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,u=n.metadata,d=n.videoFrameDtsTime,l=n.videoFramePtsTime;t.buffer.push({<span class="code-attr">captions</span>:s,<span class="code-attr">captionStreams</span>:o,<span class="code-attr">metadata</span>:u});<span class="code-keyword">var</span> h=e.data.segment.boxes||{<span class="code-attr">data</span>:e.data.segment.data},c={<span class="code-attr">type</span>:r,<span class="code-attr">data</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(h.data,h.data.byteOffset,h.data.byteLength),<span class="code-attr">initSegment</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.data,a.byteOffset,a.byteLength)};<span class="code-keyword">void</span> <span class="code-number">0</span>!==d&amp;&amp;(c.videoFrameDtsTime=d),<span class="code-keyword">void</span> <span class="code-number">0</span>!==l&amp;&amp;(c.videoFramePtsTime=l),i(c)}(e,g,o),<span class="code-string">"trackinfo"</span>===e.data.action&amp;&amp;u(e.data.trackInfo),<span class="code-string">"gopInfo"</span>===e.data.action&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.gopInfo=e.data.gopInfo}(e,g),<span class="code-string">"audioTimingInfo"</span>===e.data.action&amp;&amp;d(e.data.audioTimingInfo),<span class="code-string">"videoTimingInfo"</span>===e.data.action&amp;&amp;l(e.data.videoTimingInfo),<span class="code-string">"videoSegmentTimingInfo"</span>===e.data.action&amp;&amp;h(e.data.videoSegmentTimingInfo),<span class="code-string">"audioSegmentTimingInfo"</span>===e.data.action&amp;&amp;c(e.data.audioSegmentTimingInfo),<span class="code-string">"id3Frame"</span>===e.data.action&amp;&amp;f([e.data.id3Frame],e.data.id3Frame.dispatchType),<span class="code-string">"caption"</span>===e.data.action&amp;&amp;m(e.data.caption),<span class="code-string">"transmuxed"</span>===e.data.type&amp;&amp;(t.onmessage=<span class="code-literal">null</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({<span class="code-attr">transmuxedData</span>:g,<span class="code-attr">callback</span>:p}),Rt()))},n&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setAudioAppendStart"</span>,<span class="code-attr">appendStart</span>:n}),<span class="code-built_in">Array</span>.isArray(r)&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"alignGopsWith"</span>,<span class="code-attr">gopsToAlignWith</span>:r}),<span class="code-keyword">void</span> <span class="code-number">0</span>!==s&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setRemux"</span>,<span class="code-attr">remux</span>:s}),i.byteLength){<span class="code-keyword">var</span> y=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?i:i.buffer,v=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?<span class="code-number">0</span>:i.byteOffset;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"push"</span>,<span class="code-attr">data</span>:y,<span class="code-attr">byteOffset</span>:v,<span class="code-attr">byteLength</span>:i.byteLength},[y])}t.postMessage({<span class="code-attr">action</span>:a?<span class="code-string">"partialFlush"</span>:<span class="code-string">"flush"</span>})},Rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Tt=<span class="code-literal">null</span>,Dt.length&amp;&amp;(<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span>(Tt=Dt.shift())?Tt():xt(Tt))},Mt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:t}),Rt()},Bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!Tt)<span class="code-keyword">return</span> Tt=e,<span class="code-keyword">void</span> Mt(t,e);Dt.push(Mt.bind(<span class="code-literal">null</span>,t,e))},Ft=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Bt(<span class="code-string">"reset"</span>,e)},Nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">this</span>.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class="code-keyword">this</span>.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class="code-number">1</span>),n&gt;<span class="code-number">-1</span>)},<span class="code-keyword">this</span>.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a;<span class="code-keyword">if</span>(i=e[t])<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span>{<span class="code-keyword">for</span>(a=[],n=<span class="code-built_in">arguments</span>.length,n=<span class="code-number">1</span>;n&lt;<span class="code-built_in">arguments</span>.length;++n)a.push(<span class="code-built_in">arguments</span>[n]);<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].apply(<span class="code-keyword">this</span>,a)}},<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e={}}}};Nt.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.flush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.partialFlush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"endedtimeline"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.endTimeline(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"reset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.reset(t)})),e},Nt.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e)},Nt.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,e)},Nt.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,e)},Nt.prototype.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,e)},Nt.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>,e)};<span class="code-keyword">var</span> qt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">1</span>;<span class="code-keyword">for</span>(e&gt;t&amp;&amp;(i=<span class="code-number">-1</span>);<span class="code-built_in">Math</span>.abs(t-e)&gt;<span class="code-number">4294967296</span>;)e+=<span class="code-number">8589934592</span>*i;<span class="code-keyword">return</span> e};<span class="code-keyword">new</span> Nt;<span class="code-keyword">var</span> Wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">31</span>&amp;e[<span class="code-number">1</span>];<span class="code-keyword">return</span>(t&lt;&lt;=<span class="code-number">8</span>)|e[<span class="code-number">2</span>]},Vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!(<span class="code-number">64</span>&amp;e[<span class="code-number">1</span>])},Ht=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>;<span class="code-keyword">return</span>(<span class="code-number">48</span>&amp;e[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(t+=e[<span class="code-number">4</span>]+<span class="code-number">1</span>),t},Gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">switch</span>(e){<span class="code-keyword">case</span> <span class="code-number">5</span>:<span class="code-keyword">return</span><span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">return</span><span class="code-string">"sei_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:<span class="code-keyword">return</span><span class="code-string">"seq_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:<span class="code-keyword">return</span><span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:<span class="code-keyword">return</span><span class="code-string">"access_unit_delimiter_rbsp"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},jt={<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Wt(e);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?<span class="code-string">"pat"</span>:i===t?<span class="code-string">"pmt"</span>:t?<span class="code-string">"pes"</span>:<span class="code-literal">null</span>},<span class="code-attr">parsePat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Vt(e),i=<span class="code-number">4</span>+Ht(e);<span class="code-keyword">return</span> t&amp;&amp;(i+=e[i]+<span class="code-number">1</span>),(<span class="code-number">31</span>&amp;e[i+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[i+<span class="code-number">11</span>]},<span class="code-attr">parsePmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={},i=Vt(e),n=<span class="code-number">4</span>+Ht(e);<span class="code-keyword">if</span>(i&amp;&amp;(n+=e[n]+<span class="code-number">1</span>),<span class="code-number">1</span>&amp;e[n+<span class="code-number">5</span>]){<span class="code-keyword">var</span> r;r=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">2</span>])<span class="code-number">-4</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">11</span>]);a&lt;r;){<span class="code-keyword">var</span> s=n+a;t[(<span class="code-number">31</span>&amp;e[s+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">2</span>]]=e[s],a+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[s+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">4</span>])}<span class="code-keyword">return</span> t}},<span class="code-attr">parsePayloadUnitStartIndicator</span>:Vt,<span class="code-attr">parsePesType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">switch</span>(t[Wt(e)]){<span class="code-keyword">case</span> <span class="code-number">27</span>:<span class="code-keyword">return</span><span class="code-string">"video"</span>;<span class="code-keyword">case</span> <span class="code-number">15</span>:<span class="code-keyword">return</span><span class="code-string">"audio"</span>;<span class="code-keyword">case</span> <span class="code-number">21</span>:<span class="code-keyword">return</span><span class="code-string">"timed-metadata"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">parsePesTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!Vt(e))<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> t=<span class="code-number">4</span>+Ht(e);<span class="code-keyword">if</span>(t&gt;=e.byteLength)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i,n=<span class="code-literal">null</span>;<span class="code-keyword">return</span> <span class="code-number">192</span>&amp;(i=e[t+<span class="code-number">7</span>])&amp;&amp;((n={}).pts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.pts*=<span class="code-number">4</span>,n.pts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,n.dts=n.pts,<span class="code-number">64</span>&amp;i&amp;&amp;(n.dts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.dts*=<span class="code-number">4</span>,n.dts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),n},<span class="code-attr">videoPacketContainsKeyFrame</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">4</span>+Ht(e),i=e.subarray(t),n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=!<span class="code-number">1</span>;r&lt;i.byteLength<span class="code-number">-3</span>;r++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===i[r+<span class="code-number">2</span>]){n=r+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;n&lt;i.byteLength;)<span class="code-keyword">switch</span>(i[n]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]){n+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n++;<span class="code-keyword">break</span>}r+<span class="code-number">3</span>!==n<span class="code-number">-2</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===Gt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>);<span class="code-keyword">do</span>{n++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]||<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===Gt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:n+=<span class="code-number">3</span>}<span class="code-keyword">return</span> i=i.subarray(r),n-=r,r=<span class="code-number">0</span>,i&amp;&amp;i.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===Gt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),a}},zt=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>],Xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span> i=i&gt;=<span class="code-number">0</span>?i:<span class="code-number">0</span>,(<span class="code-number">16</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">4</span>?i+<span class="code-number">20</span>:i+<span class="code-number">10</span>},Qt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> t.length-i&lt;<span class="code-number">10</span>||t[i]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?i:e(t,i+=Xt(t,i))},Yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},Kt={<span class="code-attr">isLikelyAacData</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Qt(e,<span class="code-number">0</span>);<span class="code-keyword">return</span> e.length&gt;=t+<span class="code-number">2</span>&amp;&amp;<span class="code-number">255</span>==(<span class="code-number">255</span>&amp;e[t])&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])&amp;&amp;<span class="code-number">16</span>==(<span class="code-number">22</span>&amp;e[t+<span class="code-number">1</span>])},<span class="code-attr">parseId3TagSize</span>:Xt,<span class="code-attr">parseAdtsSize</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-number">224</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,n=e[t+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>;<span class="code-keyword">return</span> <span class="code-number">6144</span>&amp;e[t+<span class="code-number">3</span>]|n|i},<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e[t]===<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">1</span>]===<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">2</span>]===<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?<span class="code-string">"timed-metadata"</span>:!<span class="code-number">0</span>&amp;e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])?<span class="code-string">"audio"</span>:<span class="code-literal">null</span>},<span class="code-attr">parseSampleRate</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t+<span class="code-number">5</span>&lt;e.length;){<span class="code-keyword">if</span>(<span class="code-number">255</span>===e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;e[t+<span class="code-number">1</span>]))<span class="code-keyword">return</span> zt[(<span class="code-number">60</span>&amp;e[t+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>];t++}<span class="code-keyword">return</span> <span class="code-literal">null</span>},<span class="code-attr">parseAacTimestamp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;t=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;e[<span class="code-number">5</span>]&amp;&amp;(t+=<span class="code-number">4</span>,t+=Yt(e.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((i=Yt(e.subarray(t+<span class="code-number">4</span>,t+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-string">"PRIV"</span>===<span class="code-built_in">String</span>.fromCharCode(e[t],e[t+<span class="code-number">1</span>],e[t+<span class="code-number">2</span>],e[t+<span class="code-number">3</span>])){n=e.subarray(t+<span class="code-number">10</span>,t+i+<span class="code-number">10</span>);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.byteLength;r++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===n[r]){<span class="code-keyword">if</span>(<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===<span class="code-built_in">unescape</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r}(n,<span class="code-number">0</span>,r))){<span class="code-keyword">var</span> a=n.subarray(r+<span class="code-number">1</span>),s=(<span class="code-number">1</span>&amp;a[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|a[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|a[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|a[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|a[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;<span class="code-keyword">return</span>(s*=<span class="code-number">4</span>)+(<span class="code-number">3</span>&amp;a[<span class="code-number">7</span>])}<span class="code-keyword">break</span>}}t+=<span class="code-number">10</span>,t+=i}<span class="code-keyword">while</span>(t&lt;e.byteLength);<span class="code-keyword">return</span> <span class="code-literal">null</span>}},$t=<span class="code-number">9e4</span>,Jt=$t,Zt=(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e*$t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/$t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},qt),ei={};ei.ts=jt,ei.aac=Kt;<span class="code-keyword">var</span> ti,ii=Jt,ni=<span class="code-number">188</span>,ri=<span class="code-number">71</span>,ai=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=ni,d=!<span class="code-number">1</span>;u&lt;=e.byteLength;)<span class="code-keyword">if</span>(e[o]!==ri||e[u]!==ri&amp;&amp;u!==e.byteLength)o++,u++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(o,u),ei.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(d)<span class="code-keyword">break</span>;o+=ni,u+=ni}<span class="code-keyword">for</span>(o=(u=e.byteLength)-ni,d=!<span class="code-number">1</span>;o&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(e[o]!==ri||e[u]!==ri&amp;&amp;u!==e.byteLength)o--,u--;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(o,u),ei.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(d)<span class="code-keyword">break</span>;o-=ni,u-=ni}},si=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o,u,d,l=<span class="code-number">0</span>,h=ni,c=!<span class="code-number">1</span>,f={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>};h&lt;e.byteLength;)<span class="code-keyword">if</span>(e[l]!==ri||e[h]!==ri)l++,h++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(l,h),ei.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:<span class="code-keyword">if</span>(r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;(a&amp;&amp;!c&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),c=!<span class="code-number">0</span>),!i.firstKeyFrame)){<span class="code-keyword">if</span>(a&amp;&amp;<span class="code-number">0</span>!==f.size){<span class="code-keyword">for</span>(o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(f.size),u=<span class="code-number">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class="code-keyword">if</span>(ei.ts.videoPacketContainsKeyFrame(o)){<span class="code-keyword">var</span> m=ei.ts.parsePesTime(o);m?(i.firstKeyFrame=m,i.firstKeyFrame.type=<span class="code-string">"video"</span>):<span class="code-built_in">console</span>.warn(<span class="code-string">"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."</span>)}f.size=<span class="code-number">0</span>}f.data.push(n),f.size+=n.byteLength}}<span class="code-keyword">if</span>(c&amp;&amp;i.firstKeyFrame)<span class="code-keyword">break</span>;l+=ni,h+=ni}<span class="code-keyword">for</span>(l=(h=e.byteLength)-ni,c=!<span class="code-number">1</span>;l&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(e[l]!==ri||e[h]!==ri)l--,h--;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(n=e.subarray(l,h),ei.ts.parseType(n,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pes"</span>:r=ei.ts.parsePesType(n,t.table),a=ei.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;a&amp;&amp;(s=ei.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),c=!<span class="code-number">0</span>)}<span class="code-keyword">if</span>(c)<span class="code-keyword">break</span>;l-=ni,h-=ni}},oi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=ei.aac.isLikelyAacData(e)?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=!<span class="code-number">1</span>,n=<span class="code-number">0</span>,r=<span class="code-literal">null</span>,a=<span class="code-literal">null</span>,s=<span class="code-number">0</span>,o=<span class="code-number">0</span>;e.length-o&gt;=<span class="code-number">3</span>;){<span class="code-keyword">switch</span>(ei.aac.parseType(e,o)){<span class="code-keyword">case</span><span class="code-string">"timed-metadata"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">10</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=ei.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=ei.aac.parseAacTimestamp(t)),o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"audio"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">7</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=ei.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=ei.aac.parseSampleRate(t)),n++,o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:o++}<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(<span class="code-literal">null</span>===r||<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> u=ii/r;<span class="code-keyword">return</span>{<span class="code-attr">audio</span>:[{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a,<span class="code-attr">pts</span>:a},{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a+<span class="code-number">1024</span>*n*u,<span class="code-attr">pts</span>:a+<span class="code-number">1024</span>*n*u}]}}(e):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">pid</span>:<span class="code-literal">null</span>,<span class="code-attr">table</span>:<span class="code-literal">null</span>},i={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=ni;r&lt;e.byteLength;)<span class="code-keyword">if</span>(e[n]!==ri||e[r]!==ri)n++,r++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(i=e.subarray(n,r),ei.ts.parseType(i,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pat"</span>:t.pid||(t.pid=ei.ts.parsePat(i));<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"pmt"</span>:t.table||(t.table=ei.ts.parsePmt(i))}<span class="code-keyword">if</span>(t.pid&amp;&amp;t.table)<span class="code-keyword">return</span>;n+=ni,r+=ni}}(e,t),t.table)<span class="code-keyword">if</span>(t.table.hasOwnProperty(n))<span class="code-keyword">switch</span>(t.table[n]){<span class="code-keyword">case</span> <span class="code-number">27</span>:i.video=[],si(e,t,i),<span class="code-number">0</span>===i.video.length&amp;&amp;<span class="code-keyword">delete</span> i.video;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">15</span>:i.audio=[],ai(e,t,i),<span class="code-number">0</span>===i.audio.length&amp;&amp;<span class="code-keyword">delete</span> i.audio}<span class="code-keyword">return</span> i}(e))&amp;&amp;(i.audio||i.video)?(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e.audio&amp;&amp;e.audio.length){<span class="code-keyword">var</span> i=t;<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=e.audio[<span class="code-number">0</span>].dts),e.audio.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=Zt(e.dts,i),e.pts=Zt(e.pts,i),e.dtsTime=e.dts/ii,e.ptsTime=e.pts/ii}))}<span class="code-keyword">if</span>(e.video&amp;&amp;e.video.length){<span class="code-keyword">var</span> n=t;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.video[<span class="code-number">0</span>].dts),e.video.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=Zt(e.dts,n),e.pts=Zt(e.pts,n),e.dtsTime=e.dts/ii,e.ptsTime=e.pts/ii})),e.firstKeyFrame){<span class="code-keyword">var</span> r=e.firstKeyFrame;r.dts=Zt(r.dts,n),r.pts=Zt(r.pts,n),r.dtsTime=r.dts/ii,r.ptsTime=r.dts/ii}}}(i,t),i):<span class="code-literal">null</span>},ui=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;&gt;&gt;<span class="code-number">0</span>},di=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-string">""</span>;<span class="code-keyword">return</span> t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">0</span>]),t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">1</span>]),(t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">2</span>]))+<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">3</span>])},li=ui,hi=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;t.byteLength;)r=li(t[n]&lt;&lt;<span class="code-number">24</span>|t[n+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[n+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[n+<span class="code-number">3</span>]),a=di(t.subarray(n+<span class="code-number">4</span>,n+<span class="code-number">8</span>)),s=r&gt;<span class="code-number">1</span>?n+r:t.byteLength,a===i[<span class="code-number">0</span>]&amp;&amp;(<span class="code-number">1</span>===i.length?u.push(t.subarray(n+<span class="code-number">8</span>,s)):(o=e(t.subarray(n+<span class="code-number">8</span>,s),i.slice(<span class="code-number">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class="code-keyword">return</span> u},ci=ui,fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>(<span class="code-string">"00"</span>+e.toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)},mi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r;<span class="code-keyword">return</span> i=hi(t,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),n=[].concat.apply([],i.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> hi(t,[<span class="code-string">"tfhd"</span>]).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r,a;<span class="code-keyword">return</span> n=ci(i[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|i[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|i[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|i[<span class="code-number">7</span>]),r=e[n]||<span class="code-number">9e4</span>,(a=<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span>(a=hi(t,[<span class="code-string">"tfdt"</span>]).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">return</span> t=e[<span class="code-number">0</span>],i=ci(e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>]),<span class="code-number">1</span>===t&amp;&amp;(i*=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),i+=ci(e[<span class="code-number">8</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">9</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">10</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>])),i}))[<span class="code-number">0</span>])||<span class="code-built_in">isNaN</span>(a)?<span class="code-number">1</span>/<span class="code-number">0</span>:a)/r}))}))),r=<span class="code-built_in">Math</span>.min.apply(<span class="code-literal">null</span>,n),<span class="code-built_in">isFinite</span>(r)?r:<span class="code-number">0</span>},pi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=hi(e,[<span class="code-string">"moov"</span>,<span class="code-string">"trak"</span>]),i=[];<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,n,r={},a=hi(e,[<span class="code-string">"tkhd"</span>])[<span class="code-number">0</span>];a&amp;&amp;(n=(t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class="code-number">0</span>),r.id=<span class="code-number">0</span>===n?t.getUint32(<span class="code-number">12</span>):t.getUint32(<span class="code-number">20</span>));<span class="code-keyword">var</span> s=hi(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"hdlr"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=di(s.subarray(<span class="code-number">8</span>,<span class="code-number">12</span>));r.type=<span class="code-string">"vide"</span>===o?<span class="code-string">"video"</span>:<span class="code-string">"soun"</span>===o?<span class="code-string">"audio"</span>:o}<span class="code-keyword">var</span> u=hi(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"minf"</span>,<span class="code-string">"stbl"</span>,<span class="code-string">"stsd"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(u){<span class="code-keyword">var</span> d=u.subarray(<span class="code-number">8</span>);r.codec=di(d.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>));<span class="code-keyword">var</span> l,h=hi(d,[r.codec])[<span class="code-number">0</span>];h&amp;&amp;(<span class="code-regexp">/^[a-z]vc[1-9]$/i</span>.test(r.codec)?(l=h.subarray(<span class="code-number">78</span>),<span class="code-string">"avcC"</span>===di(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">11</span>?(r.codec+=<span class="code-string">"."</span>,r.codec+=fi(l[<span class="code-number">9</span>]),r.codec+=fi(l[<span class="code-number">10</span>]),r.codec+=fi(l[<span class="code-number">11</span>])):r.codec=<span class="code-string">"avc1.4d400d"</span>):<span class="code-regexp">/^mp4[a,v]$/i</span>.test(r.codec)?(l=h.subarray(<span class="code-number">28</span>),<span class="code-string">"esds"</span>===di(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">20</span>&amp;&amp;<span class="code-number">0</span>!==l[<span class="code-number">19</span>]?(r.codec+=<span class="code-string">"."</span>+fi(l[<span class="code-number">19</span>]),r.codec+=<span class="code-string">"."</span>+fi(l[<span class="code-number">20</span>]&gt;&gt;&gt;<span class="code-number">2</span>&amp;<span class="code-number">63</span>).replace(<span class="code-regexp">/^0/</span>,<span class="code-string">""</span>)):r.codec=<span class="code-string">"mp4a.40.2"</span>):r.codec=r.codec.toLowerCase())}<span class="code-keyword">var</span> c=hi(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"mdhd"</span>])[<span class="code-number">0</span>];c&amp;&amp;(r.timescale=ti(c)),i.push(r)})),i},gi=(ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>===e[<span class="code-number">0</span>]?<span class="code-number">12</span>:<span class="code-number">20</span>;<span class="code-keyword">return</span> ci(e[t]&lt;&lt;<span class="code-number">24</span>|e[t+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|e[t+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|e[t+<span class="code-number">3</span>])},<span class="code-number">2</span>),yi=<span class="code-number">-101</span>,vi=<span class="code-number">-102</span>,_i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.abort()}))},bi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.timedout?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request timed-out at URL: "</span>+t.uri,<span class="code-attr">code</span>:yi,<span class="code-attr">xhr</span>:t}:t.aborted?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request aborted at URL: "</span>+t.uri,<span class="code-attr">code</span>:vi,<span class="code-attr">xhr</span>:t}:e?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request errored at URL: "</span>+t.uri,<span class="code-attr">code</span>:gi,<span class="code-attr">xhr</span>:t}:<span class="code-literal">null</span>},Ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn,c=t.map&amp;&amp;t.map.tracks||{},f=<span class="code-built_in">Boolean</span>(c.audio&amp;&amp;c.video),m=a.bind(<span class="code-literal">null</span>,t,<span class="code-string">"audio"</span>,<span class="code-string">"start"</span>),p=a.bind(<span class="code-literal">null</span>,t,<span class="code-string">"audio"</span>,<span class="code-string">"end"</span>),g=a.bind(<span class="code-literal">null</span>,t,<span class="code-string">"video"</span>,<span class="code-string">"start"</span>),y=a.bind(<span class="code-literal">null</span>,t,<span class="code-string">"video"</span>,<span class="code-string">"end"</span>);<span class="code-keyword">if</span>(!n&amp;&amp;!t.lastReachedChar){<span class="code-keyword">var</span> v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=oi(e,t*Jt);<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n={<span class="code-attr">hasVideo</span>:i.video&amp;&amp;<span class="code-number">2</span>===i.video.length||!<span class="code-number">1</span>,<span class="code-attr">hasAudio</span>:i.audio&amp;&amp;<span class="code-number">2</span>===i.audio.length||!<span class="code-number">1</span>};<span class="code-keyword">return</span> n.hasVideo&amp;&amp;(n.videoStart=i.video[<span class="code-number">0</span>].ptsTime),n.hasAudio&amp;&amp;(n.audioStart=i.audio[<span class="code-number">0</span>].ptsTime),n}(i,t.baseStartTime);v&amp;&amp;(r(t,{<span class="code-attr">hasAudio</span>:v.hasAudio,<span class="code-attr">hasVideo</span>:v.hasVideo,<span class="code-attr">isMuxed</span>:f}),r=<span class="code-literal">null</span>,v.hasAudio&amp;&amp;!f&amp;&amp;m(v.audioStart),v.hasVideo&amp;&amp;g(v.videoStart),m=<span class="code-literal">null</span>,g=<span class="code-literal">null</span>)}!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!Tt)<span class="code-keyword">return</span> Tt=e,<span class="code-keyword">void</span> xt(e);Dt.push(e)}({<span class="code-attr">bytes</span>:i,<span class="code-attr">transmuxer</span>:t.transmuxer,<span class="code-attr">audioAppendStart</span>:t.audioAppendStart,<span class="code-attr">gopsToAlignWith</span>:t.gopsToAlignWith,<span class="code-attr">isPartial</span>:n,<span class="code-attr">remux</span>:f,<span class="code-attr">onData</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type=<span class="code-string">"combined"</span>===e.type?<span class="code-string">"video"</span>:e.type,l(t,e)},<span class="code-attr">onTrackInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r&amp;&amp;(f&amp;&amp;(e.isMuxed=!<span class="code-number">0</span>),r(t,e))},<span class="code-attr">onAudioTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{m&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.start&amp;&amp;(m(e.start),m=<span class="code-literal">null</span>),p&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.end&amp;&amp;p(e.end)},<span class="code-attr">onVideoTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{g&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.start&amp;&amp;(g(e.start),g=<span class="code-literal">null</span>),y&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.end&amp;&amp;y(e.end)},<span class="code-attr">onVideoSegmentTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s(e)},<span class="code-attr">onAudioSegmentTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{o(e)},<span class="code-attr">onId3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{u(t,e,i)},<span class="code-attr">onCaptions</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{d(t,[e])},<span class="code-attr">onDone</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{h&amp;&amp;!n&amp;&amp;(e.type=<span class="code-string">"combined"</span>===e.type?<span class="code-string">"video"</span>:e.type,h(<span class="code-literal">null</span>,t,e))}})},Si=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn,c=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i);<span class="code-keyword">if</span>(wt(c)){t.isFmp4=!<span class="code-number">0</span>;<span class="code-keyword">var</span> f=t.map.tracks,m={<span class="code-attr">isFmp4</span>:!<span class="code-number">0</span>,<span class="code-attr">hasVideo</span>:!!f.video,<span class="code-attr">hasAudio</span>:!!f.audio};f.audio&amp;&amp;f.audio.codec&amp;&amp;<span class="code-string">"enca"</span>!==f.audio.codec&amp;&amp;(m.audioCodec=f.audio.codec),f.video&amp;&amp;f.video.codec&amp;&amp;<span class="code-string">"encv"</span>!==f.video.codec&amp;&amp;(m.videoCodec=f.video.codec),f.video&amp;&amp;f.audio&amp;&amp;(m.isMuxed=!<span class="code-number">0</span>),r(t,m);<span class="code-keyword">var</span> p=mi(t.map.timescales,c);m.hasAudio&amp;&amp;!m.isMuxed&amp;&amp;a(t,<span class="code-string">"audio"</span>,<span class="code-string">"start"</span>,p),m.hasVideo&amp;&amp;a(t,<span class="code-string">"video"</span>,<span class="code-string">"start"</span>,p);<span class="code-keyword">var</span> g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{l(t,{<span class="code-attr">data</span>:i,<span class="code-attr">type</span>:m.hasAudio&amp;&amp;!m.isMuxed?<span class="code-string">"audio"</span>:<span class="code-string">"video"</span>}),e&amp;&amp;e.length&amp;&amp;d(t,e),h(<span class="code-literal">null</span>,t,{})};<span class="code-keyword">if</span>(!f.video||!i.byteLength||!t.transmuxer)<span class="code-keyword">return</span> <span class="code-keyword">void</span> g();<span class="code-keyword">var</span> y=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?i:i.buffer,v=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?<span class="code-number">0</span>:i.byteOffset;<span class="code-keyword">return</span> t.transmuxer.addEventListener(<span class="code-string">"message"</span>,(<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"mp4Captions"</span>===n.data.action){t.transmuxer.removeEventListener(<span class="code-string">"message"</span>,e);<span class="code-keyword">var</span> r=n.data.data;t.bytes=i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r,r.byteOffset||<span class="code-number">0</span>,r.byteLength),g(n.data.captions)}})),<span class="code-keyword">void</span> t.transmuxer.postMessage({<span class="code-attr">action</span>:<span class="code-string">"pushMp4Captions"</span>,<span class="code-attr">timescales</span>:t.map.timescales,<span class="code-attr">trackIds</span>:[f.video.id],<span class="code-attr">data</span>:y,<span class="code-attr">byteOffset</span>:v,<span class="code-attr">byteLength</span>:i.byteLength},[y])}<span class="code-keyword">if</span>(t.transmuxer){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t.container&amp;&amp;(t.container=It(c)),<span class="code-string">"ts"</span>!==t.container&amp;&amp;<span class="code-string">"aac"</span>!==t.container)<span class="code-keyword">return</span> r(t,{<span class="code-attr">hasAudio</span>:!<span class="code-number">1</span>,<span class="code-attr">hasVideo</span>:!<span class="code-number">1</span>}),<span class="code-keyword">void</span> h(<span class="code-literal">null</span>,t,{});Ti({<span class="code-attr">segment</span>:t,<span class="code-attr">bytes</span>:i,<span class="code-attr">isPartial</span>:n,<span class="code-attr">trackInfoFn</span>:r,<span class="code-attr">timingInfoFn</span>:a,<span class="code-attr">videoSegmentTimingInfoFn</span>:s,<span class="code-attr">audioSegmentTimingInfoFn</span>:o,<span class="code-attr">id3Fn</span>:u,<span class="code-attr">captionsFn</span>:d,<span class="code-attr">dataFn</span>:l,<span class="code-attr">doneFn</span>:h})}<span class="code-keyword">else</span> h(<span class="code-literal">null</span>,t,{})},Ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,r=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,c=e.id3Fn,f=e.captionsFn,m=e.dataFn,p=e.doneFn,g=e.handlePartialData,y=[],v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.dataFn,l=e.doneFn,h=<span class="code-number">0</span>,c=!<span class="code-number">1</span>;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,f</span>)</span>{<span class="code-keyword">if</span>(!c){<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> c=!<span class="code-number">0</span>,_i(t),l(e,f);<span class="code-keyword">if</span>((h+=<span class="code-number">1</span>)===t.length){<span class="code-keyword">if</span>(f.endOfAllRequests=<span class="code-built_in">Date</span>.now(),f.encryptedBytes)<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.doneFn;i.addEventListener(<span class="code-string">"message"</span>,(<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(t.data.source===n.requestId){i.removeEventListener(<span class="code-string">"message"</span>,e);<span class="code-keyword">var</span> c=t.data.decrypted;n.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(c.bytes,c.byteOffset,c.byteLength),Si({<span class="code-attr">segment</span>:n,<span class="code-attr">bytes</span>:n.bytes,<span class="code-attr">isPartial</span>:!<span class="code-number">1</span>,<span class="code-attr">trackInfoFn</span>:r,<span class="code-attr">timingInfoFn</span>:a,<span class="code-attr">videoSegmentTimingInfoFn</span>:s,<span class="code-attr">audioSegmentTimingInfoFn</span>:o,<span class="code-attr">id3Fn</span>:u,<span class="code-attr">captionsFn</span>:d,<span class="code-attr">dataFn</span>:l,<span class="code-attr">doneFn</span>:h})}})),t=n.key.bytes.slice?n.key.bytes.slice():<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(<span class="code-built_in">Array</span>.prototype.slice.call(n.key.bytes)),i.postMessage(he({<span class="code-attr">source</span>:n.requestId,<span class="code-attr">encrypted</span>:n.encryptedBytes,<span class="code-attr">key</span>:t,<span class="code-attr">iv</span>:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({<span class="code-attr">decryptionWorker</span>:i,<span class="code-attr">segment</span>:f,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:u,<span class="code-attr">dataFn</span>:d,<span class="code-attr">doneFn</span>:l});Si({<span class="code-attr">segment</span>:f,<span class="code-attr">bytes</span>:f.bytes,<span class="code-attr">isPartial</span>:!<span class="code-number">1</span>,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:u,<span class="code-attr">dataFn</span>:d,<span class="code-attr">doneFn</span>:l})}}}}({<span class="code-attr">activeXhrs</span>:y,<span class="code-attr">decryptionWorker</span>:n,<span class="code-attr">trackInfoFn</span>:o,<span class="code-attr">timingInfoFn</span>:d,<span class="code-attr">videoSegmentTimingInfoFn</span>:l,<span class="code-attr">audioSegmentTimingInfoFn</span>:h,<span class="code-attr">id3Fn</span>:c,<span class="code-attr">captionsFn</span>:f,<span class="code-attr">dataFn</span>:m,<span class="code-attr">doneFn</span>:p});<span class="code-keyword">if</span>(r.key&amp;&amp;!r.key.bytes){<span class="code-keyword">var</span> _=t(u.default.mergeOptions(i,{<span class="code-attr">uri</span>:r.key.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>}),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=n.response,a=bi(i,n);<span class="code-keyword">if</span>(a)<span class="code-keyword">return</span> t(a,e);<span class="code-keyword">if</span>(<span class="code-number">16</span>!==r.byteLength)<span class="code-keyword">return</span> t({<span class="code-attr">status</span>:n.status,<span class="code-attr">message</span>:<span class="code-string">"Invalid HLS key at URL: "</span>+n.uri,<span class="code-attr">code</span>:gi,<span class="code-attr">xhr</span>:n},e);<span class="code-keyword">var</span> s=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(r);<span class="code-keyword">return</span> e.key.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([s.getUint32(<span class="code-number">0</span>),s.getUint32(<span class="code-number">4</span>),s.getUint32(<span class="code-number">8</span>),s.getUint32(<span class="code-number">12</span>)]),t(<span class="code-literal">null</span>,e)}}(r,v));y.push(_)}<span class="code-keyword">if</span>(r.map&amp;&amp;!r.map.bytes){<span class="code-keyword">var</span> b=t(u.default.mergeOptions(i,{<span class="code-attr">uri</span>:r.map.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:re(r.map)}),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.finishProcessingFn;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=n.response,a=bi(e,n);<span class="code-keyword">if</span>(a)<span class="code-keyword">return</span> i(a,t);<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.byteLength)<span class="code-keyword">return</span> i({<span class="code-attr">status</span>:n.status,<span class="code-attr">message</span>:<span class="code-string">"Empty HLS segment content at URL: "</span>+n.uri,<span class="code-attr">code</span>:gi,<span class="code-attr">xhr</span>:n},t);t.map.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.response);<span class="code-keyword">var</span> s=It(t.map.bytes);<span class="code-keyword">return</span><span class="code-string">"mp4"</span>!==s?i({<span class="code-attr">status</span>:n.status,<span class="code-attr">message</span>:<span class="code-string">"Found unsupported "</span>+(s||<span class="code-string">"unknown"</span>)+<span class="code-string">" container for initialization segment at URL: "</span>+n.uri,<span class="code-attr">code</span>:gi,<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">xhr</span>:n},t):(pi(t.map.bytes).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.id&amp;&amp;e.timescale&amp;&amp;(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),i(<span class="code-literal">null</span>,t))}}({<span class="code-attr">segment</span>:r,<span class="code-attr">finishProcessingFn</span>:v}));y.push(b)}<span class="code-keyword">var</span> T=u.default.mergeOptions(i,{<span class="code-attr">uri</span>:r.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:re(r)});g&amp;&amp;(T.responseType=<span class="code-string">"text"</span>,T.beforeSend=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.overrideMimeType(<span class="code-string">"text/plain; charset=x-user-defined"</span>)});<span class="code-keyword">var</span> S=t(T,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.finishProcessingFn,n=e.responseType;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,r</span>)</span>{<span class="code-keyword">var</span> a=r.response,s=bi(e,r);<span class="code-keyword">if</span>(s)<span class="code-keyword">return</span> i(s,t);<span class="code-keyword">var</span> o=<span class="code-string">"arraybuffer"</span>!==n&amp;&amp;r.responseText?Ot(r.responseText.substring(t.lastReachedChar||<span class="code-number">0</span>)):r.response;<span class="code-keyword">return</span> <span class="code-number">0</span>===a.byteLength?i({<span class="code-attr">status</span>:r.status,<span class="code-attr">message</span>:<span class="code-string">"Empty HLS segment content at URL: "</span>+r.uri,<span class="code-attr">code</span>:gi,<span class="code-attr">xhr</span>:r},t):(t.stats=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">bandwidth</span>:e.bandwidth,<span class="code-attr">bytesReceived</span>:e.bytesReceived||<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:e.roundTripTime||<span class="code-number">0</span>}}(r),t.key?t.encryptedBytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(o):t.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(o),i(<span class="code-literal">null</span>,t))}}({<span class="code-attr">segment</span>:r,<span class="code-attr">finishProcessingFn</span>:v,<span class="code-attr">responseType</span>:T.responseType}));S.addEventListener(<span class="code-string">"progress"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.progressFn,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,d=e.captionsFn,l=e.dataFn,h=e.handlePartialData;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> c=e.target;<span class="code-keyword">if</span>(!c.aborted){<span class="code-keyword">if</span>(h&amp;&amp;!t.key&amp;&amp;c.responseText&amp;&amp;c.responseText.length&gt;=<span class="code-number">8</span>){<span class="code-keyword">var</span> f=Ot(c.responseText.substring(t.lastReachedChar||<span class="code-number">0</span>));!t.lastReachedChar&amp;&amp;wt(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(f))||(t.lastReachedChar=c.responseText.length,Si({<span class="code-attr">segment</span>:t,<span class="code-attr">bytes</span>:f,<span class="code-attr">isPartial</span>:!<span class="code-number">0</span>,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:d,<span class="code-attr">dataFn</span>:l}))}<span class="code-keyword">return</span> t.stats=u.default.mergeOptions(t.stats,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.target,i={<span class="code-attr">bandwidth</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">bytesReceived</span>:<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:<span class="code-built_in">Date</span>.now()-t.requestTime||<span class="code-number">0</span>};<span class="code-keyword">return</span> i.bytesReceived=e.loaded,i.bandwidth=<span class="code-built_in">Math</span>.floor(i.bytesReceived/i.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>),i}(e)),!t.stats.firstBytesReceivedAt&amp;&amp;t.stats.bytesReceived&amp;&amp;(t.stats.firstBytesReceivedAt=<span class="code-built_in">Date</span>.now()),i(e,t)}}}({<span class="code-attr">segment</span>:r,<span class="code-attr">progressFn</span>:s,<span class="code-attr">trackInfoFn</span>:o,<span class="code-attr">timingInfoFn</span>:d,<span class="code-attr">videoSegmentTimingInfoFn</span>:l,<span class="code-attr">audioSegmentTimingInfoFn</span>:h,<span class="code-attr">id3Fn</span>:c,<span class="code-attr">captionsFn</span>:f,<span class="code-attr">dataFn</span>:m,<span class="code-attr">handlePartialData</span>:g})),y.push(S);<span class="code-keyword">var</span> I={};<span class="code-keyword">return</span> y.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.addEventListener(<span class="code-string">"loadend"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.loadendState,i=e.abortFn;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.target.aborted&amp;&amp;i&amp;&amp;!t.calledAbortFn&amp;&amp;(i(),t.calledAbortFn=!<span class="code-number">0</span>)}}({<span class="code-attr">loadendState</span>:I,<span class="code-attr">abortFn</span>:a}))})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> _i(y)}},wi=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:{},Li=<span class="code-string">"undefined"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">Symbol</span>?<span class="code-string">"__target"</span>:<span class="code-built_in">Symbol</span>(),ki=wi.BlobBuilder||wi.WebKitBlobBuilder||wi.MozBlobBuilder||wi.MSBlobBuilder,Ai=wi.URL||wi.webkitURL||Ai&amp;&amp;Ai.msURL,Ei=wi.Worker;<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">Pi</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-keyword">new</span> Ei(e);<span class="code-keyword">if</span>(Ei&amp;&amp;!i){<span class="code-keyword">var</span> r=Di(t.toString().replace(<span class="code-regexp">/^function.+?{/</span>,<span class="code-string">""</span>).slice(<span class="code-number">0</span>,<span class="code-number">-1</span>));<span class="code-keyword">return</span> <span class="code-keyword">this</span>[Li]=<span class="code-keyword">new</span> Ei(r),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;t){<span class="code-keyword">var</span> i=e.terminate;e.objURL=t,e.terminate=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.objURL&amp;&amp;Ai.revokeObjectURL(e.objURL),i.call(e)}}}(<span class="code-keyword">this</span>[Li],r),<span class="code-keyword">this</span>[Li]}<span class="code-keyword">var</span> a={<span class="code-attr">postMessage</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.onmessage&amp;&amp;setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.onmessage({<span class="code-attr">data</span>:e,<span class="code-attr">target</span>:a})}))}};t.call(a),<span class="code-keyword">this</span>.postMessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.onmessage({<span class="code-attr">data</span>:e,<span class="code-attr">target</span>:n})}))},<span class="code-keyword">this</span>.isThisThread=!<span class="code-number">0</span>}}<span class="code-keyword">if</span>(Ei){<span class="code-keyword">var</span> Ci,Ui=Di(<span class="code-string">"self.onmessage = function () {}"</span>),Oi=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">1</span>);<span class="code-keyword">try</span>{(Ci=<span class="code-keyword">new</span> Ei(Ui)).postMessage(Oi,[Oi.buffer])}<span class="code-keyword">catch</span>(e){Ei=<span class="code-literal">null</span>}<span class="code-keyword">finally</span>{Ai.revokeObjectURL(Ui),Ci&amp;&amp;Ci.terminate()}}<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">Di</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> Ai.createObjectURL(<span class="code-keyword">new</span> Blob([e],{<span class="code-attr">type</span>:<span class="code-string">"application/javascript"</span>}))}<span class="code-keyword">catch</span>(i){<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> ki;<span class="code-keyword">return</span> t.append(e),Ai.createObjectURL(t.getBlob(type))}}<span class="code-keyword">var</span> xi=<span class="code-keyword">new</span> Pi(<span class="code-string">"./transmuxer-worker.worker.js"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;
</code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code><span class="code-comment">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">this</span>.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class="code-keyword">this</span>.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class="code-number">1</span>),n&gt;<span class="code-number">-1</span>)},<span class="code-keyword">this</span>.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a;<span class="code-keyword">if</span>(i=e[t])<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span>{<span class="code-keyword">for</span>(a=[],n=<span class="code-built_in">arguments</span>.length,n=<span class="code-number">1</span>;n&lt;<span class="code-built_in">arguments</span>.length;++n)a.push(<span class="code-built_in">arguments</span>[n]);<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].apply(<span class="code-keyword">this</span>,a)}},<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e={}}}};e.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.flush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.partialFlush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"endedtimeline"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.endTimeline(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"reset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.reset(t)})),e},e.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e)},e.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,e)},e.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,e)},e.prototype.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,e)},e.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>,e)};<span class="code-keyword">var</span> t,n,r,a,s,o,u,d,l,h,c,f,m,p,g,y,v,_,b,T,S,I,w,L,k,A,E,P,C,U,O,D,x,R,M,B,F,N,q,W,V=e,H=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>)<span class="code-number">-1</span>;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">if</span>(I={<span class="code-attr">avc1</span>:[],<span class="code-attr">avcC</span>:[],<span class="code-attr">btrt</span>:[],<span class="code-attr">dinf</span>:[],<span class="code-attr">dref</span>:[],<span class="code-attr">esds</span>:[],<span class="code-attr">ftyp</span>:[],<span class="code-attr">hdlr</span>:[],<span class="code-attr">mdat</span>:[],<span class="code-attr">mdhd</span>:[],<span class="code-attr">mdia</span>:[],<span class="code-attr">mfhd</span>:[],<span class="code-attr">minf</span>:[],<span class="code-attr">moof</span>:[],<span class="code-attr">moov</span>:[],<span class="code-attr">mp4a</span>:[],<span class="code-attr">mvex</span>:[],<span class="code-attr">mvhd</span>:[],<span class="code-attr">pasp</span>:[],<span class="code-attr">sdtp</span>:[],<span class="code-attr">smhd</span>:[],<span class="code-attr">stbl</span>:[],<span class="code-attr">stco</span>:[],<span class="code-attr">stsc</span>:[],<span class="code-attr">stsd</span>:[],<span class="code-attr">stsz</span>:[],<span class="code-attr">stts</span>:[],<span class="code-attr">styp</span>:[],<span class="code-attr">tfdt</span>:[],<span class="code-attr">tfhd</span>:[],<span class="code-attr">traf</span>:[],<span class="code-attr">trak</span>:[],<span class="code-attr">trun</span>:[],<span class="code-attr">trex</span>:[],<span class="code-attr">tkhd</span>:[],<span class="code-attr">vmhd</span>:[]},<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">Uint8Array</span>){<span class="code-keyword">for</span>(e <span class="code-keyword">in</span> I)I.hasOwnProperty(e)&amp;&amp;(I[e]=[e.charCodeAt(<span class="code-number">0</span>),e.charCodeAt(<span class="code-number">1</span>),e.charCodeAt(<span class="code-number">2</span>),e.charCodeAt(<span class="code-number">3</span>)]);w=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"i"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"s"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"o"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"m"</span>.charCodeAt(<span class="code-number">0</span>)]),k=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"a"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"v"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"c"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"1"</span>.charCodeAt(<span class="code-number">0</span>)]),L=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),A=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">86</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),E=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">115</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">83</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),P={<span class="code-attr">video</span>:A,<span class="code-attr">audio</span>:E},O=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">12</span>,<span class="code-number">117</span>,<span class="code-number">114</span>,<span class="code-number">108</span>,<span class="code-number">32</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),U=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),D=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),x=D,R=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),M=D,C=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])}}(),t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++)n.push(<span class="code-built_in">arguments</span>[t]);<span class="code-keyword">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class="code-keyword">for</span>(i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r+<span class="code-number">8</span>),<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class="code-number">0</span>,i.byteLength),i.set(e,<span class="code-number">4</span>),t=<span class="code-number">0</span>,r=<span class="code-number">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class="code-keyword">return</span> i},n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(I.dinf,t(I.dref,O))},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.esds,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">25</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">4</span>,<span class="code-number">17</span>,<span class="code-number">64</span>,<span class="code-number">21</span>,<span class="code-number">0</span>,<span class="code-number">6</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">5</span>,<span class="code-number">2</span>,e.audioobjecttype&lt;&lt;<span class="code-number">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class="code-number">1</span>,e.samplingfrequencyindex&lt;&lt;<span class="code-number">7</span>|e.channelcount&lt;&lt;<span class="code-number">3</span>,<span class="code-number">6</span>,<span class="code-number">1</span>,<span class="code-number">2</span>]))},g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.hdlr,P[e])},p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,e.duration&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">85</span>,<span class="code-number">196</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> e.samplerate&amp;&amp;(i[<span class="code-number">12</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">13</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">14</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">15</span>]=<span class="code-number">255</span>&amp;e.samplerate),t(I.mdhd,i)},m=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.mdia,p(e),g(e.type),o(e))},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.mfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e]))},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.minf,<span class="code-string">"video"</span>===e.type?t(I.vmhd,C):t(I.smhd,U),n(),v(e))},u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=i.length;r--;)n[r]=b(i[r]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[I.moof,s(e)].concat(n))},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[I.moov,h(<span class="code-number">4294967295</span>)].concat(n).concat(l(e)))},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[I.mvex].concat(n))},h=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>]);<span class="code-keyword">return</span> t(I.mvhd,i)},y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.samples||[],a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>+r.length);<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class="code-number">4</span>]=i.dependsOn&lt;&lt;<span class="code-number">4</span>|i.isDependedOn&lt;&lt;<span class="code-number">2</span>|i.hasRedundancy;<span class="code-keyword">return</span> t(I.sdtp,a)},v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.stbl,_(e),t(I.stts,M),t(I.stsc,x),t(I.stsz,R),t(I.stco,D))},_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.stsd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),<span class="code-string">"video"</span>===e.type?B(e):F(e))},B=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;r.length;i++)s.push((<span class="code-number">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),s.push(<span class="code-number">255</span>&amp;r[i].byteLength),s=s.concat(<span class="code-built_in">Array</span>.prototype.slice.call(r[i]));<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;a.length;i++)o.push((<span class="code-number">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),o.push(<span class="code-number">255</span>&amp;a[i].byteLength),o=o.concat(<span class="code-built_in">Array</span>.prototype.slice.call(a[i]));<span class="code-keyword">if</span>(n=[I.avc1,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">19</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">106</span>,<span class="code-number">115</span>,<span class="code-number">45</span>,<span class="code-number">99</span>,<span class="code-number">111</span>,<span class="code-number">110</span>,<span class="code-number">116</span>,<span class="code-number">114</span>,<span class="code-number">105</span>,<span class="code-number">98</span>,<span class="code-number">45</span>,<span class="code-number">104</span>,<span class="code-number">108</span>,<span class="code-number">115</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">24</span>,<span class="code-number">17</span>,<span class="code-number">17</span>]),t(I.avcC,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class="code-number">255</span>].concat([r.length],s,[a.length],o))),t(I.btrt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">28</span>,<span class="code-number">156</span>,<span class="code-number">128</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>]))],e.sarRatio){<span class="code-keyword">var</span> u=e.sarRatio[<span class="code-number">0</span>],d=e.sarRatio[<span class="code-number">1</span>];n.push(t(I.pasp,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([(<span class="code-number">4278190080</span>&amp;u)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;u)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;u)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;u,(<span class="code-number">4278190080</span>&amp;d)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;d)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;d)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;d])))}<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,n)},F=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.mp4a,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.channelcount)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.channelcount,(<span class="code-number">65280</span>&amp;e.samplesize)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplesize,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.samplerate)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplerate,<span class="code-number">0</span>,<span class="code-number">0</span>]),r(e))},f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">7</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.duration)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.duration)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.duration)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> t(I.tkhd,i)},b=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o;<span class="code-keyword">return</span> i=t(I.tfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">58</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])),s=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime/(H+<span class="code-number">1</span>)),o=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime%(H+<span class="code-number">1</span>)),n=t(I.tfdt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,s&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;s,o&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;o])),<span class="code-string">"audio"</span>===e.type?(r=S(e,<span class="code-number">92</span>),t(I.traf,i,n,r)):(a=y(e),r=S(e,a.length+<span class="code-number">92</span>),t(I.traf,i,n,r,a))},c=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.duration=e.duration||<span class="code-number">4294967295</span>,t(I.trak,f(e),m(e))},T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]);<span class="code-keyword">return</span><span class="code-string">"video"</span>!==e.type&amp;&amp;(i[i.length<span class="code-number">-1</span>]=<span class="code-number">0</span>),t(I.trex,i)},W=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;<span class="code-keyword">return</span> e.length&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].duration&amp;&amp;(i=<span class="code-number">1</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].size&amp;&amp;(n=<span class="code-number">2</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].flags&amp;&amp;(r=<span class="code-number">4</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].compositionTimeOffset&amp;&amp;(a=<span class="code-number">8</span>)),[<span class="code-number">0</span>,<span class="code-number">0</span>,i|n|r|a,<span class="code-number">1</span>,(<span class="code-number">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.length,(<span class="code-number">4278190080</span>&amp;t)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;t)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;t)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;t]},q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">16</span>*(s=e.samples||[]).length,a=W(s,i),(r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.length+<span class="code-number">16</span>*s.length)).set(a),n=a.length,u=<span class="code-number">0</span>;u&lt;s.length;u++)o=s[u],r[n++]=(<span class="code-number">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.duration,r[n++]=(<span class="code-number">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.size,r[n++]=o.flags.isLeading&lt;&lt;<span class="code-number">2</span>|o.flags.dependsOn,r[n++]=o.flags.isDependedOn&lt;&lt;<span class="code-number">6</span>|o.flags.hasRedundancy&lt;&lt;<span class="code-number">4</span>|o.flags.paddingValue&lt;&lt;<span class="code-number">1</span>|o.flags.isNonSyncSample,r[n++]=<span class="code-number">61440</span>&amp;o.flags.degradationPriority,r[n++]=<span class="code-number">15</span>&amp;o.flags.degradationPriority,r[n++]=(<span class="code-number">4278190080</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.compositionTimeOffset;<span class="code-keyword">return</span> t(I.trun,r)},N=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">8</span>*(s=e.samples||[]).length,a=W(s,i),(n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.length+<span class="code-number">8</span>*s.length)).set(a),r=a.length,u=<span class="code-number">0</span>;u&lt;s.length;u++)o=s[u],n[r++]=(<span class="code-number">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">24</span>,n[r++]=(<span class="code-number">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">16</span>,n[r++]=(<span class="code-number">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">8</span>,n[r++]=<span class="code-number">255</span>&amp;o.duration,n[r++]=(<span class="code-number">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">24</span>,n[r++]=(<span class="code-number">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">16</span>,n[r++]=(<span class="code-number">65280</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">8</span>,n[r++]=<span class="code-number">255</span>&amp;o.size;<span class="code-keyword">return</span> t(I.trun,n)},S=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"audio"</span>===e.type?N(e,t):q(e,t)},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(I.ftyp,w,L,w,k)};<span class="code-keyword">var</span> G,j,z,X,Q,Y,K,$,J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(I.mdat,e)},Z=u,ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=a(),n=d(e);<span class="code-keyword">return</span>(t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">size</span>:<span class="code-number">0</span>,<span class="code-attr">flags</span>:{<span class="code-attr">isLeading</span>:<span class="code-number">0</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">1</span>,<span class="code-attr">isDependedOn</span>:<span class="code-number">0</span>,<span class="code-attr">hasRedundancy</span>:<span class="code-number">0</span>,<span class="code-attr">degradationPriority</span>:<span class="code-number">0</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>}};<span class="code-keyword">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class="code-number">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class="code-number">2</span>,i.flags.isNonSyncSample=<span class="code-number">0</span>),i},ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,n.byteLength=<span class="code-number">0</span>,t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-string">"access_unit_delimiter_rbsp"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class="code-number">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class="code-number">0</span>)&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(n.byteLength=<span class="code-number">0</span>,n.nalCount=<span class="code-number">0</span>,n.duration=<span class="code-number">0</span>,n.pts=e[<span class="code-number">0</span>].pts,n.dts=e[<span class="code-number">0</span>].dts,r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,r.pts=e[<span class="code-number">0</span>].pts,r.dts=e[<span class="code-number">0</span>].dts,t=<span class="code-number">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;n.duration&lt;=<span class="code-number">0</span>&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>!e[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame&amp;&amp;e.length&gt;<span class="code-number">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class="code-number">0</span>][<span class="code-number">0</span>].dts=t.dts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].pts=t.pts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].duration+=t.duration),e},ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=[];<span class="code-keyword">return</span> i=te(e,t||<span class="code-number">0</span>),n.push(i),n},se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-number">0</span>,r=e.byteLength,a=e.length,s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r+<span class="code-number">4</span>*a),o=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(s.buffer);<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],o.setUint32(n,i.data.byteLength),n+=<span class="code-number">4</span>,s.set(i.data,n),n+=i.data.byteLength;<span class="code-keyword">return</span> s},oe=[<span class="code-number">33</span>,<span class="code-number">16</span>,<span class="code-number">5</span>,<span class="code-number">32</span>,<span class="code-number">164</span>,<span class="code-number">27</span>],ue=[<span class="code-number">33</span>,<span class="code-number">65</span>,<span class="code-number">108</span>,<span class="code-number">84</span>,<span class="code-number">1</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">168</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">17</span>,<span class="code-number">191</span>,<span class="code-number">252</span>],de=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[];e--;)t.push(<span class="code-number">0</span>);<span class="code-keyword">return</span> t},le=<span class="code-number">9e4</span>;Y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> j(Q(e,t))},K=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> z(X(e),t)},$=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> X(i?e:e-t)};<span class="code-keyword">var</span> he=le,ce=j=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e*le},fe=(z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},X=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/le}),me=(Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},Y),pe=K,ge=$,ye=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d=<span class="code-number">0</span>,l=<span class="code-number">0</span>,h=<span class="code-number">0</span>;<span class="code-keyword">if</span>(t.length&amp;&amp;(r=me(e.baseMediaDecodeTime,e.samplerate),a=<span class="code-built_in">Math</span>.ceil(he/(e.samplerate/<span class="code-number">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class="code-built_in">Math</span>.max(i,n),h=(l=<span class="code-built_in">Math</span>.floor(d/a))*a),!(l&lt;<span class="code-number">1</span>||h&gt;<span class="code-number">45e3</span>))){<span class="code-keyword">for</span>((s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!G){<span class="code-keyword">var</span> e={<span class="code-number">96e3</span>:[oe,[<span class="code-number">227</span>,<span class="code-number">64</span>],de(<span class="code-number">154</span>),[<span class="code-number">56</span>]],<span class="code-number">88200</span>:[oe,[<span class="code-number">231</span>],de(<span class="code-number">170</span>),[<span class="code-number">56</span>]],<span class="code-number">64e3</span>:[oe,[<span class="code-number">248</span>,<span class="code-number">192</span>],de(<span class="code-number">240</span>),[<span class="code-number">56</span>]],<span class="code-number">48e3</span>:[oe,[<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">148</span>,<span class="code-number">128</span>],de(<span class="code-number">54</span>),[<span class="code-number">112</span>]],<span class="code-number">44100</span>:[oe,[<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">163</span>,<span class="code-number">128</span>],de(<span class="code-number">84</span>),[<span class="code-number">112</span>]],<span class="code-number">32e3</span>:[oe,[<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">234</span>],de(<span class="code-number">226</span>),[<span class="code-number">112</span>]],<span class="code-number">24e3</span>:[oe,[<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],de(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">112</span>],de(<span class="code-number">126</span>),[<span class="code-number">224</span>]],<span class="code-number">16e3</span>:[oe,[<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],de(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">255</span>],de(<span class="code-number">269</span>),[<span class="code-number">223</span>,<span class="code-number">108</span>],de(<span class="code-number">195</span>),[<span class="code-number">1</span>,<span class="code-number">192</span>]],<span class="code-number">12e3</span>:[ue,de(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],de(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],de(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],de(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">253</span>,<span class="code-number">128</span>],de(<span class="code-number">259</span>),[<span class="code-number">56</span>]],<span class="code-number">11025</span>:[ue,de(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],de(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],de(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],de(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">255</span>,<span class="code-number">192</span>],de(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">175</span>,<span class="code-number">128</span>],de(<span class="code-number">108</span>),[<span class="code-number">112</span>]],<span class="code-number">8e3</span>:[ue,de(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">121</span>,<span class="code-number">16</span>],de(<span class="code-number">47</span>),[<span class="code-number">7</span>]]};t=e,G=<span class="code-built_in">Object</span>.keys(t).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> e[i]=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t[i].reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)}),[])),e}),{})}<span class="code-keyword">var</span> t;<span class="code-keyword">return</span> G}()[e.samplerate])||(s=t[<span class="code-number">0</span>].data),o=<span class="code-number">0</span>;o&lt;l;o++)u=t[<span class="code-number">0</span>],t.splice(<span class="code-number">0</span>,<span class="code-number">0</span>,{<span class="code-attr">data</span>:s,<span class="code-attr">dts</span>:u.dts-a,<span class="code-attr">pts</span>:u.pts-a});<span class="code-keyword">return</span> e.baseMediaDecodeTime-=<span class="code-built_in">Math</span>.floor(pe(h,e.samplerate)),h}},ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class="code-number">1</span>/<span class="code-number">0</span>,e.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class="code-built_in">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class="code-number">0</span>)})))},_e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[];<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class="code-attr">size</span>:i.data.byteLength,<span class="code-attr">duration</span>:<span class="code-number">1024</span>});<span class="code-keyword">return</span> n},be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-number">0</span>,r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class="code-keyword">return</span> i}(e));<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class="code-keyword">return</span> r},Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">delete</span> e.minSegmentDts,<span class="code-keyword">delete</span> e.maxSegmentDts,<span class="code-keyword">delete</span> e.minSegmentPts,<span class="code-keyword">delete</span> e.maxSegmentPts},Se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=e.minSegmentDts;<span class="code-keyword">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,i),<span class="code-string">"audio"</span>===e.type&amp;&amp;(i*=e.samplerate/<span class="code-number">9e4</span>,i=<span class="code-built_in">Math</span>.floor(i)),i},Ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.pts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class="code-built_in">Math</span>.min(e.minSegmentPts,t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class="code-built_in">Math</span>.max(e.maxSegmentPts,t.pts)),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.dts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class="code-built_in">Math</span>.min(e.minSegmentDts,t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class="code-built_in">Math</span>.max(e.maxSegmentDts,t.dts))},we=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{t=t||{},e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.parse708captions_=<span class="code-string">"boolean"</span>!=<span class="code-keyword">typeof</span> t.parse708captions||t.parse708captions,<span class="code-keyword">this</span>.captionPackets_=[],<span class="code-keyword">this</span>.ccStreams_=[<span class="code-keyword">new</span> xe(<span class="code-number">0</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> xe(<span class="code-number">0</span>,<span class="code-number">1</span>),<span class="code-keyword">new</span> xe(<span class="code-number">1</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> xe(<span class="code-number">1</span>,<span class="code-number">1</span>)],<span class="code-keyword">this</span>.parse708captions_&amp;&amp;(<span class="code-keyword">this</span>.cc708Stream_=<span class="code-keyword">new</span> Pe),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),e.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),e.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))}),<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.parse708captions_&amp;&amp;(<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>)))};(we.prototype=<span class="code-keyword">new</span> V).push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;<span class="code-keyword">if</span>(<span class="code-string">"sei_rbsp"</span>===e.nalUnitType&amp;&amp;(t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i={<span class="code-attr">payloadType</span>:<span class="code-number">-1</span>,<span class="code-attr">payloadSize</span>:<span class="code-number">0</span>},n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;t&lt;e.byteLength&amp;&amp;<span class="code-number">128</span>!==e[t];){<span class="code-keyword">for</span>(;<span class="code-number">255</span>===e[t];)n+=<span class="code-number">255</span>,t++;<span class="code-keyword">for</span>(n+=e[t++];<span class="code-number">255</span>===e[t];)r+=<span class="code-number">255</span>,t++;<span class="code-keyword">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class="code-number">4</span>===n){<span class="code-keyword">if</span>(<span class="code-string">"GA94"</span>===<span class="code-built_in">String</span>.fromCharCode(e[t+<span class="code-number">3</span>],e[t+<span class="code-number">4</span>],e[t+<span class="code-number">5</span>],e[t+<span class="code-number">6</span>])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class="code-keyword">break</span>}i.payload=<span class="code-keyword">void</span> <span class="code-number">0</span>}t+=r,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>}<span class="code-keyword">return</span> i}(e.escapedRBSP)).payload&amp;&amp;<span class="code-number">4</span>===t.payloadType&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">181</span>!==e.payload[<span class="code-number">0</span>]||<span class="code-number">49</span>!=(e.payload[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">8</span>|e.payload[<span class="code-number">2</span>])||<span class="code-string">"GA94"</span>!==<span class="code-built_in">String</span>.fromCharCode(e.payload[<span class="code-number">3</span>],e.payload[<span class="code-number">4</span>],e.payload[<span class="code-number">5</span>],e.payload[<span class="code-number">6</span>])||<span class="code-number">3</span>!==e.payload[<span class="code-number">7</span>]?<span class="code-literal">null</span>:e.payload.subarray(<span class="code-number">8</span>,e.payload.length<span class="code-number">-1</span>)}(t)))<span class="code-keyword">if</span>(e.dts&lt;<span class="code-keyword">this</span>.latestDts_)<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">0</span>;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.dts===<span class="code-keyword">this</span>.latestDts_&amp;&amp;<span class="code-keyword">this</span>.ignoreNextEqualDts_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.numSameDts_--,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.numSameDts_||(<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>));n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s=[];<span class="code-keyword">if</span>(!(<span class="code-number">64</span>&amp;t[<span class="code-number">0</span>]))<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(n=<span class="code-number">31</span>&amp;t[<span class="code-number">0</span>],i=<span class="code-number">0</span>;i&lt;n;i++)a={<span class="code-attr">type</span>:<span class="code-number">3</span>&amp;t[<span class="code-number">2</span>+(r=<span class="code-number">3</span>*i)],<span class="code-attr">pts</span>:e},<span class="code-number">4</span>&amp;t[r+<span class="code-number">2</span>]&amp;&amp;(a.ccData=t[r+<span class="code-number">3</span>]&lt;&lt;<span class="code-number">8</span>|t[r+<span class="code-number">4</span>],s.push(a));<span class="code-keyword">return</span> s}(e.pts,i),<span class="code-keyword">this</span>.captionPackets_=<span class="code-keyword">this</span>.captionPackets_.concat(n),<span class="code-keyword">this</span>.latestDts_!==e.dts&amp;&amp;(<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>),<span class="code-keyword">this</span>.numSameDts_++,<span class="code-keyword">this</span>.latestDts_=e.dts}},we.prototype.flushCCStreams=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"flush"</span>===e?t.flush():t.partialFlush()}),<span class="code-keyword">this</span>)},we.prototype.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionPackets_.length?(<span class="code-keyword">this</span>.captionPackets_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.presortIndex=t})),<span class="code-keyword">this</span>.captionPackets_.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),<span class="code-keyword">this</span>.captionPackets_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type&lt;<span class="code-number">2</span>?<span class="code-keyword">this</span>.dispatchCea608Packet(e):<span class="code-keyword">this</span>.dispatchCea708Packet(e)}),<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.flushCCStreams(e)):<span class="code-keyword">this</span>.flushCCStreams(e)},we.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"flush"</span>)},we.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"partialFlush"</span>)},we.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.latestDts_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.activeCea608Channel_=[<span class="code-literal">null</span>,<span class="code-literal">null</span>],<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.reset()}))},we.prototype.dispatchCea608Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.setsTextOrXDSActive(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-literal">null</span>:<span class="code-keyword">this</span>.setsChannel1Active(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">0</span>:<span class="code-keyword">this</span>.setsChannel2Active(e)&amp;&amp;(<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">1</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class="code-keyword">this</span>.ccStreams_[(e.type&lt;&lt;<span class="code-number">1</span>)+<span class="code-keyword">this</span>.activeCea608Channel_[e.type]].push(e)},we.prototype.setsChannel1Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">4096</span>==(<span class="code-number">30720</span>&amp;e.ccData)},we.prototype.setsChannel2Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">6144</span>==(<span class="code-number">30720</span>&amp;e.ccData)},we.prototype.setsTextOrXDSActive=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">256</span>==(<span class="code-number">28928</span>&amp;e.ccData)||<span class="code-number">4138</span>==(<span class="code-number">30974</span>&amp;e.ccData)||<span class="code-number">6186</span>==(<span class="code-number">30974</span>&amp;e.ccData)},we.prototype.dispatchCea708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parse708captions_&amp;&amp;<span class="code-keyword">this</span>.cc708Stream_.push(e)};<span class="code-keyword">var</span> Le={<span class="code-number">127</span>:<span class="code-number">9834</span>,<span class="code-number">4128</span>:<span class="code-number">32</span>,<span class="code-number">4129</span>:<span class="code-number">160</span>,<span class="code-number">4133</span>:<span class="code-number">8230</span>,<span class="code-number">4138</span>:<span class="code-number">352</span>,<span class="code-number">4140</span>:<span class="code-number">338</span>,<span class="code-number">4144</span>:<span class="code-number">9608</span>,<span class="code-number">4145</span>:<span class="code-number">8216</span>,<span class="code-number">4146</span>:<span class="code-number">8217</span>,<span class="code-number">4147</span>:<span class="code-number">8220</span>,<span class="code-number">4148</span>:<span class="code-number">8221</span>,<span class="code-number">4149</span>:<span class="code-number">8226</span>,<span class="code-number">4153</span>:<span class="code-number">8482</span>,<span class="code-number">4154</span>:<span class="code-number">353</span>,<span class="code-number">4156</span>:<span class="code-number">339</span>,<span class="code-number">4157</span>:<span class="code-number">8480</span>,<span class="code-number">4159</span>:<span class="code-number">376</span>,<span class="code-number">4214</span>:<span class="code-number">8539</span>,<span class="code-number">4215</span>:<span class="code-number">8540</span>,<span class="code-number">4216</span>:<span class="code-number">8541</span>,<span class="code-number">4217</span>:<span class="code-number">8542</span>,<span class="code-number">4218</span>:<span class="code-number">9168</span>,<span class="code-number">4219</span>:<span class="code-number">9124</span>,<span class="code-number">4220</span>:<span class="code-number">9123</span>,<span class="code-number">4221</span>:<span class="code-number">9135</span>,<span class="code-number">4222</span>:<span class="code-number">9126</span>,<span class="code-number">4223</span>:<span class="code-number">9121</span>,<span class="code-number">4256</span>:<span class="code-number">12600</span>},ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32</span>&lt;=e&amp;&amp;e&lt;=<span class="code-number">127</span>||<span class="code-number">160</span>&lt;=e&amp;&amp;e&lt;=<span class="code-number">255</span>},Ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.windowNum=e,<span class="code-keyword">this</span>.reset()};Ae.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.clearText(),<span class="code-keyword">this</span>.pendingNewLine=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.winAttr={},<span class="code-keyword">this</span>.penAttr={},<span class="code-keyword">this</span>.penLoc={},<span class="code-keyword">this</span>.penColor={},<span class="code-keyword">this</span>.visible=<span class="code-number">0</span>,<span class="code-keyword">this</span>.rowLock=<span class="code-number">0</span>,<span class="code-keyword">this</span>.columnLock=<span class="code-number">0</span>,<span class="code-keyword">this</span>.priority=<span class="code-number">0</span>,<span class="code-keyword">this</span>.relativePositioning=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorVertical=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorHorizontal=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorPoint=<span class="code-number">0</span>,<span class="code-keyword">this</span>.rowCount=<span class="code-number">1</span>,<span class="code-keyword">this</span>.virtualRowCount=<span class="code-keyword">this</span>.rowCount+<span class="code-number">1</span>,<span class="code-keyword">this</span>.columnCount=<span class="code-number">41</span>,<span class="code-keyword">this</span>.windowStyle=<span class="code-number">0</span>,<span class="code-keyword">this</span>.penStyle=<span class="code-number">0</span>},Ae.prototype.getText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.rows.join(<span class="code-string">"\n"</span>)},Ae.prototype.clearText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.rows=[<span class="code-string">""</span>],<span class="code-keyword">this</span>.rowIdx=<span class="code-number">0</span>},Ae.prototype.newLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.rows.length&gt;=<span class="code-keyword">this</span>.virtualRowCount&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.beforeRowOverflow&amp;&amp;<span class="code-keyword">this</span>.beforeRowOverflow(e),<span class="code-keyword">this</span>.rows.length&gt;<span class="code-number">0</span>&amp;&amp;(<span class="code-keyword">this</span>.rows.push(<span class="code-string">""</span>),<span class="code-keyword">this</span>.rowIdx++);<span class="code-keyword">this</span>.rows.length&gt;<span class="code-keyword">this</span>.virtualRowCount;)<span class="code-keyword">this</span>.rows.shift(),<span class="code-keyword">this</span>.rowIdx--},Ae.prototype.isEmpty=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.rows.length||<span class="code-number">1</span>===<span class="code-keyword">this</span>.rows.length&amp;&amp;<span class="code-string">""</span>===<span class="code-keyword">this</span>.rows[<span class="code-number">0</span>]},Ae.prototype.addText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx]+=e},Ae.prototype.backspace=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isEmpty()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx];<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx]=e.substr(<span class="code-number">0</span>,e.length<span class="code-number">-1</span>)}};<span class="code-keyword">var</span> Ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.serviceNum=e,<span class="code-keyword">this</span>.text=<span class="code-string">""</span>,<span class="code-keyword">this</span>.currentWindow=<span class="code-keyword">new</span> Ae(<span class="code-number">-1</span>),<span class="code-keyword">this</span>.windows=[]};Ee.prototype.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.startPts=e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-number">8</span>;i++)<span class="code-keyword">this</span>.windows[i]=<span class="code-keyword">new</span> Ae(i),<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;(<span class="code-keyword">this</span>.windows[i].beforeRowOverflow=t)},Ee.prototype.setCurrentWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.currentWindow=<span class="code-keyword">this</span>.windows[e]};<span class="code-keyword">var</span> Pe=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>);<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.current708Packet=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.services={},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-number">3</span>===e.type?(t.new708Packet(),t.add708Bytes(e)):(<span class="code-literal">null</span>===t.current708Packet&amp;&amp;t.new708Packet(),t.add708Bytes(e))}};Pe.prototype=<span class="code-keyword">new</span> V,Pe.prototype.new708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.current708Packet&amp;&amp;<span class="code-keyword">this</span>.push708Packet(),<span class="code-keyword">this</span>.current708Packet={<span class="code-attr">data</span>:[],<span class="code-attr">ptsVals</span>:[]}},Pe.prototype.add708Bytes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.ccData,i=t&gt;&gt;&gt;<span class="code-number">8</span>,n=<span class="code-number">255</span>&amp;t;<span class="code-keyword">this</span>.current708Packet.ptsVals.push(e.pts),<span class="code-keyword">this</span>.current708Packet.data.push(i),<span class="code-keyword">this</span>.current708Packet.data.push(n)},Pe.prototype.push708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.current708Packet,t=e.data,i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r=<span class="code-number">0</span>,a=t[r++];<span class="code-keyword">for</span>(e.seq=a&gt;&gt;<span class="code-number">6</span>,e.sizeCode=<span class="code-number">63</span>&amp;a;r&lt;t.length;r++)n=<span class="code-number">31</span>&amp;(a=t[r++]),<span class="code-number">7</span>==(i=a&gt;&gt;<span class="code-number">5</span>)&amp;&amp;n&gt;<span class="code-number">0</span>&amp;&amp;(i=a=t[r++]),<span class="code-keyword">this</span>.pushServiceBlock(i,r,n),n&gt;<span class="code-number">0</span>&amp;&amp;(r+=n<span class="code-number">-1</span>)},Pe.prototype.pushServiceBlock=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=t,a=<span class="code-keyword">this</span>.current708Packet.data,s=<span class="code-keyword">this</span>.services[e];<span class="code-keyword">for</span>(s||(s=<span class="code-keyword">this</span>.initService(e,r));r&lt;t+i&amp;&amp;r&lt;a.length;r++)n=a[r],ke(n)?r=<span class="code-keyword">this</span>.handleText(r,s):<span class="code-number">16</span>===n?r=<span class="code-keyword">this</span>.extendedCommands(r,s):<span class="code-number">128</span>&lt;=n&amp;&amp;n&lt;=<span class="code-number">135</span>?r=<span class="code-keyword">this</span>.setCurrentWindow(r,s):<span class="code-number">152</span>&lt;=n&amp;&amp;n&lt;=<span class="code-number">159</span>?r=<span class="code-keyword">this</span>.defineWindow(r,s):<span class="code-number">136</span>===n?r=<span class="code-keyword">this</span>.clearWindows(r,s):<span class="code-number">140</span>===n?r=<span class="code-keyword">this</span>.deleteWindows(r,s):<span class="code-number">137</span>===n?r=<span class="code-keyword">this</span>.displayWindows(r,s):<span class="code-number">138</span>===n?r=<span class="code-keyword">this</span>.hideWindows(r,s):<span class="code-number">139</span>===n?r=<span class="code-keyword">this</span>.toggleWindows(r,s):<span class="code-number">151</span>===n?r=<span class="code-keyword">this</span>.setWindowAttributes(r,s):<span class="code-number">144</span>===n?r=<span class="code-keyword">this</span>.setPenAttributes(r,s):<span class="code-number">145</span>===n?r=<span class="code-keyword">this</span>.setPenColor(r,s):<span class="code-number">146</span>===n?r=<span class="code-keyword">this</span>.setPenLocation(r,s):<span class="code-number">143</span>===n?s=<span class="code-keyword">this</span>.reset(r,s):<span class="code-number">8</span>===n?s.currentWindow.backspace():<span class="code-number">12</span>===n?s.currentWindow.clearText():<span class="code-number">13</span>===n?s.currentWindow.pendingNewLine=!<span class="code-number">0</span>:<span class="code-number">14</span>===n?s.currentWindow.clearText():<span class="code-number">141</span>===n&amp;&amp;r++},Pe.prototype.extendedCommands=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e];<span class="code-keyword">return</span> ke(i)&amp;&amp;(e=<span class="code-keyword">this</span>.handleText(e,t,!<span class="code-number">0</span>)),e},Pe.prototype.getPts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.current708Packet.ptsVals[<span class="code-built_in">Math</span>.floor(e/<span class="code-number">2</span>)]},Pe.prototype.initService=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.services[e]=<span class="code-keyword">new</span> Ee(e),<span class="code-keyword">this</span>.services[e].init(<span class="code-keyword">this</span>.getPts(t),(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i.flushDisplayed(t,i.services[e])})),<span class="code-keyword">this</span>.services[e]},Pe.prototype.handleText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a=<span class="code-keyword">this</span>.current708Packet.data[e],s=(r=Le[n=(i?<span class="code-number">4096</span>:<span class="code-number">0</span>)|a]||n,<span class="code-number">4096</span>&amp;n&amp;&amp;n===r?<span class="code-string">""</span>:<span class="code-built_in">String</span>.fromCharCode(r)),o=t.currentWindow;<span class="code-keyword">return</span> o.pendingNewLine&amp;&amp;!o.isEmpty()&amp;&amp;o.newLine(<span class="code-keyword">this</span>.getPts(e)),o.pendingNewLine=!<span class="code-number">1</span>,o.addText(s),e},Pe.prototype.setCurrentWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">7</span>&amp;<span class="code-keyword">this</span>.current708Packet.data[e];<span class="code-keyword">return</span> t.setCurrentWindow(i),e},Pe.prototype.defineWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=<span class="code-number">7</span>&amp;n;t.setCurrentWindow(r);<span class="code-keyword">var</span> a=t.currentWindow;<span class="code-keyword">return</span> n=i[++e],a.visible=(<span class="code-number">32</span>&amp;n)&gt;&gt;<span class="code-number">5</span>,a.rowLock=(<span class="code-number">16</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,a.columnLock=(<span class="code-number">8</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,a.priority=<span class="code-number">7</span>&amp;n,n=i[++e],a.relativePositioning=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">7</span>,a.anchorVertical=<span class="code-number">127</span>&amp;n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,a.rowCount=<span class="code-number">15</span>&amp;n,n=i[++e],a.columnCount=<span class="code-number">63</span>&amp;n,n=i[++e],a.windowStyle=(<span class="code-number">56</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,a.penStyle=<span class="code-number">7</span>&amp;n,a.virtualRowCount=a.rowCount+<span class="code-number">1</span>,e},Pe.prototype.setWindowAttributes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;<span class="code-keyword">return</span> n=i[++e],r.fillOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.fillRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.fillGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.fillBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.borderType=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.borderRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.borderGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.borderBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.borderType+=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">5</span>,r.wordWrap=(<span class="code-number">64</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.printDirection=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.scrollDirection=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.justify=<span class="code-number">3</span>&amp;n,n=i[++e],r.effectSpeed=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.effectDirection=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.displayEffect=<span class="code-number">3</span>&amp;n,e},Pe.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=<span class="code-number">0</span>;n&lt;<span class="code-number">8</span>;n++)t.windows[n].visible&amp;&amp;!t.windows[n].isEmpty()&amp;&amp;i.push(t.windows[n].getText());t.endPts=e,t.text=i.join(<span class="code-string">"\n\n"</span>),<span class="code-keyword">this</span>.pushCaption(t),t.startPts=e},Pe.prototype.pushCaption=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">""</span>!==e.text&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:e.startPts,<span class="code-attr">endPts</span>:e.endPts,<span class="code-attr">text</span>:e.text,<span class="code-attr">stream</span>:<span class="code-string">"cc708_"</span>+e.serviceNum}),e.text=<span class="code-string">""</span>,e.startPts=e.endPts)},Pe.prototype.displayWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class="code-number">1</span>);<span class="code-keyword">return</span> e},Pe.prototype.hideWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class="code-number">0</span>);<span class="code-keyword">return</span> e},Pe.prototype.toggleWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible^=<span class="code-number">1</span>);<span class="code-keyword">return</span> e},Pe.prototype.clearWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;t.windows[r].clearText();<span class="code-keyword">return</span> e},Pe.prototype.deleteWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;t.windows[r].reset();<span class="code-keyword">return</span> e},Pe.prototype.setPenAttributes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;<span class="code-keyword">return</span> n=i[++e],r.textTag=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.offset=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.penSize=<span class="code-number">3</span>&amp;n,n=i[++e],r.italics=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">7</span>,r.underline=(<span class="code-number">64</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.edgeType=(<span class="code-number">56</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,r.fontStyle=<span class="code-number">7</span>&amp;n,e},Pe.prototype.setPenColor=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penColor;<span class="code-keyword">return</span> n=i[++e],r.fgOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.fgRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.fgGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.fgBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.bgOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.bgRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.bgGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.bgBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.edgeRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.edgeGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.edgeBlue=<span class="code-number">3</span>&amp;n,e},Pe.prototype.setPenLocation=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;<span class="code-keyword">return</span> t.currentWindow.pendingNewLine=!<span class="code-number">0</span>,n=i[++e],r.row=<span class="code-number">15</span>&amp;n,n=i[++e],r.column=<span class="code-number">63</span>&amp;n,e},Pe.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushDisplayed(i,t),<span class="code-keyword">this</span>.initService(t.serviceNum,e)};<span class="code-keyword">var</span> Ce={<span class="code-number">42</span>:<span class="code-number">225</span>,<span class="code-number">92</span>:<span class="code-number">233</span>,<span class="code-number">94</span>:<span class="code-number">237</span>,<span class="code-number">95</span>:<span class="code-number">243</span>,<span class="code-number">96</span>:<span class="code-number">250</span>,<span class="code-number">123</span>:<span class="code-number">231</span>,<span class="code-number">124</span>:<span class="code-number">247</span>,<span class="code-number">125</span>:<span class="code-number">209</span>,<span class="code-number">126</span>:<span class="code-number">241</span>,<span class="code-number">127</span>:<span class="code-number">9608</span>,<span class="code-number">304</span>:<span class="code-number">174</span>,<span class="code-number">305</span>:<span class="code-number">176</span>,<span class="code-number">306</span>:<span class="code-number">189</span>,<span class="code-number">307</span>:<span class="code-number">191</span>,<span class="code-number">308</span>:<span class="code-number">8482</span>,<span class="code-number">309</span>:<span class="code-number">162</span>,<span class="code-number">310</span>:<span class="code-number">163</span>,<span class="code-number">311</span>:<span class="code-number">9834</span>,<span class="code-number">312</span>:<span class="code-number">224</span>,<span class="code-number">313</span>:<span class="code-number">160</span>,<span class="code-number">314</span>:<span class="code-number">232</span>,<span class="code-number">315</span>:<span class="code-number">226</span>,<span class="code-number">316</span>:<span class="code-number">234</span>,<span class="code-number">317</span>:<span class="code-number">238</span>,<span class="code-number">318</span>:<span class="code-number">244</span>,<span class="code-number">319</span>:<span class="code-number">251</span>,<span class="code-number">544</span>:<span class="code-number">193</span>,<span class="code-number">545</span>:<span class="code-number">201</span>,<span class="code-number">546</span>:<span class="code-number">211</span>,<span class="code-number">547</span>:<span class="code-number">218</span>,<span class="code-number">548</span>:<span class="code-number">220</span>,<span class="code-number">549</span>:<span class="code-number">252</span>,<span class="code-number">550</span>:<span class="code-number">8216</span>,<span class="code-number">551</span>:<span class="code-number">161</span>,<span class="code-number">552</span>:<span class="code-number">42</span>,<span class="code-number">553</span>:<span class="code-number">39</span>,<span class="code-number">554</span>:<span class="code-number">8212</span>,<span class="code-number">555</span>:<span class="code-number">169</span>,<span class="code-number">556</span>:<span class="code-number">8480</span>,<span class="code-number">557</span>:<span class="code-number">8226</span>,<span class="code-number">558</span>:<span class="code-number">8220</span>,<span class="code-number">559</span>:<span class="code-number">8221</span>,<span class="code-number">560</span>:<span class="code-number">192</span>,<span class="code-number">561</span>:<span class="code-number">194</span>,<span class="code-number">562</span>:<span class="code-number">199</span>,<span class="code-number">563</span>:<span class="code-number">200</span>,<span class="code-number">564</span>:<span class="code-number">202</span>,<span class="code-number">565</span>:<span class="code-number">203</span>,<span class="code-number">566</span>:<span class="code-number">235</span>,<span class="code-number">567</span>:<span class="code-number">206</span>,<span class="code-number">568</span>:<span class="code-number">207</span>,<span class="code-number">569</span>:<span class="code-number">239</span>,<span class="code-number">570</span>:<span class="code-number">212</span>,<span class="code-number">571</span>:<span class="code-number">217</span>,<span class="code-number">572</span>:<span class="code-number">249</span>,<span class="code-number">573</span>:<span class="code-number">219</span>,<span class="code-number">574</span>:<span class="code-number">171</span>,<span class="code-number">575</span>:<span class="code-number">187</span>,<span class="code-number">800</span>:<span class="code-number">195</span>,<span class="code-number">801</span>:<span class="code-number">227</span>,<span class="code-number">802</span>:<span class="code-number">205</span>,<span class="code-number">803</span>:<span class="code-number">204</span>,<span class="code-number">804</span>:<span class="code-number">236</span>,<span class="code-number">805</span>:<span class="code-number">210</span>,<span class="code-number">806</span>:<span class="code-number">242</span>,<span class="code-number">807</span>:<span class="code-number">213</span>,<span class="code-number">808</span>:<span class="code-number">245</span>,<span class="code-number">809</span>:<span class="code-number">123</span>,<span class="code-number">810</span>:<span class="code-number">125</span>,<span class="code-number">811</span>:<span class="code-number">92</span>,<span class="code-number">812</span>:<span class="code-number">94</span>,<span class="code-number">813</span>:<span class="code-number">95</span>,<span class="code-number">814</span>:<span class="code-number">124</span>,<span class="code-number">815</span>:<span class="code-number">126</span>,<span class="code-number">816</span>:<span class="code-number">196</span>,<span class="code-number">817</span>:<span class="code-number">228</span>,<span class="code-number">818</span>:<span class="code-number">214</span>,<span class="code-number">819</span>:<span class="code-number">246</span>,<span class="code-number">820</span>:<span class="code-number">223</span>,<span class="code-number">821</span>:<span class="code-number">165</span>,<span class="code-number">822</span>:<span class="code-number">164</span>,<span class="code-number">823</span>:<span class="code-number">9474</span>,<span class="code-number">824</span>:<span class="code-number">197</span>,<span class="code-number">825</span>:<span class="code-number">229</span>,<span class="code-number">826</span>:<span class="code-number">216</span>,<span class="code-number">827</span>:<span class="code-number">248</span>,<span class="code-number">828</span>:<span class="code-number">9484</span>,<span class="code-number">829</span>:<span class="code-number">9488</span>,<span class="code-number">830</span>:<span class="code-number">9492</span>,<span class="code-number">831</span>:<span class="code-number">9496</span>},Ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===e?<span class="code-string">""</span>:(e=Ce[e]||e,<span class="code-built_in">String</span>.fromCharCode(e))},Oe=[<span class="code-number">4352</span>,<span class="code-number">4384</span>,<span class="code-number">4608</span>,<span class="code-number">4640</span>,<span class="code-number">5376</span>,<span class="code-number">5408</span>,<span class="code-number">5632</span>,<span class="code-number">5664</span>,<span class="code-number">5888</span>,<span class="code-number">5920</span>,<span class="code-number">4096</span>,<span class="code-number">4864</span>,<span class="code-number">4896</span>,<span class="code-number">5120</span>,<span class="code-number">5152</span>],De=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=[],t=<span class="code-number">15</span>;t--;)e.push(<span class="code-string">""</span>);<span class="code-keyword">return</span> e},xe=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.field_=t||<span class="code-number">0</span>,<span class="code-keyword">this</span>.dataChannel_=i||<span class="code-number">0</span>,<span class="code-keyword">this</span>.name_=<span class="code-string">"CC"</span>+(<span class="code-number">1</span>+(<span class="code-keyword">this</span>.field_&lt;&lt;<span class="code-number">1</span>|<span class="code-keyword">this</span>.dataChannel_)),<span class="code-keyword">this</span>.setConstants(),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a;<span class="code-keyword">if</span>((t=<span class="code-number">32639</span>&amp;e.ccData)!==<span class="code-keyword">this</span>.lastControlCode_){<span class="code-keyword">if</span>(<span class="code-number">4096</span>==(<span class="code-number">61440</span>&amp;t)?<span class="code-keyword">this</span>.lastControlCode_=t:t!==<span class="code-keyword">this</span>.PADDING_&amp;&amp;(<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>),n=t&gt;&gt;&gt;<span class="code-number">8</span>,r=<span class="code-number">255</span>&amp;t,t!==<span class="code-keyword">this</span>.PADDING_)<span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.END_OF_CAPTION_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),i=<span class="code-keyword">this</span>.displayed_,<span class="code-keyword">this</span>.displayed_=<span class="code-keyword">this</span>.nonDisplayed_,<span class="code-keyword">this</span>.nonDisplayed_=i,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">3</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">4</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.CARRIAGE_RETURN_)<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.shiftRowsUp_(),<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.BACKSPACE_)<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=De();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.nonDisplayed_=De();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_)<span class="code-string">"paintOn"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=De()),<span class="code-keyword">this</span>.mode_=<span class="code-string">"paintOn"</span>,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isSpecialCharacter(n,r))a=Ue((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isExtCharacter(n,r))<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>),a=Ue((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isMidRowCode(n,r))<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,<span class="code-string">" "</span>),<span class="code-keyword">this</span>.column_++,<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>]),<span class="code-number">1</span>==(<span class="code-number">1</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isOffsetControlCode(n,r))<span class="code-keyword">this</span>.column_+=<span class="code-number">3</span>&amp;r;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isPAC(n,r)){<span class="code-keyword">var</span> s=Oe.indexOf(<span class="code-number">7968</span>&amp;t);<span class="code-string">"rollUp"</span>===<span class="code-keyword">this</span>.mode_&amp;&amp;(s-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>&lt;<span class="code-number">0</span>&amp;&amp;(s=<span class="code-keyword">this</span>.rollUpRows_<span class="code-number">-1</span>),<span class="code-keyword">this</span>.setRollUp(e.pts,s)),s!==<span class="code-keyword">this</span>.row_&amp;&amp;(<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.row_=s),<span class="code-number">1</span>&amp;r&amp;&amp;<span class="code-number">-1</span>===<span class="code-keyword">this</span>.formatting_.indexOf(<span class="code-string">"u"</span>)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]),<span class="code-number">16</span>==(<span class="code-number">16</span>&amp;t)&amp;&amp;(<span class="code-keyword">this</span>.column_=<span class="code-number">4</span>*((<span class="code-number">14</span>&amp;t)&gt;&gt;<span class="code-number">1</span>)),<span class="code-keyword">this</span>.isColorPAC(r)&amp;&amp;<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>])}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.isNormalChar(n)&amp;&amp;(<span class="code-number">0</span>===r&amp;&amp;(r=<span class="code-literal">null</span>),a=Ue(n),a+=Ue(r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_+=a.length)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>}};xe.prototype=<span class="code-keyword">new</span> V,xe.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.displayed_.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> e.trim()}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-built_in">console</span>.error(<span class="code-string">"Skipping malformed caption."</span>),<span class="code-string">""</span>}})).join(<span class="code-string">"\n"</span>).replace(<span class="code-regexp">/^\n+|\n+$/g</span>,<span class="code-string">""</span>);t.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:<span class="code-keyword">this</span>.startPts_,<span class="code-attr">endPts</span>:e,<span class="code-attr">text</span>:t,<span class="code-attr">stream</span>:<span class="code-keyword">this</span>.name_})},xe.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.topRow_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.startPts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.displayed_=De(),<span class="code-keyword">this</span>.nonDisplayed_=De(),<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.column_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.formatting_=[]},xe.prototype.setConstants=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>===<span class="code-keyword">this</span>.dataChannel_?(<span class="code-keyword">this</span>.BASE_=<span class="code-number">16</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">17</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">20</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">23</span>):<span class="code-number">1</span>===<span class="code-keyword">this</span>.dataChannel_&amp;&amp;(<span class="code-keyword">this</span>.BASE_=<span class="code-number">24</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">25</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">28</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">31</span>),<span class="code-keyword">this</span>.PADDING_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_=<span class="code-number">32</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.END_OF_CAPTION_=<span class="code-number">47</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_=<span class="code-number">37</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_=<span class="code-number">38</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_=<span class="code-number">39</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.CARRIAGE_RETURN_=<span class="code-number">45</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_=<span class="code-number">41</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.BACKSPACE_=<span class="code-number">33</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_=<span class="code-number">44</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class="code-number">46</span>|<span class="code-keyword">this</span>.CONTROL_},xe.prototype.isSpecialCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">48</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},xe.prototype.isExtCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>(e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">1</span>||e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">2</span>)&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},xe.prototype.isMidRowCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">47</span>},xe.prototype.isOffsetControlCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.OFFSET_&amp;&amp;t&gt;=<span class="code-number">33</span>&amp;&amp;t&lt;=<span class="code-number">35</span>},xe.prototype.isPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-keyword">this</span>.BASE_&amp;&amp;e&lt;<span class="code-keyword">this</span>.BASE_+<span class="code-number">8</span>&amp;&amp;t&gt;=<span class="code-number">64</span>&amp;&amp;t&lt;=<span class="code-number">127</span>},xe.prototype.isColorPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">64</span>&amp;&amp;e&lt;=<span class="code-number">79</span>||e&gt;=<span class="code-number">96</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},xe.prototype.isNormalChar=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},xe.prototype.setRollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"rollUp"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.mode_=<span class="code-string">"rollUp"</span>,<span class="code-keyword">this</span>.flushDisplayed(e),<span class="code-keyword">this</span>.nonDisplayed_=De(),<span class="code-keyword">this</span>.displayed_=De()),<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-keyword">this</span>.row_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-keyword">this</span>.rollUpRows_;i++)<span class="code-keyword">this</span>.displayed_[t-i]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i],<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i]=<span class="code-string">""</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.row_),<span class="code-keyword">this</span>.topRow_=t-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>},xe.prototype.addFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.formatting_=<span class="code-keyword">this</span>.formatting_.concat(t);<span class="code-keyword">var</span> i=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;"</span>+t+<span class="code-string">"&gt;"</span>}),<span class="code-string">""</span>);<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,i)},xe.prototype.clearFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.formatting_.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.formatting_.reverse().reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;/"</span>+t+<span class="code-string">"&gt;"</span>}),<span class="code-string">""</span>);<span class="code-keyword">this</span>.formatting_=[],<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,t)}},xe.prototype.popOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=i},xe.prototype.rollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i},xe.prototype.shiftRowsUp_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-keyword">this</span>.topRow_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.row_+<span class="code-number">1</span>;e&lt;<span class="code-number">15</span>;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.topRow_;e&lt;<span class="code-keyword">this</span>.row_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-keyword">this</span>.displayed_[e+<span class="code-number">1</span>];<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-string">""</span>},xe.prototype.paintOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i};<span class="code-keyword">var</span> Re={<span class="code-attr">CaptionStream</span>:we,<span class="code-attr">Cea608Stream</span>:xe,<span class="code-attr">Cea708Stream</span>:Pe},Me={<span class="code-attr">H264_STREAM_TYPE</span>:<span class="code-number">27</span>,<span class="code-attr">ADTS_STREAM_TYPE</span>:<span class="code-number">15</span>,<span class="code-attr">METADATA_STREAM_TYPE</span>:<span class="code-number">21</span>},Be=<span class="code-string">"shared"</span>,Fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">1</span>;<span class="code-keyword">for</span>(e&gt;t&amp;&amp;(i=<span class="code-number">-1</span>);<span class="code-built_in">Math</span>.abs(t-e)&gt;<span class="code-number">4294967296</span>;)e+=<span class="code-number">8589934592</span>*i;<span class="code-keyword">return</span> e},Ne=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n;e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.type_=t||Be,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.type_!==Be&amp;&amp;e.type!==<span class="code-keyword">this</span>.type_||(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.dts),e.dts=Fe(e.dts,n),e.pts=Fe(e.pts,n),i=e.dts,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e))},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=i,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.discontinuity=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.discontinuity(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};Ne.prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> qe,We=Ne,Ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=t;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r},He=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(Ve(e,t,i))},Ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},je={<span class="code-attr">TXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>]){<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=He(e.data,<span class="code-number">1</span>,t),e.value=He(e.data,t+<span class="code-number">1</span>,e.data.length).replace(<span class="code-regexp">/\0*$/</span>,<span class="code-string">""</span>);<span class="code-keyword">break</span>}e.data=e.value}},<span class="code-attr">WXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>])<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=He(e.data,<span class="code-number">1</span>,t),e.url=He(e.data,t+<span class="code-number">1</span>,e.data.length);<span class="code-keyword">break</span>}},<span class="code-attr">PRIV</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.owner=(i=e.data,<span class="code-built_in">unescape</span>(Ve(i,<span class="code-number">0</span>,t)));<span class="code-keyword">break</span>}e.privateData=e.data.subarray(t+<span class="code-number">1</span>),e.data=e.privateData}};(qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">debug</span>:!(!e||!e.debug),<span class="code-attr">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class="code-number">0</span>,r=[],a=<span class="code-number">0</span>;<span class="code-keyword">if</span>(qe.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.dispatchType=Me.METADATA_STREAM_TYPE.toString(<span class="code-number">16</span>),i.descriptor)<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;i.descriptor.length;t++)<span class="code-keyword">this</span>.dispatchType+=(<span class="code-string">"00"</span>+i.descriptor[t].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,s,o,u,d;<span class="code-keyword">if</span>(<span class="code-string">"timed-metadata"</span>===e.type)<span class="code-keyword">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class="code-number">0</span>,r.length=<span class="code-number">0</span>),<span class="code-number">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class="code-number">10</span>||e.data[<span class="code-number">0</span>]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)))i.debug&amp;&amp;<span class="code-built_in">console</span>.log(<span class="code-string">"Skipping unrecognized metadata packet"</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(r.push(e),a+=e.data.byteLength,<span class="code-number">1</span>===r.length&amp;&amp;(n=Ge(e.data.subarray(<span class="code-number">6</span>,<span class="code-number">10</span>)),n+=<span class="code-number">10</span>),!(a&lt;n)){<span class="code-keyword">for</span>(t={<span class="code-attr">data</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),<span class="code-attr">frames</span>:[],<span class="code-attr">pts</span>:r[<span class="code-number">0</span>].pts,<span class="code-attr">dts</span>:r[<span class="code-number">0</span>].dts},d=<span class="code-number">0</span>;d&lt;n;)t.data.set(r[<span class="code-number">0</span>].data.subarray(<span class="code-number">0</span>,n-d),d),d+=r[<span class="code-number">0</span>].data.byteLength,a-=r[<span class="code-number">0</span>].data.byteLength,r.shift();s=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;t.data[<span class="code-number">5</span>]&amp;&amp;(s+=<span class="code-number">4</span>,s+=Ge(t.data.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)),n-=Ge(t.data.subarray(<span class="code-number">16</span>,<span class="code-number">20</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((o=Ge(t.data.subarray(s+<span class="code-number">4</span>,s+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-built_in">console</span>.log(<span class="code-string">"Malformed ID3 frame encountered. Skipping metadata parsing."</span>);<span class="code-keyword">if</span>((u={<span class="code-attr">id</span>:<span class="code-built_in">String</span>.fromCharCode(t.data[s],t.data[s+<span class="code-number">1</span>],t.data[s+<span class="code-number">2</span>],t.data[s+<span class="code-number">3</span>]),<span class="code-attr">data</span>:t.data.subarray(s+<span class="code-number">10</span>,s+o+<span class="code-number">10</span>)}).key=u.id,je[u.id]&amp;&amp;(je[u.id](u),<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===u.owner)){<span class="code-keyword">var</span> l=u.data,h=(<span class="code-number">1</span>&amp;l[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|l[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|l[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|l[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|l[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;h*=<span class="code-number">4</span>,h+=<span class="code-number">3</span>&amp;l[<span class="code-number">7</span>],u.timeStamp=h,<span class="code-keyword">void</span> <span class="code-number">0</span>===t.pts&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>===t.dts&amp;&amp;(t.pts=u.timeStamp,t.dts=u.timeStamp),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestamp"</span>,u)}t.frames.push(u),s+=<span class="code-number">10</span>,s+=o}<span class="code-keyword">while</span>(s&lt;n);<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t)}}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> ze,Xe,Qe,Ye=qe,Ke=We,$e=<span class="code-number">188</span>;(ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>($e),t=<span class="code-number">0</span>;ze.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-number">0</span>,a=$e;<span class="code-keyword">for</span>(t?((n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class="code-number">0</span>,t)),n.set(i,t),t=<span class="code-number">0</span>):n=i;a&lt;n.byteLength;)<span class="code-number">71</span>!==n[r]||<span class="code-number">71</span>!==n[a]?(r++,a++):(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,n.subarray(r,a)),r+=$e,a+=$e);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class="code-number">0</span>),t=n.byteLength-r)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t===$e&amp;&amp;<span class="code-number">71</span>===e[<span class="code-number">0</span>]&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e),t=<span class="code-number">0</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}}).prototype=<span class="code-keyword">new</span> V,(Xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n;Xe.prototype.init.call(<span class="code-keyword">this</span>),n=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt=[],<span class="code-keyword">this</span>.programMapTable=<span class="code-keyword">void</span> <span class="code-number">0</span>,e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-number">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class="code-number">1</span>),<span class="code-string">"pat"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.section_number=e[<span class="code-number">7</span>],t.last_section_number=e[<span class="code-number">8</span>],n.pmtPid=(<span class="code-number">31</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>],t.pmtPid=n.pmtPid},i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,r;<span class="code-keyword">if</span>(<span class="code-number">1</span>&amp;e[<span class="code-number">5</span>]){<span class="code-keyword">for</span>(n.programMapTable={<span class="code-attr">video</span>:<span class="code-literal">null</span>,<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-string">"timed-metadata"</span>:{}},i=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">2</span>])<span class="code-number">-4</span>,r=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>]);r&lt;i;){<span class="code-keyword">var</span> a=e[r],s=(<span class="code-number">31</span>&amp;e[r+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">2</span>];a===Me.H264_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Me.ADTS_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Me.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class="code-string">"timed-metadata"</span>][s]=a),r+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[r+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">4</span>])}t.programMapTable=n.programMapTable}},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={},n=<span class="code-number">4</span>;<span class="code-keyword">if</span>(i.payloadUnitStartIndicator=!!(<span class="code-number">64</span>&amp;t[<span class="code-number">1</span>]),i.pid=<span class="code-number">31</span>&amp;t[<span class="code-number">1</span>],i.pid&lt;&lt;=<span class="code-number">8</span>,i.pid|=t[<span class="code-number">2</span>],(<span class="code-number">48</span>&amp;t[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(n+=t[n]+<span class="code-number">1</span>),<span class="code-number">0</span>===i.pid)i.type=<span class="code-string">"pat"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(i.pid===<span class="code-keyword">this</span>.pmtPid)<span class="code-keyword">for</span>(i.type=<span class="code-string">"pmt"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">this</span>.packetsWaitingForPmt.length;)<span class="code-keyword">this</span>.processPes_.apply(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt.shift());<span class="code-keyword">else</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.programMapTable?<span class="code-keyword">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class="code-keyword">this</span>.processPes_(t,n,i)},<span class="code-keyword">this</span>.processPes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{i.pid===<span class="code-keyword">this</span>.programMapTable.video?i.streamType=Me.H264_STREAM_TYPE:i.pid===<span class="code-keyword">this</span>.programMapTable.audio?i.streamType=Me.ADTS_STREAM_TYPE:i.streamType=<span class="code-keyword">this</span>.programMapTable[<span class="code-string">"timed-metadata"</span>][i.pid],i.type=<span class="code-string">"pes"</span>,i.data=e.subarray(t),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i)}}).prototype=<span class="code-keyword">new</span> V,Xe.STREAM_TYPES={<span class="code-attr">h264</span>:<span class="code-number">27</span>,<span class="code-attr">adts</span>:<span class="code-number">15</span>},(Qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>,i={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},n={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},r={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.size),o={<span class="code-attr">type</span>:i},u=<span class="code-number">0</span>,d=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class="code-number">9</span>)){<span class="code-keyword">for</span>(o.trackId=e.data[<span class="code-number">0</span>].pid,u=<span class="code-number">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class="code-keyword">var</span> l,h,c;l=s,(h=o).packetLength=<span class="code-number">6</span>+(l[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">8</span>|l[<span class="code-number">5</span>]),h.dataAlignmentIndicator=<span class="code-number">0</span>!=(<span class="code-number">4</span>&amp;l[<span class="code-number">6</span>]),<span class="code-number">192</span>&amp;(c=l[<span class="code-number">7</span>])&amp;&amp;(h.pts=(<span class="code-number">14</span>&amp;l[<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,h.pts*=<span class="code-number">4</span>,h.pts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,h.dts=h.pts,<span class="code-number">64</span>&amp;c&amp;&amp;(h.dts=(<span class="code-number">14</span>&amp;l[<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,h.dts*=<span class="code-number">4</span>,h.dts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),h.data=l.subarray(<span class="code-number">9</span>+l[<span class="code-number">8</span>]),r=<span class="code-string">"video"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class="code-number">0</span>,e.data.length=<span class="code-number">0</span>),r&amp;&amp;t.trigger(<span class="code-string">"data"</span>,o)}};Qe.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">s</span>)</span>{({<span class="code-attr">pat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">pes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t;<span class="code-keyword">switch</span>(s.streamType){<span class="code-keyword">case</span> Me.H264_STREAM_TYPE:e=i,t=<span class="code-string">"video"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Me.ADTS_STREAM_TYPE:e=n,t=<span class="code-string">"audio"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Me.METADATA_STREAM_TYPE:e=r,t=<span class="code-string">"timed-metadata"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span>}s.payloadUnitStartIndicator&amp;&amp;a(e,t,!<span class="code-number">0</span>),e.data.push(s),e.size+=s.data.byteLength},<span class="code-attr">pmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">type</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">tracks</span>:[]};<span class="code-literal">null</span>!==(e=s.programMapTable).video&amp;&amp;i.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.video,<span class="code-attr">codec</span>:<span class="code-string">"avc"</span>,<span class="code-attr">type</span>:<span class="code-string">"video"</span>}),<span class="code-literal">null</span>!==e.audio&amp;&amp;i.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.audio,<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>}),t.trigger(<span class="code-string">"data"</span>,i)}})[s.type]()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.size=<span class="code-number">0</span>,i.data.length=<span class="code-number">0</span>,n.size=<span class="code-number">0</span>,n.data.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flushStreams_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a(i,<span class="code-string">"video"</span>),a(n,<span class="code-string">"audio"</span>),a(r,<span class="code-string">"timed-metadata"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flushStreams_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> Je={<span class="code-attr">PAT_PID</span>:<span class="code-number">0</span>,<span class="code-attr">MP2T_PACKET_LENGTH</span>:$e,<span class="code-attr">TransportPacketStream</span>:ze,<span class="code-attr">TransportParseStream</span>:Xe,<span class="code-attr">ElementaryStream</span>:Qe,<span class="code-attr">TimestampRolloverStream</span>:Ke,<span class="code-attr">CaptionStream</span>:Re.CaptionStream,<span class="code-attr">Cea608Stream</span>:Re.Cea608Stream,<span class="code-attr">Cea708Stream</span>:Re.Cea708Stream,<span class="code-attr">MetadataStream</span>:Ye};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> Ze <span class="code-keyword">in</span> Me)Me.hasOwnProperty(Ze)&amp;&amp;(Je[Ze]=Me[Ze]);<span class="code-keyword">var</span> et,tt=Je,it=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>];(et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;et.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d,l=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e||(i=<span class="code-number">0</span>),<span class="code-string">"audio"</span>===n.type)<span class="code-keyword">for</span>(t?(o=t,(t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;l+<span class="code-number">5</span>&lt;t.length;)<span class="code-keyword">if</span>(<span class="code-number">255</span>===t[l]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;t[l+<span class="code-number">1</span>])){<span class="code-keyword">if</span>(a=<span class="code-number">2</span>*(<span class="code-number">1</span>&amp;~t[l+<span class="code-number">1</span>]),r=(<span class="code-number">3</span>&amp;t[l+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">11</span>|t[l+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>|(<span class="code-number">224</span>&amp;t[l+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,d=<span class="code-number">9e4</span>*(u=<span class="code-number">1024</span>*(<span class="code-number">1</span>+(<span class="code-number">3</span>&amp;t[l+<span class="code-number">6</span>])))/it[(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],s=l+r,t.byteLength&lt;s)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">pts</span>:n.pts+i*d,<span class="code-attr">dts</span>:n.dts+i*d,<span class="code-attr">sampleCount</span>:u,<span class="code-attr">audioobjecttype</span>:<span class="code-number">1</span>+(t[l+<span class="code-number">2</span>]&gt;&gt;&gt;<span class="code-number">6</span>&amp;<span class="code-number">3</span>),<span class="code-attr">channelcount</span>:(<span class="code-number">1</span>&amp;t[l+<span class="code-number">2</span>])&lt;&lt;<span class="code-number">2</span>|(<span class="code-number">192</span>&amp;t[l+<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">samplerate</span>:it[(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],<span class="code-attr">samplingfrequencyindex</span>:(<span class="code-number">60</span>&amp;t[l+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">samplesize</span>:<span class="code-number">16</span>,<span class="code-attr">data</span>:t.subarray(l+<span class="code-number">7</span>+a,s)}),i++,t.byteLength===s)<span class="code-keyword">return</span> <span class="code-keyword">void</span>(t=<span class="code-keyword">void</span> <span class="code-number">0</span>);t=t.subarray(s)}<span class="code-keyword">else</span> l++},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> nt,rt,at,st=et,ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byteLength,i=<span class="code-number">0</span>,n=<span class="code-number">0</span>;<span class="code-keyword">this</span>.length=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t},<span class="code-keyword">this</span>.bitsAvailable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t+n},<span class="code-keyword">this</span>.loadWord=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=e.byteLength-t,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>),s=<span class="code-built_in">Math</span>.min(<span class="code-number">4</span>,t);<span class="code-keyword">if</span>(<span class="code-number">0</span>===s)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"no bytes available"</span>);a.set(e.subarray(r,r+s)),i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer).getUint32(<span class="code-number">0</span>),n=<span class="code-number">8</span>*s,t-=s},<span class="code-keyword">this</span>.skipBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class="code-number">8</span>*(r=<span class="code-built_in">Math</span>.floor(e/<span class="code-number">8</span>)),t-=r,<span class="code-keyword">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class="code-keyword">this</span>.readBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class="code-number">32</span>-r;<span class="code-keyword">return</span>(n-=r)&gt;<span class="code-number">0</span>?i&lt;&lt;=r:t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.loadWord(),(r=e-r)&gt;<span class="code-number">0</span>?a&lt;&lt;r|<span class="code-keyword">this</span>.readBits(r):a},<span class="code-keyword">this</span>.skipLeadingZeros=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;n;++e)<span class="code-keyword">if</span>(<span class="code-number">0</span>!=(i&amp;<span class="code-number">2147483648</span>&gt;&gt;&gt;e))<span class="code-keyword">return</span> i&lt;&lt;=e,n-=e,e;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.loadWord(),e+<span class="code-keyword">this</span>.skipLeadingZeros()},<span class="code-keyword">this</span>.skipUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.skipExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.readUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.skipLeadingZeros();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(e+<span class="code-number">1</span>)<span class="code-number">-1</span>},<span class="code-keyword">this</span>.readExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.readUnsignedExpGolomb();<span class="code-keyword">return</span> <span class="code-number">1</span>&amp;e?<span class="code-number">1</span>+e&gt;&gt;&gt;<span class="code-number">1</span>:<span class="code-number">-1</span>*(e&gt;&gt;&gt;<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readBoolean=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>===<span class="code-keyword">this</span>.readBits(<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readUnsignedByte=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(<span class="code-number">8</span>)},<span class="code-keyword">this</span>.loadWord()};(rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i=<span class="code-number">0</span>;rt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r;t?((r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=t.byteLength;i&lt;a<span class="code-number">-3</span>;i++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===t[i+<span class="code-number">2</span>]){e=i+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;e&lt;a;)<span class="code-keyword">switch</span>(t[e]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]){e+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e++;<span class="code-keyword">break</span>}i+<span class="code-number">3</span>!==e<span class="code-number">-2</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>));<span class="code-keyword">do</span>{e++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]||<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>)),i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:e+=<span class="code-number">3</span>}t=t.subarray(i),e-=i,i=<span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>)),t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> V,at={<span class="code-number">100</span>:!<span class="code-number">0</span>,<span class="code-number">110</span>:!<span class="code-number">0</span>,<span class="code-number">122</span>:!<span class="code-number">0</span>,<span class="code-number">244</span>:!<span class="code-number">0</span>,<span class="code-number">44</span>:!<span class="code-number">0</span>,<span class="code-number">83</span>:!<span class="code-number">0</span>,<span class="code-number">86</span>:!<span class="code-number">0</span>,<span class="code-number">118</span>:!<span class="code-number">0</span>,<span class="code-number">128</span>:!<span class="code-number">0</span>,<span class="code-number">138</span>:!<span class="code-number">0</span>,<span class="code-number">139</span>:!<span class="code-number">0</span>,<span class="code-number">134</span>:!<span class="code-number">0</span>},(nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s,o=<span class="code-keyword">new</span> rt;nt.prototype.init.call(<span class="code-keyword">this</span>),e=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"video"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">s</span>)</span>{<span class="code-keyword">var</span> o={<span class="code-attr">trackId</span>:t,<span class="code-attr">pts</span>:i,<span class="code-attr">dts</span>:n,<span class="code-attr">data</span>:s};<span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;s[<span class="code-number">0</span>]){<span class="code-keyword">case</span> <span class="code-number">5</span>:o.nalUnitType=<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:o.nalUnitType=<span class="code-string">"sei_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>));<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:o.nalUnitType=<span class="code-string">"seq_parameter_set_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>)),o.config=a(o.escapedRBSP);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:o.nalUnitType=<span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:o.nalUnitType=<span class="code-string">"access_unit_delimiter_rbsp"</span>}e.trigger(<span class="code-string">"data"</span>,o)})),o.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"done"</span>)})),o.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"partialdone"</span>)})),o.on(<span class="code-string">"reset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"reset"</span>)})),o.on(<span class="code-string">"endedtimeline"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"endedtimeline"</span>)})),<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.flush()},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.partialFlush()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.reset()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.endTimeline()},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=<span class="code-number">8</span>,r=<span class="code-number">8</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e;i++)<span class="code-number">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class="code-number">256</span>)%<span class="code-number">256</span>),n=<span class="code-number">0</span>===r?n:r},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d,l,h,c,f,m,p=<span class="code-number">0</span>,g=<span class="code-number">0</span>,y=<span class="code-number">0</span>,v=<span class="code-number">0</span>,_=<span class="code-number">1</span>;<span class="code-keyword">if</span>(i=(t=<span class="code-keyword">new</span> ot(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),at[i]&amp;&amp;(<span class="code-number">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),t.readBoolean()))<span class="code-keyword">for</span>(c=<span class="code-number">3</span>!==a?<span class="code-number">8</span>:<span class="code-number">12</span>,m=<span class="code-number">0</span>;m&lt;c;m++)t.readBoolean()&amp;&amp;s(m&lt;<span class="code-number">6</span>?<span class="code-number">16</span>:<span class="code-number">64</span>,t);<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),<span class="code-number">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-number">1</span>===o)<span class="code-keyword">for</span>(t.skipBits(<span class="code-number">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),m=<span class="code-number">0</span>;m&lt;u;m++)t.skipExpGolomb();<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class="code-number">0</span>===(h=t.readBits(<span class="code-number">1</span>))&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipBits(<span class="code-number">1</span>),t.readBoolean()&amp;&amp;(p=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class="code-keyword">switch</span>(t.readUnsignedByte()){<span class="code-keyword">case</span> <span class="code-number">1</span>:f=[<span class="code-number">1</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">2</span>:f=[<span class="code-number">12</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">3</span>:f=[<span class="code-number">10</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">4</span>:f=[<span class="code-number">16</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">5</span>:f=[<span class="code-number">40</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:f=[<span class="code-number">24</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:f=[<span class="code-number">20</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:f=[<span class="code-number">32</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:f=[<span class="code-number">80</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">10</span>:f=[<span class="code-number">18</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">11</span>:f=[<span class="code-number">15</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">12</span>:f=[<span class="code-number">64</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">13</span>:f=[<span class="code-number">160</span>,<span class="code-number">99</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">14</span>:f=[<span class="code-number">4</span>,<span class="code-number">3</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">15</span>:f=[<span class="code-number">3</span>,<span class="code-number">2</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">16</span>:f=[<span class="code-number">2</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">255</span>:f=[t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte()]}f&amp;&amp;(_=f[<span class="code-number">0</span>]/f[<span class="code-number">1</span>])}<span class="code-keyword">return</span>{<span class="code-attr">profileIdc</span>:i,<span class="code-attr">levelIdc</span>:n,<span class="code-attr">profileCompatibility</span>:r,<span class="code-attr">width</span>:<span class="code-built_in">Math</span>.ceil((<span class="code-number">16</span>*(d+<span class="code-number">1</span>)<span class="code-number">-2</span>*p<span class="code-number">-2</span>*g)*_),<span class="code-attr">height</span>:(<span class="code-number">2</span>-h)*(l+<span class="code-number">1</span>)*<span class="code-number">16</span><span class="code-number">-2</span>*y<span class="code-number">-2</span>*v,<span class="code-attr">sarRatio</span>:f}}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> ut,dt={<span class="code-attr">H264Stream</span>:nt,<span class="code-attr">NalByteStream</span>:rt},lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span> i=i&gt;=<span class="code-number">0</span>?i:<span class="code-number">0</span>,(<span class="code-number">16</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">4</span>?i+<span class="code-number">20</span>:i+<span class="code-number">10</span>},ht=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> t.length-i&lt;<span class="code-number">10</span>||t[i]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?i:e(t,i+=lt(t,i))},ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=ht(e,<span class="code-number">0</span>);<span class="code-keyword">return</span> e.length&gt;=t+<span class="code-number">2</span>&amp;&amp;<span class="code-number">255</span>==(<span class="code-number">255</span>&amp;e[t])&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])&amp;&amp;<span class="code-number">16</span>==(<span class="code-number">22</span>&amp;e[t+<span class="code-number">1</span>])},ft=lt,mt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-number">224</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,n=e[t+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>;<span class="code-keyword">return</span> <span class="code-number">6144</span>&amp;e[t+<span class="code-number">3</span>]|n|i};(ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,t=<span class="code-number">0</span>;ut.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.setTimestamp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t=e},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=<span class="code-number">0</span>;<span class="code-keyword">for</span>(e.length?(s=e.length,(e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class="code-number">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class="code-number">3</span>;)<span class="code-keyword">if</span>(e[u]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>))<span class="code-keyword">if</span>(<span class="code-number">255</span>!=(<span class="code-number">255</span>&amp;e[u])||<span class="code-number">240</span>!=(<span class="code-number">240</span>&amp;e[u+<span class="code-number">1</span>]))u++;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">7</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=mt(e,u))&gt;e.length)<span class="code-keyword">break</span>;a={<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o),<span class="code-attr">pts</span>:t,<span class="code-attr">dts</span>:t},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,a),u+=o}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">10</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=ft(e,u))&gt;e.length)<span class="code-keyword">break</span>;r={<span class="code-attr">type</span>:<span class="code-string">"timed-metadata"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o)},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class="code-number">0</span>?e.subarray(u):<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> pt,gt,yt,vt,_t=ut,bt=[<span class="code-string">"audioobjecttype"</span>,<span class="code-string">"channelcount"</span>,<span class="code-string">"samplerate"</span>,<span class="code-string">"samplingfrequencyindex"</span>,<span class="code-string">"samplesize"</span>],Tt=[<span class="code-string">"width"</span>,<span class="code-string">"height"</span>,<span class="code-string">"profileIdc"</span>,<span class="code-string">"levelIdc"</span>,<span class="code-string">"profileCompatibility"</span>,<span class="code-string">"sarRatio"</span>],St=dt.H264Stream,It=ct,wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(e.length!==t.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">if</span>(e[i]!==t[i])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>},Lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">start</span>:{<span class="code-attr">dts</span>:e,<span class="code-attr">pts</span>:e+(i-t)},<span class="code-attr">end</span>:{<span class="code-attr">dts</span>:e+(n-t),<span class="code-attr">pts</span>:e+(r-i)},<span class="code-attr">prependedContentDuration</span>:a,<span class="code-attr">baseMediaDecodeTime</span>:e}};(gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=[],n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=<span class="code-number">1</span>/<span class="code-number">0</span>;t=t||{},gt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{Ie(e,t),e&amp;&amp;bt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{e[i]=t[i]})),i.push(t)},<span class="code-keyword">this</span>.setEarliestDts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r=e},<span class="code-keyword">this</span>.setVideoBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{a=e},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> o,u,d,l,h,c,f;<span class="code-number">0</span>!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=Se(e,t.keepOriginalTimestamps),f=ye(e,o,a,s),e.samples=_e(o),d=J(be(o)),i=[],u=Z(n,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),n++,l.set(u),l.set(d,u.byteLength),Te(e),h=<span class="code-built_in">Math</span>.ceil(<span class="code-number">9216e4</span>/e.samplerate),o.length&amp;&amp;(c=o.length*h,<span class="code-keyword">this</span>.trigger(<span class="code-string">"segmentTimingInfo"</span>,Lt(me(e.baseMediaDecodeTime,e.samplerate),o[<span class="code-number">0</span>].dts,o[<span class="code-number">0</span>].pts,o[<span class="code-number">0</span>].dts+c,o[<span class="code-number">0</span>].pts+c,f||<span class="code-number">0</span>)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].pts,<span class="code-attr">end</span>:o[<span class="code-number">0</span>].pts+c})),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Te(e),i=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}}).prototype=<span class="code-keyword">new</span> V,(pt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r=<span class="code-number">0</span>,a=[],s=[];t=t||{},pt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">delete</span> e.minPTS,<span class="code-keyword">this</span>.gopCache_=[],<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{Ie(e,t),<span class="code-string">"seq_parameter_set_rbsp"</span>!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Tt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]=i[t]}),<span class="code-keyword">this</span>)),<span class="code-string">"pic_parameter_set_rbsp"</span>!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n,o,u,d,l,h,c,f=<span class="code-number">0</span>;a.length&amp;&amp;<span class="code-string">"access_unit_delimiter_rbsp"</span>!==a[<span class="code-number">0</span>].nalUnitType;)a.shift();<span class="code-keyword">if</span>(<span class="code-number">0</span>===a.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);<span class="code-keyword">if</span>(i=ie(a),(o=ne(i))[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame||((n=<span class="code-keyword">this</span>.getGopForFusion_(a[<span class="code-number">0</span>],e))?(f=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),s.length){<span class="code-keyword">var</span> m;<span class="code-keyword">if</span>(!(m=t.alignGopsAtEnd?<span class="code-keyword">this</span>.alignGopsAtEnd_(o):<span class="code-keyword">this</span>.alignGopsAtStart_(o)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);Te(e),o=m}Ie(e,o),e.samples=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=t||<span class="code-number">0</span>,u=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">for</span>(a=e[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=te(s,o)).size,u.push(r);<span class="code-keyword">return</span> u}(o),d=J(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,s,o=<span class="code-number">0</span>,u=e.byteLength,d=e.nalCount,l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u+<span class="code-number">4</span>*d),h=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(l.buffer);<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-keyword">for</span>(r=e[t],i=<span class="code-number">0</span>;i&lt;r.length;i++)<span class="code-keyword">for</span>(a=r[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],h.setUint32(o,s.data.byteLength),o+=<span class="code-number">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class="code-keyword">return</span> l}(o)),e.baseMediaDecodeTime=Se(e,t.keepOriginalTimestamps),<span class="code-keyword">this</span>.trigger(<span class="code-string">"processedGopsInfo"</span>,o.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">pts</span>:e.pts,<span class="code-attr">dts</span>:e.dts,<span class="code-attr">byteLength</span>:e.byteLength}}))),h=o[<span class="code-number">0</span>],c=o[o.length<span class="code-number">-1</span>],<span class="code-keyword">this</span>.trigger(<span class="code-string">"segmentTimingInfo"</span>,Lt(e.baseMediaDecodeTime,h.dts,h.pts,c.dts+c.duration,c.pts+c.duration,f)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].pts,<span class="code-attr">end</span>:o[o.length<span class="code-number">-1</span>].pts+o[o.length<span class="code-number">-1</span>].duration}),<span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"baseMediaDecodeTime"</span>,e.baseMediaDecodeTime),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelineStartInfo"</span>,e.timelineStartInfo),u=Z(r,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),r++,l.set(u),l.set(d,u.byteLength),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.resetStream_(),a=[],<span class="code-keyword">this</span>.gopCache_.length=<span class="code-number">0</span>,s.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.resetStream_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Te(e),i=<span class="code-keyword">void</span> <span class="code-number">0</span>,n=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.getGopForFusion_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=<span class="code-number">1</span>/<span class="code-number">0</span>;<span class="code-keyword">for</span>(s=<span class="code-number">0</span>;s&lt;<span class="code-keyword">this</span>.gopCache_.length;s++)r=(a=<span class="code-keyword">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;wt(e.pps[<span class="code-number">0</span>],a.pps[<span class="code-number">0</span>])&amp;&amp;e.sps&amp;&amp;wt(e.sps[<span class="code-number">0</span>],a.sps[<span class="code-number">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class="code-number">-1e4</span>&amp;&amp;i&lt;=<span class="code-number">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class="code-keyword">return</span> n?n.gop:<span class="code-literal">null</span>},<span class="code-keyword">this</span>.alignGopsAtStart_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d;<span class="code-keyword">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class="code-number">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?e:i===e.length?<span class="code-literal">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d)},<span class="code-keyword">this</span>.alignGopsAtEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u;<span class="code-keyword">for</span>(t=s.length<span class="code-number">-1</span>,i=e.length<span class="code-number">-1</span>,a=<span class="code-literal">null</span>,o=!<span class="code-number">1</span>;t&gt;=<span class="code-number">0</span>&amp;&amp;i&gt;=<span class="code-number">0</span>;){<span class="code-keyword">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class="code-number">-1</span>&amp;&amp;(a=i),i--)}<span class="code-keyword">if</span>(!o&amp;&amp;<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(u=o?i:a))<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> d=e.slice(u),l=d.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{<span class="code-attr">byteLength</span>:<span class="code-number">0</span>,<span class="code-attr">duration</span>:<span class="code-number">0</span>,<span class="code-attr">nalCount</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e}}).prototype=<span class="code-keyword">new</span> V,(vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.numberOfTracks=<span class="code-number">0</span>,<span class="code-keyword">this</span>.metadataStream=t,<span class="code-keyword">void</span> <span class="code-number">0</span>!==(e=e||{}).remux?<span class="code-keyword">this</span>.remuxTracks=!!e.remux:<span class="code-keyword">this</span>.remuxTracks=!<span class="code-number">0</span>,<span class="code-string">"boolean"</span>==<span class="code-keyword">typeof</span> e.keepOriginalTimestamps?<span class="code-keyword">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class="code-keyword">this</span>.keepOriginalTimestamps=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.pendingTracks=[],<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes=[],<span class="code-keyword">this</span>.pendingCaptions=[],<span class="code-keyword">this</span>.pendingMetadata=[],<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>,vt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.text?<span class="code-keyword">this</span>.pendingCaptions.push(e):e.frames?<span class="code-keyword">this</span>.pendingMetadata.push(e):(<span class="code-keyword">this</span>.pendingTracks.push(e.track),<span class="code-keyword">this</span>.pendingBytes+=e.boxes.byteLength,<span class="code-string">"video"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.videoTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.push(e.boxes)),<span class="code-keyword">void</span>(<span class="code-string">"audio"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.audioTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.unshift(e.boxes))))}}).prototype=<span class="code-keyword">new</span> V,vt.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a=<span class="code-number">0</span>,s={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{},<span class="code-attr">metadata</span>:[],<span class="code-attr">info</span>:{}},o=<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingTracks.length&lt;<span class="code-keyword">this</span>.numberOfTracks){<span class="code-keyword">if</span>(<span class="code-string">"VideoSegmentStream"</span>!==e&amp;&amp;<span class="code-string">"AudioSegmentStream"</span>!==e)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.remuxTracks)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===<span class="code-keyword">this</span>.pendingTracks.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.emittedTracks++,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>))}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoTrack?(o=<span class="code-keyword">this</span>.videoTrack.timelineStartInfo.pts,Tt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s.info[e]=<span class="code-keyword">this</span>.videoTrack[e]}),<span class="code-keyword">this</span>)):<span class="code-keyword">this</span>.audioTrack&amp;&amp;(o=<span class="code-keyword">this</span>.audioTrack.timelineStartInfo.pts,bt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s.info[e]=<span class="code-keyword">this</span>.audioTrack[e]}),<span class="code-keyword">this</span>)),<span class="code-keyword">this</span>.videoTrack||<span class="code-keyword">this</span>.audioTrack){<span class="code-keyword">for</span>(<span class="code-number">1</span>===<span class="code-keyword">this</span>.pendingTracks.length?s.type=<span class="code-keyword">this</span>.pendingTracks[<span class="code-number">0</span>].type:s.type=<span class="code-string">"combined"</span>,<span class="code-keyword">this</span>.emittedTracks+=<span class="code-keyword">this</span>.pendingTracks.length,n=ee(<span class="code-keyword">this</span>.pendingTracks),s.initSegment=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.byteLength),s.initSegment.set(n),s.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">this</span>.pendingBytes),r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingBoxes.length;r++)s.data.set(<span class="code-keyword">this</span>.pendingBoxes[r],a),a+=<span class="code-keyword">this</span>.pendingBoxes[r].byteLength;<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingCaptions.length;r++)(t=<span class="code-keyword">this</span>.pendingCaptions[r]).startTime=ge(t.startPts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),t.endTime=ge(t.endPts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),s.captionStreams[t.stream]=!<span class="code-number">0</span>,s.captions.push(t);<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;<span class="code-keyword">this</span>.pendingMetadata.length;r++)(i=<span class="code-keyword">this</span>.pendingMetadata[r]).cueTime=ge(i.pts,o,<span class="code-keyword">this</span>.keepOriginalTimestamps),s.metadata.push(i);<span class="code-keyword">for</span>(s.metadata.dispatchType=<span class="code-keyword">this</span>.metadataStream.dispatchType,<span class="code-keyword">this</span>.pendingTracks.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingCaptions.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingMetadata.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,s),r=<span class="code-number">0</span>;r&lt;s.captions.length;r++)t=s.captions[r],<span class="code-keyword">this</span>.trigger(<span class="code-string">"caption"</span>,t);<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r&lt;s.metadata.length;r++)i=s.metadata[r],<span class="code-keyword">this</span>.trigger(<span class="code-string">"id3Frame"</span>,i)}<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>)},vt.prototype.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.remuxTracks=e},(yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>,r=!<span class="code-number">0</span>;yt.prototype.init.call(<span class="code-keyword">this</span>),e=e||{},<span class="code-keyword">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_={},<span class="code-keyword">this</span>.setupAacPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"aac"</span>,r.metadataStream=<span class="code-keyword">new</span> tt.MetadataStream,r.aacStream=<span class="code-keyword">new</span> _t,r.audioTimestampRolloverStream=<span class="code-keyword">new</span> tt.TimestampRolloverStream(<span class="code-string">"audio"</span>),r.timedMetadataTimestampRolloverStream=<span class="code-keyword">new</span> tt.TimestampRolloverStream(<span class="code-string">"timed-metadata"</span>),r.adtsStream=<span class="code-keyword">new</span> st,r.coalesceStream=<span class="code-keyword">new</span> vt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class="code-string">"timestamp"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-string">"timed-metadata"</span>!==a.type&amp;&amp;<span class="code-string">"audio"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> gt(i,e),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t}))})),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>.setupTsPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"ts"</span>,r.metadataStream=<span class="code-keyword">new</span> tt.MetadataStream,r.packetStream=<span class="code-keyword">new</span> tt.TransportPacketStream,r.parseStream=<span class="code-keyword">new</span> tt.TransportParseStream,r.elementaryStream=<span class="code-keyword">new</span> tt.ElementaryStream,r.timestampRolloverStream=<span class="code-keyword">new</span> tt.TimestampRolloverStream,r.adtsStream=<span class="code-keyword">new</span> st,r.h264Stream=<span class="code-keyword">new</span> St,r.captionStream=<span class="code-keyword">new</span> tt.CaptionStream(e),r.coalesceStream=<span class="code-keyword">new</span> vt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-keyword">var</span> s;<span class="code-keyword">if</span>(<span class="code-string">"metadata"</span>===a.type){<span class="code-keyword">for</span>(s=a.tracks.length;s--;)t||<span class="code-string">"video"</span>!==a.tracks[s].type?i||<span class="code-string">"audio"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class="code-keyword">new</span> pt(t,e),r.videoSegmentStream.on(<span class="code-string">"timelineStartInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on(<span class="code-string">"processedGopsInfo"</span>,n.trigger.bind(n,<span class="code-string">"gopInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"segmentTimingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoSegmentTimingInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"baseMediaDecodeTime"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoTimingInfo"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> gt(i,e),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.audioSegmentStream.on(<span class="code-string">"segmentTimingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioSegmentTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t})}})),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class="code-string">"id3Frame"</span>,e)})),r.coalesceStream.on(<span class="code-string">"caption"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"caption"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))},<span class="code-keyword">this</span>.setBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class="code-keyword">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,i.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,Te(i),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,t.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,Te(t),r.captionStream.reset()),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class="code-keyword">this</span>.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> t=It(e);t&amp;&amp;<span class="code-string">"aac"</span>!==<span class="code-keyword">this</span>.transmuxPipeline_.type?<span class="code-keyword">this</span>.setupAacPipeline():t||<span class="code-string">"ts"</span>===<span class="code-keyword">this</span>.transmuxPipeline_.type||<span class="code-keyword">this</span>.setupTsPipeline(),r=!<span class="code-number">1</span>}<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class="code-keyword">this</span>.resetCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> kt={<span class="code-attr">Transmuxer</span>:yt,<span class="code-attr">VideoSegmentStream</span>:pt,<span class="code-attr">AudioSegmentStream</span>:gt,<span class="code-attr">AUDIO_PROPERTIES</span>:bt,<span class="code-attr">VIDEO_PROPERTIES</span>:Tt,<span class="code-attr">generateSegmentTimingInfo</span>:Lt},At={<span class="code-attr">Adts</span>:st,<span class="code-attr">h264</span>:dt},Et=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=[],r=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=<span class="code-number">0</span>,o=<span class="code-number">1</span>/<span class="code-number">0</span>,u=<span class="code-literal">null</span>,d=<span class="code-literal">null</span>;i=i||{},e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Ie(t,e),t&amp;&amp;bt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t[i]=e[i]})),n.push(e)},<span class="code-keyword">this</span>.setEarliestDts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{a=e},<span class="code-keyword">this</span>.setVideoBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{o=e},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e},<span class="code-keyword">this</span>.processFrames_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,l,h,c,f;<span class="code-number">0</span>!==n.length&amp;&amp;<span class="code-number">0</span>!==(e=ve(n,t,a)).length&amp;&amp;(t.baseMediaDecodeTime=Se(t,i.keepOriginalTimestamps),ye(t,e,s,o),t.samples=_e(e),h=J(be(e)),n=[],l=Z(r,[t]),r++,t.initSegment=ee([t]),(c=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(l.byteLength+h.byteLength)).set(l),c.set(h,l.byteLength),Te(t),<span class="code-literal">null</span>===u&amp;&amp;(d=u=e[<span class="code-number">0</span>].pts),d+=e.length*(<span class="code-number">9216e4</span>/t.samplerate),f={<span class="code-attr">start</span>:u},<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,f),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:t,<span class="code-attr">boxes</span>:c}))},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.processFrames_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:u,<span class="code-attr">end</span>:d}),<span class="code-keyword">this</span>.resetTiming_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.processFrames_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.resetTiming_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Te(t),u=<span class="code-literal">null</span>,d=<span class="code-literal">null</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.resetTiming_(),n=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};Et.prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> Pt=Et,Ct=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s=<span class="code-number">0</span>,o=[],u=[],d=<span class="code-literal">null</span>,l=<span class="code-literal">null</span>,h=!<span class="code-number">0</span>;i=i||{},e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Ie(t,e),<span class="code-keyword">void</span> <span class="code-number">0</span>===t.timelineStartInfo.dts&amp;&amp;(t.timelineStartInfo.dts=e.dts),<span class="code-string">"seq_parameter_set_rbsp"</span>!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],Tt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t[e]=n[e]}),<span class="code-keyword">this</span>)),<span class="code-string">"pic_parameter_set_rbsp"</span>!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),o.push(e)},<span class="code-keyword">this</span>.processNals_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">for</span>(o=u.concat(o);o.length&amp;&amp;<span class="code-string">"access_unit_delimiter_rbsp"</span>!==o[<span class="code-number">0</span>].nalUnitType;)o.shift();<span class="code-keyword">if</span>(<span class="code-number">0</span>!==o.length){<span class="code-keyword">var</span> r=ie(o);<span class="code-keyword">if</span>(r.length)<span class="code-keyword">if</span>(u=r[r.length<span class="code-number">-1</span>],e&amp;&amp;(r.pop(),r.duration-=u.duration,r.nalCount-=u.length,r.byteLength-=u.byteLength),r.length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelineStartInfo"</span>,t.timelineStartInfo),h){<span class="code-keyword">if</span>(!(a=ne(r))[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame){<span class="code-keyword">if</span>(!(a=re(a))[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame)<span class="code-keyword">return</span> o=[].concat.apply([],r).concat(u),<span class="code-keyword">void</span>(u=[]);(r=[].concat.apply([],a)).duration=a.duration}h=!<span class="code-number">1</span>}<span class="code-keyword">for</span>(<span class="code-literal">null</span>===d&amp;&amp;(d=r[<span class="code-number">0</span>].pts,l=d),l+=r.duration,<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:d,<span class="code-attr">end</span>:l}),n=<span class="code-number">0</span>;n&lt;r.length;n++){<span class="code-keyword">var</span> c=r[n];t.samples=ae(c);<span class="code-keyword">var</span> f=J(se(c));Te(t),Ie(t,c),t.baseMediaDecodeTime=Se(t,i.keepOriginalTimestamps);<span class="code-keyword">var</span> m=Z(s,[t]);s++,t.initSegment=ee([t]);<span class="code-keyword">var</span> p=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(m.byteLength+f.byteLength);p.set(m),p.set(f,m.byteLength),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:t,<span class="code-attr">boxes</span>:p,<span class="code-attr">sequence</span>:s,<span class="code-attr">videoFrameDts</span>:c.dts,<span class="code-attr">videoFramePts</span>:c.pts})}o=[]}<span class="code-keyword">else</span> o=[]}},<span class="code-keyword">this</span>.resetTimingAndConfig_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=<span class="code-literal">null</span>,l=<span class="code-literal">null</span>},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.processNals_(!<span class="code-number">0</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.processNals_(!<span class="code-number">1</span>),<span class="code-keyword">this</span>.resetTimingAndConfig_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.resetTimingAndConfig_(),u=[],o=[],h=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};Ct.prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> Ut=Ct,Ot=ct,Dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.prototype=<span class="code-keyword">new</span> V,e.prototype.init.call(e),e},xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.on(<span class="code-string">"data"</span>,t.trigger.bind(t,<span class="code-string">"data"</span>)),e.on(<span class="code-string">"done"</span>,t.trigger.bind(t,<span class="code-string">"done"</span>)),e.on(<span class="code-string">"partialdone"</span>,t.trigger.bind(t,<span class="code-string">"partialdone"</span>)),e.on(<span class="code-string">"endedtimeline"</span>,t.trigger.bind(t,<span class="code-string">"endedtimeline"</span>)),e.on(<span class="code-string">"audioTimingInfo"</span>,t.trigger.bind(t,<span class="code-string">"audioTimingInfo"</span>)),e.on(<span class="code-string">"videoTimingInfo"</span>,t.trigger.bind(t,<span class="code-string">"videoTimingInfo"</span>)),e.on(<span class="code-string">"trackinfo"</span>,t.trigger.bind(t,<span class="code-string">"trackinfo"</span>)),e.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{i.dispatchType=e.metadataStream.dispatchType,i.cueTime=fe(i.pts),t.trigger(<span class="code-string">"id3Frame"</span>,i)})),e.on(<span class="code-string">"caption"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.trigger(<span class="code-string">"caption"</span>,e)}))},Rt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-literal">null</span>,n=!<span class="code-number">0</span>;t=t||{},e.prototype.init.call(<span class="code-keyword">this</span>),t.baseMediaDecodeTime=t.baseMediaDecodeTime||<span class="code-number">0</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(n){<span class="code-keyword">var</span> r=Ot(e);!r||i&amp;&amp;<span class="code-string">"aac"</span>===i.type?r||i&amp;&amp;<span class="code-string">"ts"</span>===i.type||(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">type</span>:<span class="code-string">"ts"</span>,<span class="code-attr">tracks</span>:{<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-attr">video</span>:<span class="code-literal">null</span>},<span class="code-attr">packet</span>:<span class="code-keyword">new</span> tt.TransportPacketStream,<span class="code-attr">parse</span>:<span class="code-keyword">new</span> tt.TransportParseStream,<span class="code-attr">elementary</span>:<span class="code-keyword">new</span> tt.ElementaryStream,<span class="code-attr">timestampRollover</span>:<span class="code-keyword">new</span> tt.TimestampRolloverStream,<span class="code-attr">adts</span>:<span class="code-keyword">new</span> At.Adts,<span class="code-attr">h264</span>:<span class="code-keyword">new</span> At.h264.H264Stream,<span class="code-attr">captionStream</span>:<span class="code-keyword">new</span> tt.CaptionStream(e),<span class="code-attr">metadataStream</span>:<span class="code-keyword">new</span> tt.MetadataStream};<span class="code-keyword">return</span> t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"metadata"</span>===i.type){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;i.tracks.length;n++)t.tracks[i.tracks[n].type]||(t.tracks[i.tracks[n].type]=i.tracks[n],t.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&amp;&amp;!t.videoSegmentStream&amp;&amp;(t.videoSegmentStream=<span class="code-keyword">new</span> Ut(t.tracks.video,e),t.videoSegmentStream.on(<span class="code-string">"timelineStartInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t.tracks.audio&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;t.audioSegmentStream.setEarliestDts(i.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on(<span class="code-string">"timingInfo"</span>,t.trigger.bind(t,<span class="code-string">"videoTimingInfo"</span>)),t.videoSegmentStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">data</span>:e})})),t.videoSegmentStream.on(<span class="code-string">"done"</span>,t.trigger.bind(t,<span class="code-string">"done"</span>)),t.videoSegmentStream.on(<span class="code-string">"partialdone"</span>,t.trigger.bind(t,<span class="code-string">"partialdone"</span>)),t.videoSegmentStream.on(<span class="code-string">"endedtimeline"</span>,t.trigger.bind(t,<span class="code-string">"endedtimeline"</span>)),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&amp;&amp;!t.audioSegmentStream&amp;&amp;(t.audioSegmentStream=<span class="code-keyword">new</span> Pt(t.tracks.audio,e),t.audioSegmentStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">data</span>:e})})),t.audioSegmentStream.on(<span class="code-string">"done"</span>,t.trigger.bind(t,<span class="code-string">"done"</span>)),t.audioSegmentStream.on(<span class="code-string">"partialdone"</span>,t.trigger.bind(t,<span class="code-string">"partialdone"</span>)),t.audioSegmentStream.on(<span class="code-string">"endedtimeline"</span>,t.trigger.bind(t,<span class="code-string">"endedtimeline"</span>)),t.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,t.trigger.bind(t,<span class="code-string">"audioTimingInfo"</span>)),t.adts.pipe(t.audioSegmentStream)),t.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!t.tracks.audio,<span class="code-attr">hasVideo</span>:!!t.tracks.video})}})),t.captionStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n;n=t.tracks.video&amp;&amp;t.tracks.video.timelineStartInfo.pts||<span class="code-number">0</span>,i.startTime=ge(i.startPts,n,e.keepOriginalTimestamps),i.endTime=ge(i.endPts,n,e.keepOriginalTimestamps),t.trigger(<span class="code-string">"caption"</span>,i)})),(t=Dt(t)).metadataStream.on(<span class="code-string">"data"</span>,t.trigger.bind(t,<span class="code-string">"id3Frame"</span>)),t}(t),xt(i,<span class="code-keyword">this</span>)):(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">type</span>:<span class="code-string">"aac"</span>,<span class="code-attr">tracks</span>:{<span class="code-attr">audio</span>:<span class="code-literal">null</span>},<span class="code-attr">metadataStream</span>:<span class="code-keyword">new</span> tt.MetadataStream,<span class="code-attr">aacStream</span>:<span class="code-keyword">new</span> _t,<span class="code-attr">audioRollover</span>:<span class="code-keyword">new</span> tt.TimestampRolloverStream(<span class="code-string">"audio"</span>),<span class="code-attr">timedMetadataRollover</span>:<span class="code-keyword">new</span> tt.TimestampRolloverStream(<span class="code-string">"timed-metadata"</span>),<span class="code-attr">adtsStream</span>:<span class="code-keyword">new</span> st(!<span class="code-number">0</span>)};<span class="code-keyword">return</span> t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on(<span class="code-string">"timestamp"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-string">"timed-metadata"</span>!==i.type&amp;&amp;<span class="code-string">"audio"</span>!==i.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:e.baseMediaDecodeTime},<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>},t.audioSegmentStream=<span class="code-keyword">new</span> Pt(t.tracks.audio,e),t.audioSegmentStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">data</span>:e})})),t.audioSegmentStream.on(<span class="code-string">"partialdone"</span>,t.trigger.bind(t,<span class="code-string">"partialdone"</span>)),t.audioSegmentStream.on(<span class="code-string">"done"</span>,t.trigger.bind(t,<span class="code-string">"done"</span>)),t.audioSegmentStream.on(<span class="code-string">"endedtimeline"</span>,t.trigger.bind(t,<span class="code-string">"endedtimeline"</span>)),t.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,t.trigger.bind(t,<span class="code-string">"audioTimingInfo"</span>)),t.adtsStream.pipe(t.audioSegmentStream),t.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!t.tracks.audio,<span class="code-attr">hasVideo</span>:!!t.tracks.video}))})),(t=Dt(t)).metadataStream.on(<span class="code-string">"data"</span>,t.trigger.bind(t,<span class="code-string">"id3Frame"</span>)),t}(t),xt(i,<span class="code-keyword">this</span>)),n=!<span class="code-number">1</span>}i.headOfPipeline.push(e)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i&amp;&amp;(n=!<span class="code-number">0</span>,i.headOfPipeline.flush())},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i&amp;&amp;i.headOfPipeline.partialFlush()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i&amp;&amp;i.headOfPipeline.endTimeline()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i&amp;&amp;i.headOfPipeline.reset()},<span class="code-keyword">this</span>.setBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),i&amp;&amp;(i.tracks.audio&amp;&amp;(i.tracks.audio.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,i.tracks.audio.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,Te(i.tracks.audio),i.audioRollover&amp;&amp;i.audioRollover.discontinuity()),i.tracks.video&amp;&amp;(i.videoSegmentStream&amp;&amp;(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,i.tracks.video.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,Te(i.tracks.video)),i.timestampRollover&amp;&amp;i.timestampRollover.discontinuity())},<span class="code-keyword">this</span>.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.remux=e,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(e)},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;i.tracks.audio&amp;&amp;i.audioSegmentStream&amp;&amp;i.audioSegmentStream.setAudioAppendStart(e)},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{}};Rt.prototype=<span class="code-keyword">new</span> V;<span class="code-keyword">var</span> Mt=Rt,Bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;&gt;&gt;<span class="code-number">0</span>},Ft=Bt,Nt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u,d,l=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;t.byteLength;)r=Ft(t[n]&lt;&lt;<span class="code-number">24</span>|t[n+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[n+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[n+<span class="code-number">3</span>]),u=t.subarray(n+<span class="code-number">4</span>,n+<span class="code-number">8</span>),d=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=<span class="code-string">""</span>,d+=<span class="code-built_in">String</span>.fromCharCode(u[<span class="code-number">0</span>]),d+=<span class="code-built_in">String</span>.fromCharCode(u[<span class="code-number">1</span>]),a=(d+=<span class="code-built_in">String</span>.fromCharCode(u[<span class="code-number">2</span>]))+<span class="code-built_in">String</span>.fromCharCode(u[<span class="code-number">3</span>]),s=r&gt;<span class="code-number">1</span>?n+r:t.byteLength,a===i[<span class="code-number">0</span>]&amp;&amp;(<span class="code-number">1</span>===i.length?l.push(t.subarray(n+<span class="code-number">8</span>,s)):(o=e(t.subarray(n+<span class="code-number">8</span>,s),i.slice(<span class="code-number">1</span>))).length&amp;&amp;(l=l.concat(o))),n=s;<span class="code-keyword">return</span> l},qt=Bt,Wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">isLeading</span>:(<span class="code-number">12</span>&amp;e[<span class="code-number">0</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">3</span>&amp;e[<span class="code-number">0</span>],<span class="code-attr">isDependedOn</span>:(<span class="code-number">192</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">hasRedundancy</span>:(<span class="code-number">48</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">paddingValue</span>:(<span class="code-number">14</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">1</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>&amp;e[<span class="code-number">1</span>],<span class="code-attr">degradationPriority</span>:e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">3</span>]}},Vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},Ht=Re.CaptionStream,Gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e,n=<span class="code-number">0</span>;n&lt;t.length;n++){<span class="code-keyword">var</span> r=t[n];<span class="code-keyword">if</span>(i&lt;r.size)<span class="code-keyword">return</span> r;i-=r.size}<span class="code-keyword">return</span> <span class="code-literal">null</span>},jt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Nt(e,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),n=Nt(e,[<span class="code-string">"mdat"</span>]),r={},a=[];<span class="code-keyword">return</span> n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> n=i[t];a.push({<span class="code-attr">mdat</span>:e,<span class="code-attr">traf</span>:n})})),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,a,s,o,u,d,l,h,c,f,m,p=e.mdat,g=e.traf,y=Nt(g,[<span class="code-string">"tfhd"</span>]),v=(n=y[<span class="code-number">0</span>],s=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(n.buffer,n.byteOffset,n.byteLength),o={<span class="code-attr">version</span>:n[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">trackId</span>:s.getUint32(<span class="code-number">4</span>)},u=<span class="code-number">1</span>&amp;o.flags[<span class="code-number">2</span>],d=<span class="code-number">2</span>&amp;o.flags[<span class="code-number">2</span>],l=<span class="code-number">8</span>&amp;o.flags[<span class="code-number">2</span>],h=<span class="code-number">16</span>&amp;o.flags[<span class="code-number">2</span>],c=<span class="code-number">32</span>&amp;o.flags[<span class="code-number">2</span>],f=<span class="code-number">65536</span>&amp;o.flags[<span class="code-number">0</span>],m=<span class="code-number">131072</span>&amp;o.flags[<span class="code-number">0</span>],a=<span class="code-number">8</span>,u&amp;&amp;(a+=<span class="code-number">4</span>,o.baseDataOffset=s.getUint32(<span class="code-number">12</span>),a+=<span class="code-number">4</span>),d&amp;&amp;(o.sampleDescriptionIndex=s.getUint32(a),a+=<span class="code-number">4</span>),l&amp;&amp;(o.defaultSampleDuration=s.getUint32(a),a+=<span class="code-number">4</span>),h&amp;&amp;(o.defaultSampleSize=s.getUint32(a),a+=<span class="code-number">4</span>),c&amp;&amp;(o.defaultSampleFlags=s.getUint32(a)),f&amp;&amp;(o.durationIsEmpty=!<span class="code-number">0</span>),!u&amp;&amp;m&amp;&amp;(o.baseDataOffsetIsMoof=!<span class="code-number">0</span>),o),_=v.trackId,b=Nt(g,[<span class="code-string">"tfdt"</span>]),T=b.length&gt;<span class="code-number">0</span>?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">baseMediaDecodeTime</span>:qt(e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>])};<span class="code-keyword">return</span> <span class="code-number">1</span>===t.version&amp;&amp;(t.baseMediaDecodeTime*=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),t.baseMediaDecodeTime+=qt(e[<span class="code-number">8</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">9</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">10</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>])),t}(b[<span class="code-number">0</span>]).baseMediaDecodeTime:<span class="code-number">0</span>,S=Nt(g,[<span class="code-string">"trun"</span>]);t===_&amp;&amp;S.length&gt;<span class="code-number">0</span>&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u=[];<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r+<span class="code-number">4</span>&lt;e.length;r+=a)<span class="code-keyword">if</span>(a=o.getUint32(r),r+=<span class="code-number">4</span>,!(a&lt;=<span class="code-number">0</span>))<span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;e[r]){<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">var</span> d=e.subarray(r+<span class="code-number">1</span>,r+<span class="code-number">1</span>+a),l=Gt(r,t);<span class="code-keyword">if</span>(n={<span class="code-attr">nalUnitType</span>:<span class="code-string">"sei_rbsp"</span>,<span class="code-attr">size</span>:a,<span class="code-attr">data</span>:d,<span class="code-attr">escapedRBSP</span>:Vt(d),<span class="code-attr">trackId</span>:i},l)n.pts=l.pts,n.dts=l.dts,s=l;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(!s){<span class="code-built_in">console</span>.log(<span class="code-string">"We've encountered a nal unit without data. See mux.js#233."</span>);<span class="code-keyword">break</span>}n.pts=s.pts,n.dts=s.dts}u.push(n)}<span class="code-keyword">return</span> u}(p,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t,r=i.defaultSampleDuration||<span class="code-number">0</span>,a=i.defaultSampleSize||<span class="code-number">0</span>,s=i.trackId,o=[];<span class="code-keyword">return</span> e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">samples</span>:[]},n=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">2</span>],a=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">2</span>],s=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">1</span>],o=<span class="code-number">2</span>&amp;i.flags[<span class="code-number">1</span>],u=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">1</span>],d=<span class="code-number">8</span>&amp;i.flags[<span class="code-number">1</span>],l=n.getUint32(<span class="code-number">4</span>),h=<span class="code-number">8</span>;<span class="code-keyword">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(h),h+=<span class="code-number">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class="code-attr">flags</span>:Wt(e.subarray(h,h+<span class="code-number">4</span>))},h+=<span class="code-number">4</span>,s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class="code-number">4</span>),d&amp;&amp;(<span class="code-number">1</span>===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=<span class="code-number">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(h),h+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(h),h+=<span class="code-number">4</span>),u&amp;&amp;(t.flags=Wt(e.subarray(h,h+<span class="code-number">4</span>)),h+=<span class="code-number">4</span>),d&amp;&amp;(<span class="code-number">1</span>===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=<span class="code-number">4</span>),i.samples.push(t);<span class="code-keyword">return</span> i}(e).samples;t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e.duration&amp;&amp;(e.duration=r),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class="code-keyword">void</span> <span class="code-number">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class="code-number">0</span>),e.pts=n+e.compositionTimeOffset,n+=e.duration})),o=o.concat(t)})),o}(S,T,v),_),r[_]||(r[_]=[]),r[_]=r[_].concat(i))})),r},zt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s=!<span class="code-number">1</span>;<span class="code-keyword">this</span>.isInitialized=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s},<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e=<span class="code-keyword">new</span> Ht,s=!<span class="code-number">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class="code-number">0</span>}))},<span class="code-keyword">this</span>.isNewInit=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!(e&amp;&amp;<span class="code-number">0</span>===e.length||t&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-number">0</span>===<span class="code-built_in">Object</span>.keys(t).length||i===e[<span class="code-number">0</span>]&amp;&amp;n===t[i])},<span class="code-keyword">this</span>.parse=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,a,s</span>)</span>{<span class="code-keyword">var</span> o;<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(!a||!s)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isNewInit(a,s))i=a[<span class="code-number">0</span>],n=s[i];<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-literal">null</span>===i||!n)<span class="code-keyword">return</span> t.push(e),<span class="code-literal">null</span>;<span class="code-keyword">for</span>(;t.length&gt;<span class="code-number">0</span>;){<span class="code-keyword">var</span> u=t.shift();<span class="code-keyword">this</span>.parse(u,a,s)}<span class="code-keyword">return</span> <span class="code-literal">null</span>!==(o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===t?<span class="code-literal">null</span>:{<span class="code-attr">seiNals</span>:jt(e,t)[t],<span class="code-attr">timescale</span>:i}}(e,i,n))&amp;&amp;o.seiNals?(<span class="code-keyword">this</span>.pushNals(o.seiNals),<span class="code-keyword">this</span>.flushStream(),r):<span class="code-literal">null</span>},<span class="code-keyword">this</span>.pushNals=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized()||!t||<span class="code-number">0</span>===t.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},<span class="code-keyword">this</span>.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;a?e.partialFlush():e.flush()},<span class="code-keyword">this</span>.clearParsedCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r.captions=[],r.captionStreams={}},<span class="code-keyword">this</span>.resetCaptionStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;e.reset()},<span class="code-keyword">this</span>.clearAllCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.clearParsedCaptions(),<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=[],i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r?<span class="code-keyword">this</span>.clearParsedCaptions():r={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{}},<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset()},Xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"AudioSegmentStream"</span>===e?<span class="code-string">"audio"</span>:<span class="code-string">"VideoSegmentStream"</span>===e?<span class="code-string">"video"</span>:<span class="code-string">""</span>},Qt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.options=t||{},<span class="code-keyword">this</span>.self=e,<span class="code-keyword">this</span>.init()}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer&amp;&amp;<span class="code-keyword">this</span>.transmuxer.dispose(),<span class="code-keyword">this</span>.transmuxer=<span class="code-keyword">this</span>.options.handlePartialData?<span class="code-keyword">new</span> Mt(<span class="code-keyword">this</span>.options):<span class="code-keyword">new</span> kt.Transmuxer(<span class="code-keyword">this</span>.options),<span class="code-keyword">this</span>.options.handlePartialData?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">data</span>:t.data.track.initSegment.buffer,<span class="code-attr">byteOffset</span>:t.data.track.initSegment.byteOffset,<span class="code-attr">byteLength</span>:t.data.track.initSegment.byteLength},n={<span class="code-attr">boxes</span>:{<span class="code-attr">data</span>:t.data.boxes.buffer,<span class="code-attr">byteOffset</span>:t.data.boxes.byteOffset,<span class="code-attr">byteLength</span>:t.data.boxes.byteLength},<span class="code-attr">initSegment</span>:i,<span class="code-attr">type</span>:t.type,<span class="code-attr">sequence</span>:t.data.sequence};<span class="code-keyword">void</span> <span class="code-number">0</span>!==t.data.videoFrameDts&amp;&amp;(n.videoFrameDtsTime=fe(t.data.videoFrameDts)),<span class="code-keyword">void</span> <span class="code-number">0</span>!==t.data.videoFramePts&amp;&amp;(n.videoFramePtsTime=fe(t.data.videoFramePts)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"data"</span>,<span class="code-attr">segment</span>:n},[n.boxes.data,n.initSegment.data])})),t.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"id3Frame"</span>,<span class="code-attr">id3Frame</span>:t})})),t.on(<span class="code-string">"caption"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"caption"</span>,<span class="code-attr">caption</span>:t})})),t.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>,<span class="code-attr">type</span>:Xt(t)})})),t.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"partialdone"</span>,<span class="code-attr">type</span>:Xt(t)})})),t.on(<span class="code-string">"endedsegment"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"endedSegment"</span>,<span class="code-attr">type</span>:Xt(t)})})),t.on(<span class="code-string">"trackinfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"trackinfo"</span>,<span class="code-attr">trackInfo</span>:t})})),t.on(<span class="code-string">"audioTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==t.start){<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:fe(t.start)};t.end&amp;&amp;(i.end=fe(t.end)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioTimingInfo"</span>,<span class="code-attr">audioTimingInfo</span>:i})}<span class="code-keyword">else</span> e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioTimingInfo"</span>,<span class="code-attr">audioTimingInfo</span>:t})})),t.on(<span class="code-string">"videoTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:fe(t.start)};t.end&amp;&amp;(i.end=fe(t.end)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoTimingInfo"</span>,<span class="code-attr">videoTimingInfo</span>:i})}))}(<span class="code-keyword">this</span>.self,<span class="code-keyword">this</span>.transmuxer):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.initSegment;t.initSegment={<span class="code-attr">data</span>:i.buffer,<span class="code-attr">byteOffset</span>:i.byteOffset,<span class="code-attr">byteLength</span>:i.byteLength};<span class="code-keyword">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"data"</span>,<span class="code-attr">segment</span>:t,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength},[t.data])})),t.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>})})),t.on(<span class="code-string">"gopInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"gopInfo"</span>,<span class="code-attr">gopInfo</span>:t})})),t.on(<span class="code-string">"videoSegmentTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:{<span class="code-attr">decode</span>:fe(t.start.dts),<span class="code-attr">presentation</span>:fe(t.start.pts)},<span class="code-attr">end</span>:{<span class="code-attr">decode</span>:fe(t.end.dts),<span class="code-attr">presentation</span>:fe(t.end.pts)},<span class="code-attr">baseMediaDecodeTime</span>:fe(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=fe(t.prependedContentDuration)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoSegmentTimingInfo"</span>,<span class="code-attr">videoSegmentTimingInfo</span>:i})})),t.on(<span class="code-string">"audioSegmentTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:{<span class="code-attr">decode</span>:fe(t.start.dts),<span class="code-attr">presentation</span>:fe(t.start.pts)},<span class="code-attr">end</span>:{<span class="code-attr">decode</span>:fe(t.end.dts),<span class="code-attr">presentation</span>:fe(t.end.pts)},<span class="code-attr">baseMediaDecodeTime</span>:fe(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=fe(t.prependedContentDuration)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioSegmentTimingInfo"</span>,<span class="code-attr">audioSegmentTimingInfo</span>:i})})),t.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"id3Frame"</span>,<span class="code-attr">id3Frame</span>:t})})),t.on(<span class="code-string">"caption"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"caption"</span>,<span class="code-attr">caption</span>:t})})),t.on(<span class="code-string">"trackinfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"trackinfo"</span>,<span class="code-attr">trackInfo</span>:t})})),t.on(<span class="code-string">"audioTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioTimingInfo"</span>,<span class="code-attr">audioTimingInfo</span>:{<span class="code-attr">start</span>:fe(t.start),<span class="code-attr">end</span>:fe(t.end)}})})),t.on(<span class="code-string">"videoTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoTimingInfo"</span>,<span class="code-attr">videoTimingInfo</span>:{<span class="code-attr">start</span>:fe(t.start),<span class="code-attr">end</span>:fe(t.end)}})}))}(<span class="code-keyword">this</span>.self,<span class="code-keyword">this</span>.transmuxer)},t.pushMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionParser||(<span class="code-keyword">this</span>.captionParser=<span class="code-keyword">new</span> zt,<span class="code-keyword">this</span>.captionParser.init());<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.data,e.byteOffset,e.byteLength),i=<span class="code-keyword">this</span>.captionParser.parse(t,e.trackIds,e.timescales);<span class="code-keyword">this</span>.self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"mp4Captions"</span>,<span class="code-attr">captions</span>:i&amp;&amp;i.captions||[],<span class="code-attr">data</span>:t.buffer},[t.buffer])},t.clearAllMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.captionParser&amp;&amp;<span class="code-keyword">this</span>.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.captionParser&amp;&amp;<span class="code-keyword">this</span>.captionParser.clearParsedCaptions()},t.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class="code-keyword">this</span>.transmuxer.push(t)},t.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer.reset()},t.setTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timestampOffset||<span class="code-number">0</span>;<span class="code-keyword">this</span>.transmuxer.setBaseMediaDecodeTime(<span class="code-built_in">Math</span>.round(ce(t)))},t.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.setAudioAppendStart(<span class="code-built_in">Math</span>.ceil(ce(e.appendStart)))},t.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.setRemux(e.remux)},t.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.flush(),i.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>,<span class="code-attr">type</span>:<span class="code-string">"transmuxed"</span>})},t.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.partialFlush(),i.postMessage({<span class="code-attr">action</span>:<span class="code-string">"partialdone"</span>,<span class="code-attr">type</span>:<span class="code-string">"transmuxed"</span>})},t.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer.endTimeline(),i.postMessage({<span class="code-attr">action</span>:<span class="code-string">"endedtimeline"</span>,<span class="code-attr">type</span>:<span class="code-string">"transmuxed"</span>})},t.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();<span class="code-keyword">new</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"init"</span>===t.data.action&amp;&amp;t.data.options?<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> Qt(e,t.data.options):(<span class="code-keyword">this</span>.messageHandlers||(<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> Qt(e)),t.data&amp;&amp;t.data.action&amp;&amp;<span class="code-string">"init"</span>!==t.data.action&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[t.data.action]&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[t.data.action](t.data))}}(i)}()})),Ri={<span class="code-attr">mp4</span>:<span class="code-regexp">/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/</span>,<span class="code-attr">webm</span>:<span class="code-regexp">/^(vp0?[89]|av0?1|opus|vorbis)/</span>,<span class="code-attr">ogg</span>:<span class="code-regexp">/^(vp0?[89]|theora|flac|opus|vorbis)/</span>,<span class="code-attr">video</span>:<span class="code-regexp">/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/</span>,<span class="code-attr">audio</span>:<span class="code-regexp">/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/</span>,<span class="code-attr">text</span>:<span class="code-regexp">/^(stpp.ttml.im1t)/</span>,<span class="code-attr">muxerVideo</span>:<span class="code-regexp">/^(avc0?1)/</span>,<span class="code-attr">muxerAudio</span>:<span class="code-regexp">/^(mp4a)/</span>,<span class="code-attr">muxerText</span>:<span class="code-regexp">/a^/</span>},Mi=[<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>,<span class="code-string">"text"</span>],Bi=[<span class="code-string">"Video"</span>,<span class="code-string">"Audio"</span>,<span class="code-string">"Text"</span>],Fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e?e.replace(<span class="code-regexp">/avc1\.(\d+)\.(\d+)/i</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"avc1."</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(t).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)+<span class="code-string">"00"</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(i).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)})):e},Ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>);<span class="code-keyword">var</span> t=e.split(<span class="code-string">","</span>),i=[];<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;e=e.trim(),Mi.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=Ri[n].exec(e.toLowerCase());<span class="code-keyword">if</span>(r&amp;&amp;!(r.length&lt;=<span class="code-number">1</span>)){t=n;<span class="code-keyword">var</span> a=e.substring(<span class="code-number">0</span>,r[<span class="code-number">1</span>].length),s=e.replace(a,<span class="code-string">""</span>);i.push({<span class="code-attr">type</span>:a,<span class="code-attr">details</span>:s,<span class="code-attr">mediaType</span>:n})}})),t||i.push({<span class="code-attr">type</span>:e,<span class="code-attr">details</span>:<span class="code-string">""</span>,<span class="code-attr">mediaType</span>:<span class="code-string">"unknown"</span>})})),i},qi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),Ri.audio.test(e.trim().toLowerCase())},Wi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">var</span> t,i=e.toLowerCase().split(<span class="code-string">","</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Fi(e.trim())})),n=<span class="code-string">"video"</span>;<span class="code-number">1</span>===i.length&amp;&amp;qi(i[<span class="code-number">0</span>])?n=<span class="code-string">"audio"</span>:<span class="code-number">1</span>===i.length&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===(t=i[<span class="code-number">0</span>])&amp;&amp;(t=<span class="code-string">""</span>),Ri.text.test(t.trim().toLowerCase()))&amp;&amp;(n=<span class="code-string">"application"</span>);<span class="code-keyword">var</span> r=<span class="code-string">"mp4"</span>;<span class="code-keyword">return</span> i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ri.mp4.test(e)}))?r=<span class="code-string">"mp4"</span>:i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ri.webm.test(e)}))?r=<span class="code-string">"webm"</span>:i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ri.ogg.test(e)}))&amp;&amp;(r=<span class="code-string">"ogg"</span>),n+<span class="code-string">"/"</span>+r+<span class="code-string">';codecs="'</span>+e+<span class="code-string">'"'</span>}},Vi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),o.default.MediaSource&amp;&amp;o.default.MediaSource.isTypeSupported&amp;&amp;o.default.MediaSource.isTypeSupported(Wi(e))||!<span class="code-number">1</span>},Hi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),e.toLowerCase().split(<span class="code-string">","</span>).every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=e.trim();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;Bi.length;t++)<span class="code-keyword">if</span>(Ri[<span class="code-string">"muxer"</span>+Bi[t]].test(e))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}))},Gi=<span class="code-string">"mp4a.40.2"</span>,ji=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> u.default.log.debug?u.default.log.debug.bind(u.default,<span class="code-string">"VHS:"</span>,e+<span class="code-string">" &gt;"</span>):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}},zi=ji(<span class="code-string">"CodecUtils"</span>),Xi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.attributes||{};<span class="code-keyword">return</span> e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO&amp;&amp;i.AUDIO&amp;&amp;e.mediaGroups.AUDIO[i.AUDIO]},Qi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(Fi(<span class="code-string">""</span>+n+r))})),<span class="code-built_in">Object</span>.keys(t).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(t[e].length&gt;<span class="code-number">1</span>)<span class="code-keyword">return</span> zi(<span class="code-string">"multiple "</span>+e+<span class="code-string">" codecs found as attributes: "</span>+t[e].join(<span class="code-string">", "</span>)+<span class="code-string">". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."</span>),<span class="code-keyword">void</span>(t[e]=<span class="code-literal">null</span>);t[e]=t[e][<span class="code-number">0</span>]})),t},Yi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>;<span class="code-keyword">return</span> e.audio&amp;&amp;t++,e.video&amp;&amp;t++,t},Ki=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.attributes||{},n=Qi(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes||{};<span class="code-keyword">if</span>(t.CODECS)<span class="code-keyword">return</span> Ni(t.CODECS)}(t)||[]);<span class="code-keyword">if</span>(Xi(e,t)&amp;&amp;!n.audio&amp;&amp;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!Xi(e,t))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> n)<span class="code-keyword">if</span>(!n[r].uri&amp;&amp;!n[r].playlists)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}(e,t)){<span class="code-keyword">var</span> r=Qi(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e.mediaGroups.AUDIO||!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=e.mediaGroups.AUDIO[t];<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(r.default&amp;&amp;r.playlists)<span class="code-keyword">return</span> Ni(r.playlists[<span class="code-number">0</span>].attributes.CODECS)}<span class="code-keyword">return</span> <span class="code-literal">null</span>}(e,i.AUDIO)||[]);r.audio&amp;&amp;(n.audio=r.audio)}<span class="code-keyword">return</span> n},$i=ji(<span class="code-string">"PlaylistSelector"</span>),Ji=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;e.playlist){<span class="code-keyword">var</span> t=e.playlist;<span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.stringify({<span class="code-attr">id</span>:t.id,<span class="code-attr">bandwidth</span>:e.bandwidth,<span class="code-attr">width</span>:e.width,<span class="code-attr">height</span>:e.height,<span class="code-attr">codecs</span>:t.attributes&amp;&amp;t.attributes.CODECS||<span class="code-string">""</span>})}},Zi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span><span class="code-string">""</span>;<span class="code-keyword">var</span> i=o.default.getComputedStyle(e);<span class="code-keyword">return</span> i?i[t]:<span class="code-string">""</span>},en=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.slice();e.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=t(e,n);<span class="code-keyword">return</span> <span class="code-number">0</span>===r?i.indexOf(e)-i.indexOf(n):r}))},tn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||o.default.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n||o.default.Number.MAX_VALUE)},nn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> a={<span class="code-attr">bandwidth</span>:t,<span class="code-attr">width</span>:i,<span class="code-attr">height</span>:n,<span class="code-attr">limitRenditionByPlayerDimensions</span>:r},s=e.playlists.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height;<span class="code-keyword">return</span>{<span class="code-attr">bandwidth</span>:e.attributes.BANDWIDTH||o.default.Number.MAX_VALUE,<span class="code-attr">width</span>:t,<span class="code-attr">height</span>:i,<span class="code-attr">playlist</span>:e}}));en(s,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.bandwidth-t.bandwidth}));<span class="code-keyword">var</span> u=(s=s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Z.isIncompatible(e.playlist)}))).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Z.isEnabled(e.playlist)}));u.length||(u=s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Z.isDisabled(e.playlist)})));<span class="code-keyword">var</span> d=u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth*Ut.BANDWIDTH_VARIANCE&lt;t})),l=d[d.length<span class="code-number">-1</span>],h=d.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===l.bandwidth}))[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!<span class="code-number">1</span>===r){<span class="code-keyword">var</span> c=h||u[<span class="code-number">0</span>]||s[<span class="code-number">0</span>];<span class="code-keyword">if</span>(c&amp;&amp;c.playlist){<span class="code-keyword">var</span> f=<span class="code-string">"sortedPlaylistReps"</span>;<span class="code-keyword">return</span> h&amp;&amp;(f=<span class="code-string">"bandwidthBestRep"</span>),u[<span class="code-number">0</span>]&amp;&amp;(f=<span class="code-string">"enabledPlaylistReps"</span>),$i(<span class="code-string">"choosing "</span>+Ji(c)+<span class="code-string">" using "</span>+f+<span class="code-string">" with options"</span>,a),c.playlist}<span class="code-keyword">return</span> $i(<span class="code-string">"could not choose a playlist with options"</span>,a),<span class="code-literal">null</span>}<span class="code-keyword">var</span> m=d.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&amp;&amp;e.height}));en(m,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.width-t.width}));<span class="code-keyword">var</span> p=m.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===i&amp;&amp;e.height===n}));l=p[p.length<span class="code-number">-1</span>];<span class="code-keyword">var</span> g,y,v,_=p.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===l.bandwidth}))[<span class="code-number">0</span>];_||(y=(g=m.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&gt;i||e.height&gt;n}))).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===g[<span class="code-number">0</span>].width&amp;&amp;e.height===g[<span class="code-number">0</span>].height})),l=y[y.length<span class="code-number">-1</span>],v=y.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===l.bandwidth}))[<span class="code-number">0</span>]);<span class="code-keyword">var</span> b=v||_||h||u[<span class="code-number">0</span>]||s[<span class="code-number">0</span>];<span class="code-keyword">if</span>(b&amp;&amp;b.playlist){<span class="code-keyword">var</span> T=<span class="code-string">"sortedPlaylistReps"</span>;<span class="code-keyword">return</span> v?T=<span class="code-string">"resolutionPlusOneRep"</span>:_?T=<span class="code-string">"resolutionBestRep"</span>:h?T=<span class="code-string">"bandwidthBestRep"</span>:u[<span class="code-number">0</span>]&amp;&amp;(T=<span class="code-string">"enabledPlaylistReps"</span>),$i(<span class="code-string">"choosing "</span>+Ji(b)+<span class="code-string">" using "</span>+T+<span class="code-string">" with options"</span>,a),b.playlist}<span class="code-keyword">return</span> $i(<span class="code-string">"could not choose a playlist with options"</span>,a),<span class="code-literal">null</span>}},rn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.useDevicePixelRatio&amp;&amp;o.default.devicePixelRatio||<span class="code-number">1</span>;<span class="code-keyword">return</span> nn(<span class="code-keyword">this</span>.playlists.master,<span class="code-keyword">this</span>.systemBandwidth,<span class="code-built_in">parseInt</span>(Zi(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"width"</span>),<span class="code-number">10</span>)*e,<span class="code-built_in">parseInt</span>(Zi(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"height"</span>),<span class="code-number">10</span>)*e,<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions)},an=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r;<span class="code-keyword">if</span>(i&amp;&amp;i.cues)<span class="code-keyword">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&gt;=e&amp;&amp;r.endTime&lt;=t&amp;&amp;i.removeCue(r)},sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-built_in">isFinite</span>(e)},on=<span class="code-number">1</span>/<span class="code-number">60</span>,un=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"TimingInfo"</span>},dn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered;<span class="code-keyword">return</span> e.overrideCheck||t!==i?t&lt;i?n:r.length?r.end(r.length<span class="code-number">-1</span>):n:<span class="code-literal">null</span>},ln=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;<span class="code-keyword">if</span>(i===n)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-string">"audio"</span>===r){<span class="code-keyword">var</span> s=t.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"main"</span>});<span class="code-keyword">return</span>!s||s.to!==n}<span class="code-keyword">if</span>(<span class="code-string">"main"</span>===r&amp;&amp;a){<span class="code-keyword">var</span> o=t.pendingTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>});<span class="code-keyword">return</span>!o||o.to!==n}<span class="code-keyword">return</span>!<span class="code-number">1</span>},hn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segmentDuration,i=e.maxDuration;<span class="code-keyword">return</span>!!t&amp;&amp;<span class="code-built_in">Math</span>.round(t)&gt;i+R},cn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">if</span>(n=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Initialization settings are required"</span>);<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t.currentTime)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No currentTime getter specified"</span>);<span class="code-keyword">if</span>(!t.mediaSource)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No MediaSource specified"</span>);<span class="code-keyword">return</span> n.bandwidth=t.bandwidth,n.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>},n.roundTrip=<span class="code-literal">NaN</span>,n.resetStats_(),n.mediaIndex=<span class="code-literal">null</span>,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.startingMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_=<span class="code-string">"INIT"</span>,n.handlePartialData_=t.handlePartialData,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!<span class="code-number">0</span>,n.parse708captions_=t.parse708captions,n.checkBufferTimeout_=<span class="code-literal">null</span>,n.error_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.currentTimeline_=<span class="code-number">-1</span>,n.pendingSegment_=<span class="code-literal">null</span>,n.xhrOptions_=<span class="code-literal">null</span>,n.pendingSegments_=[],n.audioDisabled_=!<span class="code-number">1</span>,n.isPendingTimestampOffset_=!<span class="code-number">1</span>,n.gopBuffer_=[],n.timeMapping_=<span class="code-number">0</span>,n.safeAppend_=u.default.browser.IE_VERSION&gt;=<span class="code-number">11</span>,n.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},n.playlistOfLastInitSegment_={<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-attr">video</span>:<span class="code-literal">null</span>},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={<span class="code-attr">id3</span>:[],<span class="code-attr">caption</span>:[]},n.activeInitSegmentId_=<span class="code-literal">null</span>,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>,<span class="code-attr">time</span>:<span class="code-number">0</span>},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.trigger(<span class="code-string">"syncinfoupdate"</span>)},n.syncController_.on(<span class="code-string">"syncinfoupdate"</span>,n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener(<span class="code-string">"sourceopen"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.isEndOfStream_()||(n.ended_=!<span class="code-number">1</span>)})),n.fetchAtBuffer_=!<span class="code-number">1</span>,n.logger_=ji(<span class="code-string">"SegmentLoader["</span>+n.loaderType_+<span class="code-string">"]"</span>),<span class="code-built_in">Object</span>.defineProperty(d(n),<span class="code-string">"state"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state_},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e!==<span class="code-keyword">this</span>.state_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-keyword">this</span>.state_+<span class="code-string">" -&gt; "</span>+e),<span class="code-keyword">this</span>.state_=e,<span class="code-keyword">this</span>.trigger(<span class="code-string">"statechange"</span>))}}),n.sourceUpdater_.on(<span class="code-string">"ready"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class="code-string">"main"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class="code-string">"pendingtimelinechange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class="code-string">"audio"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class="code-string">"timelinechange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToLoad_()&amp;&amp;n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),n}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.createTransmuxer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> xi;<span class="code-keyword">return</span> e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"init"</span>,<span class="code-attr">options</span>:{<span class="code-attr">parse708captions</span>:<span class="code-keyword">this</span>.parse708captions_,<span class="code-attr">remux</span>:!<span class="code-number">1</span>,<span class="code-attr">alignGopsAtEnd</span>:<span class="code-keyword">this</span>.safeAppend_,<span class="code-attr">keepOriginalTimestamps</span>:!<span class="code-number">0</span>,<span class="code-attr">handlePartialData</span>:<span class="code-keyword">this</span>.handlePartialData_}}),e},i.resetStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaBytesTransferred=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequests=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsAborted=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsTimedout=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsErrored=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaTransferDuration=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaSecondsLoaded=<span class="code-number">0</span>},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.state=<span class="code-string">"DISPOSED"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;(<span class="code-keyword">this</span>.transmuxer_.terminate(),Tt=<span class="code-literal">null</span>,Dt.length=<span class="code-number">0</span>),<span class="code-keyword">this</span>.resetStats_(),<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.syncController_&amp;&amp;<span class="code-keyword">this</span>.triggerSyncInfoUpdate_&amp;&amp;<span class="code-keyword">this</span>.syncController_.off(<span class="code-string">"syncinfoupdate"</span>,<span class="code-keyword">this</span>.triggerSyncInfoUpdate_),<span class="code-keyword">this</span>.off()},i.setAudio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.audioDisabled_=!e,e?<span class="code-keyword">this</span>.appendInitSegment_.audio=!<span class="code-number">0</span>:<span class="code-keyword">this</span>.sourceUpdater_.removeAudio(<span class="code-number">0</span>,<span class="code-keyword">this</span>.duration_())},i.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"WAITING"</span>===<span class="code-keyword">this</span>.state?(<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_()):<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;(<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>)},i.abort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.pendingSegment_.abortRequests&amp;&amp;<span class="code-keyword">this</span>.pendingSegment_.abortRequests(),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.callQueue_=[],<span class="code-keyword">this</span>.loadQueue_=[],<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[],<span class="code-keyword">this</span>.timelineChangeController_.clearPendingTimelineChange(<span class="code-keyword">this</span>.loaderType_)},i.checkForAbort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"APPENDING"</span>!==<span class="code-keyword">this</span>.state||<span class="code-keyword">this</span>.pendingSegment_?!<span class="code-keyword">this</span>.pendingSegment_||<span class="code-keyword">this</span>.pendingSegment_.requestId!==e:(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,!<span class="code-number">0</span>)},i.error=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"error occurred:"</span>,e),<span class="code-keyword">this</span>.error_=e),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.error_},i.endOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxer_&amp;&amp;Ft(<span class="code-keyword">this</span>.transmuxer_),<span class="code-keyword">this</span>.gopBuffer_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"ended"</span>)},i.buffered_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_||!<span class="code-keyword">this</span>.startingMediaInfo_)<span class="code-keyword">return</span> u.default.createTimeRanges();<span class="code-keyword">if</span>(<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;<span class="code-keyword">if</span>(i&amp;&amp;t&amp;&amp;!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;!n)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.buffered();<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.videoBuffered()}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.audioBuffered()},i.initSegmentForMap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=ce(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:e.bytes,<span class="code-attr">tracks</span>:e.tracks,<span class="code-attr">timescales</span>:e.timescales}),n||e},i.segmentKey=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=fe(e),n=<span class="code-keyword">this</span>.keyCache_[i];<span class="code-keyword">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.keyCache_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">bytes</span>:e.bytes});<span class="code-keyword">var</span> r={<span class="code-attr">resolvedUri</span>:(n||e).resolvedUri};<span class="code-keyword">return</span> n&amp;&amp;(r.bytes=n.bytes),r},i.couldBeginLoading_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;!<span class="code-keyword">this</span>.paused()},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.monitorBuffer_(),<span class="code-keyword">this</span>.playlist_){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.syncController_.setDateTimeMapping(<span class="code-keyword">this</span>.playlist_),<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.init_();!<span class="code-keyword">this</span>.couldBeginLoading_()||<span class="code-string">"READY"</span>!==<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-string">"INIT"</span>!==<span class="code-keyword">this</span>.state||(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>)}},i.init_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()},i.playlist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),e){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.playlist_,n=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.playlist_=e,<span class="code-keyword">this</span>.xhrOptions_=t,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(e.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence,<span class="code-attr">time</span>:<span class="code-number">0</span>});<span class="code-keyword">var</span> r=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist update ["</span>+r+<span class="code-string">" =&gt; "</span>+(e.id||e.uri)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.init_();<span class="code-keyword">if</span>(!i||i.uri!==e.uri)<span class="code-keyword">return</span>(<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex||<span class="code-keyword">this</span>.handlePartialData_)&amp;&amp;<span class="code-keyword">this</span>.resyncLoader(),<span class="code-keyword">this</span>.currentMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistupdate"</span>);<span class="code-keyword">var</span> a=e.mediaSequence-i.mediaSequence;<span class="code-keyword">this</span>.logger_(<span class="code-string">"live window shift ["</span>+a+<span class="code-string">"]"</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;(<span class="code-keyword">this</span>.mediaIndex-=a),n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&gt;=<span class="code-number">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex])),<span class="code-keyword">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;(o.default.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=<span class="code-literal">null</span>)},i.paused=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===<span class="code-keyword">this</span>.checkBufferTimeout_},i.resetEverything=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},<span class="code-keyword">this</span>.resetLoader(),<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,<span class="code-number">1</span>/<span class="code-number">0</span>,e),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearAllMp4Captions"</span>})},i.resetLoader=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.resyncLoader()},i.resyncLoader=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer_&amp;&amp;Ft(<span class="code-keyword">this</span>.transmuxer_),<span class="code-keyword">this</span>.mediaIndex=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.syncPoint_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.callQueue_=[],<span class="code-keyword">this</span>.loadQueue_=[],<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[],<span class="code-keyword">this</span>.abort(),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearParsedMp4Captions"</span>})},i.remove=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}),t===<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;(t=<span class="code-keyword">this</span>.duration_()),<span class="code-keyword">this</span>.sourceUpdater_&amp;&amp;<span class="code-keyword">this</span>.currentMediaInfo_){<span class="code-keyword">var</span> n=<span class="code-number">1</span>,r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>==--n&amp;&amp;i()};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> <span class="code-keyword">this</span>.audioDisabled_||(n++,<span class="code-keyword">this</span>.sourceUpdater_.removeAudio(e,t,r)),<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;<span class="code-keyword">this</span>.currentMediaInfo_&amp;&amp;<span class="code-keyword">this</span>.currentMediaInfo_.hasVideo&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.ceil((t-n)*Jt),a=<span class="code-built_in">Math</span>.ceil((i-n)*Jt),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class="code-keyword">if</span>(<span class="code-number">-1</span>===o)<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=o+<span class="code-number">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class="code-keyword">return</span> u=<span class="code-built_in">Math</span>.max(u,<span class="code-number">0</span>),s.splice(u,o-u+<span class="code-number">1</span>),s}(<span class="code-keyword">this</span>.gopBuffer_,e,t,<span class="code-keyword">this</span>.timeMapping_),n++,<span class="code-keyword">this</span>.sourceUpdater_.removeVideo(e,t,r)),<span class="code-keyword">this</span>.inbandTextTracks_)an(e,t,<span class="code-keyword">this</span>.inbandTextTracks_[a]);an(e,t,<span class="code-keyword">this</span>.segmentMetadataTrack_),r()}},i.monitorBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=o.default.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">1</span>)},i.monitorBufferTick_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"READY"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.fillBuffer_(),<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;o.default.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=o.default.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">500</span>)},i.fillBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_.updating()){<span class="code-keyword">this</span>.syncPoint_||(<span class="code-keyword">this</span>.syncPoint_=<span class="code-keyword">this</span>.syncController_.getSyncPoint(<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.duration_(),<span class="code-keyword">this</span>.currentTimeline_,<span class="code-keyword">this</span>.currentTime_()));<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.buffered_(),t=<span class="code-keyword">this</span>.checkBuffer_(e,<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.mediaIndex,<span class="code-keyword">this</span>.hasPlayed_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.syncPoint_);t&amp;&amp;(t.timestampOffset=dn({<span class="code-attr">segmentTimeline</span>:t.timeline,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">startOfSegment</span>:t.startOfSegment,<span class="code-attr">buffered</span>:e,<span class="code-attr">overrideCheck</span>:<span class="code-keyword">this</span>.isPendingTimestampOffset_}),<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">1</span>,<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.timestampOffset&amp;&amp;<span class="code-keyword">this</span>.timelineChangeController_.pendingTimelineChange({<span class="code-attr">type</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:t.timeline}),<span class="code-keyword">this</span>.loadSegment_(t))}},i.isEndOfStream_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.mediaIndex),<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.playlist_),!t||!<span class="code-keyword">this</span>.mediaSource_)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=e+<span class="code-number">1</span>===t.segments.length;<span class="code-keyword">return</span> t.endList&amp;&amp;<span class="code-string">"open"</span>===<span class="code-keyword">this</span>.mediaSource_.readyState&amp;&amp;i},i.checkBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s=<span class="code-number">0</span>;e.length&amp;&amp;(s=e.end(e.length<span class="code-number">-1</span>));<span class="code-keyword">var</span> o=<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,s-r);<span class="code-keyword">if</span>(!t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(o&gt;=<span class="code-keyword">this</span>.goalBufferLength_())<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(!n&amp;&amp;o&gt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> u,d=<span class="code-literal">null</span>,l=!<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-literal">null</span>===a)d=<span class="code-keyword">this</span>.getSyncSegmentCandidate_(t),l=!<span class="code-number">0</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-literal">null</span>!==i){<span class="code-keyword">var</span> h=t.segments[i];u=h&amp;&amp;h.end?h.end:s,d=i+<span class="code-number">1</span>}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.fetchAtBuffer_){<span class="code-keyword">var</span> c=Z.getMediaInfoForTime(t,s,a.segmentIndex,a.time);d=c.mediaIndex,u=c.startTime}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> f=Z.getMediaInfoForTime(t,r,a.segmentIndex,a.time);d=f.mediaIndex,u=f.startTime}<span class="code-keyword">var</span> m=<span class="code-keyword">this</span>.generateSegmentInfo_(t,d,u,l);<span class="code-keyword">return</span>!m||<span class="code-keyword">this</span>.mediaSource_&amp;&amp;<span class="code-keyword">this</span>.playlist_&amp;&amp;m.mediaIndex===<span class="code-keyword">this</span>.playlist_.segments.length<span class="code-number">-1</span>&amp;&amp;<span class="code-string">"ended"</span>===<span class="code-keyword">this</span>.mediaSource_.readyState&amp;&amp;!<span class="code-keyword">this</span>.seeking_()?<span class="code-keyword">void</span> <span class="code-number">0</span>:(<span class="code-keyword">this</span>.logger_(<span class="code-string">"checkBuffer_ returning "</span>+m.uri,{<span class="code-attr">segmentInfo</span>:m,<span class="code-attr">playlist</span>:t,<span class="code-attr">currentMediaIndex</span>:i,<span class="code-attr">nextMediaIndex</span>:d,<span class="code-attr">startOfSegment</span>:u,<span class="code-attr">isSyncRequest</span>:l}),m)},i.getSyncSegmentCandidate_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-number">-1</span>===<span class="code-keyword">this</span>.currentTimeline_)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=e.segments.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">timeline</span>:e.timeline,<span class="code-attr">segmentIndex</span>:t}})).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.timeline===t.currentTimeline_}));<span class="code-keyword">return</span> i.length?i[<span class="code-built_in">Math</span>.min(i.length<span class="code-number">-1</span>,<span class="code-number">1</span>)].segmentIndex:<span class="code-built_in">Math</span>.max(e.segments.length<span class="code-number">-1</span>,<span class="code-number">0</span>)},i.generateSegmentInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(t&lt;<span class="code-number">0</span>||t&gt;=e.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> r,a,s=e.segments[t],o=<span class="code-keyword">this</span>.sourceUpdater_.audioBuffered(),u=<span class="code-keyword">this</span>.sourceUpdater_.videoBuffered();<span class="code-keyword">return</span> o.length&amp;&amp;(r=o.end(o.length<span class="code-number">-1</span>)-<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset()),u.length&amp;&amp;(a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>==t||!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">var</span> n,r=<span class="code-built_in">Math</span>.ceil((t-i+<span class="code-number">3</span>)*Jt);<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;e.length&amp;&amp;!(e[n].pts&gt;r);n++);<span class="code-keyword">return</span> e.slice(n)}(<span class="code-keyword">this</span>.gopBuffer_,<span class="code-keyword">this</span>.currentTime_()-<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),<span class="code-keyword">this</span>.timeMapping_)),{<span class="code-attr">requestId</span>:<span class="code-string">"segment-loader-"</span>+<span class="code-built_in">Math</span>.random(),<span class="code-attr">uri</span>:s.resolvedUri,<span class="code-attr">mediaIndex</span>:t,<span class="code-attr">isSyncRequest</span>:n,<span class="code-attr">startOfSegment</span>:i,<span class="code-attr">playlist</span>:e,<span class="code-attr">bytes</span>:<span class="code-literal">null</span>,<span class="code-attr">encryptedBytes</span>:<span class="code-literal">null</span>,<span class="code-attr">timestampOffset</span>:<span class="code-literal">null</span>,<span class="code-attr">timeline</span>:s.timeline,<span class="code-attr">duration</span>:s.duration,<span class="code-attr">segment</span>:s,<span class="code-attr">byteLength</span>:<span class="code-number">0</span>,<span class="code-attr">transmuxer</span>:<span class="code-keyword">this</span>.transmuxer_,<span class="code-attr">audioAppendStart</span>:r,<span class="code-attr">gopsToAlignWith</span>:a}},i.earlyAbortWhenNeeded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.vhs_.tech_.paused()&amp;&amp;<span class="code-keyword">this</span>.xhrOptions_.timeout&amp;&amp;<span class="code-keyword">this</span>.playlist_.attributes.BANDWIDTH&amp;&amp;!(<span class="code-built_in">Date</span>.now()-(e.firstBytesReceivedAt||<span class="code-built_in">Date</span>.now())&lt;<span class="code-number">1e3</span>)){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.currentTime_(),i=e.bandwidth,n=<span class="code-keyword">this</span>.pendingSegment_.duration,r=Z.estimateSegmentRequestTime(n,i,<span class="code-keyword">this</span>.playlist_,e.bytesReceived),a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">1</span>),((e.length?e.end(e.length<span class="code-number">-1</span>):<span class="code-number">0</span>)-t)/i}(<span class="code-keyword">this</span>.buffered_(),t,<span class="code-keyword">this</span>.vhs_.tech_.playbackRate())<span class="code-number">-1</span>;<span class="code-keyword">if</span>(!(r&lt;=a)){<span class="code-keyword">var</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Z.isIncompatible(e)})),d=u.filter(Z.isEnabled);d.length||(d=u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Z.isDisabled(e)})));<span class="code-keyword">var</span> l=d.filter(Z.hasAttribute.bind(<span class="code-literal">null</span>,<span class="code-string">"BANDWIDTH"</span>)).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> u=o.getSyncPoint(e,n,s,t)?<span class="code-number">1</span>:<span class="code-number">2</span>;<span class="code-keyword">return</span>{<span class="code-attr">playlist</span>:e,<span class="code-attr">rebufferingImpact</span>:Z.estimateSegmentRequestTime(r,i,e)*u-a}})),h=l.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact&lt;=<span class="code-number">0</span>}));<span class="code-keyword">return</span> en(h,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> tn(t.playlist,e.playlist)})),h.length?h[<span class="code-number">0</span>]:(en(l,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact-t.rebufferingImpact})),l[<span class="code-number">0</span>]||<span class="code-literal">null</span>)}({<span class="code-attr">master</span>:<span class="code-keyword">this</span>.vhs_.playlists.master,<span class="code-attr">currentTime</span>:t,<span class="code-attr">bandwidth</span>:i,<span class="code-attr">duration</span>:<span class="code-keyword">this</span>.duration_(),<span class="code-attr">segmentDuration</span>:n,<span class="code-attr">timeUntilRebuffer</span>:a,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">syncController</span>:<span class="code-keyword">this</span>.syncController_});<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=r-a-s.rebufferingImpact,u=<span class="code-number">.5</span>;a&lt;=R&amp;&amp;(u=<span class="code-number">1</span>),!s.playlist||s.playlist.uri===<span class="code-keyword">this</span>.playlist_.uri||o&lt;u||(<span class="code-keyword">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*Ut.BANDWIDTH_VARIANCE+<span class="code-number">1</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"earlyabort"</span>))}}}},i.handleAbort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>},i.handleProgress_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(t.stats),<span class="code-keyword">this</span>.checkForAbort_(t.requestId)||<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>)},i.handleTrackInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||<span class="code-keyword">this</span>.checkForIllegalMediaSwitch(t)||(t=t||{},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e===t)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=<span class="code-built_in">Object</span>.keys(e).sort(),n=<span class="code-built_in">Object</span>.keys(t).sort();<span class="code-keyword">if</span>(i.length!==n.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;i.length;r++){<span class="code-keyword">var</span> a=i[r];<span class="code-keyword">if</span>(a!==n[r])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e[a]!==t[a])<span class="code-keyword">return</span>!<span class="code-number">1</span>}<span class="code-keyword">return</span>!<span class="code-number">0</span>}(<span class="code-keyword">this</span>.currentMediaInfo_,t)||(<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},<span class="code-keyword">this</span>.startingMediaInfo_=t,<span class="code-keyword">this</span>.currentMediaInfo_=t,<span class="code-keyword">this</span>.logger_(<span class="code-string">"trackinfo update"</span>,t),<span class="code-keyword">this</span>.trigger(<span class="code-string">"trackinfo"</span>)),<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||(<span class="code-keyword">this</span>.pendingSegment_.trackInfo=t,<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class="code-keyword">this</span>.processCallQueue_()))},i.handleTimingInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId)){<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.pendingSegment_,a=un(t);r[a]=r[a]||{},r[a][i]=n,<span class="code-keyword">this</span>.logger_(<span class="code-string">"timinginfo: "</span>+t+<span class="code-string">" - "</span>+i+<span class="code-string">" - "</span>+n),<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class="code-keyword">this</span>.processCallQueue_()}},i.handleCaptions_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t.length)<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_.hasAppendedData_){<span class="code-keyword">var</span> n=<span class="code-literal">null</span>===<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()?<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset():<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r[e.stream]=r[e.stream]||{<span class="code-attr">startTime</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">captions</span>:[],<span class="code-attr">endTime</span>:<span class="code-number">0</span>};<span class="code-keyword">var</span> t=r[e.stream];t.startTime=<span class="code-built_in">Math</span>.min(t.startTime,e.startTime+n),t.endTime=<span class="code-built_in">Math</span>.max(t.endTime,e.endTime+n),t.captions.push(e)})),<span class="code-built_in">Object</span>.keys(r).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=r[e],a=t.startTime,s=t.endTime,u=t.captions,d=i.inbandTextTracks_;i.logger_(<span class="code-string">"adding cues from "</span>+a+<span class="code-string">" -&gt; "</span>+s+<span class="code-string">" for "</span>+e),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e[i]){t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-608"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-608"</span>});<span class="code-keyword">var</span> n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">id</span>:i,<span class="code-attr">label</span>:i},!<span class="code-number">1</span>).track}}(d,i.vhs_.tech_,e),an(a,s,d[e]),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class="code-keyword">if</span>(i){<span class="code-keyword">var</span> r=o.default.WebKitDataCue||o.default.VTTCue;i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.stream;t[i].addCue(<span class="code-keyword">new</span> r(e.startTime+n,e.endTime+n,e.text))}))}}({<span class="code-attr">captionArray</span>:u,<span class="code-attr">inbandTextTracks</span>:d,<span class="code-attr">timestampOffset</span>:n})})),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearParsedMp4Captions"</span>})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.metadataQueue_.caption.push(<span class="code-keyword">this</span>.handleCaptions_.bind(<span class="code-keyword">this</span>,e,t));<span class="code-keyword">else</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"SegmentLoader received no captions from a caption event"</span>)},i.handleId3_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_.hasAppendedData_){<span class="code-keyword">var</span> n=<span class="code-literal">null</span>===<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()?<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset():<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset();!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"Timed Metadata"</span>},!<span class="code-number">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(<span class="code-keyword">this</span>.inbandTextTracks_,i,<span class="code-keyword">this</span>.vhs_.tech_),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,r=e.videoDuration;<span class="code-keyword">if</span>(i){<span class="code-keyword">var</span> a=o.default.WebKitDataCue||o.default.VTTCue,s=t.metadataTrack_;<span class="code-keyword">if</span>(s&amp;&amp;(i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.cueTime+n;!(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t||o.default.isNaN(t)||t&lt;<span class="code-number">0</span>)&amp;&amp;t&lt;<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;e.frames.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> a(t,t,e.value||e.url||e.data||<span class="code-string">""</span>);i.frame=e,i.value=e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperties(e.frame,{<span class="code-attr">id</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"cue.frame.id is deprecated. Use cue.value.key instead."</span>),e.value.key}},<span class="code-attr">value</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"cue.frame.value is deprecated. Use cue.value.data instead."</span>),e.value.data}},<span class="code-attr">privateData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"cue.frame.privateData is deprecated. Use cue.value.data instead."</span>),e.value.data}}})}(i),s.addCue(i)}))})),s.cues&amp;&amp;s.cues.length)){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d=s.cues,l=[],h=<span class="code-number">0</span>;h&lt;d.length;h++)d[h]&amp;&amp;l.push(d[h]);<span class="code-keyword">var</span> c=l.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t.startTime]||[];<span class="code-keyword">return</span> i.push(t),e[t.startTime]=i,e}),{}),f=<span class="code-built_in">Object</span>.keys(c).sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Number</span>(e)-<span class="code-built_in">Number</span>(t)}));f.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=c[e],n=<span class="code-built_in">Number</span>(f[t+<span class="code-number">1</span>])||r;i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.endTime=n}))}))}}}({<span class="code-attr">inbandTextTracks</span>:<span class="code-keyword">this</span>.inbandTextTracks_,<span class="code-attr">metadataArray</span>:t,<span class="code-attr">timestampOffset</span>:n,<span class="code-attr">videoDuration</span>:<span class="code-keyword">this</span>.duration_()})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.metadataQueue_.id3.push(<span class="code-keyword">this</span>.handleId3_.bind(<span class="code-keyword">this</span>,e,t,i))},i.processMetadataQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.metadataQueue_.id3.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()})),<span class="code-keyword">this</span>.metadataQueue_.caption.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()})),<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[]},i.processCallQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.callQueue_;<span class="code-keyword">this</span>.callQueue_=[],e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()}))},i.processLoadQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.loadQueue_;<span class="code-keyword">this</span>.loadQueue_=[],e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()}))},i.hasEnoughInfoToLoad_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"audio"</span>!==<span class="code-keyword">this</span>.loaderType_)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">return</span>!(!e||<span class="code-keyword">this</span>.currentMediaInfo_&amp;&amp;ln({<span class="code-attr">timelineChangeController</span>:<span class="code-keyword">this</span>.timelineChangeController_,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">segmentTimeline</span>:e.timeline,<span class="code-attr">loaderType</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">audioDisabled</span>:<span class="code-keyword">this</span>.audioDisabled_}))},i.hasEnoughInfoToAppend_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_.ready())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">if</span>(!e||!e.trackInfo)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.handlePartialData_){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;<span class="code-keyword">if</span>(n&amp;&amp;!e.videoTimingInfo)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(i&amp;&amp;!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;!r&amp;&amp;!e.audioTimingInfo)<span class="code-keyword">return</span>!<span class="code-number">1</span>}<span class="code-keyword">return</span>!ln({<span class="code-attr">timelineChangeController</span>:<span class="code-keyword">this</span>.timelineChangeController_,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">segmentTimeline</span>:e.timeline,<span class="code-attr">loaderType</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">audioDisabled</span>:<span class="code-keyword">this</span>.audioDisabled_})},i.handleData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.callQueue_.length&amp;&amp;<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.setTimeMapping_(i.timeline),<span class="code-keyword">this</span>.updateMediaSecondsLoaded_(i.segment),<span class="code-string">"closed"</span>!==<span class="code-keyword">this</span>.mediaSource_.readyState){<span class="code-keyword">if</span>(e.map&amp;&amp;(e.map=<span class="code-keyword">this</span>.initSegmentForMap(e.map,!<span class="code-number">0</span>),i.segment.map=e.map),e.key&amp;&amp;<span class="code-keyword">this</span>.segmentKey(e.key,!<span class="code-number">0</span>),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)<span class="code-keyword">this</span>.trigger(<span class="code-string">"fmp4"</span>),i.timingInfo.start=i[un(t.type)].start;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;<span class="code-keyword">this</span>.currentMediaInfo_.hasVideo;r&amp;&amp;(n=<span class="code-keyword">this</span>.handlePartialData_?t.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=<span class="code-keyword">this</span>.trueSegmentStart_({<span class="code-attr">currentStart</span>:i.timingInfo.start,<span class="code-attr">playlist</span>:i.playlist,<span class="code-attr">mediaIndex</span>:i.mediaIndex,<span class="code-attr">currentVideoTimestampOffset</span>:<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),<span class="code-attr">useVideoTimingInfo</span>:r,<span class="code-attr">firstVideoFrameTimeForData</span>:n,<span class="code-attr">videoTimingInfo</span>:i.videoTimingInfo,<span class="code-attr">audioTimingInfo</span>:i.audioTimingInfo})}<span class="code-keyword">this</span>.updateAppendInitSegmentStatus(i,t.type),<span class="code-keyword">this</span>.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.processMetadataQueue_(),<span class="code-keyword">this</span>.appendData_(i,t)}}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.callQueue_.push(<span class="code-keyword">this</span>.handleData_.bind(<span class="code-keyword">this</span>,e,t))},i.updateAppendInitSegmentStatus=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"main"</span>!==<span class="code-keyword">this</span>.loaderType_||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e.timestampOffset||e.changedTimestampOffset||(<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>}),<span class="code-keyword">this</span>.playlistOfLastInitSegment_[t]!==e.playlist&amp;&amp;(<span class="code-keyword">this</span>.appendInitSegment_[t]=!<span class="code-number">0</span>)},i.getInitSegmentAndUpdateState_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.initSegment,n=e.map,r=e.playlist;<span class="code-keyword">if</span>(n){<span class="code-keyword">var</span> a=ce(n);<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.activeInitSegmentId_===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;i=<span class="code-keyword">this</span>.initSegmentForMap(n,!<span class="code-number">0</span>).bytes,<span class="code-keyword">this</span>.activeInitSegmentId_=a}<span class="code-keyword">return</span> i&amp;&amp;<span class="code-keyword">this</span>.appendInitSegment_[t]?(<span class="code-keyword">this</span>.playlistOfLastInitSegment_[t]=r,<span class="code-keyword">this</span>.appendInitSegment_[t]=!!n,<span class="code-keyword">this</span>.activeInitSegmentId_=<span class="code-literal">null</span>,i):<span class="code-literal">null</span>},i.appendToSourceBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.segmentInfo,n=e.type,r=e.initSegment,a=e.data,s=[a],o=a.byteLength;r&amp;&amp;(s.unshift(r),o+=r.byteLength);<span class="code-keyword">var</span> u,d,l,h=(l=<span class="code-number">0</span>,(u={<span class="code-attr">bytes</span>:o,<span class="code-attr">segments</span>:s}).bytes&amp;&amp;(d=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.bytes),u.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{d.set(e,l),l+=e.byteLength}))),d);<span class="code-keyword">this</span>.sourceUpdater_.appendBuffer({<span class="code-attr">segmentInfo</span>:i,<span class="code-attr">type</span>:n,<span class="code-attr">bytes</span>:h},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e&amp;&amp;(t.error(n+<span class="code-string">" append of "</span>+h.length+<span class="code-string">"b failed for segment #"</span>+i.mediaIndex+<span class="code-string">" in playlist "</span>+i.playlist.id),t.trigger(<span class="code-string">"appenderror"</span>))}))},i.handleSegmentTimingInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;t===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.pendingSegment_.segment,r=e+<span class="code-string">"TimingInfo"</span>;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||<span class="code-number">0</span>,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.type,n=t.data;<span class="code-keyword">if</span>(n&amp;&amp;n.byteLength&amp;&amp;(<span class="code-string">"audio"</span>!==i||!<span class="code-keyword">this</span>.audioDisabled_)){<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.getInitSegmentAndUpdateState_({<span class="code-attr">type</span>:i,<span class="code-attr">initSegment</span>:t.initSegment,<span class="code-attr">playlist</span>:e.playlist,<span class="code-attr">map</span>:e.isFmp4?e.segment.map:<span class="code-literal">null</span>});<span class="code-keyword">this</span>.appendToSourceBuffer_({<span class="code-attr">segmentInfo</span>:e,<span class="code-attr">type</span>:i,<span class="code-attr">initSegment</span>:r,<span class="code-attr">data</span>:n})}},i.loadSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING"</span>,<span class="code-keyword">this</span>.pendingSegment_=e,<span class="code-keyword">this</span>.trimBackBuffer_(e),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timestampOffset&amp;&amp;<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearAllMp4Captions"</span>}),<span class="code-keyword">this</span>.hasEnoughInfoToLoad_()?<span class="code-keyword">this</span>.updateTransmuxerAndRequestSegment_(e):<span class="code-keyword">this</span>.loadQueue_.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.buffered_();<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timestampOffset&amp;&amp;(e.timestampOffset=dn({<span class="code-attr">segmentTimeline</span>:e.timeline,<span class="code-attr">currentTimeline</span>:t.currentTimeline_,<span class="code-attr">startOfSegment</span>:e.startOfSegment,<span class="code-attr">buffered</span>:i,<span class="code-attr">overrideCheck</span>:!<span class="code-number">0</span>})),<span class="code-keyword">delete</span> e.audioAppendStart;<span class="code-keyword">var</span> n=t.sourceUpdater_.audioBuffered();n.length&amp;&amp;(e.audioAppendStart=n.end(n.length<span class="code-number">-1</span>)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_.length=<span class="code-number">0</span>,e.gopsToAlignWith=[],<span class="code-keyword">this</span>.timeMapping_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"reset"</span>}),<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setTimestampOffset"</span>,<span class="code-attr">timestampOffset</span>:e.timestampOffset}));<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.createSimplifiedSegmentObj_(e);e.abortRequests=Ii({<span class="code-attr">xhr</span>:<span class="code-keyword">this</span>.vhs_.xhr,<span class="code-attr">xhrOptions</span>:<span class="code-keyword">this</span>.xhrOptions_,<span class="code-attr">decryptionWorker</span>:<span class="code-keyword">this</span>.decrypter_,<span class="code-attr">segment</span>:t,<span class="code-attr">handlePartialData</span>:<span class="code-keyword">this</span>.handlePartialData_,<span class="code-attr">abortFn</span>:<span class="code-keyword">this</span>.handleAbort_.bind(<span class="code-keyword">this</span>),<span class="code-attr">progressFn</span>:<span class="code-keyword">this</span>.handleProgress_.bind(<span class="code-keyword">this</span>),<span class="code-attr">trackInfoFn</span>:<span class="code-keyword">this</span>.handleTrackInfo_.bind(<span class="code-keyword">this</span>),<span class="code-attr">timingInfoFn</span>:<span class="code-keyword">this</span>.handleTimingInfo_.bind(<span class="code-keyword">this</span>),<span class="code-attr">videoSegmentTimingInfoFn</span>:<span class="code-keyword">this</span>.handleSegmentTimingInfo_.bind(<span class="code-keyword">this</span>,<span class="code-string">"video"</span>,e.requestId),<span class="code-attr">audioSegmentTimingInfoFn</span>:<span class="code-keyword">this</span>.handleSegmentTimingInfo_.bind(<span class="code-keyword">this</span>,<span class="code-string">"audio"</span>,e.requestId),<span class="code-attr">captionsFn</span>:<span class="code-keyword">this</span>.handleCaptions_.bind(<span class="code-keyword">this</span>),<span class="code-attr">id3Fn</span>:<span class="code-keyword">this</span>.handleId3_.bind(<span class="code-keyword">this</span>),<span class="code-attr">dataFn</span>:<span class="code-keyword">this</span>.handleData_.bind(<span class="code-keyword">this</span>),<span class="code-attr">doneFn</span>:<span class="code-keyword">this</span>.segmentRequestFinished_.bind(<span class="code-keyword">this</span>)})},i.trimBackBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t-Ut.BACK_BUFFER_LENGTH;e.length&amp;&amp;(n=<span class="code-built_in">Math</span>.max(n,e.start(<span class="code-number">0</span>)));<span class="code-keyword">var</span> r=t-i;<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(r,n)}(<span class="code-keyword">this</span>.seekable_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.playlist_.targetDuration||<span class="code-number">10</span>);t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,t)},i.createSimplifiedSegmentObj_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i={<span class="code-attr">resolvedUri</span>:t.resolvedUri,<span class="code-attr">byterange</span>:t.byterange,<span class="code-attr">requestId</span>:e.requestId,<span class="code-attr">transmuxer</span>:e.transmuxer,<span class="code-attr">audioAppendStart</span>:e.audioAppendStart,<span class="code-attr">gopsToAlignWith</span>:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex<span class="code-number">-1</span>];<span class="code-keyword">if</span>(n&amp;&amp;n.timeline===t.timeline&amp;&amp;(n.videoTimingInfo?i.baseStartTime=n.videoTimingInfo.transmuxedDecodeEnd:n.audioTimingInfo&amp;&amp;(i.baseStartTime=n.audioTimingInfo.transmuxedDecodeEnd)),t.key){<span class="code-keyword">var</span> r=t.key.iv||<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,e.mediaIndex+e.playlist.mediaSequence]);i.key=<span class="code-keyword">this</span>.segmentKey(t.key),i.key.iv=r}<span class="code-keyword">return</span> t.map&amp;&amp;(i.map=<span class="code-keyword">this</span>.initSegmentForMap(t.map)),i},i.saveTransferStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.mediaRequests+=<span class="code-number">1</span>,e&amp;&amp;(<span class="code-keyword">this</span>.mediaBytesTransferred+=e.bytesReceived,<span class="code-keyword">this</span>.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.pendingSegment_.byteLength=t.bytesReceived,e&lt;on?<span class="code-keyword">this</span>.logger_(<span class="code-string">"Ignoring segment's bandwidth because its duration of "</span>+e+<span class="code-string">" is less than the min to record 0.016666666666666666"</span>):(<span class="code-keyword">this</span>.bandwidth=t.bandwidth,<span class="code-keyword">this</span>.roundTrip=t.roundTripTime)},i.handleTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaRequestsTimedout+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.bandwidth=<span class="code-number">1</span>,<span class="code-keyword">this</span>.roundTrip=<span class="code-literal">NaN</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>)},i.segmentRequestFinished_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.callQueue_.length)<span class="code-keyword">this</span>.callQueue_.push(<span class="code-keyword">this</span>.segmentRequestFinished_.bind(<span class="code-keyword">this</span>,e,t,i));<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.saveTransferStats_(t.stats),<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">if</span>(e){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,e.code===vi)<span class="code-keyword">return</span>;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.pause(),e.code===yi?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.handleTimeout_():(<span class="code-keyword">this</span>.mediaRequestsErrored+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.error(e),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>))}<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!t.length)<span class="code-keyword">return</span> e;<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> t.slice();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=t[<span class="code-number">0</span>].pts,r=<span class="code-number">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class="code-keyword">return</span> e.slice(<span class="code-number">0</span>,r).concat(t)}(<span class="code-keyword">this</span>.gopBuffer_,i.gopInfo,<span class="code-keyword">this</span>.safeAppend_)),<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>;<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.isEndOfStream_(n.mediaIndex,n.playlist),a=<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex,s=n.timeline!==<span class="code-keyword">this</span>.currentTimeline_&amp;&amp;n.timeline&gt;<span class="code-number">0</span>;!n.isFmp4&amp;&amp;(r||a&amp;&amp;s)&amp;&amp;(o=<span class="code-keyword">this</span>.transmuxer_,Bt(<span class="code-string">"endTimeline"</span>,o)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"appending"</span>),<span class="code-keyword">this</span>.waitForAppendsToComplete_(n)}<span class="code-keyword">var</span> o},i.setTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.syncController_.mappingForTimeline(e);<span class="code-literal">null</span>!==t&amp;&amp;(<span class="code-keyword">this</span>.timeMapping_=t)},i.updateMediaSecondsLoaded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.end?<span class="code-keyword">this</span>.mediaSecondsLoaded+=e.end-e.start:<span class="code-keyword">this</span>.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>!==e&amp;&amp;(<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;e!==<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()||!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;e!==<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==t)<span class="code-keyword">return</span> t;<span class="code-keyword">if</span>(!s)<span class="code-keyword">return</span> u.start;<span class="code-keyword">var</span> d=i.segments[n<span class="code-number">-1</span>];<span class="code-keyword">return</span> <span class="code-number">0</span>!==n&amp;&amp;d&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==d.start&amp;&amp;d.end===r+a?o.start:r},i.waitForAppendsToComplete_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.currentMediaInfo_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:<span class="code-string">"No starting media returned, likely due to an unsupported media format."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;n,s=!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;i&amp;&amp;!r;<span class="code-keyword">if</span>(e.waitingOnAppends=<span class="code-number">0</span>,!e.hasAppendedData_)<span class="code-keyword">return</span> e.timingInfo||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e.timestampOffset||(<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">0</span>),e.timingInfo={<span class="code-attr">start</span>:<span class="code-number">0</span>},e.waitingOnAppends++,<span class="code-keyword">this</span>.isPendingTimestampOffset_||(<span class="code-keyword">this</span>.updateSourceBufferTimestampOffset_(e),<span class="code-keyword">this</span>.processMetadataQueue_()),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.checkAppendsDone_(e);a&amp;&amp;e.waitingOnAppends++,s&amp;&amp;e.waitingOnAppends++,a&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.videoQueueCallback(<span class="code-keyword">this</span>.checkAppendsDone_.bind(<span class="code-keyword">this</span>,e)),s&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.audioQueueCallback(<span class="code-keyword">this</span>.checkAppendsDone_.bind(<span class="code-keyword">this</span>,e))},i.checkAppendsDone_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||(e.waitingOnAppends--,<span class="code-number">0</span>===e.waitingOnAppends&amp;&amp;<span class="code-keyword">this</span>.handleAppendsDone_())},i.checkForIllegalMediaSwitch=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"main"</span>===e&amp;&amp;t&amp;&amp;i?i.hasAudio||i.hasVideo?t.hasVideo&amp;&amp;!i.hasVideo?<span class="code-string">"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest."</span>:!t.hasVideo&amp;&amp;i.hasVideo?<span class="code-string">"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest."</span>:<span class="code-literal">null</span>:<span class="code-string">"Neither audio nor video found in segment."</span>:<span class="code-literal">null</span>}(<span class="code-keyword">this</span>.loaderType_,<span class="code-keyword">this</span>.currentMediaInfo_,e);<span class="code-keyword">return</span>!!t&amp;&amp;(<span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:t,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>),!<span class="code-number">0</span>)},i.updateSourceBufferTimestampOffset_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==e.timestampOffset&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timingInfo.start&amp;&amp;!e.changedTimestampOffset&amp;&amp;<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_){<span class="code-keyword">var</span> t=!<span class="code-number">1</span>;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!<span class="code-number">0</span>,e.timestampOffset!==<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()&amp;&amp;(<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!<span class="code-number">0</span>),e.timestampOffset!==<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset()&amp;&amp;(<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!<span class="code-number">0</span>),t&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>)}},i.updateTimingInfoEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.timingInfo=e.timingInfo||{};<span class="code-keyword">var</span> t=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;<span class="code-keyword">this</span>.currentMediaInfo_.hasVideo&amp;&amp;e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&amp;&amp;(e.timingInfo.end=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.end?t.end:t.start+e.duration)},i.handleAppendsDone_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"appendsdone"</span>),!<span class="code-keyword">this</span>.pendingSegment_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_());<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.updateTimingInfoEnd_(e),<span class="code-keyword">this</span>.shouldSaveSegmentTimingInfo_&amp;&amp;<span class="code-keyword">this</span>.syncController_.saveSegmentTimingInfo({<span class="code-attr">segmentInfo</span>:e,<span class="code-attr">shouldSaveTimelineMapping</span>:<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_}),<span class="code-keyword">this</span>.logger_(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?[]:o,d=e.mediaIndex,l=e.timeline;<span class="code-keyword">return</span>[<span class="code-string">"appending ["</span>+d+<span class="code-string">"] of ["</span>+a+<span class="code-string">", "</span>+(a+u.length)+<span class="code-string">"] from playlist ["</span>+s+<span class="code-string">"]"</span>,<span class="code-string">"["</span>+i+<span class="code-string">" =&gt; "</span>+n+<span class="code-string">"] in timeline ["</span>+l+<span class="code-string">"]"</span>].join(<span class="code-string">" "</span>)}(e));<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"hls"</span>!==t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i,n,r,a,s=(i=e.audioTimingInfo,n=e.videoTimingInfo,r=i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.end?i.end-i.start:<span class="code-number">0</span>,a=n&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n.end?n.end-n.start:<span class="code-number">0</span>,<span class="code-built_in">Math</span>.max(r,a));<span class="code-keyword">if</span>(!s)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> o=e.playlist.targetDuration,u=hn({<span class="code-attr">segmentDuration</span>:s,<span class="code-attr">maxDuration</span>:<span class="code-number">2</span>*o}),d=hn({<span class="code-attr">segmentDuration</span>:s,<span class="code-attr">maxDuration</span>:o}),l=<span class="code-string">"Segment with index "</span>+e.mediaIndex+<span class="code-string">" from playlist "</span>+e.playlist.id+<span class="code-string">" has a duration of "</span>+s+<span class="code-string">" when the reported duration is "</span>+e.duration+<span class="code-string">" and the target duration is "</span>+o+<span class="code-string">". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"</span>;<span class="code-keyword">return</span> u||d?{<span class="code-attr">severity</span>:u?<span class="code-string">"warn"</span>:<span class="code-string">"info"</span>,<span class="code-attr">message</span>:l}:<span class="code-literal">null</span>}(e,<span class="code-keyword">this</span>.sourceType_);<span class="code-keyword">if</span>(t&amp;&amp;(<span class="code-string">"warn"</span>===t.severity?u.default.log.warn(t.message):<span class="code-keyword">this</span>.logger_(t.message)),<span class="code-keyword">this</span>.recordThroughput_(e),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,e.isSyncRequest)<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">else</span>{<span class="code-keyword">this</span>.addSegmentMetadataCue_(e),<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.currentTimeline_!==e.timeline&amp;&amp;(<span class="code-keyword">this</span>.timelineChangeController_.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:e.timeline}),<span class="code-string">"main"</span>!==<span class="code-keyword">this</span>.loaderType_||<span class="code-keyword">this</span>.audioDisabled_||<span class="code-keyword">this</span>.timelineChangeController_.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:e.timeline})),<span class="code-keyword">this</span>.currentTimeline_=e.timeline,<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">var</span> i=e.segment;i.end&amp;&amp;<span class="code-keyword">this</span>.currentTime_()-i.end&gt;<span class="code-number">3</span>*e.playlist.targetDuration?<span class="code-keyword">this</span>.resetEverything():(<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>),<span class="code-keyword">this</span>.mediaIndex=e.mediaIndex,<span class="code-keyword">this</span>.isEndOfStream_(e.mediaIndex,e.playlist)&amp;&amp;<span class="code-keyword">this</span>.endOfStream(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"appended"</span>),<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_())}},i.recordThroughput_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.duration&lt;on)<span class="code-keyword">this</span>.logger_(<span class="code-string">"Ignoring segment's throughput because its duration of "</span>+e.duration+<span class="code-string">" is less than the min to record 0.016666666666666666"</span>);<span class="code-keyword">else</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.throughput.rate,i=<span class="code-built_in">Date</span>.now()-e.endOfAllRequests+<span class="code-number">1</span>,n=<span class="code-built_in">Math</span>.floor(e.byteLength/i*<span class="code-number">8</span>*<span class="code-number">1e3</span>);<span class="code-keyword">this</span>.throughput.rate+=(n-t)/++<span class="code-keyword">this</span>.throughput.count}},i.addSegmentMetadataCue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.segmentMetadataTrack_){<span class="code-keyword">var</span> t=e.segment,i=t.start,n=t.end;<span class="code-keyword">if</span>(sn(i)&amp;&amp;sn(n)){an(i,n,<span class="code-keyword">this</span>.segmentMetadataTrack_);<span class="code-keyword">var</span> r=o.default.WebKitDataCue||o.default.VTTCue,a={<span class="code-attr">custom</span>:t.custom,<span class="code-attr">dateTimeObject</span>:t.dateTimeObject,<span class="code-attr">dateTimeString</span>:t.dateTimeString,<span class="code-attr">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class="code-attr">resolution</span>:e.playlist.attributes.RESOLUTION,<span class="code-attr">codecs</span>:e.playlist.attributes.CODECS,<span class="code-attr">byteLength</span>:e.byteLength,<span class="code-attr">uri</span>:e.uri,<span class="code-attr">timeline</span>:e.timeline,<span class="code-attr">playlist</span>:e.playlist.id,<span class="code-attr">start</span>:i,<span class="code-attr">end</span>:n},s=<span class="code-keyword">new</span> r(i,n,<span class="code-built_in">JSON</span>.stringify(a));s.value=a,<span class="code-keyword">this</span>.segmentMetadataTrack_.addCue(s)}}},t}(u.default.EventTarget);<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">fn</span>(<span class="code-params"></span>)</span>{}<span class="code-keyword">var</span> mn,pn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e?e:e.replace(<span class="code-regexp">/./</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.toUpperCase()}))},gn=[<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>],yn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">return</span> i&amp;&amp;i.updating||t.queuePending[e]},vn=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i.queue.length){<span class="code-keyword">var</span> n=<span class="code-number">0</span>,r=i.queue[n];<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>!==r.type){<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>!==t&amp;&amp;i.ready()&amp;&amp;<span class="code-string">"closed"</span>!==i.mediaSource.readyState&amp;&amp;!yn(t,i)){<span class="code-keyword">if</span>(r.type!==t){<span class="code-keyword">if</span>(<span class="code-literal">null</span>===(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>===n.type)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(n.type===e)<span class="code-keyword">return</span> i}<span class="code-keyword">return</span> <span class="code-literal">null</span>}(t,i.queue)))<span class="code-keyword">return</span>;r=i.queue[n]}i.queue.splice(n,<span class="code-number">1</span>),r.action(t,i),r.doneFn?i.queuePending[t]=r:e(t,i)}}<span class="code-keyword">else</span> i.updating()||<span class="code-string">"closed"</span>===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&amp;&amp;r.doneFn(),e(<span class="code-string">"audio"</span>,i),e(<span class="code-string">"video"</span>,i))}},_n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>],n=pn(e);i&amp;&amp;(i.removeEventListener(<span class="code-string">"updateend"</span>,t[<span class="code-string">"on"</span>+n+<span class="code-string">"UpdateEnd_"</span>]),i.removeEventListener(<span class="code-string">"error"</span>,t[<span class="code-string">"on"</span>+n+<span class="code-string">"Error_"</span>]),t.codecs[e]=<span class="code-literal">null</span>,t[e+<span class="code-string">"Buffer"</span>]=<span class="code-literal">null</span>)},bn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;t&amp;&amp;<span class="code-number">-1</span>!==<span class="code-built_in">Array</span>.prototype.indexOf.call(e.sourceBuffers,t)},Tn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=n[i+<span class="code-string">"Buffer"</span>];bn(n.mediaSource,r)&amp;&amp;(n.logger_(<span class="code-string">"Appending segment "</span>+t.mediaIndex+<span class="code-string">"'s "</span>+e.length+<span class="code-string">" bytes to "</span>+i+<span class="code-string">"Buffer"</span>),r.appendBuffer(e))}},Sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=n[i+<span class="code-string">"Buffer"</span>];bn(n.mediaSource,r)&amp;&amp;(n.logger_(<span class="code-string">"Removing "</span>+e+<span class="code-string">" to "</span>+t+<span class="code-string">" from "</span>+i+<span class="code-string">"Buffer"</span>),r.remove(e,t))}},In=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i[t+<span class="code-string">"Buffer"</span>];bn(i.mediaSource,n)&amp;&amp;(i.logger_(<span class="code-string">"Setting "</span>+t+<span class="code-string">"timestampOffset to "</span>+e),n.timestampOffset=e)}},wn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e()}},Ln=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===t.mediaSource.readyState){t.logger_(<span class="code-string">"Calling mediaSource endOfStream("</span>+(e||<span class="code-string">""</span>)+<span class="code-string">")"</span>);<span class="code-keyword">try</span>{t.mediaSource.endOfStream(e)}<span class="code-keyword">catch</span>(e){u.default.log.warn(<span class="code-string">"Failed to call media source endOfStream"</span>,e)}}}},kn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=pn(e),r=Wi(t);i.logger_(<span class="code-string">"Adding "</span>+e+<span class="code-string">"Buffer with codec "</span>+t+<span class="code-string">" to mediaSource"</span>);<span class="code-keyword">var</span> a=i.mediaSource.addSourceBuffer(r);a.addEventListener(<span class="code-string">"updateend"</span>,i[<span class="code-string">"on"</span>+n+<span class="code-string">"UpdateEnd_"</span>]),a.addEventListener(<span class="code-string">"error"</span>,i[<span class="code-string">"on"</span>+n+<span class="code-string">"Error_"</span>]),i.codecs[e]=t,i[e+<span class="code-string">"Buffer"</span>]=a}},An=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(_n(e,t),bn(t.mediaSource,i)){t.logger_(<span class="code-string">"Removing "</span>+e+<span class="code-string">"Buffer with codec "</span>+t.codecs[e]+<span class="code-string">" from mediaSource"</span>);<span class="code-keyword">try</span>{t.mediaSource.removeSourceBuffer(i)}<span class="code-keyword">catch</span>(t){u.default.log.warn(<span class="code-string">"Failed to removeSourceBuffer "</span>+e+<span class="code-string">"Buffer"</span>,t)}}}},En=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i[t+<span class="code-string">"Buffer"</span>],r=Wi(e);bn(i.mediaSource,n)&amp;&amp;i.codecs[t]!==e&amp;&amp;(i.logger_(<span class="code-string">"changing "</span>+t+<span class="code-string">"Buffer codec from "</span>+i.codecs[t]+<span class="code-string">" to "</span>+e),n.changeType(r),i.codecs[t]=e)}},Pn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({<span class="code-attr">type</span>:t,<span class="code-attr">action</span>:n,<span class="code-attr">doneFn</span>:r,<span class="code-attr">name</span>:a}),vn(t,i)},Cn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(t.queuePending[e]){<span class="code-keyword">var</span> n=t.queuePending[e].doneFn;t.queuePending[e]=<span class="code-literal">null</span>,n&amp;&amp;n(t[e+<span class="code-string">"Error_"</span>])}vn(e,t)}},Un=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).mediaSource=t,i.sourceopenListener_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> vn(<span class="code-string">"mediaSource"</span>,d(i))},i.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,i.sourceopenListener_),i.logger_=ji(<span class="code-string">"SourceUpdater"</span>),i.audioTimestampOffset_=<span class="code-number">0</span>,i.videoTimestampOffset_=<span class="code-number">0</span>,i.queue=[],i.queuePending={<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-attr">video</span>:<span class="code-literal">null</span>},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!<span class="code-number">1</span>,i.codecs={},i.onVideoUpdateEnd_=Cn(<span class="code-string">"video"</span>,d(i)),i.onAudioUpdateEnd_=Cn(<span class="code-string">"audio"</span>,d(i)),i.onVideoError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.videoError_=e},i.onAudioError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.audioError_=e},i.createdSourceBuffers_=!<span class="code-number">1</span>,i.initializedEme_=!<span class="code-number">1</span>,i.triggeredReady_=!<span class="code-number">1</span>,i}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.initializedEme=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.initializedEme_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.triggerReady()},i.hasCreatedSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.createdSourceBuffers_},i.hasInitializedAnyEme=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.initializedEme_},i.ready=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.hasCreatedSourceBuffers()&amp;&amp;<span class="code-keyword">this</span>.hasInitializedAnyEme()},i.createSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.hasCreatedSourceBuffers()||(<span class="code-keyword">this</span>.addOrChangeSourceBuffers(e),<span class="code-keyword">this</span>.createdSourceBuffers_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"createdsourcebuffers"</span>),<span class="code-keyword">this</span>.triggerReady())},i.triggerReady=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ready()&amp;&amp;!<span class="code-keyword">this</span>.triggeredReady_&amp;&amp;(<span class="code-keyword">this</span>.triggeredReady_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"ready"</span>))},i.addSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{Pn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:kn(e,t),<span class="code-attr">name</span>:<span class="code-string">"addSourceBuffer"</span>})},i.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Pn({<span class="code-attr">type</span>:e,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===t.mediaSource.readyState){<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(bn(t.mediaSource,i)){t.logger_(<span class="code-string">"calling abort on "</span>+e+<span class="code-string">"Buffer"</span>);<span class="code-keyword">try</span>{i.abort()}<span class="code-keyword">catch</span>(t){u.default.log.warn(<span class="code-string">"Failed to abort on "</span>+e+<span class="code-string">"Buffer"</span>,t)}}}},<span class="code-attr">name</span>:<span class="code-string">"abort"</span>})},i.removeSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.canRemoveSourceBuffer()?Pn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:An(e),<span class="code-attr">name</span>:<span class="code-string">"removeSourceBuffer"</span>}):u.default.log.error(<span class="code-string">"removeSourceBuffer is not supported!"</span>)},i.canRemoveSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!u.default.browser.IE_VERSION&amp;&amp;!u.default.browser.IS_FIREFOX&amp;&amp;o.default.MediaSource&amp;&amp;o.default.MediaSource.prototype&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> o.default.MediaSource.prototype.removeSourceBuffer},t.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> o.default.SourceBuffer&amp;&amp;o.default.SourceBuffer.prototype&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> o.default.SourceBuffer.prototype.changeType},i.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.constructor.canChangeType()},i.changeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.canChangeType()?Pn({<span class="code-attr">type</span>:e,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:En(t),<span class="code-attr">name</span>:<span class="code-string">"changeType"</span>}):u.default.log.error(<span class="code-string">"changeType is not supported!"</span>)},i.addOrChangeSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e||<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-number">0</span>===<span class="code-built_in">Object</span>.keys(e).length)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot addOrChangeSourceBuffers to undefined codecs"</span>);<span class="code-built_in">Object</span>.keys(e).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=e[i];<span class="code-keyword">if</span>(!t.hasCreatedSourceBuffers())<span class="code-keyword">return</span> t.addSourceBuffer(i,n);t.canChangeType()&amp;&amp;t.changeType(i,n)}))},i.appendBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.processedAppend_=!<span class="code-number">0</span>,<span class="code-string">"audio"</span>===r&amp;&amp;<span class="code-keyword">this</span>.videoBuffer&amp;&amp;!<span class="code-keyword">this</span>.videoAppendQueued_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.delayedAudioAppendQueue_.push([e,t]),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"delayed audio append of "</span>+a.length+<span class="code-string">" until video append"</span>);<span class="code-keyword">if</span>(Pn({<span class="code-attr">type</span>:r,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:Tn(a,n||{<span class="code-attr">mediaIndex</span>:<span class="code-number">-1</span>}),<span class="code-attr">doneFn</span>:t,<span class="code-attr">name</span>:<span class="code-string">"appendBuffer"</span>}),<span class="code-string">"video"</span>===r){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoAppendQueued_=!<span class="code-number">0</span>,!<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length)<span class="code-keyword">return</span>;<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>.delayedAudioAppendQueue_.slice();<span class="code-keyword">this</span>.logger_(<span class="code-string">"queuing delayed audio "</span>+s.length+<span class="code-string">" appendBuffers"</span>),<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length=<span class="code-number">0</span>,s.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.appendBuffer.apply(i,e)}))}},i.audioBuffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> bn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.audioBuffer)&amp;&amp;<span class="code-keyword">this</span>.audioBuffer.buffered?<span class="code-keyword">this</span>.audioBuffer.buffered:u.default.createTimeRange()},i.videoBuffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> bn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.videoBuffer)&amp;&amp;<span class="code-keyword">this</span>.videoBuffer.buffered?<span class="code-keyword">this</span>.videoBuffer.buffered:u.default.createTimeRange()},i.buffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=bn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.videoBuffer)?<span class="code-keyword">this</span>.videoBuffer:<span class="code-literal">null</span>,t=bn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.audioBuffer)?<span class="code-keyword">this</span>.audioBuffer:<span class="code-literal">null</span>;<span class="code-keyword">return</span> t&amp;&amp;!e?<span class="code-keyword">this</span>.audioBuffered():e&amp;&amp;!t?<span class="code-keyword">this</span>.videoBuffered():<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r=<span class="code-number">0</span>,a=[],s=[];<span class="code-keyword">if</span>(!(e&amp;&amp;e.length&amp;&amp;t&amp;&amp;t.length))<span class="code-keyword">return</span> u.default.createTimeRange();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=e.length;o--;)a.push({<span class="code-attr">time</span>:e.start(o),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),a.push({<span class="code-attr">time</span>:e.end(o),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(o=t.length;o--;)a.push({<span class="code-attr">time</span>:t.start(o),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),a.push({<span class="code-attr">time</span>:t.end(o),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(a.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.time-t.time})),o=<span class="code-number">0</span>;o&lt;a.length;o++)<span class="code-string">"start"</span>===a[o].type?<span class="code-number">2</span>==++r&amp;&amp;(i=a[o].time):<span class="code-string">"end"</span>===a[o].type&amp;&amp;<span class="code-number">1</span>==--r&amp;&amp;(n=a[o].time),<span class="code-literal">null</span>!==i&amp;&amp;<span class="code-literal">null</span>!==n&amp;&amp;(s.push([i,n]),i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>);<span class="code-keyword">return</span> u.default.createTimeRanges(s)}(<span class="code-keyword">this</span>.audioBuffered(),<span class="code-keyword">this</span>.videoBuffered())},i.setDuration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=fn),Pn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:(i=e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.logger_(<span class="code-string">"Setting mediaSource duration to "</span>+i);<span class="code-keyword">try</span>{e.mediaSource.duration=i}<span class="code-keyword">catch</span>(e){u.default.log.warn(<span class="code-string">"Failed to set media source duration"</span>,e)}}),<span class="code-attr">name</span>:<span class="code-string">"duration"</span>,<span class="code-attr">doneFn</span>:t})},i.endOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-literal">null</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=fn),<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;(e=<span class="code-keyword">void</span> <span class="code-number">0</span>),Pn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:Ln(e),<span class="code-attr">name</span>:<span class="code-string">"endOfStream"</span>,<span class="code-attr">doneFn</span>:t})},i.removeAudio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=fn),<span class="code-keyword">this</span>.audioBuffered().length&amp;&amp;<span class="code-number">0</span>!==<span class="code-keyword">this</span>.audioBuffered().end(<span class="code-number">0</span>)?Pn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:Sn(e,t),<span class="code-attr">doneFn</span>:i,<span class="code-attr">name</span>:<span class="code-string">"remove"</span>}):i()},i.removeVideo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=fn),<span class="code-keyword">this</span>.videoBuffered().length&amp;&amp;<span class="code-number">0</span>!==<span class="code-keyword">this</span>.videoBuffered().end(<span class="code-number">0</span>)?Pn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:Sn(e,t),<span class="code-attr">doneFn</span>:i,<span class="code-attr">name</span>:<span class="code-string">"remove"</span>}):i()},i.updating=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!(!yn(<span class="code-string">"audio"</span>,<span class="code-keyword">this</span>)&amp;&amp;!yn(<span class="code-string">"video"</span>,<span class="code-keyword">this</span>))},i.audioTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-keyword">this</span>.audioBuffer&amp;&amp;<span class="code-keyword">this</span>.audioTimestampOffset_!==e&amp;&amp;(Pn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:In(e),<span class="code-attr">name</span>:<span class="code-string">"timestampOffset"</span>}),<span class="code-keyword">this</span>.audioTimestampOffset_=e),<span class="code-keyword">this</span>.audioTimestampOffset_},i.videoTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-keyword">this</span>.videoBuffer&amp;&amp;<span class="code-keyword">this</span>.videoTimestampOffset!==e&amp;&amp;(Pn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:In(e),<span class="code-attr">name</span>:<span class="code-string">"timestampOffset"</span>}),<span class="code-keyword">this</span>.videoTimestampOffset_=e),<span class="code-keyword">this</span>.videoTimestampOffset_},i.audioQueueCallback=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.audioBuffer&amp;&amp;Pn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:wn(e),<span class="code-attr">name</span>:<span class="code-string">"callback"</span>})},i.videoQueueCallback=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.videoBuffer&amp;&amp;Pn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:wn(e),<span class="code-attr">name</span>:<span class="code-string">"callback"</span>})},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),gn.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+<span class="code-string">"QueueCallback"</span>]((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> _n(t,e)}))})),<span class="code-keyword">this</span>.videoAppendQueued_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.sourceopenListener_&amp;&amp;<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.sourceopenListener_),<span class="code-keyword">this</span>.off()},t}(u.default.EventTarget),On=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(<span class="code-built_in">escape</span>(<span class="code-built_in">String</span>.fromCharCode.apply(<span class="code-literal">null</span>,e)))},Dn=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-string">"\n\n"</span>.split(<span class="code-string">""</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.charCodeAt(<span class="code-number">0</span>)}))),xn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={}),(n=e.call(<span class="code-keyword">this</span>,t,i)||<span class="code-keyword">this</span>).handlePartialData_=!<span class="code-number">1</span>,n.mediaSource_=<span class="code-literal">null</span>,n.subtitlesTrack_=<span class="code-literal">null</span>,n.loaderType_=<span class="code-string">"subtitle"</span>,n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!<span class="code-number">1</span>,n}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.createTransmuxer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>},i.buffered_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.subtitlesTrack_||!<span class="code-keyword">this</span>.subtitlesTrack_.cues.length)<span class="code-keyword">return</span> u.default.createTimeRanges();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.subtitlesTrack_.cues,t=e[<span class="code-number">0</span>].startTime,i=e[e.length<span class="code-number">-1</span>].startTime;<span class="code-keyword">return</span> u.default.createTimeRanges([[t,i]])},i.initSegmentForMap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=ce(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class="code-keyword">var</span> r=Dn.byteLength+e.bytes.byteLength,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r);a.set(e.bytes),a.set(Dn,e.bytes.byteLength),<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:a}}<span class="code-keyword">return</span> n||e},i.couldBeginLoading_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;!<span class="code-keyword">this</span>.paused()},i.init_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()},i.track=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e||(<span class="code-keyword">this</span>.subtitlesTrack_=e,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_()&amp;&amp;<span class="code-keyword">this</span>.init_()),<span class="code-keyword">this</span>.subtitlesTrack_},i.remove=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{an(e,t,<span class="code-keyword">this</span>.subtitlesTrack_)},i.fillBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.syncPoint_||(<span class="code-keyword">this</span>.syncPoint_=<span class="code-keyword">this</span>.syncController_.getSyncPoint(<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.duration_(),<span class="code-keyword">this</span>.currentTimeline_,<span class="code-keyword">this</span>.currentTime_()));<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.checkBuffer_(<span class="code-keyword">this</span>.buffered_(),<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.mediaIndex,<span class="code-keyword">this</span>.hasPlayed_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.syncPoint_);<span class="code-keyword">if</span>(t=<span class="code-keyword">this</span>.skipEmptySegments_(t)){<span class="code-keyword">if</span>(<span class="code-literal">null</span>===<span class="code-keyword">this</span>.syncController_.timestampOffsetForTimeline(t.timeline))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.syncController_.one(<span class="code-string">"timestampoffset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.state=<span class="code-string">"READY"</span>,e.paused()||e.monitorBuffer_()})),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_TIMELINE"</span>);<span class="code-keyword">this</span>.loadSegment_(t)}},i.skipEmptySegments_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(;e&amp;&amp;e.segment.empty;)e=<span class="code-keyword">this</span>.generateSegmentInfo_(e.playlist,e.mediaIndex+<span class="code-number">1</span>,e.startOfSegment+e.duration,e.isSyncRequest);<span class="code-keyword">return</span> e},i.stopForError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.error(e),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)},i.segmentRequestFinished_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.subtitlesTrack_){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.saveTransferStats_(t.stats),!<span class="code-keyword">this</span>.pendingSegment_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>);<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> e.code===yi&amp;&amp;<span class="code-keyword">this</span>.handleTimeout_(),e.code===vi?<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>:<span class="code-keyword">this</span>.mediaRequestsErrored+=<span class="code-number">1</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.stopForError(e);<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.saveBandwidthRelatedStats_(r.duration,t.stats),<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"appending"</span>);<span class="code-keyword">var</span> a=r.segment;<span class="code-keyword">if</span>(a.map&amp;&amp;(a.map.bytes=t.map.bytes),r.bytes=t.bytes,<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> o.default.WebVTT&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_.tech_){<span class="code-keyword">var</span> s,u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class="code-string">"vttjsloaded"</span>,s),n.stopForError({<span class="code-attr">message</span>:<span class="code-string">"Error loading vtt.js"</span>})};<span class="code-keyword">return</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class="code-string">"vttjserror"</span>,u),n.segmentRequestFinished_(e,t,i)},<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_VTTJS"</span>,<span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjsloaded"</span>,s),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjserror"</span>,u)}a.requested=!<span class="code-number">0</span>;<span class="code-keyword">try</span>{<span class="code-keyword">this</span>.parseVTTCues_(r)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.stopForError({<span class="code-attr">message</span>:e.message})}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateTimeMapping_(r,<span class="code-keyword">this</span>.syncController_.timelines[r.timeline],<span class="code-keyword">this</span>.playlist_),r.cues.length?r.timingInfo={<span class="code-attr">start</span>:r.cues[<span class="code-number">0</span>].startTime,<span class="code-attr">end</span>:r.cues[r.cues.length<span class="code-number">-1</span>].endTime}:r.timingInfo={<span class="code-attr">start</span>:r.startOfSegment,<span class="code-attr">end</span>:r.startOfSegment+r.duration},r.isSyncRequest)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>);r.byteLength=r.bytes.byteLength,<span class="code-keyword">this</span>.mediaSecondsLoaded+=a.duration,r.cues.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?<span class="code-keyword">new</span> o.default.VTTCue(e.startTime,e.endTime,e.text):e)})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.cues;<span class="code-keyword">if</span>(t)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;a&lt;t.length;a++)t[i].startTime===t[a].startTime&amp;&amp;t[i].endTime===t[a].endTime&amp;&amp;t[i].text===t[a].text&amp;&amp;++r&gt;<span class="code-number">1</span>&amp;&amp;n.push(t[a]);n.length&amp;&amp;n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e.removeCue(t)}))}}(<span class="code-keyword">this</span>.subtitlesTrack_),<span class="code-keyword">this</span>.handleAppendsDone_()}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>},i.handleData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},i.updateTimingInfoEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},i.parseVTTCues_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=!<span class="code-number">1</span>;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> o.default.TextDecoder?t=<span class="code-keyword">new</span> o.default.TextDecoder(<span class="code-string">"utf8"</span>):(t=o.default.WebVTT.StringDecoder(),i=!<span class="code-number">0</span>);<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> o.default.WebVTT.Parser(o.default,o.default.vttjs,t);<span class="code-keyword">if</span>(e.cues=[],e.timestampmap={<span class="code-attr">MPEGTS</span>:<span class="code-number">0</span>,<span class="code-attr">LOCAL</span>:<span class="code-number">0</span>},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.timestampmap=t},n.onparsingerror=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{u.default.log.warn(<span class="code-string">"Error encountered when parsing cues: "</span>+e.message)},e.segment.map){<span class="code-keyword">var</span> r=e.segment.map.bytes;i&amp;&amp;(r=On(r)),n.parse(r)}<span class="code-keyword">var</span> a=e.bytes;i&amp;&amp;(a=On(a)),n.parse(a),n.flush()},i.updateTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.segment;<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(e.cues.length){<span class="code-keyword">var</span> r=e.timestampmap,a=r.MPEGTS/Jt-r.LOCAL+t.mapping;<span class="code-keyword">if</span>(e.cues.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime+=a,e.endTime+=a})),!i.syncInfo){<span class="code-keyword">var</span> s=e.cues[<span class="code-number">0</span>].startTime,o=e.cues[e.cues.length<span class="code-number">-1</span>].startTime;i.syncInfo={<span class="code-attr">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class="code-attr">time</span>:<span class="code-built_in">Math</span>.min(s,o-n.duration)}}}<span class="code-keyword">else</span> n.empty=!<span class="code-number">0</span>},t}(cn),Rn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.cues,n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class="code-keyword">return</span> r}<span class="code-keyword">return</span> <span class="code-literal">null</span>},Mn=[{<span class="code-attr">name</span>:<span class="code-string">"VOD"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">return</span> i!==<span class="code-number">1</span>/<span class="code-number">0</span>?{<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>}:<span class="code-literal">null</span>}},{<span class="code-attr">name</span>:<span class="code-string">"ProgramDateTime"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(!e.datetimeToDisplayTime)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> a=t.segments||[],s=<span class="code-literal">null</span>,o=<span class="code-literal">null</span>;r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;a.length;u++){<span class="code-keyword">var</span> d=a[u];<span class="code-keyword">if</span>(d.dateTimeObject){<span class="code-keyword">var</span> l=d.dateTimeObject.getTime()/<span class="code-number">1e3</span>+e.datetimeToDisplayTime,h=<span class="code-built_in">Math</span>.abs(r-l);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==o&amp;&amp;(<span class="code-number">0</span>===h||o&lt;h))<span class="code-keyword">break</span>;o=h,s={<span class="code-attr">time</span>:l,<span class="code-attr">segmentIndex</span>:u}}}<span class="code-keyword">return</span> s}},{<span class="code-attr">name</span>:<span class="code-string">"Segment"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=t.segments||[],s=<span class="code-literal">null</span>,o=<span class="code-literal">null</span>;r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;a.length;u++){<span class="code-keyword">var</span> d=a[u];<span class="code-keyword">if</span>(d.timeline===n&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==d.start){<span class="code-keyword">var</span> l=<span class="code-built_in">Math</span>.abs(r-d.start);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==o&amp;&amp;o&lt;l)<span class="code-keyword">break</span>;(!s||<span class="code-literal">null</span>===o||o&gt;=l)&amp;&amp;(o=l,s={<span class="code-attr">time</span>:d.start,<span class="code-attr">segmentIndex</span>:u})}}<span class="code-keyword">return</span> s}},{<span class="code-attr">name</span>:<span class="code-string">"Discontinuity"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(r=r||<span class="code-number">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=<span class="code-literal">null</span>,o=<span class="code-number">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class="code-keyword">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class="code-number">1</span>,l=e.discontinuities[d];<span class="code-keyword">if</span>(l){<span class="code-keyword">var</span> h=<span class="code-built_in">Math</span>.abs(r-l.time);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==s&amp;&amp;s&lt;h)<span class="code-keyword">break</span>;(!a||<span class="code-literal">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class="code-attr">time</span>:l.time,<span class="code-attr">segmentIndex</span>:u})}}<span class="code-keyword">return</span> a}},{<span class="code-attr">name</span>:<span class="code-string">"Playlist"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">return</span> t.syncInfo?{<span class="code-attr">time</span>:t.syncInfo.time,<span class="code-attr">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence}:<span class="code-literal">null</span>}}],Bn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).timelines=[],i.discontinuities=[],i.datetimeToDisplayTime=<span class="code-literal">null</span>,i.logger_=ji(<span class="code-string">"SyncController"</span>),i}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.getSyncPoint=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.runStrategies_(e,t,i,n);<span class="code-keyword">return</span> r.length?<span class="code-keyword">this</span>.selectSyncPoint_(r,{<span class="code-attr">key</span>:<span class="code-string">"time"</span>,<span class="code-attr">value</span>:n}):<span class="code-literal">null</span>},i.getExpiredTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class="code-number">0</span>);<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.selectSyncPoint_(i,{<span class="code-attr">key</span>:<span class="code-string">"segmentIndex"</span>,<span class="code-attr">value</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> n.segmentIndex&gt;<span class="code-number">0</span>&amp;&amp;(n.time*=<span class="code-number">-1</span>),<span class="code-built_in">Math</span>.abs(n.time+j(e,n.segmentIndex,<span class="code-number">0</span>))},i.runStrategies_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=[],a=<span class="code-number">0</span>;a&lt;Mn.length;a++){<span class="code-keyword">var</span> s=Mn[a],o=s.run(<span class="code-keyword">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class="code-attr">strategy</span>:s.name,<span class="code-attr">syncPoint</span>:o}))}<span class="code-keyword">return</span> r},i.selectSyncPoint_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e[<span class="code-number">0</span>].syncPoint,n=<span class="code-built_in">Math</span>.abs(e[<span class="code-number">0</span>].syncPoint[t.key]-t.value),r=e[<span class="code-number">0</span>].strategy,a=<span class="code-number">1</span>;a&lt;e.length;a++){<span class="code-keyword">var</span> s=<span class="code-built_in">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"syncPoint for ["</span>+t.key+<span class="code-string">": "</span>+t.value+<span class="code-string">"] chosen with strategy ["</span>+r+<span class="code-string">"]: [time:"</span>+i.time+<span class="code-string">", segmentIndex:"</span>+i.segmentIndex+<span class="code-string">"]"</span>),i},i.saveExpiredSegmentInfo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.mediaSequence-e.mediaSequence<span class="code-number">-1</span>;i&gt;=<span class="code-number">0</span>;i--){<span class="code-keyword">var</span> n=e.segments[i];<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==n.start){t.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence+i,<span class="code-attr">time</span>:n.start},<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist refresh sync: [time:"</span>+t.syncInfo.time+<span class="code-string">", mediaSequence: "</span>+t.syncInfo.mediaSequence+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">break</span>}}},i.setDateTimeMapping=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.datetimeToDisplayTime&amp;&amp;e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class="code-number">0</span>].dateTimeObject){<span class="code-keyword">var</span> t=e.segments[<span class="code-number">0</span>].dateTimeObject.getTime()/<span class="code-number">1e3</span>;<span class="code-keyword">this</span>.datetimeToDisplayTime=-t}},i.saveSegmentTimingInfo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segmentInfo,i=e.shouldSaveTimelineMapping;<span class="code-keyword">this</span>.calculateSegmentTimeMapping_(t,t.timingInfo,i)&amp;&amp;(<span class="code-keyword">this</span>.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={<span class="code-attr">mediaSequence</span>:t.playlist.mediaSequence+t.mediaIndex,<span class="code-attr">time</span>:t.segment.start}))},i.timestampOffsetForTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].time},i.mappingForTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].mapping},i.calculateSegmentTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.segment,r=<span class="code-keyword">this</span>.timelines[e.timeline];<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==e.timestampOffset)r={<span class="code-attr">time</span>:e.startOfSegment,<span class="code-attr">mapping</span>:e.startOfSegment-t.start},i&amp;&amp;(<span class="code-keyword">this</span>.timelines[e.timeline]=r,<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"time mapping for timeline "</span>+e.timeline+<span class="code-string">": [time: "</span>+r.time+<span class="code-string">"] [mapping: "</span>+r.mapping+<span class="code-string">"]"</span>)),n.start=e.startOfSegment,n.end=t.end+r.mapping;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(!r)<span class="code-keyword">return</span>!<span class="code-number">1</span>;n.start=t.start+r.mapping,n.end=t.end+r.mapping}<span class="code-keyword">return</span>!<span class="code-number">0</span>},i.saveDiscontinuitySyncInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.segment;<span class="code-keyword">if</span>(i.discontinuity)<span class="code-keyword">this</span>.discontinuities[i.timeline]={<span class="code-attr">time</span>:i.start,<span class="code-attr">accuracy</span>:<span class="code-number">0</span>};<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class="code-keyword">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class="code-number">1</span>,s=r-e.mediaIndex,o=<span class="code-built_in">Math</span>.abs(s);<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.discontinuities[a]||<span class="code-keyword">this</span>.discontinuities[a].accuracy&gt;o){<span class="code-keyword">var</span> u;u=s&lt;<span class="code-number">0</span>?i.start-j(t,e.mediaIndex,r):i.end+j(t,e.mediaIndex+<span class="code-number">1</span>,r),<span class="code-keyword">this</span>.discontinuities[a]={<span class="code-attr">time</span>:u,<span class="code-attr">accuracy</span>:o}}}},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.off()},t}(u.default.EventTarget),Fn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.clearPendingTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.pendingTimelineChanges_[e]=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"pendingtimelinechange"</span>)},i.pendingTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.from,n=e.to;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n&amp;&amp;(<span class="code-keyword">this</span>.pendingTimelineChanges_[t]={<span class="code-attr">type</span>:t,<span class="code-attr">from</span>:i,<span class="code-attr">to</span>:n},<span class="code-keyword">this</span>.trigger(<span class="code-string">"pendingtimelinechange"</span>)),<span class="code-keyword">this</span>.pendingTimelineChanges_[t]},i.lastTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.from,n=e.to;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n&amp;&amp;(<span class="code-keyword">this</span>.lastTimelineChanges_[t]={<span class="code-attr">type</span>:t,<span class="code-attr">from</span>:i,<span class="code-attr">to</span>:n},<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.pendingTimelineChanges_[t],<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelinechange"</span>)),<span class="code-keyword">this</span>.lastTimelineChanges_[t]},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.pendingTimelineChanges_={},<span class="code-keyword">this</span>.lastTimelineChanges_={},<span class="code-keyword">this</span>.off()},t}(u.default.EventTarget),Nn=<span class="code-keyword">new</span> Pi(<span class="code-string">"./decrypter-worker.worker.js"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;
</code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code><span class="code-comment">/*! @name @videojs/http-streaming @version 2.5.0 @license Apache-2.0 */</span>!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e]=<span class="code-keyword">this</span>.listeners[e].slice(<span class="code-number">0</span>),<span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},t.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},e}(),n=<span class="code-literal">null</span>,r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,r;n||(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],d=u[<span class="code-number">0</span>],l=u[<span class="code-number">1</span>],h=d[<span class="code-number">4</span>],c=l[<span class="code-number">4</span>],f=[],m=[];<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-number">256</span>;e++)m[(f[e]=e&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(e&gt;&gt;<span class="code-number">7</span>))^e]=e;<span class="code-keyword">for</span>(t=i=<span class="code-number">0</span>;!h[t];t^=n||<span class="code-number">1</span>,i=m[i]||<span class="code-number">1</span>)<span class="code-keyword">for</span>(a=(a=i^i&lt;&lt;<span class="code-number">1</span>^i&lt;&lt;<span class="code-number">2</span>^i&lt;&lt;<span class="code-number">3</span>^i&lt;&lt;<span class="code-number">4</span>)&gt;&gt;<span class="code-number">8</span>^<span class="code-number">255</span>&amp;a^<span class="code-number">99</span>,h[t]=a,c[a]=t,o=<span class="code-number">16843009</span>*f[r=f[n=f[t]]]^<span class="code-number">65537</span>*r^<span class="code-number">257</span>*n^<span class="code-number">16843008</span>*t,s=<span class="code-number">257</span>*f[a]^<span class="code-number">16843008</span>*a,e=<span class="code-number">0</span>;e&lt;<span class="code-number">4</span>;e++)d[e][t]=s=s&lt;&lt;<span class="code-number">24</span>^s&gt;&gt;&gt;<span class="code-number">8</span>,l[e][a]=o=o&lt;&lt;<span class="code-number">24</span>^o&gt;&gt;&gt;<span class="code-number">8</span>;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-number">5</span>;e++)d[e]=d[e].slice(<span class="code-number">0</span>),l[e]=l[e].slice(<span class="code-number">0</span>);<span class="code-keyword">return</span> u}()),<span class="code-keyword">this</span>._tables=[[n[<span class="code-number">0</span>][<span class="code-number">0</span>].slice(),n[<span class="code-number">0</span>][<span class="code-number">1</span>].slice(),n[<span class="code-number">0</span>][<span class="code-number">2</span>].slice(),n[<span class="code-number">0</span>][<span class="code-number">3</span>].slice(),n[<span class="code-number">0</span>][<span class="code-number">4</span>].slice()],[n[<span class="code-number">1</span>][<span class="code-number">0</span>].slice(),n[<span class="code-number">1</span>][<span class="code-number">1</span>].slice(),n[<span class="code-number">1</span>][<span class="code-number">2</span>].slice(),n[<span class="code-number">1</span>][<span class="code-number">3</span>].slice(),n[<span class="code-number">1</span>][<span class="code-number">4</span>].slice()]];<span class="code-keyword">var</span> a=<span class="code-keyword">this</span>._tables[<span class="code-number">0</span>][<span class="code-number">4</span>],s=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],o=e.length,u=<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-number">4</span>!==o&amp;&amp;<span class="code-number">6</span>!==o&amp;&amp;<span class="code-number">8</span>!==o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Invalid aes key size"</span>);<span class="code-keyword">var</span> d=e.slice(<span class="code-number">0</span>),l=[];<span class="code-keyword">for</span>(<span class="code-keyword">this</span>._key=[d,l],t=o;t&lt;<span class="code-number">4</span>*o+<span class="code-number">28</span>;t++)r=d[t<span class="code-number">-1</span>],(t%o==<span class="code-number">0</span>||<span class="code-number">8</span>===o&amp;&amp;t%o==<span class="code-number">4</span>)&amp;&amp;(r=a[r&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^a[r&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^a[r&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^a[<span class="code-number">255</span>&amp;r],t%o==<span class="code-number">0</span>&amp;&amp;(r=r&lt;&lt;<span class="code-number">8</span>^r&gt;&gt;&gt;<span class="code-number">24</span>^u&lt;&lt;<span class="code-number">24</span>,u=u&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(u&gt;&gt;<span class="code-number">7</span>))),d[t]=d[t-o]^r;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;t;i++,t--)r=d[<span class="code-number">3</span>&amp;i?t:t<span class="code-number">-4</span>],l[i]=t&lt;=<span class="code-number">4</span>||i&lt;<span class="code-number">4</span>?r:s[<span class="code-number">0</span>][a[r&gt;&gt;&gt;<span class="code-number">24</span>]]^s[<span class="code-number">1</span>][a[r&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]]^s[<span class="code-number">2</span>][a[r&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]]^s[<span class="code-number">3</span>][a[<span class="code-number">255</span>&amp;r]]}<span class="code-keyword">return</span> e.prototype.decrypt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s,o,u,d,l=<span class="code-keyword">this</span>._key[<span class="code-number">1</span>],h=e^l[<span class="code-number">0</span>],c=n^l[<span class="code-number">1</span>],f=i^l[<span class="code-number">2</span>],m=t^l[<span class="code-number">3</span>],p=l.length/<span class="code-number">4</span><span class="code-number">-2</span>,g=<span class="code-number">4</span>,y=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],v=y[<span class="code-number">0</span>],_=y[<span class="code-number">1</span>],b=y[<span class="code-number">2</span>],T=y[<span class="code-number">3</span>],S=y[<span class="code-number">4</span>];<span class="code-keyword">for</span>(d=<span class="code-number">0</span>;d&lt;p;d++)s=v[h&gt;&gt;&gt;<span class="code-number">24</span>]^_[c&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[f&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;m]^l[g],o=v[c&gt;&gt;&gt;<span class="code-number">24</span>]^_[f&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[m&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;h]^l[g+<span class="code-number">1</span>],u=v[f&gt;&gt;&gt;<span class="code-number">24</span>]^_[m&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[h&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;c]^l[g+<span class="code-number">2</span>],m=v[m&gt;&gt;&gt;<span class="code-number">24</span>]^_[h&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^b[c&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^T[<span class="code-number">255</span>&amp;f]^l[g+<span class="code-number">3</span>],g+=<span class="code-number">4</span>,h=s,c=o,f=u;<span class="code-keyword">for</span>(d=<span class="code-number">0</span>;d&lt;<span class="code-number">4</span>;d++)r[(<span class="code-number">3</span>&amp;-d)+a]=S[h&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^S[c&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^S[f&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^S[<span class="code-number">255</span>&amp;m]^l[g++],s=h,h=c,c=f,f=m,m=s},e}(),a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">i</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=e.call(<span class="code-keyword">this</span>,t)||<span class="code-keyword">this</span>).jobs=[],i.delay=<span class="code-number">1</span>,i.timeout_=<span class="code-literal">null</span>,i}<span class="code-keyword">var</span> n,r;r=e,(n=i).prototype=<span class="code-built_in">Object</span>.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;<span class="code-keyword">var</span> a=i.prototype;<span class="code-keyword">return</span> a.processJob_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.jobs.shift()(),<span class="code-keyword">this</span>.jobs.length?<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay):<span class="code-keyword">this</span>.timeout_=<span class="code-literal">null</span>},a.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.jobs.push(e),<span class="code-keyword">this</span>.timeout_||(<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay))},i}(t),s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&lt;&lt;<span class="code-number">24</span>|(<span class="code-number">65280</span>&amp;e)&lt;&lt;<span class="code-number">8</span>|(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">8</span>|e&gt;&gt;&gt;<span class="code-number">24</span>},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">e,i,n,r</span>)</span>{<span class="code-keyword">var</span> o=t.STEP,u=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(e.buffer),d=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.byteLength),l=<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.asyncStream_=<span class="code-keyword">new</span> a,<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(u.subarray(l,l+o),i,n,d)),l=o;l&lt;u.length;l+=o)n=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([s(u[l<span class="code-number">-4</span>]),s(u[l<span class="code-number">-3</span>]),s(u[l<span class="code-number">-2</span>]),s(u[l<span class="code-number">-1</span>])]),<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(u.subarray(l,l+o),i,n,d));<span class="code-keyword">this</span>.asyncStream_.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{
</code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code><span class="code-comment">/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L7" class="css-a4x74f"><span>7</span></td><td id="LC7" class="css-1dcdqdg"><code><span class="code-keyword">var</span> e;
</code></td></tr><tr><td id="L8" class="css-a4x74f"><span>8</span></td><td id="LC8" class="css-1dcdqdg"><code><span class="code-comment">/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */</span>r(<span class="code-literal">null</span>,(e=d).subarray(<span class="code-number">0</span>,e.byteLength-e[e.byteLength<span class="code-number">-1</span>]))}))}<span class="code-keyword">return</span> t.prototype.decryptChunk_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,a,o,u,d,l,h,c,f,m=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class="code-number">2</span>),p=<span class="code-keyword">new</span> r(<span class="code-built_in">Array</span>.prototype.slice.call(t)),g=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.byteLength),y=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(g.buffer);<span class="code-keyword">for</span>(n=i[<span class="code-number">0</span>],a=i[<span class="code-number">1</span>],o=i[<span class="code-number">2</span>],u=i[<span class="code-number">3</span>],f=<span class="code-number">0</span>;f&lt;m.length;f+=<span class="code-number">4</span>)d=s(m[f]),l=s(m[f+<span class="code-number">1</span>]),h=s(m[f+<span class="code-number">2</span>]),c=s(m[f+<span class="code-number">3</span>]),p.decrypt(d,l,h,c,y,f),y[f]=s(y[f]^n),y[f+<span class="code-number">1</span>]=s(y[f+<span class="code-number">1</span>]^a),y[f+<span class="code-number">2</span>]=s(y[f+<span class="code-number">2</span>]^o),y[f+<span class="code-number">3</span>]=s(y[f+<span class="code-number">3</span>]^u),n=d,a=l,o=h,u=c;<span class="code-keyword">return</span> g}(e,t,i);n.set(a,e.byteOffset)}},i=t,o=[{<span class="code-attr">key</span>:<span class="code-string">"STEP"</span>,<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32e3</span>}}],(n=<span class="code-literal">null</span>)&amp;&amp;e(i.prototype,n),o&amp;&amp;e(i,o),t;<span class="code-keyword">var</span> i,n,o}();<span class="code-keyword">new</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.data,n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.key.bytes,i.key.byteOffset,i.key.byteLength/<span class="code-number">4</span>),a=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/<span class="code-number">4</span>);<span class="code-keyword">new</span> o(n,r,a,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,n</span>)</span>{<span class="code-keyword">var</span> r,a;e.postMessage((r={<span class="code-attr">source</span>:i.source,<span class="code-attr">decrypted</span>:n},a={},<span class="code-built_in">Object</span>.keys(r).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=r[e];<span class="code-built_in">ArrayBuffer</span>.isView(t)?a[e]={<span class="code-attr">bytes</span>:t.buffer,<span class="code-attr">byteOffset</span>:t.byteOffset,<span class="code-attr">byteLength</span>:t.byteLength}:a[e]=t})),a),[n.buffer])}))}}(i)}()})),qn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.default?<span class="code-string">"main"</span>:<span class="code-string">"alternative"</span>;<span class="code-keyword">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class="code-string">"public.accessibility.describes-video"</span>)&gt;=<span class="code-number">0</span>&amp;&amp;(t=<span class="code-string">"main-desc"</span>),t},Wn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class="code-literal">null</span>)},Vn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Hn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Wn(i,n);<span class="code-keyword">var</span> a=n.activeTrack(),s=n.activeGroup(),o=(s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default}))[<span class="code-number">0</span>]||s[<span class="code-number">0</span>]).id,d=n.tracks[o];<span class="code-keyword">if</span>(a!==d){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> l <span class="code-keyword">in</span> u.default.log.warn(<span class="code-string">"Problem encountered loading the alternate audio track.Switching back to default."</span>),n.tracks)n.tracks[l].enabled=n.tracks[l]===d;n.onTrackChanged()}<span class="code-keyword">else</span> r({<span class="code-attr">message</span>:<span class="code-string">"Problem encountered loading the default audio track."</span>})}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e];u.default.log.warn(<span class="code-string">"Problem encountered loading the subtitle track.Disabling subtitle track."</span>),Wn(i,n);<span class="code-keyword">var</span> r=n.activeTrack();r&amp;&amp;(r.mode=<span class="code-string">"disabled"</span>),n.onTrackChanged()}}},Gn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class="code-string">"error"</span>,Hn[e](e,i))}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class="code-string">"error"</span>,Hn[e](e,i))}},jn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.vhs,n=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master,o=s.mediaGroups,d=s.playlists,l=t.mediaTypes[e],h=l.groups,c=l.tracks,f=t.masterPlaylistLoader;o[e]&amp;&amp;<span class="code-number">0</span>!==<span class="code-built_in">Object</span>.keys(o[e]).length||(o[e]={<span class="code-attr">main</span>:{<span class="code-attr">default</span>:{<span class="code-attr">default</span>:!<span class="code-number">0</span>}}});<span class="code-keyword">var</span> m=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">r</span>)</span>{h[r]||(h[r]=[]);<span class="code-keyword">var</span> s=d.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> t.attributes[e]===r})),l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">d</span>)</span>{<span class="code-keyword">var</span> l=o[e][r][d];!s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.resolvedUri!==l.resolvedUri})).length&amp;&amp;s.length&amp;&amp;<span class="code-keyword">delete</span> l.resolvedUri;<span class="code-keyword">var</span> m;<span class="code-keyword">if</span>(m=<span class="code-string">"vhs-json"</span>===n&amp;&amp;l.playlists?<span class="code-keyword">new</span> x(l.playlists[<span class="code-number">0</span>],i,a):l.resolvedUri?<span class="code-keyword">new</span> x(l.resolvedUri,i,a):l.playlists&amp;&amp;<span class="code-string">"dash"</span>===n?<span class="code-keyword">new</span> Ct(l.playlists[<span class="code-number">0</span>],i,a,f):<span class="code-literal">null</span>,l=u.default.mergeOptions({<span class="code-attr">id</span>:d,<span class="code-attr">playlistLoader</span>:m},l),Gn[e](e,l.playlistLoader,t),h[r].push(l),<span class="code-keyword">void</span> <span class="code-number">0</span>===c[d]){<span class="code-keyword">var</span> p=<span class="code-keyword">new</span> u.default.AudioTrack({<span class="code-attr">id</span>:d,<span class="code-attr">kind</span>:qn(l),<span class="code-attr">enabled</span>:!<span class="code-number">1</span>,<span class="code-attr">language</span>:l.language,<span class="code-attr">default</span>:l.default,<span class="code-attr">label</span>:d});c[d]=p}};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> m <span class="code-keyword">in</span> o[e][r])l(m)};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> p <span class="code-keyword">in</span> o[e])m(p);r.on(<span class="code-string">"error"</span>,Hn[e](e,t))},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.tech,n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,h=d.tracks,c=t.masterPlaylistLoader;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f <span class="code-keyword">in</span> o[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> m <span class="code-keyword">in</span> l[f]||(l[f]=[]),o[e][f])<span class="code-keyword">if</span>(!o[e][f][m].forced){<span class="code-keyword">var</span> p=o[e][f][m],g=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"hls"</span>===r)g=<span class="code-keyword">new</span> x(p.resolvedUri,n,s);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-string">"dash"</span>===r){<span class="code-keyword">if</span>(!p.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil!==<span class="code-number">1</span>/<span class="code-number">0</span>})).length)<span class="code-keyword">return</span>;g=<span class="code-keyword">new</span> Ct(p.playlists[<span class="code-number">0</span>],n,s,c)}<span class="code-keyword">else</span><span class="code-string">"vhs-json"</span>===r&amp;&amp;(g=<span class="code-keyword">new</span> x(p.playlists?p.playlists[<span class="code-number">0</span>]:p.resolvedUri,n,s));<span class="code-keyword">if</span>(p=u.default.mergeOptions({<span class="code-attr">id</span>:m,<span class="code-attr">playlistLoader</span>:g},p),Gn[e](e,p.playlistLoader,t),l[f].push(p),<span class="code-keyword">void</span> <span class="code-number">0</span>===h[m]){<span class="code-keyword">var</span> y=i.addRemoteTextTrack({<span class="code-attr">id</span>:m,<span class="code-attr">kind</span>:<span class="code-string">"subtitles"</span>,<span class="code-attr">default</span>:p.default&amp;&amp;p.autoselect,<span class="code-attr">language</span>:p.language,<span class="code-attr">label</span>:m},!<span class="code-number">1</span>).track;h[m]=y}}a.on(<span class="code-string">"error"</span>,Hn[e](e,t))},<span class="code-string">"CLOSED-CAPTIONS"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o <span class="code-keyword">in</span> n[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d <span class="code-keyword">in</span> a[o]||(a[o]=[]),n[e][o]){<span class="code-keyword">var</span> l=n[e][o][d];<span class="code-keyword">if</span>(l.instreamId.match(<span class="code-regexp">/CC\d/</span>)&amp;&amp;(a[o].push(u.default.mergeOptions({<span class="code-attr">id</span>:d},l)),<span class="code-keyword">void</span> <span class="code-number">0</span>===s[d])){<span class="code-keyword">var</span> h=i.addRemoteTextTrack({<span class="code-attr">id</span>:l.instreamId,<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">default</span>:l.default&amp;&amp;l.autoselect,<span class="code-attr">language</span>:l.language,<span class="code-attr">label</span>:d},!<span class="code-number">1</span>).track;s[d]=h}}}},zn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(i[n].enabled)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(<span class="code-string">"showing"</span>===i[n].mode||<span class="code-string">"hidden"</span>===i[n].mode)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}}},Xn=[<span class="code-string">"mediaRequests"</span>,<span class="code-string">"mediaRequestsAborted"</span>,<span class="code-string">"mediaRequestsTimedout"</span>,<span class="code-string">"mediaRequestsErrored"</span>,<span class="code-string">"mediaTransferDuration"</span>,<span class="code-string">"mediaBytesTransferred"</span>],Qn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.audioSegmentLoader_[e]+<span class="code-keyword">this</span>.mainSegmentLoader_[e]},Yn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>;<span class="code-keyword">var</span> n=t.src,r=t.handleManifestRedirects,a=t.withCredentials,s=t.tech,l=t.bandwidth,h=t.externVhs,c=t.useCueTags,f=t.blacklistDuration,m=t.enableLowInitialPlaylist,p=t.sourceType,g=t.cacheEncryptionKeys,y=t.handlePartialData,v=t.experimentalBufferBasedABR;<span class="code-keyword">if</span>(!n)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or JSON manifest string is required"</span>);mn=h,i.experimentalBufferBasedABR=<span class="code-built_in">Boolean</span>(v),i.withCredentials=a,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=p,i.useCueTags_=c,i.blacklistDuration=f,i.enableLowInitialPlaylist=m,i.useCueTags_&amp;&amp;(i.cueTagsTrack_=i.tech_.addTextTrack(<span class="code-string">"metadata"</span>,<span class="code-string">"ad-cues"</span>),i.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class="code-string">""</span>),i.requestOptions_={<span class="code-attr">withCredentials</span>:a,<span class="code-attr">handleManifestRedirects</span>:r,<span class="code-attr">timeout</span>:<span class="code-literal">null</span>},i.on(<span class="code-string">"error"</span>,i.pauseLoading),i.mediaTypes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">return</span>[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]={<span class="code-attr">groups</span>:{},<span class="code-attr">tracks</span>:{},<span class="code-attr">activePlaylistLoader</span>:<span class="code-literal">null</span>,<span class="code-attr">activeGroup</span>:fn,<span class="code-attr">activeTrack</span>:fn,<span class="code-attr">onGroupChanged</span>:fn,<span class="code-attr">onTrackChanged</span>:fn}})),e}(),i.mediaSource=<span class="code-keyword">new</span> o.default.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(d(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(d(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(d(i)),i.mediaSource.addEventListener(<span class="code-string">"durationchange"</span>,i.handleDurationChange_),i.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,i.handleSourceOpen_),i.mediaSource.addEventListener(<span class="code-string">"sourceended"</span>,i.handleSourceEnded_),i.seekable_=u.default.createTimeRanges(),i.hasPlayed_=!<span class="code-number">1</span>,i.syncController_=<span class="code-keyword">new</span> Bn(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"segment-metadata"</span>},!<span class="code-number">1</span>).track,i.decrypter_=<span class="code-keyword">new</span> Nn,i.sourceUpdater_=<span class="code-keyword">new</span> Un(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=<span class="code-keyword">new</span> Fn;<span class="code-keyword">var</span> _={<span class="code-attr">vhs</span>:i.vhs_,<span class="code-attr">parse708captions</span>:t.parse708captions,<span class="code-attr">mediaSource</span>:i.mediaSource,<span class="code-attr">currentTime</span>:i.tech_.currentTime.bind(i.tech_),<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.seekable()},<span class="code-attr">seeking</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.seeking()},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.duration()},<span class="code-attr">hasPlayed</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.hasPlayed_},<span class="code-attr">goalBufferLength</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.goalBufferLength()},<span class="code-attr">bandwidth</span>:l,<span class="code-attr">syncController</span>:i.syncController_,<span class="code-attr">decrypter</span>:i.decrypter_,<span class="code-attr">sourceType</span>:i.sourceType_,<span class="code-attr">inbandTextTracks</span>:i.inbandTextTracks_,<span class="code-attr">cacheEncryptionKeys</span>:g,<span class="code-attr">handlePartialData</span>:y,<span class="code-attr">sourceUpdater</span>:i.sourceUpdater_,<span class="code-attr">timelineChangeController</span>:i.timelineChangeController_};<span class="code-keyword">return</span> i.masterPlaylistLoader_=<span class="code-string">"dash"</span>===i.sourceType_?<span class="code-keyword">new</span> Ct(n,i.vhs_,i.requestOptions_):<span class="code-keyword">new</span> x(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=<span class="code-keyword">new</span> cn(u.default.mergeOptions(_,{<span class="code-attr">segmentMetadataTrack</span>:i.segmentMetadataTrack_,<span class="code-attr">loaderType</span>:<span class="code-string">"main"</span>}),t),i.audioSegmentLoader_=<span class="code-keyword">new</span> cn(u.default.mergeOptions(_,{<span class="code-attr">loaderType</span>:<span class="code-string">"audio"</span>}),t),i.subtitleSegmentLoader_=<span class="code-keyword">new</span> xn(u.default.mergeOptions(_,{<span class="code-attr">loaderType</span>:<span class="code-string">"vtt"</span>,<span class="code-attr">featuresNativeTextTracks</span>:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&amp;&amp;(i.masterPlaylistLoader_.one(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.startABRTimer_()})),i.tech_.on(<span class="code-string">"pause"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.stopABRTimer_()})),i.tech_.on(<span class="code-string">"play"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.startABRTimer_()}))),Xn.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i[e+<span class="code-string">"_"</span>]=Qn.bind(d(i),e)})),i.logger_=ji(<span class="code-string">"MPC"</span>),i.triggeredFmp4Usage=!<span class="code-number">1</span>,i.masterPlaylistLoader_.load(),i}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.checkABR_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.selectPlaylist();<span class="code-keyword">this</span>.shouldSwitchToMedia_(e)&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e)},i.startABRTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.abrTimer_=o.default.setInterval((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.checkABR_()}),<span class="code-number">250</span>)},i.stopABRTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.scrubbing&amp;&amp;<span class="code-keyword">this</span>.tech_.scrubbing()||(o.default.clearInterval(<span class="code-keyword">this</span>.abrTimer_),<span class="code-keyword">this</span>.abrTimer_=<span class="code-literal">null</span>)},i.setupMasterPlaylistLoaderListeners_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media(),i=<span class="code-number">1.5</span>*t.targetDuration*<span class="code-number">1e3</span>;J(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=i,t.endList&amp;&amp;<span class="code-string">"none"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{jn[t](t,e)}));<span class="code-keyword">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs;[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t[i].activeGroup=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> s=<span class="code-literal">null</span>;<span class="code-keyword">return</span> a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]),s=s||r.main,<span class="code-keyword">void</span> <span class="code-number">0</span>===i?s:<span class="code-literal">null</span>===i?<span class="code-literal">null</span>:s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.id===i.id}))[<span class="code-number">0</span>]||<span class="code-literal">null</span>}}(i,e),t[i].activeTrack=zn[i](i,e),t[i].onGroupChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;Wn(n,a),o&amp;&amp;(o.playlistLoader?(n.resyncLoader(),Vn(o.playlistLoader,a)):u&amp;&amp;r.resetEverything())}}(i,e),t[i].onGroupChanging=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e];i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;<span class="code-keyword">if</span>(Wn(n,a),o){<span class="code-keyword">if</span>(<span class="code-string">"AUDIO"</span>===e){<span class="code-keyword">if</span>(!o.playlistLoader)<span class="code-keyword">return</span> r.setAudio(!<span class="code-number">0</span>),<span class="code-keyword">void</span> r.resetEverything();n.setAudio(!<span class="code-number">0</span>),r.setAudio(!<span class="code-number">1</span>)}u!==o.playlistLoader?(n.track&amp;&amp;n.track(s),n.resetEverything(),Vn(o.playlistLoader,a)):Vn(o.playlistLoader,a)}}}(i,e)}));<span class="code-keyword">var</span> a=t.AUDIO.activeGroup();<span class="code-keyword">if</span>(a){<span class="code-keyword">var</span> s=(a.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default}))[<span class="code-number">0</span>]||a[<span class="code-number">0</span>]).id;t.AUDIO.tracks[s].enabled=!<span class="code-number">0</span>,t.AUDIO.onTrackChanged()}i.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e].onGroupChanged()}))})),i.on(<span class="code-string">"mediachanging"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e].onGroupChanging()}))}));<span class="code-keyword">var</span> o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-audio-change"</span>}),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-audio-change"</span>})};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> n.audioTracks().addEventListener(<span class="code-string">"change"</span>,o),n.remoteTextTracks().addEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class="code-string">"dispose"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.audioTracks().removeEventListener(<span class="code-string">"change"</span>,o),n.remoteTextTracks().removeEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged)})),n.clearTracks(<span class="code-string">"audio"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])}({<span class="code-attr">sourceType</span>:e.sourceType_,<span class="code-attr">segmentLoaders</span>:{<span class="code-attr">AUDIO</span>:e.audioSegmentLoader_,<span class="code-attr">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class="code-attr">main</span>:e.mainSegmentLoader_},<span class="code-attr">tech</span>:e.tech_,<span class="code-attr">requestOptions</span>:e.requestOptions_,<span class="code-attr">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class="code-attr">vhs</span>:e.vhs_,<span class="code-attr">master</span>:e.master(),<span class="code-attr">mediaTypes</span>:e.mediaTypes_,<span class="code-attr">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class="code-string">"selectedinitialmedia"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"selectedinitialmedia"</span>)}))})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!t){<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(e.initialMedia_=i,e.masterPlaylistLoader_.media(e.initialMedia_),<span class="code-string">"vhs-json"</span>!==e.sourceType_||!e.initialMedia_.segments)<span class="code-keyword">return</span>;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachanging"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media(),i=<span class="code-number">1.5</span>*t.targetDuration*<span class="code-number">1e3</span>;J(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"mediachange"</span>,<span class="code-attr">bubbles</span>:!<span class="code-number">0</span>})})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"playlistunchanged"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Playlist no longer updating."</span>}),e.tech_.trigger(<span class="code-string">"playliststuck"</span>))})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditiondisabled"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-disabled"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-disabled"</span>})})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditionenabled"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-enabled"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-enabled"</span>})}))},i.handleUpdatedMediaPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.useCueTags_&amp;&amp;<span class="code-keyword">this</span>.updateAdCues_(e),<span class="code-keyword">this</span>.mainSegmentLoader_.playlist(e,<span class="code-keyword">this</span>.requestOptions_),<span class="code-keyword">this</span>.updateDuration(!e.endList),<span class="code-keyword">this</span>.tech_.paused()||(<span class="code-keyword">this</span>.mainSegmentLoader_.load(),<span class="code-keyword">this</span>.audioSegmentLoader_&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.load())},i.triggerPresenceUsage_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaGroups||{},n=!<span class="code-number">0</span>,r=<span class="code-built_in">Object</span>.keys(i.AUDIO);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> i.AUDIO)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s <span class="code-keyword">in</span> i.AUDIO[a])i.AUDIO[a][s].uri||(n=!<span class="code-number">1</span>);n&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-demuxed"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-demuxed"</span>})),<span class="code-built_in">Object</span>.keys(i.SUBTITLES).length&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-webvtt"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-webvtt"</span>})),mn.Playlist.isAes(t)&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-aes"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-aes"</span>})),r.length&amp;&amp;<span class="code-built_in">Object</span>.keys(i.AUDIO[r[<span class="code-number">0</span>]]).length&gt;<span class="code-number">1</span>&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-alternate-audio"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-alternate-audio"</span>})),<span class="code-keyword">this</span>.useCueTags_&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-playlist-cue-tags"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-playlist-cue-tags"</span>}))},i.shouldSwitchToMedia_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media(),i=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,s=e.duration,o=e.experimentalBufferBasedABR,d=e.log;<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"We received no playlist to switch to. Please check your stream."</span>),!<span class="code-number">1</span>;<span class="code-keyword">var</span> l=<span class="code-string">"allowing switch "</span>+(t&amp;&amp;t.id||<span class="code-string">"null"</span>)+<span class="code-string">" -&gt; "</span>+i.id;<span class="code-keyword">if</span>(!t||!t.endList)<span class="code-keyword">return</span> d(l+<span class="code-string">" as current playlist "</span>+(t?<span class="code-string">"is live"</span>:<span class="code-string">"is not set"</span>)),!<span class="code-number">0</span>;<span class="code-keyword">if</span>(i.id===t.id)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> h=o?Ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ut.MAX_BUFFER_LOW_WATER_LINE;<span class="code-keyword">if</span>(s&lt;h)<span class="code-keyword">return</span> d(l+<span class="code-string">" as duration &lt; max low water line ("</span>+s+<span class="code-string">" &lt; "</span>+h+<span class="code-string">")"</span>),!<span class="code-number">0</span>;<span class="code-keyword">var</span> c=i.attributes.BANDWIDTH,f=t.attributes.BANDWIDTH;<span class="code-keyword">if</span>(c&lt;f&amp;&amp;(!o||n&lt;a)){<span class="code-keyword">var</span> m=l+<span class="code-string">" as next bandwidth &lt; current bandwidth ("</span>+c+<span class="code-string">" &lt; "</span>+f+<span class="code-string">")"</span>;<span class="code-keyword">return</span> o&amp;&amp;(m+=<span class="code-string">" and forwardBuffer &lt; bufferHighWaterLine ("</span>+n+<span class="code-string">" &lt; "</span>+a+<span class="code-string">")"</span>),d(m),!<span class="code-number">0</span>}<span class="code-keyword">if</span>((!o||c&gt;f)&amp;&amp;n&gt;=r){<span class="code-keyword">var</span> p=l+<span class="code-string">" as forwardBuffer &gt;= bufferLowWaterLine ("</span>+n+<span class="code-string">" &gt;= "</span>+r+<span class="code-string">")"</span>;<span class="code-keyword">return</span> o&amp;&amp;(p+=<span class="code-string">" and next bandwidth &gt; current bandwidth ("</span>+c+<span class="code-string">" &gt; "</span>+f+<span class="code-string">")"</span>),d(p),!<span class="code-number">0</span>}<span class="code-keyword">return</span> d(<span class="code-string">"not "</span>+l+<span class="code-string">" as no switching criteria met"</span>),!<span class="code-number">1</span>}({<span class="code-attr">currentPlaylist</span>:t,<span class="code-attr">nextPlaylist</span>:e,<span class="code-attr">forwardBuffer</span>:i.length?i.end(i.length<span class="code-number">-1</span>)-<span class="code-keyword">this</span>.tech_.currentTime():<span class="code-number">0</span>,<span class="code-attr">bufferLowWaterLine</span>:<span class="code-keyword">this</span>.bufferLowWaterLine(),<span class="code-attr">bufferHighWaterLine</span>:<span class="code-keyword">this</span>.bufferHighWaterLine(),<span class="code-attr">duration</span>:<span class="code-keyword">this</span>.duration(),<span class="code-attr">experimentalBufferBasedABR</span>:<span class="code-keyword">this</span>.experimentalBufferBasedABR,<span class="code-attr">log</span>:<span class="code-keyword">this</span>.logger_})},i.setupSegmentLoaderListeners_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.experimentalBufferBasedABR||(<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"bandwidthupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&amp;&amp;e.masterPlaylistLoader_.media(t),e.tech_.trigger(<span class="code-string">"bandwidthupdate"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"progress"</span>)}))),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"appenderror"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.error=e.mainSegmentLoader_.error_,e.trigger(<span class="code-string">"error"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"timestampoffset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-timestamp-offset"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-timestamp-offset"</span>})})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"appenderror"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.error=e.audioSegmentLoader_.error_,e.trigger(<span class="code-string">"error"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"ended"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"main segment loader ended"</span>),e.onEndOfStream()})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"earlyabort"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.experimentalBufferBasedABR||(e.delegateLoaders_(<span class="code-string">"all"</span>,[<span class="code-string">"abort"</span>]),e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."</span>},<span class="code-number">120</span>))}));<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!e.sourceUpdater_.hasCreatedSourceBuffers())<span class="code-keyword">return</span> e.tryToCreateSourceBuffers_();<span class="code-keyword">var</span> t=e.getCodecsOrExclude_();t&amp;&amp;e.sourceUpdater_.addOrChangeSourceBuffers(t)};<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"trackinfo"</span>,t),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"trackinfo"</span>,t),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"fmp4"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-fmp4"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-fmp4"</span>}),e.triggeredFmp4Usage=!<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"fmp4"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-fmp4"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-fmp4"</span>}),e.triggeredFmp4Usage=!<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"ended"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"audioSegmentLoader ended"</span>),e.onEndOfStream()}))},i.mediaSecondsLoaded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(<span class="code-keyword">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class="code-keyword">this</span>.mainSegmentLoader_.mediaSecondsLoaded)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mainSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.subtitleSegmentLoader_.load()},i.smoothQualityChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.selectPlaylist()),e!==<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e),<span class="code-keyword">this</span>.mainSegmentLoader_.resetLoader())},i.fastQualityChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.selectPlaylist()),e!==<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e),<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{u.default.browser.IE_VERSION||u.default.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+<span class="code-number">.04</span>):t.tech_.setCurrentTime(t.tech_.currentTime())})))},i.play=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.setupFirstPlay()){<span class="code-keyword">this</span>.tech_.ended()&amp;&amp;<span class="code-keyword">this</span>.tech_.setCurrentTime(<span class="code-number">0</span>),<span class="code-keyword">this</span>.hasPlayed_&amp;&amp;<span class="code-keyword">this</span>.load();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.seekable();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.duration()===<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.tech_.currentTime()&lt;e.start(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.tech_.setCurrentTime(e.end(e.length<span class="code-number">-1</span>)):<span class="code-keyword">void</span> <span class="code-number">0</span>}},i.setupFirstPlay=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!t||<span class="code-keyword">this</span>.tech_.paused()||<span class="code-keyword">this</span>.hasPlayed_)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!t.endList){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.seekable();<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(u.default.browser.IE_VERSION&amp;&amp;<span class="code-number">0</span>===<span class="code-keyword">this</span>.tech_.readyState())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.one(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"firstplay"</span>),e.tech_.setCurrentTime(i.end(<span class="code-number">0</span>)),e.hasPlayed_=!<span class="code-number">0</span>})),!<span class="code-number">1</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"firstplay"</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(i.end(<span class="code-number">0</span>))}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.hasPlayed_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.load(),!<span class="code-number">0</span>},i.handleSourceOpen_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tryToCreateSourceBuffers_(),<span class="code-keyword">this</span>.tech_.autoplay()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.play();<span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.then&amp;&amp;e.then(<span class="code-literal">null</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{}))}<span class="code-keyword">this</span>.trigger(<span class="code-string">"sourceopen"</span>)},i.handleSourceEnded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.inbandTextTracks_.metadataTrack_){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.inbandTextTracks_.metadataTrack_.cues;<span class="code-keyword">if</span>(e&amp;&amp;e.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.duration();e[e.length<span class="code-number">-1</span>].endTime=<span class="code-built_in">isNaN</span>(t)||<span class="code-built_in">Math</span>.abs(t)===<span class="code-number">1</span>/<span class="code-number">0</span>?<span class="code-built_in">Number</span>.MAX_VALUE:t}}},i.handleDurationChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"durationchange"</span>)},i.onEndOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.mainSegmentLoader_.ended_;<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(e=!<span class="code-keyword">this</span>.mainSegmentLoader_.currentMediaInfo_||<span class="code-keyword">this</span>.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.ended_:<span class="code-keyword">this</span>.audioSegmentLoader_.ended_),e&amp;&amp;(<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.seekable().length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.syncController_.getExpiredTime(e,<span class="code-keyword">this</span>.duration());<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=mn.Playlist.playlistEnd(e,t),n=<span class="code-keyword">this</span>.tech_.currentTime(),r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(!r.length)<span class="code-keyword">return</span> i-n&lt;=M;<span class="code-keyword">var</span> a=r.end(r.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> a-n&lt;=M&amp;&amp;i-a&lt;=M},i.blacklistCurrentPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e={});<span class="code-keyword">var</span> i=e.playlist||<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(t=t||e.blacklistDuration||<span class="code-keyword">this</span>.blacklistDuration,!i)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error=e,<span class="code-keyword">void</span>(<span class="code-string">"open"</span>!==<span class="code-keyword">this</span>.mediaSource.readyState?<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>):<span class="code-keyword">this</span>.sourceUpdater_.endOfStream(<span class="code-string">"network"</span>));<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists,r=n.filter(K),a=<span class="code-number">1</span>===r.length&amp;&amp;r[<span class="code-number">0</span>]===i;<span class="code-keyword">if</span>(<span class="code-number">1</span>===n.length&amp;&amp;t!==<span class="code-number">1</span>/<span class="code-number">0</span>)<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"Problem encountered with playlist "</span>+i.id+<span class="code-string">". Trying again since it is the only playlist."</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>),<span class="code-keyword">this</span>.masterPlaylistLoader_.load(a);<span class="code-keyword">if</span>(a){<span class="code-keyword">var</span> s=!<span class="code-number">1</span>;n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e!==i){<span class="code-keyword">var</span> t=e.excludeUntil;<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;(s=!<span class="code-number">0</span>,<span class="code-keyword">delete</span> e.excludeUntil)}})),s&amp;&amp;(u.default.log.warn(<span class="code-string">"Removing other playlists from the exclusion list because the last rendition is about to be excluded."</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>))}i.excludeUntil=<span class="code-built_in">Date</span>.now()+<span class="code-number">1e3</span>*t,<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"blacklistplaylist"</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-blacklisted"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-blacklisted"</span>});<span class="code-keyword">var</span> o=<span class="code-keyword">this</span>.selectPlaylist();<span class="code-keyword">if</span>(!o)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error=<span class="code-string">"Playback cannot continue. No available working or supported playlists."</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">var</span> d=e.internal?<span class="code-keyword">this</span>.logger_:u.default.log.warn,l=e.message?<span class="code-string">" "</span>+e.message:<span class="code-string">""</span>;d((e.internal?<span class="code-string">"Internal problem"</span>:<span class="code-string">"Problem"</span>)+<span class="code-string">" encountered with playlist "</span>+i.id+<span class="code-string">"."</span>+l+<span class="code-string">" Switching to playlist "</span>+o.id+<span class="code-string">"."</span>),o.attributes.AUDIO!==i.attributes.AUDIO&amp;&amp;<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"audio"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),o.attributes.SUBTITLES!==i.attributes.SUBTITLES&amp;&amp;<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"subtitle"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"main"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]);<span class="code-keyword">var</span> h=o.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>||<span class="code-number">5e3</span>,c=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> o.lastRequest&amp;&amp;<span class="code-built_in">Date</span>.now()-o.lastRequest&lt;=h;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.media(o,a||c)},i.pauseLoading=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"all"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),<span class="code-keyword">this</span>.stopABRTimer_()},i.delegateLoaders_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=[],r=<span class="code-string">"all"</span>===e;(r||<span class="code-string">"main"</span>===e)&amp;&amp;n.push(<span class="code-keyword">this</span>.masterPlaylistLoader_);<span class="code-keyword">var</span> a=[];(r||<span class="code-string">"audio"</span>===e)&amp;&amp;a.push(<span class="code-string">"AUDIO"</span>),(r||<span class="code-string">"subtitle"</span>===e)&amp;&amp;(a.push(<span class="code-string">"CLOSED-CAPTIONS"</span>),a.push(<span class="code-string">"SUBTITLES"</span>)),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.mediaTypes_[e]&amp;&amp;i.mediaTypes_[e].activePlaylistLoader;t&amp;&amp;n.push(t)})),[<span class="code-string">"main"</span>,<span class="code-string">"audio"</span>,<span class="code-string">"subtitle"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> r=i[t+<span class="code-string">"SegmentLoader_"</span>];!r||e!==t&amp;&amp;<span class="code-string">"all"</span>!==e||n.push(r)})),n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e[t]&amp;&amp;e[t]()}))}))},i.setCurrentTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=F(<span class="code-keyword">this</span>.tech_.buffered(),e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.mainSegmentLoader_.abort(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.audioSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.audioSegmentLoader_.abort()),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.subtitleSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.abort()),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.load()):<span class="code-number">0</span>},i.duration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.masterPlaylistLoader_)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">return</span> e?e.endList?<span class="code-keyword">this</span>.mediaSource?<span class="code-keyword">this</span>.mediaSource.duration:mn.Playlist.duration(e):<span class="code-number">1</span>/<span class="code-number">0</span>:<span class="code-number">0</span>},i.seekable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.seekable_},i.onSyncInfoUpdate_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.masterPlaylistLoader_){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.syncController_.getExpiredTime(t,<span class="code-keyword">this</span>.duration());<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==i){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.suggestedPresentationDelay,r=mn.Playlist.seekable(t,i,n);<span class="code-keyword">if</span>(<span class="code-number">0</span>!==r.length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class="code-keyword">if</span>(t=<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class="code-literal">null</span>===(i=<span class="code-keyword">this</span>.syncController_.getExpiredTime(t,<span class="code-keyword">this</span>.duration())))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(e=mn.Playlist.seekable(t,i,n)).length)<span class="code-keyword">return</span>}<span class="code-keyword">var</span> a,s;<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;(a=<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>),s=<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)),e?e.start(<span class="code-number">0</span>)&gt;r.end(<span class="code-number">0</span>)||r.start(<span class="code-number">0</span>)&gt;e.end(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.seekable_=r:<span class="code-keyword">this</span>.seekable_=u.default.createTimeRanges([[e.start(<span class="code-number">0</span>)&gt;r.start(<span class="code-number">0</span>)?e.start(<span class="code-number">0</span>):r.start(<span class="code-number">0</span>),e.end(<span class="code-number">0</span>)&lt;r.end(<span class="code-number">0</span>)?e.end(<span class="code-number">0</span>):r.end(<span class="code-number">0</span>)]]):<span class="code-keyword">this</span>.seekable_=r,<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>)===a&amp;&amp;<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)===s||(<span class="code-keyword">this</span>.logger_(<span class="code-string">"seekable updated ["</span>+q(<span class="code-keyword">this</span>.seekable_)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"seekablechanged"</span>))}}}}},i.updateDuration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateDuration_&amp;&amp;(<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_),<span class="code-keyword">this</span>.updateDuration_=<span class="code-literal">null</span>),<span class="code-string">"open"</span>!==<span class="code-keyword">this</span>.mediaSource.readyState)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.updateDuration_=<span class="code-keyword">this</span>.updateDuration.bind(<span class="code-keyword">this</span>,e),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_);<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.seekable();<span class="code-keyword">if</span>(!t.length)<span class="code-keyword">return</span>;(<span class="code-built_in">isNaN</span>(<span class="code-keyword">this</span>.mediaSource.duration)||<span class="code-keyword">this</span>.mediaSource.duration&lt;t.end(t.length<span class="code-number">-1</span>))&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.setDuration(t.end(t.length<span class="code-number">-1</span>))}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.tech_.buffered(),n=mn.Playlist.duration(<span class="code-keyword">this</span>.masterPlaylistLoader_.media());i.length&gt;<span class="code-number">0</span>&amp;&amp;(n=<span class="code-built_in">Math</span>.max(n,i.end(i.length<span class="code-number">-1</span>))),<span class="code-keyword">this</span>.mediaSource.duration!==n&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.setDuration(n)}},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.decrypter_.terminate(),<span class="code-keyword">this</span>.masterPlaylistLoader_.dispose(),<span class="code-keyword">this</span>.mainSegmentLoader_.dispose(),[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaTypes_[t].groups;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)i[n].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()}))})),<span class="code-keyword">this</span>.audioSegmentLoader_.dispose(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.dispose(),<span class="code-keyword">this</span>.sourceUpdater_.dispose(),<span class="code-keyword">this</span>.timelineChangeController_.dispose(),<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.updateDuration_&amp;&amp;<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"durationchange"</span>,<span class="code-keyword">this</span>.handleDurationChange_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.handleSourceOpen_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceended"</span>,<span class="code-keyword">this</span>.handleSourceEnded_),<span class="code-keyword">this</span>.off()},i.master=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.master},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.media()||<span class="code-keyword">this</span>.initialMedia_},i.areMediaTypesKnown_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=!!<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class="code-keyword">return</span>!(!<span class="code-keyword">this</span>.mainSegmentLoader_.currentMediaInfo_||e&amp;&amp;!<span class="code-keyword">this</span>.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t={<span class="code-attr">main</span>:<span class="code-keyword">this</span>.mainSegmentLoader_.currentMediaInfo_||{},<span class="code-attr">audio</span>:<span class="code-keyword">this</span>.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;<span class="code-keyword">var</span> i=Ki(<span class="code-keyword">this</span>.master(),<span class="code-keyword">this</span>.media()),n={},r=!!<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class="code-keyword">if</span>(t.main.hasVideo&amp;&amp;(n.video=i.video||t.main.videoCodec||<span class="code-string">"avc1.4d400d"</span>),t.main.isMuxed&amp;&amp;(n.video+=<span class="code-string">","</span>+(i.audio||t.main.audioCodec||Gi)),(t.main.hasAudio&amp;&amp;!t.main.isMuxed||t.audio.hasAudio||r)&amp;&amp;(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||Gi,t.audio.isFmp4=t.main.hasAudio&amp;&amp;!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){<span class="code-keyword">var</span> a,s={};<span class="code-keyword">if</span>([<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(n.hasOwnProperty(e)&amp;&amp;(r=t[e].isFmp4,o=n[e],!(r?Vi(o):Hi(o)))){<span class="code-keyword">var</span> i=t[e].isFmp4?<span class="code-string">"browser"</span>:<span class="code-string">"muxer"</span>;s[i]=s[i]||[],s[i].push(n[e]),<span class="code-string">"audio"</span>===e&amp;&amp;(a=i)}<span class="code-keyword">var</span> r,o})),r&amp;&amp;a&amp;&amp;<span class="code-keyword">this</span>.media().attributes.AUDIO){<span class="code-keyword">var</span> o=<span class="code-keyword">this</span>.media().attributes.AUDIO;<span class="code-keyword">this</span>.master().playlists.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{(t.attributes&amp;&amp;t.attributes.AUDIO)===o&amp;&amp;t!==e.media()&amp;&amp;(t.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.logger_(<span class="code-string">"excluding audio group "</span>+o+<span class="code-string">" as "</span>+a+<span class="code-string">' does not support codec(s): "'</span>+n.audio+<span class="code-string">'"'</span>)}<span class="code-keyword">if</span>(!<span class="code-built_in">Object</span>.keys(s).length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;!<span class="code-keyword">this</span>.sourceUpdater_.canChangeType()){<span class="code-keyword">var</span> u=[];<span class="code-keyword">if</span>([<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=(Ni(e.sourceUpdater_.codecs[t]||<span class="code-string">""</span>)[<span class="code-number">0</span>]||{}).type,r=(Ni(n[t]||<span class="code-string">""</span>)[<span class="code-number">0</span>]||{}).type;i&amp;&amp;r&amp;&amp;i.toLowerCase()!==r.toLowerCase()&amp;&amp;u.push(<span class="code-string">'"'</span>+e.sourceUpdater_.codecs[t]+<span class="code-string">'" -&gt; "'</span>+n[t]+<span class="code-string">'"'</span>)})),u.length)<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">message</span>:<span class="code-string">"Codec switching not supported: "</span>+u.join(<span class="code-string">", "</span>)+<span class="code-string">"."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">internal</span>:!<span class="code-number">0</span>})}<span class="code-keyword">return</span> n}<span class="code-keyword">var</span> d=<span class="code-built_in">Object</span>.keys(s).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;(e+=<span class="code-string">", "</span>),e+(t+<span class="code-string">' does not support codec(s): "'</span>)+s[t].join(<span class="code-string">","</span>)+<span class="code-string">'"'</span>}),<span class="code-string">""</span>)+<span class="code-string">"."</span>;<span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">message</span>:d,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">message</span>:<span class="code-string">"Could not determine codecs for playlist."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>})},i.tryToCreateSourceBuffers_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===<span class="code-keyword">this</span>.mediaSource.readyState&amp;&amp;!<span class="code-keyword">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;<span class="code-keyword">this</span>.areMediaTypesKnown_()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.getCodecsOrExclude_();<span class="code-keyword">if</span>(e){<span class="code-keyword">this</span>.sourceUpdater_.createSourceBuffers(e);<span class="code-keyword">var</span> t=[e.video,e.audio].filter(<span class="code-built_in">Boolean</span>).join(<span class="code-string">","</span>);<span class="code-keyword">this</span>.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.master().playlists,i=[];<span class="code-built_in">Object</span>.keys(t).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=t[n];<span class="code-keyword">if</span>(<span class="code-number">-1</span>===i.indexOf(r.id)){i.push(r.id);<span class="code-keyword">var</span> a=Ki(e.master,r),s=[];!a.audio||Hi(a.audio)||Vi(a.audio)||s.push(<span class="code-string">"audio codec "</span>+a.audio),!a.video||Hi(a.video)||Vi(a.video)||s.push(<span class="code-string">"video codec "</span>+a.video),a.text&amp;&amp;<span class="code-string">"stpp.ttml.im1t"</span>===a.text&amp;&amp;s.push(<span class="code-string">"text codec "</span>+a.text),s.length&amp;&amp;(r.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>,e.logger_(<span class="code-string">"excluding "</span>+r.id+<span class="code-string">" for unsupported: "</span>+s.join(<span class="code-string">", "</span>)))}}))},i.excludeIncompatibleVariants_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=[],n=<span class="code-keyword">this</span>.master().playlists,r=Qi(Ni(e)),a=Yi(r),s=r.video&amp;&amp;Ni(r.video)[<span class="code-number">0</span>]||<span class="code-literal">null</span>,o=r.audio&amp;&amp;Ni(r.audio)[<span class="code-number">0</span>]||<span class="code-literal">null</span>;<span class="code-built_in">Object</span>.keys(n).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r=n[e];<span class="code-keyword">if</span>(<span class="code-number">-1</span>===i.indexOf(r.id)&amp;&amp;r.excludeUntil!==<span class="code-number">1</span>/<span class="code-number">0</span>){i.push(r.id);<span class="code-keyword">var</span> u=[],d=Ki(t.masterPlaylistLoader_.master,r),l=Yi(d);<span class="code-keyword">if</span>(d.audio||d.video){<span class="code-keyword">if</span>(l!==a&amp;&amp;u.push(<span class="code-string">'codec count "'</span>+l+<span class="code-string">'" !== "'</span>+a+<span class="code-string">'"'</span>),!t.sourceUpdater_.canChangeType()){<span class="code-keyword">var</span> h=d.video&amp;&amp;Ni(d.video)[<span class="code-number">0</span>]||<span class="code-literal">null</span>,c=d.audio&amp;&amp;Ni(d.audio)[<span class="code-number">0</span>]||<span class="code-literal">null</span>;h&amp;&amp;s&amp;&amp;h.type.toLowerCase()!==s.type.toLowerCase()&amp;&amp;u.push(<span class="code-string">'video codec "'</span>+h.type+<span class="code-string">'" !== "'</span>+s.type+<span class="code-string">'"'</span>),c&amp;&amp;o&amp;&amp;c.type.toLowerCase()!==o.type.toLowerCase()&amp;&amp;u.push(<span class="code-string">'audio codec "'</span>+c.type+<span class="code-string">'" !== "'</span>+o.type+<span class="code-string">'"'</span>)}u.length&amp;&amp;(r.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>,t.logger_(<span class="code-string">"blacklisting "</span>+r.id+<span class="code-string">": "</span>+u.join(<span class="code-string">" &amp;&amp; "</span>)))}}}))},i.updateAdCues_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i=<span class="code-keyword">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class="code-number">0</span>)),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">0</span>),e.segments)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r=i,a=<span class="code-number">0</span>;a&lt;e.segments.length;a++){<span class="code-keyword">var</span> s=e.segments[a];<span class="code-keyword">if</span>(n||(n=Rn(t,r+s.duration/<span class="code-number">2</span>)),n){<span class="code-keyword">if</span>(<span class="code-string">"cueIn"</span><span class="code-keyword">in</span> s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=<span class="code-literal">null</span>;<span class="code-keyword">continue</span>}<span class="code-keyword">if</span>(r&lt;n.endTime){r+=s.duration;<span class="code-keyword">continue</span>}n.endTime+=s.duration}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-string">"cueOut"</span><span class="code-keyword">in</span> s&amp;&amp;((n=<span class="code-keyword">new</span> o.default.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+<span class="code-built_in">parseFloat</span>(s.cueOut),t.addCue(n)),<span class="code-string">"cueOutCont"</span><span class="code-keyword">in</span> s){<span class="code-keyword">var</span> u=s.cueOutCont.split(<span class="code-string">"/"</span>).map(<span class="code-built_in">parseFloat</span>),d=u[<span class="code-number">0</span>],l=u[<span class="code-number">1</span>];(n=<span class="code-keyword">new</span> o.default.VTTCue(r,r+s.duration,<span class="code-string">""</span>)).adStartTime=r-d,n.adEndTime=n.adStartTime+l,t.addCue(n)}r+=s.duration}}(e,<span class="code-keyword">this</span>.cueTagsTrack_,t)},i.goalBufferLength=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=Ut.GOAL_BUFFER_LENGTH,i=Ut.GOAL_BUFFER_LENGTH_RATE,n=<span class="code-built_in">Math</span>.max(t,Ut.MAX_GOAL_BUFFER_LENGTH);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,n)},i.bufferLowWaterLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=Ut.BUFFER_LOW_WATER_LINE,i=Ut.BUFFER_LOW_WATER_LINE_RATE,n=<span class="code-built_in">Math</span>.max(t,Ut.MAX_BUFFER_LOW_WATER_LINE),r=<span class="code-built_in">Math</span>.max(t,Ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,<span class="code-keyword">this</span>.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> Ut.BUFFER_HIGH_WATER_LINE},t}(u.default.EventTarget),Kn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?<span class="code-string">"smooth"</span>:<span class="code-string">"fast"</span>)+<span class="code-string">"QualityChange_"</span>].bind(s);<span class="code-keyword">if</span>(t.attributes.RESOLUTION){<span class="code-keyword">var</span> u=t.attributes.RESOLUTION;<span class="code-keyword">this</span>.width=u.width,<span class="code-keyword">this</span>.height=u.height}<span class="code-keyword">this</span>.bandwidth=t.attributes.BANDWIDTH,<span class="code-keyword">this</span>.codecs=Ki(s.master(),t),<span class="code-keyword">this</span>.playlist=t,<span class="code-keyword">this</span>.id=i,<span class="code-keyword">this</span>.enabled=(n=e.playlists,r=t.id,a=o,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=n.master.playlists[r],i=Y(t),s=K(t);<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e?s:(e?<span class="code-keyword">delete</span> t.disabled:t.disabled=!<span class="code-number">0</span>,e===s||i||(a(),e?n.trigger(<span class="code-string">"renditionenabled"</span>):n.trigger(<span class="code-string">"renditiondisabled"</span>)),e)})},$n=[<span class="code-string">"seeking"</span>,<span class="code-string">"seeked"</span>,<span class="code-string">"pause"</span>,<span class="code-string">"playing"</span>,<span class="code-string">"error"</span>],Jn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.masterPlaylistController_=e.masterPlaylistController,<span class="code-keyword">this</span>.tech_=e.tech,<span class="code-keyword">this</span>.seekable=e.seekable,<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,<span class="code-keyword">this</span>.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,<span class="code-keyword">this</span>.media=e.media,<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.logger_=ji(<span class="code-string">"PlaybackWatcher"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"initialize"</span>);<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.monitorCurrentTime_()},n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.techWaiting_()},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.cancelTimer_()},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.fixesBadSeeks_()},s=<span class="code-keyword">this</span>.masterPlaylistController_,u=[<span class="code-string">"main"</span>,<span class="code-string">"subtitle"</span>,<span class="code-string">"audio"</span>],d={};u.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{d[e]={<span class="code-attr">reset</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.resetSegmentDownloads_(e)},<span class="code-attr">updateend</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.checkSegmentDownloads_(e)}},s[e+<span class="code-string">"SegmentLoader_"</span>].on(<span class="code-string">"appendsdone"</span>,d[e].updateend),s[e+<span class="code-string">"SegmentLoader_"</span>].on(<span class="code-string">"playlistupdate"</span>,d[e].reset),t.tech_.on([<span class="code-string">"seeked"</span>,<span class="code-string">"seeking"</span>],d[e].reset)})),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"seekablechanged"</span>,a),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"waiting"</span>,n),<span class="code-keyword">this</span>.tech_.on($n,r),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"canplay"</span>,i),<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.logger_(<span class="code-string">"dispose"</span>),t.tech_.off(<span class="code-string">"seekablechanged"</span>,a),t.tech_.off(<span class="code-string">"waiting"</span>,n),t.tech_.off($n,r),t.tech_.off(<span class="code-string">"canplay"</span>,i),u.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s[e+<span class="code-string">"SegmentLoader_"</span>].off(<span class="code-string">"appendsdone"</span>,d[e].updateend),s[e+<span class="code-string">"SegmentLoader_"</span>].off(<span class="code-string">"playlistupdate"</span>,d[e].reset),t.tech_.off([<span class="code-string">"seeked"</span>,<span class="code-string">"seeking"</span>],d[e].reset)})),t.checkCurrentTimeTimeout_&amp;&amp;o.default.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.monitorCurrentTime_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkCurrentTime_(),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_&amp;&amp;o.default.clearTimeout(<span class="code-keyword">this</span>.checkCurrentTimeTimeout_),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=o.default.setTimeout(<span class="code-keyword">this</span>.monitorCurrentTime_.bind(<span class="code-keyword">this</span>),<span class="code-number">250</span>)},t.resetSegmentDownloads_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistController_[e+<span class="code-string">"SegmentLoader_"</span>];<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.logger_(<span class="code-string">"resetting possible stalled download count for "</span>+e+<span class="code-string">" loader"</span>),<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]=<span class="code-number">0</span>,<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>]=t.buffered_()},t.checkSegmentDownloads_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistController_,i=t[e+<span class="code-string">"SegmentLoader_"</span>],n=i.buffered_(),r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e===t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!e&amp;&amp;t||!t&amp;&amp;e)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.length!==t.length)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">if</span>(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}(<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>],n);<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>]=n,r?<span class="code-keyword">this</span>.resetSegmentDownloads_(e):(<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]++,<span class="code-keyword">this</span>.logger_(<span class="code-string">"found #"</span>+<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]+<span class="code-string">" "</span>+e+<span class="code-string">" appends that did not increase buffer (possible stalled download)"</span>,{<span class="code-attr">playlistId</span>:i.playlist_&amp;&amp;i.playlist_.id,<span class="code-attr">buffered</span>:W(n)}),<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]&lt;<span class="code-number">10</span>||(<span class="code-keyword">this</span>.logger_(e+<span class="code-string">" loader stalled download exclusion"</span>),<span class="code-keyword">this</span>.resetSegmentDownloads_(e),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-"</span>+e+<span class="code-string">"-download-exclusion"</span>}),<span class="code-string">"subtitle"</span>!==e&amp;&amp;t.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Excessive "</span>+e+<span class="code-string">" segment downloading detected."</span>},<span class="code-number">1</span>/<span class="code-number">0</span>)))},t.checkCurrentTime_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()&amp;&amp;<span class="code-keyword">this</span>.fixesBadSeeks_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.lastRecordedTime=<span class="code-keyword">this</span>.tech_.currentTime());<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.paused()&amp;&amp;!<span class="code-keyword">this</span>.tech_.seeking()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+M&gt;=t.end(t.length<span class="code-number">-1</span>)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.techWaiting_();<span class="code-keyword">this</span>.consecutiveUpdates&gt;=<span class="code-number">5</span>&amp;&amp;e===<span class="code-keyword">this</span>.lastRecordedTime?(<span class="code-keyword">this</span>.consecutiveUpdates++,<span class="code-keyword">this</span>.waiting_()):e===<span class="code-keyword">this</span>.lastRecordedTime?<span class="code-keyword">this</span>.consecutiveUpdates++:(<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=e)}},t.cancelTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.timer_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"cancelTimer_"</span>),clearTimeout(<span class="code-keyword">this</span>.timer_)),<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>},t.fixesBadSeeks_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.seeking())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>.seekable(),i=<span class="code-keyword">this</span>.tech_.currentTime();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.afterSeekableWindow_(t,i,<span class="code-keyword">this</span>.media(),<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(e=t.end(t.length<span class="code-number">-1</span>)),<span class="code-keyword">this</span>.beforeSeekableWindow_(t,i)){<span class="code-keyword">var</span> n=t.start(<span class="code-number">0</span>);e=n+(n===t.end(<span class="code-number">0</span>)?<span class="code-number">0</span>:M)}<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Trying to seek outside of seekable at time "</span>+i+<span class="code-string">" with seekable range "</span>+q(t)+<span class="code-string">". Seeking to "</span>+e+<span class="code-string">"."</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),!<span class="code-number">0</span>;<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">return</span>!!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.buffered,i=e.targetDuration,n=e.currentTime;<span class="code-keyword">return</span>!(!t.length||t.end(<span class="code-number">0</span>)-t.start(<span class="code-number">0</span>)&lt;<span class="code-number">2</span>*i||n&gt;t.start(<span class="code-number">0</span>)||!(t.start(<span class="code-number">0</span>)-n&lt;i))}({<span class="code-attr">buffered</span>:r,<span class="code-attr">targetDuration</span>:<span class="code-keyword">this</span>.media().targetDuration,<span class="code-attr">currentTime</span>:i})&amp;&amp;(e=r.start(<span class="code-number">0</span>)+M,<span class="code-keyword">this</span>.logger_(<span class="code-string">"Buffered region starts ("</span>+r.start(<span class="code-number">0</span>)+<span class="code-string">")  just beyond seek point ("</span>+i+<span class="code-string">"). Seeking to "</span>+e+<span class="code-string">"."</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),!<span class="code-number">0</span>)},t.waiting_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.techWaiting_()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered(),i=F(t,e);<span class="code-keyword">return</span> i.length&amp;&amp;e+<span class="code-number">3</span>&lt;=i.end(<span class="code-number">0</span>)?(<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),<span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+e+<span class="code-string">" while inside a buffered region ["</span>+i.start(<span class="code-number">0</span>)+<span class="code-string">" -&gt; "</span>+i.end(<span class="code-number">0</span>)+<span class="code-string">"]. Attempting to resume playback by seeking to the current time."</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-unknown-waiting"</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-unknown-waiting"</span>})):<span class="code-keyword">void</span> <span class="code-number">0</span>}},t.techWaiting_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.seekable(),t=<span class="code-keyword">this</span>.tech_.currentTime();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()&amp;&amp;<span class="code-keyword">this</span>.fixesBadSeeks_())<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()||<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.timer_)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.beforeSeekableWindow_(e,t)){<span class="code-keyword">var</span> i=e.end(e.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Fell out of live window at time "</span>+t+<span class="code-string">". Seeking to live point (seekable end) "</span>+i),<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(i),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-live-resync"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-live-resync"</span>}),!<span class="code-number">0</span>}<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoUnderflow_({<span class="code-attr">audioBuffered</span>:n.audioBuffered(),<span class="code-attr">videoBuffered</span>:n.videoBuffered(),<span class="code-attr">currentTime</span>:t}))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(t),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-video-underflow"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-video-underflow"</span>}),!<span class="code-number">0</span>;<span class="code-keyword">var</span> a=N(r,t);<span class="code-keyword">if</span>(a.length&gt;<span class="code-number">0</span>){<span class="code-keyword">var</span> s=a.start(<span class="code-number">0</span>)-t;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+t+<span class="code-string">", setting timer for "</span>+s+<span class="code-string">", seeking to "</span>+a.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.timer_=setTimeout(<span class="code-keyword">this</span>.skipTheGap_.bind(<span class="code-keyword">this</span>),<span class="code-number">1e3</span>*s,t),!<span class="code-number">0</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>},t.afterSeekableWindow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>),!e.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> r=e.end(e.length<span class="code-number">-1</span>)+M;<span class="code-keyword">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class="code-number">-1</span>)+<span class="code-number">3</span>*i.targetDuration),t&gt;r},t.beforeSeekableWindow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!!(e.length&amp;&amp;e.start(<span class="code-number">0</span>)&gt;<span class="code-number">0</span>&amp;&amp;t&lt;e.start(<span class="code-number">0</span>)-<span class="code-keyword">this</span>.liveRangeSafeTimeDelta)},t.videoUnderflow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> r;<span class="code-keyword">if</span>(t.length&amp;&amp;i.length){<span class="code-keyword">var</span> a=F(t,n<span class="code-number">-3</span>),s=F(t,n),o=F(i,n);o.length&amp;&amp;!s.length&amp;&amp;a.length&amp;&amp;(r={<span class="code-attr">start</span>:a.end(<span class="code-number">0</span>),<span class="code-attr">end</span>:o.end(<span class="code-number">0</span>)})}<span class="code-keyword">else</span> N(t,n).length||(r=<span class="code-keyword">this</span>.gapFromVideoUnderflow_(t,n));<span class="code-keyword">return</span>!!r&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"Encountered a gap in video from "</span>+r.start+<span class="code-string">" to "</span>+r.end+<span class="code-string">". Seeking to current time "</span>+n),!<span class="code-number">0</span>)}},t.skipTheGap_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.tech_.buffered(),i=<span class="code-keyword">this</span>.tech_.currentTime(),n=N(t,i);<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-number">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"skipTheGap_:"</span>,<span class="code-string">"currentTime:"</span>,i,<span class="code-string">"scheduled currentTime:"</span>,e,<span class="code-string">"nextRange start:"</span>,n.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.tech_.setCurrentTime(n.start(<span class="code-number">0</span>)+R),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-gap-skip"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-gap-skip"</span>}))},t.gapFromVideoUnderflow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.length&lt;<span class="code-number">2</span>)<span class="code-keyword">return</span> u.default.createTimeRanges();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">1</span>;i&lt;e.length;i++){<span class="code-keyword">var</span> n=e.end(i<span class="code-number">-1</span>),r=e.start(i);t.push([n,r])}<span class="code-keyword">return</span> u.default.createTimeRanges(t)}(e),n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> r=i.start(n),a=i.end(n);<span class="code-keyword">if</span>(t-r&lt;<span class="code-number">4</span>&amp;&amp;t-r&gt;<span class="code-number">2</span>)<span class="code-keyword">return</span>{<span class="code-attr">start</span>:r,<span class="code-attr">end</span>:a}}<span class="code-keyword">return</span> <span class="code-literal">null</span>},e}(),Zn={<span class="code-attr">errorInterval</span>:<span class="code-number">30</span>,<span class="code-attr">getSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e(<span class="code-keyword">this</span>.tech({<span class="code-attr">IWillNotUseThisInPlugins</span>:!<span class="code-number">0</span>}).currentSource_||<span class="code-keyword">this</span>.currentSource())}},er=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=u.default.mergeOptions(Zn,i);t.ready((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload-initialized"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-initialized"</span>})}));<span class="code-keyword">var</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r&amp;&amp;t.currentTime(r)},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-literal">null</span>!=e&amp;&amp;(r=t.duration()!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;t.currentTime()||<span class="code-number">0</span>,t.one(<span class="code-string">"loadedmetadata"</span>,s),t.src(e),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload"</span>}),t.play())},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Date</span>.now()-n&lt;<span class="code-number">1e3</span>*a.errorInterval?(t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload-canceled"</span>}),<span class="code-keyword">void</span> t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-canceled"</span>})):a.getSource&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> a.getSource?(n=<span class="code-built_in">Date</span>.now(),a.getSource.call(t,o)):<span class="code-keyword">void</span> u.default.log.error(<span class="code-string">"ERROR: reloadSourceOnError - The option getSource must be a function!"</span>)},l=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{t.off(<span class="code-string">"loadedmetadata"</span>,s),t.off(<span class="code-string">"error"</span>,d),t.off(<span class="code-string">"dispose"</span>,e)};t.on(<span class="code-string">"error"</span>,d),t.on(<span class="code-string">"dispose"</span>,l),t.reloadSourceOnError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{l(),e(t,i)}},tr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{er(<span class="code-keyword">this</span>,e)},ir=<span class="code-string">"2.5.0"</span>,nr={<span class="code-attr">PlaylistLoader</span>:x,<span class="code-attr">Playlist</span>:Z,<span class="code-attr">utils</span>:pe,<span class="code-attr">STANDARD_PLAYLIST_SELECTOR</span>:rn,<span class="code-attr">INITIAL_PLAYLIST_SELECTOR</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.playlists.master.playlists.filter(Z.isEnabled);<span class="code-keyword">return</span> en(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> tn(e,t)})),t.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span>!!Ki(e.playlists.master,t).video}))[<span class="code-number">0</span>]||<span class="code-literal">null</span>},<span class="code-attr">lastBandwidthSelector</span>:rn,<span class="code-attr">movingAverageBandwidthSelector</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">-1</span>;<span class="code-keyword">if</span>(e&lt;<span class="code-number">0</span>||e&gt;<span class="code-number">1</span>)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Moving average bandwidth decay must be between 0 and 1."</span>);<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.useDevicePixelRatio&amp;&amp;o.default.devicePixelRatio||<span class="code-number">1</span>;<span class="code-keyword">return</span> t&lt;<span class="code-number">0</span>&amp;&amp;(t=<span class="code-keyword">this</span>.systemBandwidth),t=e*<span class="code-keyword">this</span>.systemBandwidth+(<span class="code-number">1</span>-e)*t,nn(<span class="code-keyword">this</span>.playlists.master,t,<span class="code-built_in">parseInt</span>(Zi(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"width"</span>),<span class="code-number">10</span>)*i,<span class="code-built_in">parseInt</span>(Zi(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"height"</span>),<span class="code-number">10</span>)*i,<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions)}},<span class="code-attr">comparePlaylistBandwidth</span>:tn,<span class="code-attr">comparePlaylistResolution</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||o.default.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||o.default.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class="code-attr">xhr</span>:ne()};<span class="code-built_in">Object</span>.keys(Ut).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperty(nr,e,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"using Vhs."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),Ut[e]},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{u.default.log.warn(<span class="code-string">"using Vhs."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t||t&lt;<span class="code-number">0</span>?u.default.log.warn(<span class="code-string">"value of Vhs."</span>+e+<span class="code-string">" must be greater than or equal to 0"</span>):Ut[e]=t}})}));<span class="code-keyword">var</span> rr=<span class="code-string">"videojs-vhs"</span>,ar=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.media(),n=<span class="code-number">-1</span>,r=<span class="code-number">0</span>;r&lt;e.length;r++)<span class="code-keyword">if</span>(e[r].id===i.id){n=r;<span class="code-keyword">break</span>}e.selectedIndex_=n,e.trigger({<span class="code-attr">selectedIndex</span>:n,<span class="code-attr">type</span>:<span class="code-string">"change"</span>})};nr.canPlaySource=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> sr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n={<span class="code-attr">video</span>:t&amp;&amp;t.attributes&amp;&amp;t.attributes.CODECS,<span class="code-attr">audio</span>:i&amp;&amp;i.attributes&amp;&amp;i.attributes.CODECS};!n.audio&amp;&amp;n.video&amp;&amp;n.video.split(<span class="code-string">","</span>).length&gt;<span class="code-number">1</span>&amp;&amp;n.video.split(<span class="code-string">","</span>).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=e.trim(),qi(e)?n.audio=e:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),Ri.video.test(e.trim().toLowerCase())}(e)&amp;&amp;(n.video=e)}));<span class="code-keyword">var</span> r=n.video?<span class="code-string">'video/mp4;codecs="'</span>+n.video+<span class="code-string">'"'</span>:<span class="code-literal">null</span>,a=n.audio?<span class="code-string">'audio/mp4;codecs="'</span>+n.audio+<span class="code-string">'"'</span>:<span class="code-literal">null</span>,s={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o <span class="code-keyword">in</span> e)s[o]={<span class="code-attr">audioContentType</span>:a,<span class="code-attr">videoContentType</span>:r},t.contentProtection&amp;&amp;t.contentProtection[o]&amp;&amp;t.contentProtection[o].pssh&amp;&amp;(s[o].pssh=t.contentProtection[o].pssh),<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e[o]&amp;&amp;(s[o].url=e[o]);<span class="code-keyword">return</span> u.default.mergeOptions(e,s)},or=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">if</span>(!i.contentProtection)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> n=i.contentProtection[t];<span class="code-keyword">return</span> n&amp;&amp;n.pssh&amp;&amp;(e[t]={<span class="code-attr">pssh</span>:n.pssh}),e}),{});<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(n).length&amp;&amp;e.push(n),e}),[])},ur=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;<span class="code-keyword">if</span>(!t.eme.initializeMediaKeys)<span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.resolve();<span class="code-keyword">var</span> a=n?r.concat([n]):r,s=or(a,<span class="code-built_in">Object</span>.keys(i)),o=[],u=[];<span class="code-keyword">return</span> s.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{u.push(<span class="code-keyword">new</span> <span class="code-built_in">Promise</span>((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{t.tech_.one(<span class="code-string">"keysessioncreated"</span>,e)}))),o.push(<span class="code-keyword">new</span> <span class="code-built_in">Promise</span>((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{t.eme.initializeMediaKeys({<span class="code-attr">keySystems</span>:e},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e?n(e):i()}))})))})),<span class="code-built_in">Promise</span>.race([<span class="code-built_in">Promise</span>.all(o),<span class="code-built_in">Promise</span>.race(u)])},dr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.player,i=e.sourceKeySystems,n=e.media,r=e.audioMedia,a=sr(i,n,r);<span class="code-keyword">return</span>!(!a||(t.currentSource().keySystems=a,a&amp;&amp;!t.eme&amp;&amp;(u.default.log.warn(<span class="code-string">"DRM encrypted source cannot be decrypted without a DRM plugin"</span>),<span class="code-number">1</span>)))},lr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!o.default.localStorage)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> e=o.default.localStorage.getItem(rr);<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">try</span>{<span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.parse(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}},hr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">0</span>===e.toLowerCase().indexOf(<span class="code-string">"data:application/vnd.videojs.vhs+json,"</span>)?<span class="code-built_in">JSON</span>.parse(e.substring(e.indexOf(<span class="code-string">","</span>)+<span class="code-number">1</span>)):e};nr.supportsNativeHls=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!s.default||!s.default.createElement)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e=s.default.createElement(<span class="code-string">"video"</span>);<span class="code-keyword">return</span>!!u.default.getTech(<span class="code-string">"Html5"</span>).isSupported()&amp;&amp;[<span class="code-string">"application/vnd.apple.mpegurl"</span>,<span class="code-string">"audio/mpegurl"</span>,<span class="code-string">"audio/x-mpegurl"</span>,<span class="code-string">"application/x-mpegurl"</span>,<span class="code-string">"video/x-mpegurl"</span>,<span class="code-string">"video/mpegurl"</span>,<span class="code-string">"application/mpegurl"</span>].some((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/maybe|probably/i</span>.test(e.canPlayType(t))}))}(),nr.supportsNativeDash=!!(s.default&amp;&amp;s.default.createElement&amp;&amp;u.default.getTech(<span class="code-string">"Html5"</span>).isSupported())&amp;&amp;<span class="code-regexp">/maybe|probably/i</span>.test(s.default.createElement(<span class="code-string">"video"</span>).canPlayType(<span class="code-string">"application/dash+xml"</span>)),nr.supportsTypeNatively=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"hls"</span>===e?nr.supportsNativeHls:<span class="code-string">"dash"</span>===e&amp;&amp;nr.supportsNativeDash},nr.isSupported=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> cr=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> r;<span class="code-keyword">if</span>(r=e.call(<span class="code-keyword">this</span>,i,u.default.mergeOptions(n.hls,n.vhs))||<span class="code-keyword">this</span>,n.hls&amp;&amp;<span class="code-built_in">Object</span>.keys(n.hls).length&amp;&amp;u.default.log.warn(<span class="code-string">"Using hls options is deprecated. Use vhs instead."</span>),r.logger_=ji(<span class="code-string">"VhsHandler"</span>),i.options_&amp;&amp;i.options_.playerId){<span class="code-keyword">var</span> a=u.default(i.options_.playerId);a.hasOwnProperty(<span class="code-string">"hls"</span>)||<span class="code-built_in">Object</span>.defineProperty(a,<span class="code-string">"hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"player.hls is deprecated. Use player.tech().vhs instead."</span>),i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-player-access"</span>}),d(r)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),a.hasOwnProperty(<span class="code-string">"vhs"</span>)||<span class="code-built_in">Object</span>.defineProperty(a,<span class="code-string">"vhs"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"player.vhs is deprecated. Use player.tech().vhs instead."</span>),i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-player-access"</span>}),d(r)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),a.hasOwnProperty(<span class="code-string">"dash"</span>)||<span class="code-built_in">Object</span>.defineProperty(a,<span class="code-string">"dash"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"player.dash is deprecated. Use player.tech().vhs instead."</span>),d(r)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),r.player_=a}<span class="code-keyword">if</span>(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!<span class="code-number">1</span>,r.setOptions_(),r.options_.overrideNative&amp;&amp;i.overrideNativeAudioTracks&amp;&amp;i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!<span class="code-number">0</span>),i.overrideNativeVideoTracks(!<span class="code-number">0</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(r.options_.overrideNative&amp;&amp;(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB"</span>);<span class="code-keyword">return</span> r.on(s.default,[<span class="code-string">"fullscreenchange"</span>,<span class="code-string">"webkitfullscreenchange"</span>,<span class="code-string">"mozfullscreenchange"</span>,<span class="code-string">"MSFullscreenChange"</span>],(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=s.default.fullscreenElement||s.default.webkitFullscreenElement||s.default.mozFullScreenElement||s.default.msFullscreenElement;t&amp;&amp;t.contains(r.tech_.el())&amp;&amp;r.masterPlaylistController_.smoothQualityChange_()})),r.on(r.tech_,<span class="code-string">"seeking"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ignoreNextSeekingEvent_?<span class="code-keyword">this</span>.ignoreNextSeekingEvent_=!<span class="code-number">1</span>:<span class="code-keyword">this</span>.setCurrentTime(<span class="code-keyword">this</span>.tech_.currentTime())})),r.on(r.tech_,<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.error()&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,<span class="code-string">"play"</span>,r.play),r}l(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.setOptions_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.options_.withCredentials=<span class="code-keyword">this</span>.options_.withCredentials||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.handleManifestRedirects=!<span class="code-number">1</span>!==<span class="code-keyword">this</span>.options_.handleManifestRedirects,<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions=!<span class="code-number">1</span>!==<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.options_.useDevicePixelRatio=<span class="code-keyword">this</span>.options_.useDevicePixelRatio||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.smoothQualityChange=<span class="code-keyword">this</span>.options_.smoothQualityChange||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage=<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage?<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage:<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.customTagParsers=<span class="code-keyword">this</span>.options_.customTagParsers||[],<span class="code-keyword">this</span>.options_.customTagMappers=<span class="code-keyword">this</span>.options_.customTagMappers||[],<span class="code-keyword">this</span>.options_.cacheEncryptionKeys=<span class="code-keyword">this</span>.options_.cacheEncryptionKeys||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.handlePartialData=<span class="code-keyword">this</span>.options_.handlePartialData||!<span class="code-number">1</span>,<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.blacklistDuration&amp;&amp;(<span class="code-keyword">this</span>.options_.blacklistDuration=<span class="code-number">300</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage){<span class="code-keyword">var</span> t=lr();t&amp;&amp;t.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=t.bandwidth,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-bandwidth-from-local-storage"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-bandwidth-from-local-storage"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class="code-keyword">this</span>.options_.throughput=t.throughput,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-throughput-from-local-storage"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-throughput-from-local-storage"</span>}))}<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=Ut.INITIAL_BANDWIDTH),<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist=<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class="code-keyword">this</span>.options_.bandwidth===Ut.INITIAL_BANDWIDTH,[<span class="code-string">"withCredentials"</span>,<span class="code-string">"useDevicePixelRatio"</span>,<span class="code-string">"limitRenditionByPlayerDimensions"</span>,<span class="code-string">"bandwidth"</span>,<span class="code-string">"smoothQualityChange"</span>,<span class="code-string">"customTagParsers"</span>,<span class="code-string">"customTagMappers"</span>,<span class="code-string">"handleManifestRedirects"</span>,<span class="code-string">"cacheEncryptionKeys"</span>,<span class="code-string">"handlePartialData"</span>,<span class="code-string">"playlistSelector"</span>,<span class="code-string">"initialPlaylistSelector"</span>,<span class="code-string">"experimentalBufferBasedABR"</span>,<span class="code-string">"liveRangeSafeTimeDelta"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])})),<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions=<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.useDevicePixelRatio=<span class="code-keyword">this</span>.options_.useDevicePixelRatio},i.src=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(e){<span class="code-keyword">this</span>.setOptions_(),<span class="code-keyword">this</span>.options_.src=hr(<span class="code-keyword">this</span>.source_.src),<span class="code-keyword">this</span>.options_.tech=<span class="code-keyword">this</span>.tech_,<span class="code-keyword">this</span>.options_.externVhs=nr,<span class="code-keyword">this</span>.options_.sourceType=oe(t),<span class="code-keyword">this</span>.options_.seekTo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.tech_.setCurrentTime(e)},<span class="code-keyword">this</span>.masterPlaylistController_=<span class="code-keyword">new</span> Yn(<span class="code-keyword">this</span>.options_);<span class="code-keyword">var</span> n=u.default.mergeOptions({<span class="code-attr">liveRangeSafeTimeDelta</span>:M},<span class="code-keyword">this</span>.options_,{<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.seekable()},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.media()},<span class="code-attr">masterPlaylistController</span>:<span class="code-keyword">this</span>.masterPlaylistController_});<span class="code-keyword">this</span>.playbackWatcher_=<span class="code-keyword">new</span> Jn(n),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=u.default.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> t||t.code?<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;(t={<span class="code-attr">message</span>:t,<span class="code-attr">code</span>:<span class="code-number">3</span>}):t.code=<span class="code-number">3</span>,e.error(t)}));<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.options_.experimentalBufferBasedABR?nr.movingAverageBandwidthSelector(<span class="code-number">.55</span>):nr.STANDARD_PLAYLIST_SELECTOR;<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=<span class="code-keyword">this</span>.selectPlaylist?<span class="code-keyword">this</span>.selectPlaylist.bind(<span class="code-keyword">this</span>):r.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.masterPlaylistController_.selectInitialPlaylist=nr.INITIAL_PLAYLIST_SELECTOR.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.playlists=<span class="code-keyword">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class="code-keyword">this</span>.mediaSource=<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource,<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>,{<span class="code-attr">selectPlaylist</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class="code-keyword">this</span>)}},<span class="code-attr">throughput</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class="code-number">1</span>}},<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>}}},<span class="code-attr">systemBandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-number">1</span>/(<span class="code-keyword">this</span>.bandwidth||<span class="code-number">1</span>);<span class="code-keyword">return</span> e=<span class="code-keyword">this</span>.throughput&gt;<span class="code-number">0</span>?<span class="code-number">1</span>/<span class="code-keyword">this</span>.throughput:<span class="code-number">0</span>,<span class="code-built_in">Math</span>.floor(<span class="code-number">1</span>/(t+e))},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{u.default.log.error(<span class="code-string">'The "systemBandwidth" property is read-only'</span>)}}}),<span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.bandwidth=<span class="code-keyword">this</span>.options_.bandwidth),<span class="code-keyword">this</span>.options_.throughput&amp;&amp;(<span class="code-keyword">this</span>.throughput=<span class="code-keyword">this</span>.options_.throughput),<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>.stats,{<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.bandwidth||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequests</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequests_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsAborted</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsAborted_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsTimedout</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsTimedout_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsErrored</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsErrored_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaTransferDuration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaTransferDuration_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaBytesTransferred</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaBytesTransferred_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaSecondsLoaded</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaSecondsLoaded_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">buffered</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> W(i.tech_.buffered())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTime</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentTime()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentSource</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentSource_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTech</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.name_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">duration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.duration()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">master</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.playlists.master},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">playerDimensions</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentDimensions()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">seekable</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> W(i.tech_.seekable())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">timestamp</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Date</span>.now()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">videoPlaybackQuality</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.getVideoPlaybackQuality()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>}}),<span class="code-keyword">this</span>.tech_.one(<span class="code-string">"canplay"</span>,<span class="code-keyword">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class="code-keyword">this</span>.masterPlaylistController_)),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"bandwidthupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.options_.useBandwidthFromLocalStorage&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!o.default.localStorage)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=lr();t=t?u.default.mergeOptions(t,e):e;<span class="code-keyword">try</span>{o.default.localStorage.setItem(rr,<span class="code-built_in">JSON</span>.stringify(t))}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span>!<span class="code-number">1</span>}}({<span class="code-attr">bandwidth</span>:i.bandwidth,<span class="code-attr">throughput</span>:<span class="code-built_in">Math</span>.round(i.throughput)})})),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t;t=(e=i).playlists,e.representations=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t&amp;&amp;t.master&amp;&amp;t.master.playlists?t.master.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Y(e)})).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">new</span> Kn(e,t,t.id)})):[]}})),<span class="code-keyword">this</span>.masterPlaylistController_.sourceUpdater_.on(<span class="code-string">"createdsourcebuffers"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.setupEme_()})),<span class="code-keyword">this</span>.on(<span class="code-keyword">this</span>.masterPlaylistController_,<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"progress"</span>)})),<span class="code-keyword">this</span>.on(<span class="code-keyword">this</span>.masterPlaylistController_,<span class="code-string">"firstplay"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ignoreNextSeekingEvent_=!<span class="code-number">0</span>})),<span class="code-keyword">this</span>.setupQualityLevels_(),<span class="code-keyword">this</span>.tech_.el()&amp;&amp;(<span class="code-keyword">this</span>.mediaSourceUrl_=o.default.URL.createObjectURL(<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource),<span class="code-keyword">this</span>.tech_.src(<span class="code-keyword">this</span>.mediaSourceUrl_))}},i.setupEme_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=dr({<span class="code-attr">player</span>:<span class="code-keyword">this</span>.player_,<span class="code-attr">sourceKeySystems</span>:<span class="code-keyword">this</span>.source_.keySystems,<span class="code-attr">media</span>:<span class="code-keyword">this</span>.playlists.media(),<span class="code-attr">audioMedia</span>:t&amp;&amp;t.media()});<span class="code-number">11</span>!==u.default.browser.IE_VERSION&amp;&amp;i?(<span class="code-keyword">this</span>.logger_(<span class="code-string">"waiting for EME key session creation"</span>),ur({<span class="code-attr">player</span>:<span class="code-keyword">this</span>.player_,<span class="code-attr">sourceKeySystems</span>:<span class="code-keyword">this</span>.source_.keySystems,<span class="code-attr">audioMedia</span>:t&amp;&amp;t.media(),<span class="code-attr">mainPlaylists</span>:<span class="code-keyword">this</span>.playlists.master.playlists}).then((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"created EME key session"</span>),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.logger_(<span class="code-string">"error while creating EME key session"</span>,t),e.player_.error({<span class="code-attr">message</span>:<span class="code-string">"Failed to initialize media keys for EME"</span>,<span class="code-attr">code</span>:<span class="code-number">3</span>})}))):<span class="code-keyword">this</span>.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=u.default.players[<span class="code-keyword">this</span>.tech_.options_.playerId];t&amp;&amp;t.qualityLevels&amp;&amp;!<span class="code-keyword">this</span>.qualityLevels_&amp;&amp;(<span class="code-keyword">this</span>.qualityLevels_=t.qualityLevels(),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.addQualityLevel(e)})),ar(t,i.playlists)})),<span class="code-keyword">this</span>.playlists.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{ar(e.qualityLevels_,e.playlists)})))},t.version=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>{<span class="code-string">"@videojs/http-streaming"</span>:ir,<span class="code-string">"mux.js"</span>:<span class="code-string">"5.9.1"</span>,<span class="code-string">"mpd-parser"</span>:<span class="code-string">"0.15.2"</span>,<span class="code-string">"m3u8-parser"</span>:<span class="code-string">"4.5.2"</span>,<span class="code-string">"aes-decrypter"</span>:<span class="code-string">"3.1.2"</span>}},i.version=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.constructor.version()},i.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> Un.canChangeType()},i.play=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.play()},i.setCurrentTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.setCurrentTime(e)},i.duration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.duration()},i.seekable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.seekable()},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.playbackWatcher_&amp;&amp;<span class="code-keyword">this</span>.playbackWatcher_.dispose(),<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.dispose(),<span class="code-keyword">this</span>.qualityLevels_&amp;&amp;<span class="code-keyword">this</span>.qualityLevels_.dispose(),<span class="code-keyword">this</span>.player_&amp;&amp;(<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.vhs,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.dash,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.hls),<span class="code-keyword">this</span>.tech_&amp;&amp;<span class="code-keyword">this</span>.tech_.vhs&amp;&amp;<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.tech_.vhs,<span class="code-keyword">this</span>.tech_&amp;&amp;<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.tech_.hls,<span class="code-keyword">this</span>.mediaSourceUrl_&amp;&amp;o.default.URL.revokeObjectURL&amp;&amp;(o.default.URL.revokeObjectURL(<span class="code-keyword">this</span>.mediaSourceUrl_),<span class="code-keyword">this</span>.mediaSourceUrl_=<span class="code-literal">null</span>),e.prototype.dispose.call(<span class="code-keyword">this</span>)},i.convertToProgramTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.time,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-keyword">void</span> <span class="code-number">0</span>:i,r=e.callback;<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"getProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(!t||<span class="code-keyword">void</span> <span class="code-number">0</span>===n)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"getProgramTime: playlist and time must be provided"</span>});<span class="code-keyword">var</span> a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);<span class="code-keyword">var</span> a=t.segments[t.segments.length<span class="code-number">-1</span>];<span class="code-keyword">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e&gt;n){<span class="code-keyword">if</span>(e&gt;n+<span class="code-number">.25</span>*a.duration)<span class="code-keyword">return</span> <span class="code-literal">null</span>;i=a}<span class="code-keyword">return</span>{<span class="code-attr">segment</span>:i,<span class="code-attr">estimatedStart</span>:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,<span class="code-attr">type</span>:i.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>}}(n,t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"valid programTime was not found"</span>});<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===a.type)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"Accurate programTime could not be determined. Please seek to e.seekTime and try again"</span>,<span class="code-attr">seekTime</span>:a.estimatedStart});<span class="code-keyword">var</span> s={<span class="code-attr">mediaSeconds</span>:n},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t.dateTimeObject.getTime()+<span class="code-number">1e3</span>*n)}(n,a.segment);<span class="code-keyword">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class="code-literal">null</span>,s)}({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">time</span>:e,<span class="code-attr">callback</span>:t})},i.seekToProgramTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=!<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">2</span>),ge({<span class="code-attr">programTime</span>:e,<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">retryCount</span>:n,<span class="code-attr">pauseAfterSeek</span>:i,<span class="code-attr">seekTo</span>:<span class="code-keyword">this</span>.options_.seekTo,<span class="code-attr">tech</span>:<span class="code-keyword">this</span>.options_.tech,<span class="code-attr">callback</span>:t})},t}(u.default.getComponent(<span class="code-string">"Component"</span>)),fr={<span class="code-attr">name</span>:<span class="code-string">"videojs-http-streaming"</span>,<span class="code-attr">VERSION</span>:ir,<span class="code-attr">canHandleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=u.default.mergeOptions(u.default.options,t);<span class="code-keyword">return</span> fr.canPlayType(e.type,i)},<span class="code-attr">handleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={});<span class="code-keyword">var</span> n=u.default.mergeOptions(u.default.options,i);<span class="code-keyword">return</span> t.vhs=<span class="code-keyword">new</span> cr(e,t,n),u.default.hasOwnProperty(<span class="code-string">"hls"</span>)||<span class="code-built_in">Object</span>.defineProperty(t,<span class="code-string">"hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"player.tech().hls is deprecated. Use player.tech().vhs instead."</span>),t.vhs},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),t.vhs.xhr=ne(),t.vhs.src(e.src,e.type),t.vhs},<span class="code-attr">canPlayType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=u.default.mergeOptions(u.default.options,t).vhs.overrideNative,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?!u.default.browser.IS_ANY_SAFARI:i,r=oe(e);<span class="code-keyword">return</span>!r||nr.supportsTypeNatively(r)&amp;&amp;!n?<span class="code-string">""</span>:<span class="code-string">"maybe"</span>}};Vi(<span class="code-string">"avc1.4d400d,mp4a.40.2"</span>)&amp;&amp;u.default.getTech(<span class="code-string">"Html5"</span>).registerSourceHandler(fr,<span class="code-number">0</span>),u.default.VhsHandler=cr,<span class="code-built_in">Object</span>.defineProperty(u.default,<span class="code-string">"HlsHandler"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."</span>),cr},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),u.default.VhsSourceHandler=fr,<span class="code-built_in">Object</span>.defineProperty(u.default,<span class="code-string">"HlsSourceHandler"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."</span>),fr},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),u.default.Vhs=nr,<span class="code-built_in">Object</span>.defineProperty(u.default,<span class="code-string">"Hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> u.default.log.warn(<span class="code-string">"videojs.Hls is deprecated. Use videojs.Vhs instead."</span>),nr},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),u.default.use||(u.default.registerComponent(<span class="code-string">"Hls"</span>,nr),u.default.registerComponent(<span class="code-string">"Vhs"</span>,nr)),u.default.options.vhs=u.default.options.vhs||{},u.default.options.hls=u.default.options.hls||{},u.default.registerPlugin?u.default.registerPlugin(<span class="code-string">"reloadSourceOnError"</span>,tr):u.default.plugin(<span class="code-string">"reloadSourceOnError"</span>,tr),e.LOCAL_STORAGE_KEY=rr,e.Vhs=nr,e.VhsHandler=cr,e.VhsSourceHandler=fr,e.emeKeySystems=sr,e.expandDataUri=hr,e.getAllPsshKeySystemsOptions=or,e.setupEmeOptions=dr,e.simpleTypeFromSourceType=oe,e.waitForKeySessionCreation=ur,<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"__esModule"</span>,{<span class="code-attr">value</span>:!<span class="code-number">0</span>})}));
</code></td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p><span>Build: <!-- -->b5d1b223</span></p><p><span> <!-- -->2021<!-- --> UNPKG</span></p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="3czw03">.css-3czw03{color:#aaa;display:inline-block;margin-left:1rem;}.css-3czw03:hover{color:white;}</style><a href="https://github.com/mjackson/unpkg" class="css-3czw03"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(l,t,c){function k(){k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return k.apply(this,arguments)}function F(a,b){if(null==a)return{};var c={},e=Object.keys(a),f;for(f=0;f<e.length;f++){var h=e[f];0<=b.indexOf(h)||(c[h]=a[h])}return c}function G(a,b){b||(b=a.slice(0));a.raw=b;return a}function H(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function v(a,b){return b={exports:{}},a(b,b.exports),b.exports}function I(){}function J(){}function K(a){var b,d=a.children;a=a.css;return c.jsx("div",{css:k((b={border:"1px solid #dfe2e5",borderRadius:3},b["@media (max-width: 700px)"]={borderRightWidth:0,borderLeftWidth:0},b),a)},d)}function L(a){var b,d=a.children;a=a.css;return c.jsx("div",{css:k((b={padding:10,background:"#f6f8fa",color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,
margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},b["@media (max-width: 700px)"]={paddingRight:20,paddingLeft:20},b),a)},d)}function M(a){return a&&a.map(function(a,c){return l.createElement(a.tag,r({key:c},a.attr),M(a.child))})}function w(a){return function(b){return l.createElement(fa,r({attr:r({},a.attr)},b),M(a.child))}}function fa(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var d=b.className;a.className&&(d=(d?d+" ":
"")+a.className);var h=a.attr,p=a.title,u=ha(a,["attr","title"]);return l.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,u,{className:d,style:r({color:a.color||b.color},b.style,a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),p&&l.createElement("title",null,p),a.children)};return void 0!==N?l.createElement(N.Consumer,null,function(a){return b(a)}):b(O)}function x(a,b){var d=b.css;b=F(b,["css"]);return c.jsx(a,k({css:k({},d,{verticalAlign:"text-bottom"})},
b))}function ia(a){return x(P,a)}function ja(a){return x(Q,a)}function ka(a){return x(R,a)}function la(a){return x(S,a)}function ma(a){return x(T,a)}function na(a){var b=a.path,d=a.details,e=Object.keys(d).reduce(function(a,b){var c=a.subdirs,e=a.files;b=d[b];"directory"===b.type?c.push(b):"file"===b.type&&e.push(b);return a},{subdirs:[],files:[]});a=e.subdirs;e=e.files;a.sort(U("path"));e.sort(U("path"));var f=[];"/"!==b&&f.push(c.jsx("tr",{key:".."},c.jsx("td",{css:C}),c.jsx("td",{css:n},c.jsx("a",
{title:"Parent directory",href:"../",css:D},"..")),c.jsx("td",{css:n}),c.jsx("td",{css:E})));a.forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var d=a+"/";f.push(c.jsx("tr",{key:a},c.jsx("td",{css:C},c.jsx(ka,null)),c.jsx("td",{css:n},c.jsx("a",{title:a,href:d,css:D},a)),c.jsx("td",{css:n},"-"),c.jsx("td",{css:E},"-")))});e.forEach(function(a){var d=a.size,e=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);f.push(c.jsx("tr",{key:a},c.jsx("td",{css:C},"text/plain"===e||"text/markdown"===
e?c.jsx(ia,null):c.jsx(ja,null)),c.jsx("td",{css:n},c.jsx("a",{title:a,href:a,css:D},a)),c.jsx("td",{css:n},V(d)),c.jsx("td",{css:E},e)))});var h=[];0<e.length&&h.push(e.length+" file"+(1===e.length?"":"s"));0<a.length&&h.push(a.length+" folder"+(1===a.length?"":"s"));return c.jsx(K,null,c.jsx(L,null,c.jsx("span",null,h.join(", "))),c.jsx("table",{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}},
"& tr:first-of-type td":{borderTop:0}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(y,null,"Icon")),c.jsx("th",null,c.jsx(y,null,"Name")),c.jsx("th",null,c.jsx(y,null,"Size")),c.jsx("th",null,c.jsx(y,null,"Content Type")))),c.jsx("tbody",null,f)))}function oa(a){a=a.split("/");return a[a.length-1]}function pa(a){var b=a.uri;return c.jsx("div",{css:{padding:20,textAlign:"center"}},c.jsx("img",{alt:oa(a.path),src:b}))}function qa(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-
1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var d=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+d,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,d)),c.jsx("td",{id:"LC"+d,css:{paddingLeft:10,
paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},"No newline at end of file")))))}function ra(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},
"No preview available."))}function sa(a){var b=a.packageName,d=a.packageVersion,e=a.path;a=a.details;var f=a.highlights,h=a.uri,p=a.language;return c.jsx(K,null,c.jsx(L,null,c.jsx("span",null,V(a.size)),c.jsx("span",null,p),c.jsx("span",null,c.jsx("a",{href:"/"+b+"@"+d+e,css:{display:"inline-block",marginLeft:8,padding:"2px 8px",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,":hover":{backgroundColor:"#e6ebf1",
borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw"))),f?c.jsx(qa,{highlights:f}):h?c.jsx(pa,{path:e,uri:h}):c.jsx(ra,null))}function W(){var a=G(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
W=function(){return a};return a}function X(){var a=G(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    overflow-wrap: break-word;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
X=function(){return a};return a}function Y(a){var b=a.css;a=F(a,["css"]);return c.jsx("a",k({},a,{css:k({color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},b)}))}function ta(){return c.jsx("header",{css:{marginTop:"2rem"}},c.jsx("h1",{css:{textAlign:"center",fontSize:"3rem",letterSpacing:"0.05em"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},"UNPKG")))}function ua(a){var b=a.packageName,d=a.packageVersion,e=a.availableVersions;a=a.filename;var f=[];if("/"===
a)f.push(b);else{var h="/browse/"+b+"@"+d;f.push(c.jsx(Y,{href:h+"/"},b));b=a.replace(/^\/+/,"").replace(/\/+$/,"").split("/");a=b.pop();b.forEach(function(a){h+="/"+a;f.push(c.jsx(Y,{href:h+"/"},a))});f.push(a)}return c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1,wordBreak:"break-all"}},c.jsx("nav",null,f.map(function(a,
b,d){return c.jsx(l.Fragment,{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===d.length-1?c.jsx("strong",null,a):a)}))),c.jsx(va,{packageVersion:d,availableVersions:e,onChange:function(a){window.location.href=window.location.href.replace("@"+d,"@"+a)}}))}function va(a){var b=a.onChange;return c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:a.packageVersion,
onChange:function(a){b&&b(a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},a.availableVersions.map(function(a){return c.jsx("option",{key:a,value:a},a)}))))}function wa(a){var b=a.packageName,d=a.packageVersion;a=a.target;return"directory"===a.type?c.jsx(na,{path:a.path,details:a.details}):
"file"===a.type?c.jsx(sa,{packageName:b,packageVersion:d,path:a.path,details:a.details}):null}var Z="default"in l?l["default"]:l;t=t&&t.hasOwnProperty("default")?t["default"]:t;var xa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},aa=v(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case f:switch(a=a.type,a){case q:case g:case p:case l:case u:case z:return a;
default:switch(a=a&&a.$$typeof,a){case m:case A:case k:return a;default:return b}}case n:case B:case h:return b}}}function e(a){return c(a)===g}Object.defineProperty(b,"__esModule",{value:!0});var f=(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,p=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,k=a?Symbol.for("react.provider"):60109,m=a?Symbol.for("react.context"):
60110,q=a?Symbol.for("react.async_mode"):60111,g=a?Symbol.for("react.concurrent_mode"):60111,A=a?Symbol.for("react.forward_ref"):60112,z=a?Symbol.for("react.suspense"):60113,B=a?Symbol.for("react.memo"):60115,n=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=q;b.ConcurrentMode=g;b.ContextConsumer=m;b.ContextProvider=k;b.Element=f;b.ForwardRef=A;b.Fragment=p;b.Lazy=n;b.Memo=B;b.Portal=h;b.Profiler=l;b.StrictMode=u;b.Suspense=z;b.isValidElementType=function(a){return"string"===typeof a||"function"===
typeof a||a===p||a===g||a===l||a===u||a===z||"object"===typeof a&&null!==a&&(a.$$typeof===n||a.$$typeof===B||a.$$typeof===k||a.$$typeof===m||a.$$typeof===A)};b.isAsyncMode=function(a){return e(a)||c(a)===q};b.isConcurrentMode=e;b.isContextConsumer=function(a){return c(a)===m};b.isContextProvider=function(a){return c(a)===k};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===f};b.isForwardRef=function(a){return c(a)===A};b.isFragment=function(a){return c(a)===p};b.isLazy=function(a){return c(a)===
n};b.isMemo=function(a){return c(a)===B};b.isPortal=function(a){return c(a)===h};b.isProfiler=function(a){return c(a)===l};b.isStrictMode=function(a){return c(a)===u};b.isSuspense=function(a){return c(a)===z}});H(aa);var ya=v(function(a,b){});H(ya);v(function(a){a.exports=aa});(function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;
var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(e){return!1}})();Function.call.bind(Object.prototype.hasOwnProperty);J.resetWarningCache=I;var za=function(){function a(a,b,c,d,l,k){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==k)throw a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),
a.name="Invariant Violation",a;}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:J,resetWarningCache:I};return c.PropTypes=c};v(function(a){a.exports=za()});var Aa=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},Ba=
{border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",padding:0,overflow:"hidden",position:"absolute"},y=function(a){return Z.createElement("div",Aa({style:Ba},a))},ba=v(function(a){(function(b,c){a.exports=c()})(xa,function(){function a(a){if(!a)return!0;if(!f(a)||0!==a.length)for(var b in a)if(n.call(a,b))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===k.call(a)}function e(a){return"string"===typeof a||"[object String]"===k.call(a)}function f(a){return"object"===
typeof a&&"number"===typeof a.length&&"[object Array]"===k.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function p(b,g,d,f){c(g)&&(g=[g]);if(a(g))return b;if(e(g))return p(b,g.split("."),d,f);var q=h(g[0]);if(1===g.length)return g=b[q],void 0!==g&&f||(b[q]=d),g;void 0===b[q]&&(c(q)?b[q]=[]:b[q]={});return p(b[q],g.slice(1),d,f)}function l(b,d){c(d)&&(d=[d]);if(!a(b)){if(a(d))return b;if(e(d))return l(b,d.split("."));var g=h(d[0]),q=b[g];if(1===d.length)void 0!==q&&(f(b)?b.splice(g,
1):delete b[g]);else if(void 0!==b[g])return l(b[g],d.slice(1));return b}}var k=Object.prototype.toString,n=Object.prototype.hasOwnProperty,m={ensureExists:function(a,b,c){return p(a,b,c,!0)},set:function(a,b,c,d){return p(a,b,c,d)},insert:function(a,b,c,d){var e=m.get(a,b);d=~~d;f(e)||(e=[],m.set(a,b,e));e.splice(d,0,c)},empty:function(b,d){if(a(d))return b;if(!a(b)){var g,h;if(!(g=m.get(b,d)))return b;if(e(g))return m.set(b,d,"");if("boolean"===typeof g||"[object Boolean]"===k.call(g))return m.set(b,
d,!1);if(c(g))return m.set(b,d,0);if(f(g))g.length=0;else if("object"===typeof g&&"[object Object]"===k.call(g))for(h in g)n.call(g,h)&&delete g[h];else return m.set(b,d,null)}},push:function(a,b){var c=m.get(a,b);f(c)||(c=[],m.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=m.get(a,b[e])))return d;return c},get:function(b,d,f){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return f;if(e(d))return m.get(b,d.split("."),
f);var g=h(d[0]);return 1===d.length?void 0===b[g]?f:b[g]:m.get(b[g],d.slice(1),f)},del:function(a,b){return l(a,b)}};return m})});var ca=function(a){return function(b){return typeof b===a}};var Ca=function(a,b){var c=1,e=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,d){var f;b=e(a,ba.get(b,a));d=e(a,ba.get(d,a));b<d&&(f=-1);b>d&&(f=1);b===d&&(f=0);return f*c}};var U=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ca("string")),c=a.filter(ca("function"))[0];
return function(a,d){for(var e=b.length,f=0,k=0;0===f&&k<e;)f=Ca(b[k],c)(a,d),k++;return f}};let da="B kB MB GB TB PB EB ZB YB".split(" "),ea=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var V=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let e=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=ea(a,b.locale),e+a+" B";c=Math.min(Math.floor(Math.log10(a)/
3),da.length-1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=ea(a,b.locale);return e+a+" "+da[c]},O={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N=l.createContext&&l.createContext(O),r=window&&window.__assign||function(){r=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])}return a};return r.apply(this,arguments)},ha=window&&window.__rest||function(a,b){var c={},e;for(e in a)Object.prototype.hasOwnProperty.call(a,
e)&&0>b.indexOf(e)&&(c[e]=a[e]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var f=0;for(e=Object.getOwnPropertySymbols(a);f<e.length;f++)0>b.indexOf(e[f])&&(c[e[f]]=a[e[f]])}return c},Q=function(a){return w({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z"}}]})(a)};
Q.displayName="GoFileCode";var R=function(a){return w({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};R.displayName="GoFileDirectory";var P=function(a){return w({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};
P.displayName="GoFile";var T=function(a){return w({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
T.displayName="FaGithub";var S=function(a){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
S.displayName="FaTwitter";var D={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},n={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},C=k({},n,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),E=k({},n,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}}),Da=c.css(X(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),Ea=c.css(W());t.hydrate(Z.createElement(function(a){var b=a.packageName,d=a.packageVersion,e=a.availableVersions;e=void 0===e?[]:e;var f=a.filename;a=a.target;return c.jsx(l.Fragment,null,c.jsx(c.Global,{styles:Da}),c.jsx(c.Global,{styles:Ea}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},
c.jsx(ta,null)),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(ua,{packageName:b,packageVersion:d,availableVersions:e,filename:f})),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},c.jsx(wa,{packageName:b,packageVersion:d,target:a}))),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",
justifyContent:"space-between"}},c.jsx("p",null,c.jsx("span",null,"Build: ","b5d1b223")),c.jsx("p",null,c.jsx("span",null,"\u00a9 ",(new Date).getFullYear()," UNPKG")),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"}}},c.jsx(la,null)),c.jsx("a",{href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"},marginLeft:"1rem"}},c.jsx(ma,null))))))},window.__DATA__||
{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>